//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package docutil ;import (_b "errors";_f "fmt";_ac "github.com/unidoc/unipdf/v3/common";_e "github.com/unidoc/unipdf/v3/core";);func (_be *OutputIntents )Add (oi _e .PdfObject )error {_ef ,_eb :=oi .(*_e .PdfObjectDictionary );if !_eb {return _b .New ("\u0069\u006e\u0070\u0075\u0074\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020\u0069\u006e\u0074\u0065\u006et\u0020\u0073\u0068\u006f\u0075\u006c\u0064 \u0062\u0065\u0020\u0061\u006e\u0020\u006f\u0062\u006a\u0065\u0063t\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};if _da ,_df :=_e .GetStream (_ef .Get ("\u0044\u0065\u0073\u0074\u004f\u0075\u0074\u0070\u0075\u0074\u0050\u0072o\u0066\u0069\u006c\u0065"));_df {_be ._gd .Objects =append (_be ._gd .Objects ,_da );};_gfb ,_cff :=oi .(*_e .PdfIndirectObject );if !_cff {_gfb =_e .MakeIndirectObject (oi );
};if _be ._gagf ==nil {_be ._gagf =_e .MakeArray (_gfb );}else {_be ._gagf .Append (_gfb );};_be ._gd .Objects =append (_be ._gd .Objects ,_gfb );return nil ;};func (_aeb Page )GetContents ()([]Content ,bool ){_caf ,_ebd :=_e .GetArray (_aeb .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));
if !_ebd {_fbg ,_ecf :=_e .GetStream (_aeb .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_ecf {return nil ,false ;};return []Content {{Stream :_fbg ,_bcb :_aeb ,_debf :0}},true ;};_aae :=make ([]Content ,_caf .Len ());for _dae ,_ecfd :=range _caf .Elements (){_gfd ,_bcf :=_e .GetStream (_ecfd );
if !_bcf {continue ;};_aae [_dae ]=Content {Stream :_gfd ,_bcb :_aeb ,_debf :_dae };};return _aae ,true ;};func (_cd *Page )Number ()int {return _cd ._abb };func (_af *Catalog )GetMarkInfo ()(*_e .PdfObjectDictionary ,bool ){_aff ,_ea :=_e .GetDict (_af .Object .Get ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f"));
return _aff ,_ea ;};type Page struct{_abb int ;Object *_e .PdfObjectDictionary ;_deg *Document ;};type OutputIntent struct{Object *_e .PdfObjectDictionary ;};func (_db *Catalog )SetMarkInfo (mi _e .PdfObject ){_bc :=_e .MakeIndirectObject (mi );_db .Object .Set ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f",_bc );
_db ._ag .Objects =append (_db ._ag .Objects ,_bc );};type Document struct{ID [2]string ;Version _e .Version ;Objects []_e .PdfObject ;Info _e .PdfObject ;Crypt *_e .PdfCrypt ;UseHashBasedID bool ;};func (_bgf Page )FindXObjectImages ()([]*Image ,error ){_fac ,_cbc :=_bgf .GetResourcesXObject ();
if !_cbc {return nil ,nil ;};var _fab []*Image ;var _fg error ;_ded :=map[*_e .PdfObjectStream ]int {};_cee :=map[*_e .PdfObjectStream ]struct{}{};var _gadg int ;for _ ,_cac :=range _fac .Keys (){_bd ,_dbe :=_e .GetStream (_fac .Get (_cac ));if !_dbe {continue ;
};if _ ,_bbac :=_ded [_bd ];_bbac {continue ;};_deb ,_ccb :=_e .GetName (_bd .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));if !_ccb ||_deb .String ()!="\u0049\u006d\u0061g\u0065"{continue ;};_gebf :=Image {BitsPerComponent :8,Stream :_bd ,Name :string (_cac )};
if _gebf .Colorspace ,_fg =_gea (_bd .PdfObjectDictionary .Get ("\u0043\u006f\u006c\u006f\u0072\u0053\u0070\u0061\u0063\u0065"));_fg !=nil {_ac .Log .Error ("\u0045\u0072\u0072\u006f\u0072\u0020\u0064\u0065\u0074\u0065r\u006d\u0069\u006e\u0065\u0020\u0063\u006fl\u006f\u0072\u0020\u0073\u0070\u0061\u0063\u0065\u0020\u0025\u0073",_fg );
continue ;};if _bbab ,_eca :=_e .GetIntVal (_bd .PdfObjectDictionary .Get ("\u0042\u0069t\u0073\u0050\u0065r\u0043\u006f\u006d\u0070\u006f\u006e\u0065\u006e\u0074"));_eca {_gebf .BitsPerComponent =_bbab ;};if _age ,_bf :=_e .GetIntVal (_bd .PdfObjectDictionary .Get ("\u0057\u0069\u0064t\u0068"));
_bf {_gebf .Width =_age ;};if _eg ,_bde :=_e .GetIntVal (_bd .PdfObjectDictionary .Get ("\u0048\u0065\u0069\u0067\u0068\u0074"));_bde {_gebf .Height =_eg ;};if _aeg ,_eac :=_e .GetStream (_bd .Get ("\u0053\u004d\u0061s\u006b"));_eac {_gebf .SMask =&ImageSMask {Image :&_gebf ,Stream :_aeg };
_cee [_aeg ]=struct{}{};};switch _gebf .Colorspace {case "\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B":_gebf .ColorComponents =3;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079":_gebf .ColorComponents =1;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":_gebf .ColorComponents =4;
default:_gebf .ColorComponents =-1;};_ded [_bd ]=_gadg ;_fab =append (_fab ,&_gebf );_gadg ++;};var _fdae []int ;for _ ,_cge :=range _fab {if _cge .SMask !=nil {_fcb ,_bgcb :=_ded [_cge .SMask .Stream ];if _bgcb {_fdae =append (_fdae ,_fcb );};};};_eaa :=make ([]*Image ,len (_fab )-len (_fdae ));
_gadg =0;_fdad :for _gbc ,_gfa :=range _fab {for _ ,_cbb :=range _fdae {if _gbc ==_cbb {continue _fdad ;};};_eaa [_gadg ]=_gfa ;_gadg ++;};return _fab ,nil ;};type Image struct{Name string ;Width int ;Height int ;Colorspace _e .PdfObjectName ;ColorComponents int ;
BitsPerComponent int ;SMask *ImageSMask ;Stream *_e .PdfObjectStream ;};func (_dbc *Catalog )SetOutputIntents (outputIntents *OutputIntents ){if _ead :=_dbc .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");
_ead !=nil {for _dbce ,_ed :=range _dbc ._ag .Objects {if _ed ==_ead {if outputIntents ._bg ==_ead {return ;};_dbc ._ag .Objects =append (_dbc ._ag .Objects [:_dbce ],_dbc ._ag .Objects [_dbce +1:]...);break ;};};};_dg :=outputIntents ._bg ;if _dg ==nil {_dg =_e .MakeIndirectObject (outputIntents ._gagf );
};_dbc .Object .Set ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073",_dg );_dbc ._ag .Objects =append (_dbc ._ag .Objects ,_dg );};func (_abbe Page )FindXObjectForms ()[]*_e .PdfObjectStream {_gbfd ,_dfa :=_abbe .GetResourcesXObject ();
if !_dfa {return nil ;};_ged :=map[*_e .PdfObjectStream ]struct{}{};var _aaee func (_ee *_e .PdfObjectDictionary ,_fe map[*_e .PdfObjectStream ]struct{});_aaee =func (_ebe *_e .PdfObjectDictionary ,_gga map[*_e .PdfObjectStream ]struct{}){for _ ,_bcg :=range _ebe .Keys (){_ggg ,_agc :=_e .GetStream (_ebe .Get (_bcg ));
if !_agc {continue ;};if _ ,_affg :=_gga [_ggg ];_affg {continue ;};_ggc ,_afc :=_e .GetName (_ggg .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));if !_afc ||_ggc .String ()!="\u0046\u006f\u0072\u006d"{continue ;};_gga [_ggg ]=struct{}{};_ecfa ,_afc :=_e .GetDict (_ggg .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));
if !_afc {continue ;};_bbe ,_aag :=_e .GetDict (_ecfa .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));if _aag {_aaee (_bbe ,_gga );};};};_aaee (_gbfd ,_ged );var _bcfe []*_e .PdfObjectStream ;for _bbb :=range _ged {_bcfe =append (_bcfe ,_bbb );};return _bcfe ;
};func (_dbca *OutputIntents )Get (i int )(OutputIntent ,bool ){if _dbca ._gagf ==nil {return OutputIntent {},false ;};if i >=_dbca ._gagf .Len (){return OutputIntent {},false ;};_cfa :=_dbca ._gagf .Get (i );_cga ,_bef :=_e .GetIndirect (_cfa );if !_bef {_dgd ,_ge :=_e .GetDict (_cfa );
return OutputIntent {Object :_dgd },_ge ;};_gec ,_agg :=_e .GetDict (_cga .PdfObject );return OutputIntent {Object :_gec },_agg ;};type Content struct{Stream *_e .PdfObjectStream ;_debf int ;_bcb Page ;};func (_ae *Document )FindCatalog ()(*Catalog ,bool ){var _ebc *_e .PdfObjectDictionary ;
for _ ,_gb :=range _ae .Objects {_edg ,_de :=_e .GetDict (_gb );if !_de {continue ;};if _edc ,_bgcd :=_e .GetName (_edg .Get ("\u0054\u0079\u0070\u0065"));_bgcd &&*_edc =="\u0043a\u0074\u0061\u006c\u006f\u0067"{_ebc =_edg ;break ;};};if _ebc ==nil {return nil ,false ;
};return &Catalog {Object :_ebc ,_ag :_ae },true ;};func (_gee Page )GetResources ()(*_e .PdfObjectDictionary ,bool ){return _e .GetDict (_gee .Object .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));};func (_aad *Catalog )GetMetadata ()(*_e .PdfObjectStream ,bool ){_dd ,_dc :=_e .GetStream (_aad .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));
return _dd ,_dc ;};func (_eed Content )GetData ()([]byte ,error ){_dee ,_bab :=_e .NewEncoderFromStream (_eed .Stream );if _bab !=nil {return nil ,_bab ;};_cbbd ,_bab :=_dee .DecodeStream (_eed .Stream );if _bab !=nil {return nil ,_bab ;};return _cbbd ,nil ;
};type Catalog struct{Object *_e .PdfObjectDictionary ;_ag *Document ;};func (_ca *Catalog )NewOutputIntents ()*OutputIntents {return &OutputIntents {_gd :_ca ._ag }};type ImageSMask struct{Image *Image ;Stream *_e .PdfObjectStream ;};func (_c *Catalog )SetVersion (){_c .Object .Set ("\u0056e\u0072\u0073\u0069\u006f\u006e",_e .MakeName (_f .Sprintf ("\u0025\u0064\u002e%\u0064",_c ._ag .Version .Major ,_c ._ag .Version .Minor )));
};func _gea (_ddc _e .PdfObject )(_e .PdfObjectName ,error ){var _gbe *_e .PdfObjectName ;var _ec *_e .PdfObjectArray ;if _aggc ,_gdg :=_ddc .(*_e .PdfIndirectObject );_gdg {if _daa ,_gbd :=_aggc .PdfObject .(*_e .PdfObjectArray );_gbd {_ec =_daa ;}else if _acf ,_gfe :=_aggc .PdfObject .(*_e .PdfObjectName );
_gfe {_gbe =_acf ;};}else if _fbf ,_geb :=_ddc .(*_e .PdfObjectArray );_geb {_ec =_fbf ;}else if _fa ,_fda :=_ddc .(*_e .PdfObjectName );_fda {_gbe =_fa ;};if _gbe !=nil {switch *_gbe {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":return *_gbe ,nil ;
case "\u0050a\u0074\u0074\u0065\u0072\u006e":return *_gbe ,nil ;};};if _ec !=nil &&_ec .Len ()> 0{if _gdb ,_gef :=_ec .Get (0).(*_e .PdfObjectName );_gef {switch *_gdb {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":if _ec .Len ()==1{return *_gdb ,nil ;
};case "\u0043a\u006c\u0047\u0072\u0061\u0079","\u0043\u0061\u006c\u0052\u0047\u0042","\u004c\u0061\u0062":return *_gdb ,nil ;case "\u0049\u0043\u0043\u0042\u0061\u0073\u0065\u0064","\u0050a\u0074\u0074\u0065\u0072\u006e","\u0049n\u0064\u0065\u0078\u0065\u0064":return *_gdb ,nil ;
case "\u0053\u0065\u0070\u0061\u0072\u0061\u0074\u0069\u006f\u006e","\u0044e\u0076\u0069\u0063\u0065\u004e":return *_gdb ,nil ;};};};return "",nil ;};func (_dag *Document )AddStream (stream *_e .PdfObjectStream ){for _ ,_fc :=range _dag .Objects {if _fc ==stream {return ;
};};_dag .Objects =append (_dag .Objects ,stream );};func (_ce *Catalog )GetOutputIntents ()(*OutputIntents ,bool ){_ff :=_ce .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");if _ff ==nil {return nil ,false ;
};_ba ,_fd :=_e .GetIndirect (_ff );if !_fd {return nil ,false ;};_fb ,_gag :=_e .GetArray (_ba .PdfObject );if !_gag {return nil ,false ;};return &OutputIntents {_bg :_ba ,_gagf :_fb ,_gd :_ce ._ag },true ;};func (_cb *Catalog )GetPages ()([]Page ,bool ){_g ,_gf :=_e .GetDict (_cb .Object .Get ("\u0050\u0061\u0067e\u0073"));
if !_gf {return nil ,false ;};_bb ,_aa :=_e .GetArray (_g .Get ("\u004b\u0069\u0064\u0073"));if !_aa {return nil ,false ;};_cg :=make ([]Page ,_bb .Len ());for _cc ,_ga :=range _bb .Elements (){_gad ,_bba :=_e .GetDict (_ga );if !_bba {continue ;};_cg [_cc ]=Page {Object :_gad ,_abb :_cc +1,_deg :_cb ._ag };
};return _cg ,true ;};type OutputIntents struct{_gagf *_e .PdfObjectArray ;_gd *Document ;_bg *_e .PdfIndirectObject ;};func (_bgc *OutputIntents )Len ()int {return _bgc ._gagf .Len ()};func (_eae *Content )SetData (data []byte )error {_cdg ,_eeb :=_e .MakeStream (data ,_e .NewFlateEncoder ());
if _eeb !=nil {return _eeb ;};_bbg ,_eaac :=_e .GetArray (_eae ._bcb .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_eaac &&_eae ._debf ==0{_eae ._bcb .Object .Set ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073",_cdg );}else {if _eeb =_bbg .Set (_eae ._debf ,_cdg );
_eeb !=nil {return _eeb ;};};_eae ._bcb ._deg .Objects =append (_eae ._bcb ._deg .Objects ,_cdg );return nil ;};func (_cf *Catalog )SetMetadata (data []byte )error {_gac ,_gg :=_e .MakeStream (data ,nil );if _gg !=nil {return _gg ;};_gac .Set ("\u0054\u0079\u0070\u0065",_e .MakeName ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));
_gac .Set ("\u0053u\u0062\u0074\u0079\u0070\u0065",_e .MakeName ("\u0058\u004d\u004c"));_cf .Object .Set ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061",_gac );_cf ._ag .Objects =append (_cf ._ag .Objects ,_gac );return nil ;};func (_gbf *Document )AddIndirectObject (indirect *_e .PdfIndirectObject ){for _ ,_cbf :=range _gbf .Objects {if _cbf ==indirect {return ;
};};_gbf .Objects =append (_gbf .Objects ,indirect );};func (_d *Catalog )HasMetadata ()bool {_cba :=_d .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061");return _cba !=nil ;};func (_geaa Page )GetResourcesXObject ()(*_e .PdfObjectDictionary ,bool ){_efd ,_edgg :=_geaa .GetResources ();
if !_edgg {return nil ,false ;};return _e .GetDict (_efd .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));};func (_ab *Document )GetPages ()([]Page ,bool ){_daf ,_bad :=_ab .FindCatalog ();if !_bad {return nil ,false ;};return _daf .GetPages ();};
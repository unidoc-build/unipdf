//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package render ;import (_e "errors";_g "fmt";_dd "github.com/adrg/sysfont";_ca "github.com/unidoc/unipdf/v3/common";_agb "github.com/unidoc/unipdf/v3/contentstream";_c "github.com/unidoc/unipdf/v3/core";_gc "github.com/unidoc/unipdf/v3/internal/transform";_fcf "github.com/unidoc/unipdf/v3/model";_b "github.com/unidoc/unipdf/v3/render/internal/context";_eg "github.com/unidoc/unipdf/v3/render/internal/context/imagerender";_ee "image";_fc "image/draw";_fca "image/jpeg";_fd "image/png";_f "os";_ag "path/filepath";_d "strings";);var (_ga =_e .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");_ad =_e .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072"););

// Render converts the specified PDF page into an image and returns the result.
func (_egg *ImageDevice )Render (page *_fcf .PdfPage )(_ee .Image ,error ){_cg ,_ddf :=page .GetMediaBox ();if _ddf !=nil {return nil ,_ddf ;};_ae ,_eb :=_cg .Llx +_cg .Width (),_cg .Lly +_cg .Height ();_db :=_eg .NewContext (int (_ae ),int (_eb ));if _ebe :=_egg .renderPage (_db ,page );_ebe !=nil {return nil ,_ebe ;};_dc :=_db .Image ();if _df :=page .CropBox ;_df !=nil {_ec :=_ee .Rect (0,0,int (_df .Width ()),int (_df .Height ()));_bc :=_ee .Pt (int (_df .Llx ),int (_eb -_df .Ury ));_bf :=_ee .NewRGBA (_ec );_fc .Draw (_bf ,_ec ,_dc ,_bc ,_fc .Src );_dc =_bf ;};return _dc ,nil ;};type renderer struct{};func (_gad renderer )renderContentStream (_fg _b .Context ,_dab string ,_daf *_fcf .PdfPageResources )error {_ce ,_gag :=_agb .NewContentStreamParser (_dab ).Parse ();if _gag !=nil {return _gag ;};_egf :=_fg .TextState ();_aee :=map[string ]*_b .TextFont {};_ab :=_dd .NewFinder (&_dd .FinderOpts {Extensions :[]string {"\u002e\u0074\u0074\u0066","\u002e\u0074\u0074\u0063"}});_bcc :=_agb .NewContentStreamProcessor (*_ce );_bcc .AddHandler (_agb .HandlerConditionEnumAllOperands ,"",func (_gg *_agb .ContentStreamOperation ,_eed _agb .GraphicsState ,_abe *_fcf .PdfPageResources )error {_ca .Log .Debug ("\u0050\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0025\u0073",_gg .Operand );switch _gg .Operand {case "\u0071":_fg .Push ();case "\u0051":_fg .Pop ();case "\u0063\u006d":if len (_gg .Params )!=6{return _ad ;};_fdb ,_cb :=_c .GetNumbersAsFloat (_gg .Params );if _cb !=nil {return _cb ;};_ded :=_gc .NewMatrix (_fdb [0],_fdb [1],_fdb [2],_fdb [3],_fdb [4],_fdb [5]);_ca .Log .Debug ("\u0047\u0072\u0061\u0070\u0068\u0069\u0063\u0073\u0020\u0073\u0074a\u0074\u0065\u0020\u006d\u0061\u0074\u0072\u0069\u0078\u003a \u0025\u002b\u0076",_ded );_fg .SetMatrix (_fg .Matrix ().Mult (_ded ));_gaf :=(_eed .CTM .ScalingFactorX ()+_eed .CTM .ScalingFactorY ())/2.0;_fg .SetLineWidth (_gaf *_fg .LineWidth ());case "\u0077":if len (_gg .Params )!=1{return _ad ;};_age ,_cgg :=_c .GetNumbersAsFloat (_gg .Params );if _cgg !=nil {return _cgg ;};_daa :=(_eed .CTM .ScalingFactorX ()+_eed .CTM .ScalingFactorY ())/2.0;_fg .SetLineWidth (_daa *_age [0]);case "\u004a":if len (_gg .Params )!=1{return _ad ;};_gge ,_ff :=_c .GetIntVal (_gg .Params [0]);if !_ff {return _ga ;};switch _gge {case 0:_fg .SetLineCap (_b .LineCapButt );case 1:_fg .SetLineCap (_b .LineCapRound );case 2:_fg .SetLineCap (_b .LineCapSquare );default:_ca .Log .Debug ("\u0049\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u006c\u0069\u006ee\u0020\u0063\u0061\u0070\u0020\u0073\u0074\u0079\u006c\u0065:\u0020\u0025\u0064",_gge );return _ad ;};case "\u006a":if len (_gg .Params )!=1{return _ad ;};_abd ,_deb :=_c .GetIntVal (_gg .Params [0]);if !_deb {return _ga ;};switch _abd {case 0:_fg .SetLineJoin (_b .LineJoinBevel );case 1:_fg .SetLineJoin (_b .LineJoinRound );case 2:_fg .SetLineJoin (_b .LineJoinBevel );default:_ca .Log .Debug ("I\u006e\u0076\u0061\u006c\u0069\u0064 \u006c\u0069\u006e\u0065\u0020\u006a\u006f\u0069\u006e \u0073\u0074\u0079l\u0065:\u0020\u0025\u0064",_abd );return _ad ;};case "\u004d":if len (_gg .Params )!=1{return _ad ;};_feb ,_bg :=_c .GetNumbersAsFloat (_gg .Params );if _bg !=nil {return _bg ;};_ =_feb ;_ca .Log .Debug ("\u004di\u0074\u0065\u0072\u0020l\u0069\u006d\u0069\u0074\u0020n\u006ft\u0020s\u0075\u0070\u0070\u006f\u0072\u0074\u0065d");case "\u0064":if len (_gg .Params )!=2{return _ad ;};_fa ,_bec :=_c .GetArray (_gg .Params [0]);if !_bec {return _ga ;};_bcf ,_bec :=_c .GetIntVal (_gg .Params [1]);if !_bec {return _ga ;};_bfa ,_gcf :=_c .GetNumbersAsFloat (_fa .Elements ());if _gcf !=nil {return _gcf ;};_fg .SetDash (_bfa ...);_ =_bcf ;_ca .Log .Debug ("\u004c\u0069n\u0065\u0020\u0064\u0061\u0073\u0068\u0020\u0070\u0068\u0061\u0073\u0065\u0020\u006e\u006f\u0074\u0020\u0073\u0075\u0070\u0070\u006frt\u0065\u0064");case "\u0072\u0069":_ca .Log .Debug ("\u0052\u0065\u006e\u0064\u0065\u0072\u0069\u006e\u0067\u0020i\u006e\u0074\u0065\u006e\u0074\u0020\u006eo\u0074\u0020\u0073\u0075\u0070\u0070\u006f\u0072\u0074\u0065\u0064");case "\u0069":_ca .Log .Debug ("\u0046\u006c\u0061\u0074\u006e\u0065\u0073\u0073\u0020\u0074\u006f\u006c\u0065\u0072\u0061n\u0063e\u0020\u006e\u006f\u0074\u0020\u0073\u0075\u0070\u0070\u006f\u0072\u0074\u0065\u0064");case "\u0067\u0073":if len (_gg .Params )!=1{return _ad ;};_ggg ,_ffe :=_c .GetName (_gg .Params [0]);if !_ffe {return _ga ;};if _ggg ==nil {return _ad ;};_aea ,_ffe :=_abe .GetExtGState (*_ggg );if !_ffe {_ca .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006eo\u0074 \u0066i\u006ed\u0020\u0072\u0065\u0073\u006f\u0075\u0072\u0063\u0065\u003a\u0020\u0025\u0073",*_ggg );return _e .New ("\u0072e\u0073o\u0075\u0072\u0063\u0065\u0020n\u006f\u0074 \u0066\u006f\u0075\u006e\u0064");};_dbg ,_ffe :=_c .GetDict (_aea );if !_ffe {_ca .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020c\u006f\u0075\u006c\u0064 ge\u0074 g\u0072\u0061\u0070\u0068\u0069\u0063\u0073 s\u0074\u0061\u0074\u0065\u0020\u0064\u0069c\u0074");return _ga ;};_ca .Log .Debug ("G\u0053\u0020\u0064\u0069\u0063\u0074\u003a\u0020\u0025\u0073",_dbg .String ());case "\u006d":if len (_gg .Params )!=2{_ca .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0073\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_ad );return nil ;};_ea ,_ge :=_c .GetNumbersAsFloat (_gg .Params );if _ge !=nil {return _ge ;};_ca .Log .Debug ("M\u006f\u0076\u0065\u0020\u0074\u006f\u003a\u0020\u0025\u0076",_ea );_fg .NewSubPath ();_fg .MoveTo (_ea [0],_ea [1]);case "\u006c":if len (_gg .Params )!=2{_ca .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0073\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_ad );return nil ;};_dgc ,_bga :=_c .GetNumbersAsFloat (_gg .Params );if _bga !=nil {return _bga ;};_fg .LineTo (_dgc [0],_dgc [1]);case "\u0063":if len (_gg .Params )!=6{return _ad ;};_cga ,_dedc :=_c .GetNumbersAsFloat (_gg .Params );if _dedc !=nil {return _dedc ;};_ca .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020\u0062\u0065\u007a\u0069\u0065\u0072\u0020p\u0061\u0072\u0061\u006d\u0073\u003a\u0020\u0025\u002b\u0076",_cga );_fg .CubicTo (_cga [0],_cga [1],_cga [2],_cga [3],_cga [4],_cga [5]);case "\u0076","\u0079":if len (_gg .Params )!=4{return _ad ;};_dca ,_ed :=_c .GetNumbersAsFloat (_gg .Params );if _ed !=nil {return _ed ;};_ca .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020\u0062\u0065\u007a\u0069\u0065\u0072\u0020p\u0061\u0072\u0061\u006d\u0073\u003a\u0020\u0025\u002b\u0076",_dca );_fg .QuadraticTo (_dca [0],_dca [1],_dca [2],_dca [3]);case "\u0068":_fg .ClosePath ();_fg .NewSubPath ();case "\u0072\u0065":if len (_gg .Params )!=4{return _ad ;};_dddg ,_fbd :=_c .GetNumbersAsFloat (_gg .Params );if _fbd !=nil {return _fbd ;};_fg .DrawRectangle (_dddg [0],_dddg [1],_dddg [2],_dddg [3]);_fg .NewSubPath ();case "\u0053":_bgf ,_fed :=_eed .ColorspaceStroking .ColorToRGB (_eed .ColorStroking );if _fed !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fed );return _fed ;};_cdc ,_ebee :=_bgf .(*_fcf .PdfColorDeviceRGB );if !_ebee {_ca .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _fed ;};_fg .SetRGBA (_cdc .R (),_cdc .G (),_cdc .B (),1);_fg .Stroke ();case "\u0073":_bgac ,_daaf :=_eed .ColorspaceStroking .ColorToRGB (_eed .ColorStroking );if _daaf !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_daaf );return _daaf ;};_ced ,_ccd :=_bgac .(*_fcf .PdfColorDeviceRGB );if !_ccd {_ca .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _daaf ;};_fg .ClosePath ();_fg .NewSubPath ();_fg .SetRGBA (_ced .R (),_ced .G (),_ced .B (),1);_fg .Stroke ();case "\u0066","\u0046":_cf ,_gab :=_eed .ColorspaceNonStroking .ColorToRGB (_eed .ColorNonStroking );if _gab !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gab );return _gab ;};_eggc ,_gea :=_cf .(*_fcf .PdfColorDeviceRGB );if !_gea {_ca .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _gab ;};_fg .SetRGBA (_eggc .R (),_eggc .G (),_eggc .B (),1);_fg .SetFillRule (_b .FillRuleWinding );_fg .Fill ();case "\u0066\u002a":_egc ,_aec :=_eed .ColorspaceNonStroking .ColorToRGB (_eed .ColorNonStroking );if _aec !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_aec );return _aec ;};_eeb ,_eba :=_egc .(*_fcf .PdfColorDeviceRGB );if !_eba {_ca .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _aec ;};_fg .SetRGBA (_eeb .R (),_eeb .G (),_eeb .B (),1);_fg .SetFillRule (_b .FillRuleEvenOdd );_fg .Fill ();case "\u0042":_gd ,_ede :=_eed .ColorspaceNonStroking .ColorToRGB (_eed .ColorNonStroking );if _ede !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ede );return _ede ;};_cbf :=_gd .(*_fcf .PdfColorDeviceRGB );_fg .SetRGBA (_cbf .R (),_cbf .G (),_cbf .B (),1);_fg .SetFillRule (_b .FillRuleWinding );_fg .FillPreserve ();_gd ,_ede =_eed .ColorspaceStroking .ColorToRGB (_eed .ColorStroking );if _ede !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ede );return _ede ;};_cbf =_gd .(*_fcf .PdfColorDeviceRGB );_fg .SetRGBA (_cbf .R (),_cbf .G (),_cbf .B (),1);_fg .Stroke ();case "\u0042\u002a":_fedb ,_cfg :=_eed .ColorspaceNonStroking .ColorToRGB (_eed .ColorNonStroking );if _cfg !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_cfg );return _cfg ;};_gbcd :=_fedb .(*_fcf .PdfColorDeviceRGB );_fg .SetRGBA (_gbcd .R (),_gbcd .G (),_gbcd .B (),1);_fg .SetFillRule (_b .FillRuleEvenOdd );_fg .FillPreserve ();_fedb ,_cfg =_eed .ColorspaceStroking .ColorToRGB (_eed .ColorStroking );if _cfg !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_cfg );return _cfg ;};_gbcd =_fedb .(*_fcf .PdfColorDeviceRGB );_fg .SetRGBA (_gbcd .R (),_gbcd .G (),_gbcd .B (),1);_fg .Stroke ();case "\u0062":_cfgc ,_bb :=_eed .ColorspaceNonStroking .ColorToRGB (_eed .ColorNonStroking );if _bb !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bb );return _bb ;};_cff :=_cfgc .(*_fcf .PdfColorDeviceRGB );_fg .SetRGBA (_cff .R (),_cff .G (),_cff .B (),1);_fg .ClosePath ();_fg .NewSubPath ();_fg .SetFillRule (_b .FillRuleWinding );_fg .FillPreserve ();_cfgc ,_bb =_eed .ColorspaceStroking .ColorToRGB (_eed .ColorStroking );if _bb !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bb );return _bb ;};_cff =_cfgc .(*_fcf .PdfColorDeviceRGB );_fg .SetRGBA (_cff .R (),_cff .G (),_cff .B (),1);_fg .Stroke ();case "\u0062\u002a":_fg .ClosePath ();_adf ,_fdg :=_eed .ColorspaceNonStroking .ColorToRGB (_eed .ColorNonStroking );if _fdg !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fdg );return _fdg ;};_gda :=_adf .(*_fcf .PdfColorDeviceRGB );_fg .SetRGBA (_gda .R (),_gda .G (),_gda .B (),1);_fg .NewSubPath ();_fg .SetFillRule (_b .FillRuleEvenOdd );_fg .FillPreserve ();_adf ,_fdg =_eed .ColorspaceStroking .ColorToRGB (_eed .ColorStroking );if _fdg !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fdg );return _fdg ;};_gda =_adf .(*_fcf .PdfColorDeviceRGB );_fg .SetRGBA (_gda .R (),_gda .G (),_gda .B (),1);_fg .Stroke ();case "\u006e":_fg .ClearPath ();case "\u0057":_fg .SetFillRule (_b .FillRuleWinding );_fg .ClipPreserve ();case "\u0057\u002a":_fg .SetFillRule (_b .FillRuleEvenOdd );_fg .ClipPreserve ();case "\u0072\u0067":_abdb ,_ebg :=_eed .ColorNonStroking .(*_fcf .PdfColorDeviceRGB );if !_ebg {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_eed .ColorNonStroking );return nil ;};_fg .SetFillRGBA (_abdb .R (),_abdb .G (),_abdb .B (),1);case "\u0052\u0047":_ffea ,_cgfg :=_eed .ColorStroking .(*_fcf .PdfColorDeviceRGB );if !_cgfg {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_eed .ColorStroking );return nil ;};_fg .SetStrokeRGBA (_ffea .R (),_ffea .G (),_ffea .B (),1);case "\u006b":_ef ,_egb :=_eed .ColorNonStroking .(*_fcf .PdfColorDeviceCMYK );if !_egb {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_eed .ColorNonStroking );return nil ;};_geaa ,_bad :=_eed .ColorspaceNonStroking .ColorToRGB (_ef );if _bad !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_eed .ColorNonStroking );return nil ;};_egcg ,_egb :=_geaa .(*_fcf .PdfColorDeviceRGB );if !_egb {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_geaa );return nil ;};_fg .SetFillRGBA (_egcg .R (),_egcg .G (),_egcg .B (),1);case "\u004b":_fff ,_gae :=_eed .ColorStroking .(*_fcf .PdfColorDeviceCMYK );if !_gae {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_eed .ColorStroking );return nil ;};_deg ,_bbc :=_eed .ColorspaceStroking .ColorToRGB (_fff );if _bbc !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_eed .ColorStroking );return nil ;};_dde ,_gae :=_deg .(*_fcf .PdfColorDeviceRGB );if !_gae {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_deg );return nil ;};_fg .SetStrokeRGBA (_dde .R (),_dde .G (),_dde .B (),1);case "\u0067":_gee ,_gec :=_eed .ColorNonStroking .(*_fcf .PdfColorDeviceGray );if !_gec {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_eed .ColorNonStroking );return nil ;};_bgae ,_ada :=_eed .ColorspaceNonStroking .ColorToRGB (_gee );if _ada !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_eed .ColorNonStroking );return nil ;};_bab ,_gec :=_bgae .(*_fcf .PdfColorDeviceRGB );if !_gec {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bgae );return nil ;};_fg .SetFillRGBA (_bab .R (),_bab .G (),_bab .B (),1);case "\u0047":_gf ,_abed :=_eed .ColorStroking .(*_fcf .PdfColorDeviceGray );if !_abed {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_eed .ColorStroking );return nil ;};_geg ,_gbf :=_eed .ColorspaceStroking .ColorToRGB (_gf );if _gbf !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_eed .ColorStroking );return nil ;};_eee ,_abed :=_geg .(*_fcf .PdfColorDeviceRGB );if !_abed {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_geg );return nil ;};_fg .SetStrokeRGBA (_eee .R (),_eee .G (),_eee .B (),1);case "\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_gaa ,_ddc :=_eed .ColorspaceNonStroking .ColorToRGB (_eed .ColorNonStroking );if _ddc !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_eed .ColorNonStroking );return nil ;};_gbcb ,_fef :=_gaa .(*_fcf .PdfColorDeviceRGB );if !_fef {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gaa );return nil ;};_fg .SetFillRGBA (_gbcb .R (),_gbcb .G (),_gbcb .B (),1);case "\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_ege ,_cdg :=_eed .ColorspaceStroking .ColorToRGB (_eed .ColorStroking );if _cdg !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_eed .ColorStroking );return nil ;};_fge ,_gbcg :=_ege .(*_fcf .PdfColorDeviceRGB );if !_gbcg {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ege );return nil ;};_fg .SetStrokeRGBA (_fge .R (),_fge .G (),_fge .B (),1);case "\u0044\u006f":if len (_gg .Params )!=1{return _ad ;};_gegb ,_cfa :=_c .GetName (_gg .Params [0]);if !_cfa {return _ga ;};_ ,_bfaa :=_abe .GetXObjectByName (*_gegb );switch _bfaa {case _fcf .XObjectTypeImage :_ca .Log .Debug ("\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u0069\u006d\u0061\u0067e\u003a\u0020\u0025\u0073",_gegb .String ());_afd ,_ddfe :=_abe .GetXObjectImageByName (*_gegb );if _ddfe !=nil {return _ddfe ;};_debe ,_ddfe :=_afd .ToImage ();if _ddfe !=nil {return _ddfe ;};_cbe ,_ddfe :=_debe .ToGoImage ();if _ddfe !=nil {return _ddfe ;};_agbf :=_cbe .Bounds ();_fg .Push ();_fg .Scale (1.0/float64 (_agbf .Dx ()),-1.0/float64 (_agbf .Dy ()));_fg .DrawImageAnchored (_cbe ,0,0,0,1);_fg .Pop ();case _fcf .XObjectTypeForm :_ca .Log .Debug ("\u0058\u004fb\u006a\u0065\u0063t\u0020\u0066\u006f\u0072\u006d\u003a\u0020\u0025\u0073",_gegb .String ());_gga ,_eac :=_abe .GetXObjectFormByName (*_gegb );if _eac !=nil {return _eac ;};_dabg ,_eac :=_gga .GetContentStream ();if _eac !=nil {return _eac ;};_cfc :=_gga .Resources ;if _cfc ==nil {_cfc =_abe ;};_fg .Push ();if _gga .Matrix !=nil {_fdbf ,_ggc :=_c .GetArray (_gga .Matrix );if !_ggc {return _ga ;};_bbd ,_ged :=_c .GetNumbersAsFloat (_fdbf .Elements ());if _ged !=nil {return _ged ;};if len (_bbd )!=6{return _ad ;};_ecc :=_gc .NewMatrix (_bbd [0],_bbd [1],_bbd [2],_bbd [3],_bbd [4],_bbd [5]);_fg .SetMatrix (_fg .Matrix ().Mult (_ecc ));};if _gga .BBox !=nil {_dda ,_bfc :=_c .GetArray (_gga .BBox );if !_bfc {return _ga ;};_eebd ,_bea :=_c .GetNumbersAsFloat (_dda .Elements ());if _bea !=nil {return _bea ;};if len (_eebd )!=4{_ca .Log .Debug ("\u004c\u0065\u006e\u0020\u003d\u0020\u0025\u0064",len (_eebd ));return _ad ;};_fg .DrawRectangle (_eebd [0],_eebd [1],_eebd [2]-_eebd [0],_eebd [3]-_eebd [1]);_fg .SetRGBA (1,0,0,1);_fg .Clip ();}else {_ca .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0052\u0065q\u0075\u0069\u0072e\u0064\u0020\u0042\u0042\u006f\u0078\u0020\u006d\u0069ss\u0069\u006e\u0067 \u006f\u006e \u0058\u004f\u0062\u006a\u0065\u0063t\u0020\u0046o\u0072\u006d");};_eac =_gad .renderContentStream (_fg ,string (_dabg ),_cfc );if _eac !=nil {return _eac ;};_fg .Pop ();};case "\u0042\u0049":if len (_gg .Params )!=1{return _ad ;};_fcb ,_agd :=_gg .Params [0].(*_agb .ContentStreamInlineImage );if !_agd {return nil ;};_fgg ,_eef :=_fcb .ToImage (_abe );if _eef !=nil {return _eef ;};_gcg ,_eef :=_fgg .ToGoImage ();if _eef !=nil {return _eef ;};_ggd :=_gcg .Bounds ();_fg .Push ();_fg .Scale (1.0/float64 (_ggd .Dx ()),-1.0/float64 (_ggd .Dy ()));_fg .DrawImageAnchored (_gcg ,0,0,0,1);_fg .Pop ();case "\u0042\u0054":_egf .Reset ();case "\u0045\u0054":_egf .Reset ();case "\u0054\u004c":if len (_gg .Params )!=1{return _ad ;};_cae ,_fee :=_c .GetNumberAsFloat (_gg .Params [0]);if _fee !=nil {return _fee ;};_egf .Tl =_cae ;case "\u0054\u0063":if len (_gg .Params )!=1{return _ad ;};_gde ,_cfd :=_c .GetNumberAsFloat (_gg .Params [0]);if _cfd !=nil {return _cfd ;};_egf .Tc =_gde ;case "\u0054\u0077":if len (_gg .Params )!=1{return _ad ;};_cba ,_dgg :=_c .GetNumberAsFloat (_gg .Params [0]);if _dgg !=nil {return _dgg ;};_egf .Tw =_cba ;case "\u0054\u007a":if len (_gg .Params )!=1{return _ad ;};_aba ,_dec :=_c .GetNumberAsFloat (_gg .Params [0]);if _dec !=nil {return _dec ;};_egf .Th =_aba ;case "\u0054\u0073":if len (_gg .Params )!=1{return _ad ;};_eab ,_aae :=_c .GetNumberAsFloat (_gg .Params [0]);if _aae !=nil {return _aae ;};_egf .Ts =_eab ;case "\u0054\u0064":if len (_gg .Params )!=2{return _ad ;};_dbb ,_bgc :=_c .GetNumbersAsFloat (_gg .Params );if _bgc !=nil {return _bgc ;};_ca .Log .Debug ("\u0054\u0064\u003a\u0020\u0025\u0076",_dbb );_egf .ProcTd (_dbb [0],_dbb [1]);case "\u0054\u0044":if len (_gg .Params )!=2{return _ad ;};_aef ,_ageb :=_c .GetNumbersAsFloat (_gg .Params );if _ageb !=nil {return _ageb ;};_ca .Log .Debug ("\u0054\u0044\u003a\u0020\u0025\u0076",_aef );_egf .ProcTD (_aef [0],_aef [1]);case "\u0054\u002a":_egf .ProcTStar ();case "\u0054\u006d":if len (_gg .Params )!=6{return _ad ;};_fec ,_gdag :=_c .GetNumbersAsFloat (_gg .Params );if _gdag !=nil {return _gdag ;};_ca .Log .Debug ("\u0054\u0065x\u0074\u0020\u006da\u0074\u0072\u0069\u0078\u003a\u0020\u0025\u002b\u0076",_fec );_egf .ProcTm (_fec [0],_fec [1],_fec [2],_fec [3],_fec [4],_fec [5]);case "\u0027":if len (_gg .Params )!=1{return _ad ;};_ceda ,_bbdd :=_c .GetStringBytes (_gg .Params [0]);if !_bbdd {return _ga ;};_ca .Log .Debug ("\u0027\u0020\u0073t\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_ceda ));_egf .ProcQ (_ceda ,_fg );case "\u0022":if len (_gg .Params )!=3{return _ad ;};_gecc ,_agc :=_c .GetNumberAsFloat (_gg .Params [0]);if _agc !=nil {return _agc ;};_fac ,_agc :=_c .GetNumberAsFloat (_gg .Params [1]);if _agc !=nil {return _agc ;};_eeda ,_eaf :=_c .GetStringBytes (_gg .Params [2]);if !_eaf {return _ga ;};_egf .ProcDQ (_eeda ,_gecc ,_fac ,_fg );case "\u0054\u006a":if len (_gg .Params )!=1{return _ad ;};_ceg ,_eag :=_c .GetStringBytes (_gg .Params [0]);if !_eag {return _ga ;};_ca .Log .Debug ("\u0054j\u0020s\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0060\u0025\u0073\u0060",string (_ceg ));_egf .ProcTj (_ceg ,_fg );case "\u0054\u004a":if len (_gg .Params )!=1{return _ad ;};_cdgd ,_bccb :=_c .GetArray (_gg .Params [0]);if !_bccb {_ca .Log .Debug ("\u0054\u0079\u0070\u0065\u003a\u0020\u0025\u0054",_cdgd );return _ga ;};_ca .Log .Debug ("\u0054\u004a\u0020\u0061\u0072\u0072\u0061\u0079\u003a\u0020\u0025\u002b\u0076",_cdgd );for _ ,_bcd :=range _cdgd .Elements (){switch _egce :=_bcd .(type ){case *_c .PdfObjectString :if _egce !=nil {_egf .ProcTj (_egce .Bytes (),_fg );};case *_c .PdfObjectFloat ,*_c .PdfObjectInteger :_bda ,_dgca :=_c .GetNumberAsFloat (_egce );if _dgca ==nil {_egf .Translate (-_bda *0.001*_egf .Tf .Size ,0);};};};case "\u0054\u0066":if len (_gg .Params )!=2{return _ad ;};_ca .Log .Debug ("\u0025\u0023\u0076",_gg .Params );_ac ,_aeg :=_c .GetName (_gg .Params [0]);if !_aeg ||_ac ==nil {_ca .Log .Debug ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0066\u006f\u006e\u0074\u0020\u006e\u0061m\u0065 \u006f\u0062\u006a\u0065\u0063\u0074\u003a \u0025\u0076",_gg .Params [0]);return _ga ;};_ca .Log .Debug ("\u0046\u006f\u006e\u0074\u0020\u006e\u0061\u006d\u0065\u003a\u0020\u0025\u0073",_ac .String ());_dcc ,_edef :=_c .GetNumberAsFloat (_gg .Params [1]);if _edef !=nil {_ca .Log .Debug ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0066\u006f\u006e\u0074\u0020\u0073\u0069z\u0065 \u006f\u0062\u006a\u0065\u0063\u0074\u003a \u0025\u0076",_gg .Params [1]);return _ga ;};_ca .Log .Debug ("\u0046\u006f\u006e\u0074\u0020\u0073\u0069\u007a\u0065\u003a\u0020\u0025\u0076",_dcc );_febg ,_bgd :=_abe .GetFontByName (*_ac );if !_bgd {_ca .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0046\u006f\u006e\u0074\u0020\u0025s\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064",_ac .String ());return _e .New ("\u0066\u006f\u006e\u0074\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};_ca .Log .Debug ("\u0046\u006f\u006e\u0074\u003a\u0020\u0025\u0054",_febg );_ddac ,_aeg :=_c .GetDict (_febg );if !_aeg {_ca .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075l\u0064\u0020\u006e\u006f\u0074\u0020\u0067e\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0069\u0063\u0074");return _ga ;};_beb ,_edef :=_fcf .NewPdfFontFromPdfObject (_ddac );if _edef !=nil {_ca .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u006c\u006f\u0061\u0064\u0020\u0066\u006fn\u0074\u0020\u0066\u0072\u006fm\u0020\u006fb\u006a\u0065\u0063\u0074");return _edef ;};_efb :=_beb .BaseFont ();if _efb ==""{_efb =_ac .String ();};_cbg ,_aeg :=_aee [_efb ];if !_aeg {_cbg ,_edef =_b .NewTextFont (_beb ,_dcc );if _edef !=nil {_ca .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_edef );};};if _cbg ==nil {if len (_efb )> 7&&_efb [6]=='+'{_efb =_efb [7:];};_aga :=[]string {_efb ,"\u0054i\u006de\u0073\u0020\u004e\u0065\u0077\u0020\u0052\u006f\u006d\u0061\u006e","\u0041\u0072\u0069a\u006c","D\u0065\u006a\u0061\u0056\u0075\u0020\u0053\u0061\u006e\u0073"};for _ ,_bbcb :=range _aga {_ca .Log .Debug ("\u0044\u0045\u0042\u0055\u0047\u003a \u0073\u0065\u0061\u0072\u0063\u0068\u0069\u006e\u0067\u0020\u0073\u0079\u0073t\u0065\u006d\u0020\u0066\u006f\u006e\u0074 \u0060\u0025\u0073\u0060",_bbcb );if _cbg ,_aeg =_aee [_bbcb ];_aeg {break ;};_aebg :=_ab .Match (_bbcb );if _aebg ==nil {_ca .Log .Debug ("c\u006f\u0075\u006c\u0064\u0020\u006eo\u0074\u0020\u0066\u0069\u006e\u0064\u0020\u0066\u006fn\u0074\u0020\u0066i\u006ce\u0020\u0025\u0073",_bbcb );continue ;};_cbg ,_edef =_b .NewTextFontFromPath (_aebg .Filename ,_dcc );if _edef !=nil {_ca .Log .Debug ("c\u006f\u0075\u006c\u0064\u0020\u006eo\u0074\u0020\u006c\u006f\u0061\u0064\u0020\u0066\u006fn\u0074\u0020\u0066i\u006ce\u0020\u0025\u0073",_aebg .Filename );continue ;};_ca .Log .Debug ("\u0053\u0075\u0062\u0073\u0074\u0069t\u0075\u0074\u0069\u006e\u0067\u0020\u0066\u006f\u006e\u0074\u0020\u0025\u0073 \u0077\u0069\u0074\u0068\u0020\u0025\u0073 \u0028\u0025\u0073\u0029",_efb ,_aebg .Name ,_aebg .Filename );_aee [_bbcb ]=_cbg ;break ;};};if _cbg ==nil {_ca .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020n\u006f\u0074\u0020\u0066\u0069\u006ed\u0020\u0061\u006e\u0079\u0020\u0073\u0075\u0069\u0074\u0061\u0062\u006c\u0065 \u0066\u006f\u006e\u0074");return _e .New ("\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0066\u0069\u006e\u0064\u0020a\u006ey\u0020\u0073\u0075\u0069\u0074\u0061\u0062\u006c\u0065\u0020\u0066\u006f\u006e\u0074");};_egf .ProcTf (_cbg .WithSize (_dcc ,_beb ));case "\u0042\u004d\u0043","\u0042\u0044\u0043":case "\u0045\u004d\u0043":default:_ca .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0073u\u0070\u0070\u006f\u0072\u0074\u0065\u0064 \u006f\u0070\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u0073",_gg .Operand );};return nil ;});_gag =_bcc .Process (_daf );if _gag !=nil {return _gag ;};return nil ;};

// RenderToPath converts the specified PDF page into an image and saves the
// result at the specified location.
func (_cd *ImageDevice )RenderToPath (page *_fcf .PdfPage ,outputPath string )error {_gb ,_af :=_cd .Render (page );if _af !=nil {return _af ;};_bd :=_d .ToLower (_ag .Ext (outputPath ));if _bd ==""{return _e .New ("\u0063\u006ful\u0064\u0020\u006eo\u0074\u0020\u0072\u0065cog\u006eiz\u0065\u0020\u006f\u0075\u0074\u0070\u0075t \u0066\u0069\u006c\u0065\u0020\u0074\u0079p\u0065");};switch _bd {case "\u002e\u0070\u006e\u0067":return _cc (outputPath ,_gb );case "\u002e\u006a\u0070\u0067","\u002e\u006a\u0070e\u0067":return _da (outputPath ,_gb ,100);};return _g .Errorf ("\u0075\u006e\u0072\u0065\u0063\u006fg\u006e\u0069\u007a\u0065\u0064\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020f\u0069\u006c\u0065\u0020\u0074\u0079\u0070e\u003a\u0020\u0025\u0073",_bd );};func _cc (_bcg string ,_dbf _ee .Image )error {_aa ,_fe :=_f .Create (_bcg );if _fe !=nil {return _fe ;};defer _aa .Close ();return _fd .Encode (_aa ,_dbf );};

// ImageDevice is used to render PDF pages to image targets.
type ImageDevice struct{renderer };func (_ba renderer )renderPage (_agf _b .Context ,_ddfg *_fcf .PdfPage )error {_cgf ,_de :=_ddfg .GetAllContentStreams ();if _de !=nil {return _de ;};_agf .Translate (0,float64 (_agf .Height ()));_agf .Scale (1,-1);_agf .Push ();_agf .SetRGBA (1,1,1,1);_agf .DrawRectangle (0,0,float64 (_agf .Width ()),float64 (_agf .Height ()));_agf .Fill ();_agf .Pop ();_agf .SetLineWidth (1.0);_agf .SetRGBA (0,0,0,1);return _ba .renderContentStream (_agf ,_cgf ,_ddfg .Resources );};func _da (_gbc string ,_fb _ee .Image ,_dg int )error {_ddd ,_be :=_f .Create (_gbc );if _be !=nil {return _be ;};defer _ddd .Close ();return _fca .Encode (_ddd ,_fb ,&_fca .Options {Quality :_dg });};

// NewImageDevice returns a new image device.
func NewImageDevice ()*ImageDevice {return &ImageDevice {}};
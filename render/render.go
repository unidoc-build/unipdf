//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package render ;import (_e "errors";_be "fmt";_age "github.com/adrg/sysfont";_eb "github.com/unidoc/unipdf/v3/common";_caa "github.com/unidoc/unipdf/v3/contentstream";_beg "github.com/unidoc/unipdf/v3/contentstream/draw";_ca "github.com/unidoc/unipdf/v3/core";
_c "github.com/unidoc/unipdf/v3/internal/license";_df "github.com/unidoc/unipdf/v3/internal/transform";_ee "github.com/unidoc/unipdf/v3/model";_cc "github.com/unidoc/unipdf/v3/render/internal/context";_cd "github.com/unidoc/unipdf/v3/render/internal/context/imagerender";
_ag "golang.org/x/image/draw";_ed "image";_fa "image/color";_g "image/draw";_d "image/jpeg";_b "image/png";_eg "math";_fd "os";_a "path/filepath";_ff "strings";);func _baab (_afbg ,_dcg _ed .Image )_ed .Image {_edba ,_feb :=_dcg .Bounds ().Size (),_afbg .Bounds ().Size ();
_ede ,_dba :=_edba .X ,_edba .Y ;if _feb .X > _ede {_ede =_feb .X ;};if _feb .Y > _dba {_dba =_feb .Y ;};_cgbf :=_ed .Rect (0,0,_ede ,_dba );if _edba .X !=_ede ||_edba .Y !=_dba {_ccb :=_ed .NewRGBA (_cgbf );_ag .BiLinear .Scale (_ccb ,_cgbf ,_afbg ,_dcg .Bounds (),_ag .Over ,nil );
_dcg =_ccb ;};if _feb .X !=_ede ||_feb .Y !=_dba {_cfbf :=_ed .NewRGBA (_cgbf );_ag .BiLinear .Scale (_cfbf ,_cgbf ,_afbg ,_afbg .Bounds (),_ag .Over ,nil );_afbg =_cfbf ;};_fge :=_ed .NewRGBA (_cgbf );_ag .DrawMask (_fge ,_cgbf ,_afbg ,_ed .Point {},_dcg ,_ed .Point {},_ag .Over );
return _fge ;};

// NewImageDevice returns a new image device.
func NewImageDevice ()*ImageDevice {const _ga ="r\u0065\u006e\u0064\u0065r.\u004ee\u0077\u0049\u006d\u0061\u0067e\u0044\u0065\u0076\u0069\u0063\u0065";_c .TrackUse (_ga );return &ImageDevice {};};var (_acc =_e .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");
_af =_e .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072"););func (_bca renderer )renderContentStream (_cg _cc .Context ,_bbg string ,_cad *_ee .PdfPageResources )error {_da ,_eff :=_caa .NewContentStreamParser (_bbg ).Parse ();
if _eff !=nil {return _eff ;};_cga :=_cg .TextState ();_cga .GlobalScale =_bca ._gfd ;_bgd :=map[string ]*_cc .TextFont {};_eggb :=_age .NewFinder (&_age .FinderOpts {Extensions :[]string {"\u002e\u0074\u0074\u0066","\u002e\u0074\u0074\u0063"}});_afd :=_caa .NewContentStreamProcessor (*_da );
_afd .AddHandler (_caa .HandlerConditionEnumAllOperands ,"",func (_cfb *_caa .ContentStreamOperation ,_fc _caa .GraphicsState ,_fde *_ee .PdfPageResources )error {_eb .Log .Debug ("\u0050\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0025\u0073",_cfb .Operand );
switch _cfb .Operand {case "\u0071":_cg .Push ();case "\u0051":_cg .Pop ();_cga =_cg .TextState ();case "\u0063\u006d":if len (_cfb .Params )!=6{return _af ;};_eee ,_bcb :=_ca .GetNumbersAsFloat (_cfb .Params );if _bcb !=nil {return _bcb ;};_fba :=_df .NewMatrix (_eee [0],_eee [1],_eee [2],_eee [3],_eee [4],_eee [5]);
_eb .Log .Debug ("\u0047\u0072\u0061\u0070\u0068\u0069\u0063\u0073\u0020\u0073\u0074a\u0074\u0065\u0020\u006d\u0061\u0074\u0072\u0069\u0078\u003a \u0025\u002b\u0076",_fba );_cg .SetMatrix (_cg .Matrix ().Mult (_fba ));case "\u0077":if len (_cfb .Params )!=1{return _af ;
};_ba ,_afg :=_ca .GetNumbersAsFloat (_cfb .Params );if _afg !=nil {return _afg ;};_cg .SetLineWidth (_ba [0]);case "\u004a":if len (_cfb .Params )!=1{return _af ;};_cdfe ,_ec :=_ca .GetIntVal (_cfb .Params [0]);if !_ec {return _acc ;};switch _cdfe {case 0:_cg .SetLineCap (_cc .LineCapButt );
case 1:_cg .SetLineCap (_cc .LineCapRound );case 2:_cg .SetLineCap (_cc .LineCapSquare );default:_eb .Log .Debug ("\u0049\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u006c\u0069\u006ee\u0020\u0063\u0061\u0070\u0020\u0073\u0074\u0079\u006c\u0065:\u0020\u0025\u0064",_cdfe );
return _af ;};case "\u006a":if len (_cfb .Params )!=1{return _af ;};_cdd ,_bgg :=_ca .GetIntVal (_cfb .Params [0]);if !_bgg {return _acc ;};switch _cdd {case 0:_cg .SetLineJoin (_cc .LineJoinBevel );case 1:_cg .SetLineJoin (_cc .LineJoinRound );case 2:_cg .SetLineJoin (_cc .LineJoinBevel );
default:_eb .Log .Debug ("I\u006e\u0076\u0061\u006c\u0069\u0064 \u006c\u0069\u006e\u0065\u0020\u006a\u006f\u0069\u006e \u0073\u0074\u0079l\u0065:\u0020\u0025\u0064",_cdd );return _af ;};case "\u004d":if len (_cfb .Params )!=1{return _af ;};_baf ,_fga :=_ca .GetNumbersAsFloat (_cfb .Params );
if _fga !=nil {return _fga ;};_ =_baf ;_eb .Log .Debug ("\u004di\u0074\u0065\u0072\u0020l\u0069\u006d\u0069\u0074\u0020n\u006ft\u0020s\u0075\u0070\u0070\u006f\u0072\u0074\u0065d");case "\u0064":if len (_cfb .Params )!=2{return _af ;};_caab ,_edb :=_ca .GetArray (_cfb .Params [0]);
if !_edb {return _acc ;};_ead ,_edb :=_ca .GetIntVal (_cfb .Params [1]);if !_edb {return _acc ;};_gc ,_cb :=_ca .GetNumbersAsFloat (_caab .Elements ());if _cb !=nil {return _cb ;};_cg .SetDash (_gc ...);_ =_ead ;_eb .Log .Debug ("\u004c\u0069n\u0065\u0020\u0064\u0061\u0073\u0068\u0020\u0070\u0068\u0061\u0073\u0065\u0020\u006e\u006f\u0074\u0020\u0073\u0075\u0070\u0070\u006frt\u0065\u0064");
case "\u0072\u0069":_eb .Log .Debug ("\u0052\u0065\u006e\u0064\u0065\u0072\u0069\u006e\u0067\u0020i\u006e\u0074\u0065\u006e\u0074\u0020\u006eo\u0074\u0020\u0073\u0075\u0070\u0070\u006f\u0072\u0074\u0065\u0064");case "\u0069":_eb .Log .Debug ("\u0046\u006c\u0061\u0074\u006e\u0065\u0073\u0073\u0020\u0074\u006f\u006c\u0065\u0072\u0061n\u0063e\u0020\u006e\u006f\u0074\u0020\u0073\u0075\u0070\u0070\u006f\u0072\u0074\u0065\u0064");
case "\u0067\u0073":if len (_cfb .Params )!=1{return _af ;};_gb ,_dac :=_ca .GetName (_cfb .Params [0]);if !_dac {return _acc ;};if _gb ==nil {return _af ;};_gab ,_dac :=_fde .GetExtGState (*_gb );if !_dac {_eb .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006eo\u0074 \u0066i\u006ed\u0020\u0072\u0065\u0073\u006f\u0075\u0072\u0063\u0065\u003a\u0020\u0025\u0073",*_gb );
return _e .New ("\u0072e\u0073o\u0075\u0072\u0063\u0065\u0020n\u006f\u0074 \u0066\u006f\u0075\u006e\u0064");};_cbe ,_dac :=_ca .GetDict (_gab );if !_dac {_eb .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020c\u006f\u0075\u006c\u0064 ge\u0074 g\u0072\u0061\u0070\u0068\u0069\u0063\u0073 s\u0074\u0061\u0074\u0065\u0020\u0064\u0069c\u0074");
return _acc ;};_eb .Log .Debug ("G\u0053\u0020\u0064\u0069\u0063\u0074\u003a\u0020\u0025\u0073",_cbe .String ());case "\u006d":if len (_cfb .Params )!=2{_eb .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0073\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_af );
return nil ;};_ccg ,_ffc :=_ca .GetNumbersAsFloat (_cfb .Params );if _ffc !=nil {return _ffc ;};_eb .Log .Debug ("M\u006f\u0076\u0065\u0020\u0074\u006f\u003a\u0020\u0025\u0076",_ccg );_cg .NewSubPath ();_cg .MoveTo (_ccg [0],_ccg [1]);case "\u006c":if len (_cfb .Params )!=2{_eb .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0073\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_af );
return nil ;};_ebb ,_eggd :=_ca .GetNumbersAsFloat (_cfb .Params );if _eggd !=nil {return _eggd ;};_cg .LineTo (_ebb [0],_ebb [1]);case "\u0063":if len (_cfb .Params )!=6{return _af ;};_cdg ,_cgg :=_ca .GetNumbersAsFloat (_cfb .Params );if _cgg !=nil {return _cgg ;
};_eb .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020\u0062\u0065\u007a\u0069\u0065\u0072\u0020p\u0061\u0072\u0061\u006d\u0073\u003a\u0020\u0025\u002b\u0076",_cdg );_cg .CubicTo (_cdg [0],_cdg [1],_cdg [2],_cdg [3],_cdg [4],_cdg [5]);case "\u0076","\u0079":if len (_cfb .Params )!=4{return _af ;
};_edf ,_caaa :=_ca .GetNumbersAsFloat (_cfb .Params );if _caaa !=nil {return _caaa ;};_eb .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020\u0062\u0065\u007a\u0069\u0065\u0072\u0020p\u0061\u0072\u0061\u006d\u0073\u003a\u0020\u0025\u002b\u0076",_edf );_cg .QuadraticTo (_edf [0],_edf [1],_edf [2],_edf [3]);
case "\u0068":_cg .ClosePath ();_cg .NewSubPath ();case "\u0072\u0065":if len (_cfb .Params )!=4{return _af ;};_bbe ,_cff :=_ca .GetNumbersAsFloat (_cfb .Params );if _cff !=nil {return _cff ;};_cg .DrawRectangle (_bbe [0],_bbe [1],_bbe [2],_bbe [3]);_cg .NewSubPath ();
case "\u0053":_bfe ,_cbd :=_fc .ColorspaceStroking .ColorToRGB (_fc .ColorStroking );if _cbd !=nil {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_cbd );
return _cbd ;};_fdd ,_dc :=_bfe .(*_ee .PdfColorDeviceRGB );if !_dc {_eb .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _cbd ;};_cg .SetRGBA (_fdd .R (),_fdd .G (),_fdd .B (),1);
_cg .Stroke ();case "\u0073":_gdb ,_eec :=_fc .ColorspaceStroking .ColorToRGB (_fc .ColorStroking );if _eec !=nil {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_eec );
return _eec ;};_ge ,_cdfg :=_gdb .(*_ee .PdfColorDeviceRGB );if !_cdfg {_eb .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _eec ;};_cg .ClosePath ();_cg .NewSubPath ();
_cg .SetRGBA (_ge .R (),_ge .G (),_ge .B (),1);_cg .Stroke ();case "\u0066","\u0046":_bdd ,_gba :=_fc .ColorspaceNonStroking .ColorToRGB (_fc .ColorNonStroking );if _gba !=nil {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gba );
return _gba ;};_cbb ,_cbba :=_bdd .(*_ee .PdfColorDeviceRGB );if !_cbba {_eb .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _gba ;};_cg .SetRGBA (_cbb .R (),_cbb .G (),_cbb .B (),1);
_cg .SetFillRule (_cc .FillRuleWinding );_cg .Fill ();case "\u0066\u002a":_fdec ,_ged :=_fc .ColorspaceNonStroking .ColorToRGB (_fc .ColorNonStroking );if _ged !=nil {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ged );
return _ged ;};_aff ,_aaed :=_fdec .(*_ee .PdfColorDeviceRGB );if !_aaed {_eb .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _ged ;};_cg .SetRGBA (_aff .R (),_aff .G (),_aff .B (),1);
_cg .SetFillRule (_cc .FillRuleEvenOdd );_cg .Fill ();case "\u0042":_dad ,_edbf :=_fc .ColorspaceNonStroking .ColorToRGB (_fc .ColorNonStroking );if _edbf !=nil {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_edbf );
return _edbf ;};_gfdd :=_dad .(*_ee .PdfColorDeviceRGB );_cg .SetRGBA (_gfdd .R (),_gfdd .G (),_gfdd .B (),1);_cg .SetFillRule (_cc .FillRuleWinding );_cg .FillPreserve ();_dad ,_edbf =_fc .ColorspaceStroking .ColorToRGB (_fc .ColorStroking );if _edbf !=nil {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_edbf );
return _edbf ;};_gfdd =_dad .(*_ee .PdfColorDeviceRGB );_cg .SetRGBA (_gfdd .R (),_gfdd .G (),_gfdd .B (),1);_cg .Stroke ();case "\u0042\u002a":_ab ,_eea :=_fc .ColorspaceNonStroking .ColorToRGB (_fc .ColorNonStroking );if _eea !=nil {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_eea );
return _eea ;};_fbac :=_ab .(*_ee .PdfColorDeviceRGB );_cg .SetRGBA (_fbac .R (),_fbac .G (),_fbac .B (),1);_cg .SetFillRule (_cc .FillRuleEvenOdd );_cg .FillPreserve ();_ab ,_eea =_fc .ColorspaceStroking .ColorToRGB (_fc .ColorStroking );if _eea !=nil {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_eea );
return _eea ;};_fbac =_ab .(*_ee .PdfColorDeviceRGB );_cg .SetRGBA (_fbac .R (),_fbac .G (),_fbac .B (),1);_cg .Stroke ();case "\u0062":_cgf ,_bda :=_fc .ColorspaceNonStroking .ColorToRGB (_fc .ColorNonStroking );if _bda !=nil {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bda );
return _bda ;};_efa :=_cgf .(*_ee .PdfColorDeviceRGB );_cg .SetRGBA (_efa .R (),_efa .G (),_efa .B (),1);_cg .ClosePath ();_cg .NewSubPath ();_cg .SetFillRule (_cc .FillRuleWinding );_cg .FillPreserve ();_cgf ,_bda =_fc .ColorspaceStroking .ColorToRGB (_fc .ColorStroking );
if _bda !=nil {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bda );return _bda ;};_efa =_cgf .(*_ee .PdfColorDeviceRGB );_cg .SetRGBA (_efa .R (),_efa .G (),_efa .B (),1);
_cg .Stroke ();case "\u0062\u002a":_cg .ClosePath ();_gg ,_agea :=_fc .ColorspaceNonStroking .ColorToRGB (_fc .ColorNonStroking );if _agea !=nil {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_agea );
return _agea ;};_dfab :=_gg .(*_ee .PdfColorDeviceRGB );_cg .SetRGBA (_dfab .R (),_dfab .G (),_dfab .B (),1);_cg .NewSubPath ();_cg .SetFillRule (_cc .FillRuleEvenOdd );_cg .FillPreserve ();_gg ,_agea =_fc .ColorspaceStroking .ColorToRGB (_fc .ColorStroking );
if _agea !=nil {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_agea );return _agea ;};_dfab =_gg .(*_ee .PdfColorDeviceRGB );_cg .SetRGBA (_dfab .R (),_dfab .G (),_dfab .B (),1);
_cg .Stroke ();case "\u006e":_cg .ClearPath ();case "\u0057":_cg .SetFillRule (_cc .FillRuleWinding );_cg .ClipPreserve ();case "\u0057\u002a":_cg .SetFillRule (_cc .FillRuleEvenOdd );_cg .ClipPreserve ();case "\u0072\u0067":_cfbb ,_bfd :=_fc .ColorNonStroking .(*_ee .PdfColorDeviceRGB );
if !_bfd {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fc .ColorNonStroking );return nil ;};_cg .SetFillRGBA (_cfbb .R (),_cfbb .G (),_cfbb .B (),1);
case "\u0052\u0047":_ggc ,_ggf :=_fc .ColorStroking .(*_ee .PdfColorDeviceRGB );if !_ggf {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fc .ColorStroking );
return nil ;};_cg .SetStrokeRGBA (_ggc .R (),_ggc .G (),_ggc .B (),1);case "\u006b":_ggg ,_ebf :=_fc .ColorNonStroking .(*_ee .PdfColorDeviceCMYK );if !_ebf {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fc .ColorNonStroking );
return nil ;};_fgc ,_egge :=_fc .ColorspaceNonStroking .ColorToRGB (_ggg );if _egge !=nil {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fc .ColorNonStroking );
return nil ;};_bbc ,_ebf :=_fgc .(*_ee .PdfColorDeviceRGB );if !_ebf {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fgc );return nil ;
};_cg .SetFillRGBA (_bbc .R (),_bbc .G (),_bbc .B (),1);case "\u004b":_fcd ,_fca :=_fc .ColorStroking .(*_ee .PdfColorDeviceCMYK );if !_fca {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fc .ColorStroking );
return nil ;};_dfg ,_gede :=_fc .ColorspaceStroking .ColorToRGB (_fcd );if _gede !=nil {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fc .ColorStroking );
return nil ;};_caf ,_fca :=_dfg .(*_ee .PdfColorDeviceRGB );if !_fca {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dfg );return nil ;
};_cg .SetStrokeRGBA (_caf .R (),_caf .G (),_caf .B (),1);case "\u0067":_bga ,_ad :=_fc .ColorNonStroking .(*_ee .PdfColorDeviceGray );if !_ad {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fc .ColorNonStroking );
return nil ;};_gfe ,_bdab :=_fc .ColorspaceNonStroking .ColorToRGB (_bga );if _bdab !=nil {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fc .ColorNonStroking );
return nil ;};_gae ,_ad :=_gfe .(*_ee .PdfColorDeviceRGB );if !_ad {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gfe );return nil ;
};_cg .SetFillRGBA (_gae .R (),_gae .G (),_gae .B (),1);case "\u0047":_fcc ,_ecg :=_fc .ColorStroking .(*_ee .PdfColorDeviceGray );if !_ecg {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fc .ColorStroking );
return nil ;};_fbe ,_cfa :=_fc .ColorspaceStroking .ColorToRGB (_fcc );if _cfa !=nil {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fc .ColorStroking );
return nil ;};_aba ,_ecg :=_fbe .(*_ee .PdfColorDeviceRGB );if !_ecg {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fbe );return nil ;
};_cg .SetStrokeRGBA (_aba .R (),_aba .G (),_aba .B (),1);case "\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_eab ,_geg :=_fc .ColorspaceNonStroking .ColorToRGB (_fc .ColorNonStroking );if _geg !=nil {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fc .ColorNonStroking );
return nil ;};_faf ,_dge :=_eab .(*_ee .PdfColorDeviceRGB );if !_dge {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_eab );return nil ;
};_cg .SetFillRGBA (_faf .R (),_faf .G (),_faf .B (),1);case "\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_eggc ,_bfg :=_fc .ColorspaceStroking .ColorToRGB (_fc .ColorStroking );if _bfg !=nil {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fc .ColorStroking );
return nil ;};_fgcd ,_bed :=_eggc .(*_ee .PdfColorDeviceRGB );if !_bed {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_eggc );return nil ;
};_cg .SetStrokeRGBA (_fgcd .R (),_fgcd .G (),_fgcd .B (),1);case "\u0044\u006f":if len (_cfb .Params )!=1{return _af ;};_bdb ,_ddb :=_ca .GetName (_cfb .Params [0]);if !_ddb {return _acc ;};_ ,_abd :=_fde .GetXObjectByName (*_bdb );switch _abd {case _ee .XObjectTypeImage :_eb .Log .Debug ("\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u0069\u006d\u0061\u0067e\u003a\u0020\u0025\u0073",_bdb .String ());
_bdae ,_fbbc :=_fde .GetXObjectImageByName (*_bdb );if _fbbc !=nil {return _fbbc ;};_gcc ,_fbbc :=_bdae .ToImage ();if _fbbc !=nil {return _fbbc ;};if _gea :=_bdae .ColorSpace ;_gea !=nil {var _acb bool ;switch _gea .(type ){case *_ee .PdfColorspaceSpecialIndexed :_acb =true ;
};if _acb {if _eggbc ,_ffe :=_gea .ImageToRGB (*_gcc );_ffe !=nil {_eb .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0063\u006fnv\u0065r\u0074\u0020\u0069\u006d\u0061\u0067\u0065\u0020\u0074\u006f\u0020\u0052G\u0042\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020i\u006e\u0063\u006f\u0072\u0072\u0065\u0063\u0074\u002e");
}else {_gcc =&_eggbc ;};};};_acf :=_cg .FillPattern ().ColorAt (0,0);var _ced _ed .Image ;if _bdae .Mask !=nil {if _ced ,_fbbc =_cfc (_bdae .Mask ,_acf );_fbbc !=nil {_eb .Log .Debug ("\u0057\u0041\u0052\u004e\u003a \u0063\u006f\u0075\u006c\u0064 \u006eo\u0074\u0020\u0067\u0065\u0074\u0020\u0065\u0078\u0070\u006c\u0069\u0063\u0069\u0074\u0020\u0069\u006d\u0061\u0067e\u0020\u006d\u0061\u0073\u006b\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e");
};}else if _bdae .SMask !=nil {if _ced ,_fbbc =_gfag (_bdae .SMask ,_acf );_fbbc !=nil {_eb .Log .Debug ("W\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0067\u0065\u0074\u0020\u0073\u006f\u0066\u0074\u0020\u0069\u006da\u0067e\u0020\u006d\u0061\u0073k\u002e\u0020O\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063\u0074\u002e");
};};var _dff _ed .Image ;if _fbg ,_ :=_ca .GetBoolVal (_bdae .ImageMask );_fbg {_dff =_gbe (_gcc ,_acf );}else {_dff ,_fbbc =_gcc .ToGoImage ();if _fbbc !=nil {return _fbbc ;};};if _ced !=nil {_dff =_baab (_dff ,_ced );};_cfaa :=_dff .Bounds ();_cg .Push ();
_cg .Scale (1.0/float64 (_cfaa .Dx ()),-1.0/float64 (_cfaa .Dy ()));_cg .DrawImageAnchored (_dff ,0,0,0,1);_cg .Pop ();case _ee .XObjectTypeForm :_eb .Log .Debug ("\u0058\u004fb\u006a\u0065\u0063t\u0020\u0066\u006f\u0072\u006d\u003a\u0020\u0025\u0073",_bdb .String ());
_ffb ,_fad :=_fde .GetXObjectFormByName (*_bdb );if _fad !=nil {return _fad ;};_bbf ,_fad :=_ffb .GetContentStream ();if _fad !=nil {return _fad ;};_afa :=_ffb .Resources ;if _afa ==nil {_afa =_fde ;};_cg .Push ();if _ffb .Matrix !=nil {_edd ,_fcda :=_ca .GetArray (_ffb .Matrix );
if !_fcda {return _acc ;};_bef ,_eeg :=_ca .GetNumbersAsFloat (_edd .Elements ());if _eeg !=nil {return _eeg ;};if len (_bef )!=6{return _af ;};_aga :=_df .NewMatrix (_bef [0],_bef [1],_bef [2],_bef [3],_bef [4],_bef [5]);_cg .SetMatrix (_cg .Matrix ().Mult (_aga ));
};if _ffb .BBox !=nil {_ecb ,_gge :=_ca .GetArray (_ffb .BBox );if !_gge {return _acc ;};_baa ,_dgec :=_ca .GetNumbersAsFloat (_ecb .Elements ());if _dgec !=nil {return _dgec ;};if len (_baa )!=4{_eb .Log .Debug ("\u004c\u0065\u006e\u0020\u003d\u0020\u0025\u0064",len (_baa ));
return _af ;};_cg .DrawRectangle (_baa [0],_baa [1],_baa [2]-_baa [0],_baa [3]-_baa [1]);_cg .SetRGBA (1,0,0,1);_cg .Clip ();}else {_eb .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0052\u0065q\u0075\u0069\u0072e\u0064\u0020\u0042\u0042\u006f\u0078\u0020\u006d\u0069ss\u0069\u006e\u0067 \u006f\u006e \u0058\u004f\u0062\u006a\u0065\u0063t\u0020\u0046o\u0072\u006d");
};_fad =_bca .renderContentStream (_cg ,string (_bbf ),_afa );if _fad !=nil {return _fad ;};_cg .Pop ();};case "\u0042\u0049":if len (_cfb .Params )!=1{return _af ;};_dab ,_eadc :=_cfb .Params [0].(*_caa .ContentStreamInlineImage );if !_eadc {return nil ;
};_cgb ,_ffcd :=_dab .ToImage (_fde );if _ffcd !=nil {return _ffcd ;};_abb ,_ffcd :=_cgb .ToGoImage ();if _ffcd !=nil {return _ffcd ;};_dbe :=_abb .Bounds ();_cg .Push ();_cg .Scale (1.0/float64 (_dbe .Dx ()),-1.0/float64 (_dbe .Dy ()));_cg .DrawImageAnchored (_abb ,0,0,0,1);
_cg .Pop ();case "\u0042\u0054":_cga .Reset ();case "\u0045\u0054":_cga .Reset ();case "\u0054\u0072":if len (_cfb .Params )!=1{return _af ;};_gec ,_cfe :=_ca .GetNumberAsFloat (_cfb .Params [0]);if _cfe !=nil {return _cfe ;};_cga .Tr =_cc .TextRenderingMode (_gec );
case "\u0054\u004c":if len (_cfb .Params )!=1{return _af ;};_cea ,_ggd :=_ca .GetNumberAsFloat (_cfb .Params [0]);if _ggd !=nil {return _ggd ;};_cga .Tl =_cea ;case "\u0054\u0063":if len (_cfb .Params )!=1{return _af ;};_dfgb ,_abc :=_ca .GetNumberAsFloat (_cfb .Params [0]);
if _abc !=nil {return _abc ;};_eb .Log .Debug ("\u0054\u0063\u003a\u0020\u0025\u0076",_dfgb );_cga .Tc =_dfgb ;case "\u0054\u0077":if len (_cfb .Params )!=1{return _af ;};_eef ,_fae :=_ca .GetNumberAsFloat (_cfb .Params [0]);if _fae !=nil {return _fae ;
};_eb .Log .Debug ("\u0054\u0077\u003a\u0020\u0025\u0076",_eef );_cga .Tw =_eef ;case "\u0054\u007a":if len (_cfb .Params )!=1{return _af ;};_cec ,_caec :=_ca .GetNumberAsFloat (_cfb .Params [0]);if _caec !=nil {return _caec ;};_cga .Th =_cec ;case "\u0054\u0073":if len (_cfb .Params )!=1{return _af ;
};_cfbc ,_bff :=_ca .GetNumberAsFloat (_cfb .Params [0]);if _bff !=nil {return _bff ;};_cga .Ts =_cfbc ;case "\u0054\u0064":if len (_cfb .Params )!=2{return _af ;};_ceae ,_ccf :=_ca .GetNumbersAsFloat (_cfb .Params );if _ccf !=nil {return _ccf ;};_eb .Log .Debug ("\u0054\u0064\u003a\u0020\u0025\u0076",_ceae );
_cga .ProcTd (_ceae [0],_ceae [1]);case "\u0054\u0044":if len (_cfb .Params )!=2{return _af ;};_cge ,_daf :=_ca .GetNumbersAsFloat (_cfb .Params );if _daf !=nil {return _daf ;};_eb .Log .Debug ("\u0054\u0044\u003a\u0020\u0025\u0076",_cge );_cga .ProcTD (_cge [0],_cge [1]);
case "\u0054\u002a":_cga .ProcTStar ();case "\u0054\u006d":if len (_cfb .Params )!=6{return _af ;};_ae ,_aag :=_ca .GetNumbersAsFloat (_cfb .Params );if _aag !=nil {return _aag ;};_eb .Log .Debug ("\u0054\u0065x\u0074\u0020\u006da\u0074\u0072\u0069\u0078\u003a\u0020\u0025\u002b\u0076",_ae );
_cga .ProcTm (_ae [0],_ae [1],_ae [2],_ae [3],_ae [4],_ae [5]);case "\u0027":if len (_cfb .Params )!=1{return _af ;};_cfab ,_gde :=_ca .GetStringBytes (_cfb .Params [0]);if !_gde {return _acc ;};_eb .Log .Debug ("\u0027\u0020\u0073t\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_cfab ));
_cga .ProcQ (_cfab ,_cg );case "\u0022":if len (_cfb .Params )!=3{return _af ;};_cgfd ,_ddbg :=_ca .GetNumberAsFloat (_cfb .Params [0]);if _ddbg !=nil {return _ddbg ;};_fade ,_ddbg :=_ca .GetNumberAsFloat (_cfb .Params [1]);if _ddbg !=nil {return _ddbg ;
};_cffc ,_bea :=_ca .GetStringBytes (_cfb .Params [2]);if !_bea {return _acc ;};_cga .ProcDQ (_cffc ,_cgfd ,_fade ,_cg );case "\u0054\u006a":if len (_cfb .Params )!=1{return _af ;};_ddgb ,_efd :=_ca .GetStringBytes (_cfb .Params [0]);if !_efd {return _acc ;
};_eb .Log .Debug ("\u0054j\u0020s\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0060\u0025\u0073\u0060",string (_ddgb ));_cga .ProcTj (_ddgb ,_cg );case "\u0054\u004a":if len (_cfb .Params )!=1{return _af ;};_bgc ,_ceg :=_ca .GetArray (_cfb .Params [0]);
if !_ceg {_eb .Log .Debug ("\u0054\u0079\u0070\u0065\u003a\u0020\u0025\u0054",_bgc );return _acc ;};_eb .Log .Debug ("\u0054\u004a\u0020\u0061\u0072\u0072\u0061\u0079\u003a\u0020\u0025\u002b\u0076",_bgc );for _ ,_beaf :=range _bgc .Elements (){switch _dafd :=_beaf .(type ){case *_ca .PdfObjectString :if _dafd !=nil {_cga .ProcTj (_dafd .Bytes (),_cg );
};case *_ca .PdfObjectFloat ,*_ca .PdfObjectInteger :_cfbe ,_edaf :=_ca .GetNumberAsFloat (_dafd );if _edaf ==nil {_cga .Translate (-_cfbe *0.001*_cga .Tf .Size *_cga .Th /100.0,0);};};};case "\u0054\u0066":if len (_cfb .Params )!=2{return _af ;};_eb .Log .Debug ("\u0025\u0023\u0076",_cfb .Params );
_ace ,_bcd :=_ca .GetName (_cfb .Params [0]);if !_bcd ||_ace ==nil {_eb .Log .Debug ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0066\u006f\u006e\u0074\u0020\u006e\u0061m\u0065 \u006f\u0062\u006a\u0065\u0063\u0074\u003a \u0025\u0076",_cfb .Params [0]);
return _acc ;};_eb .Log .Debug ("\u0046\u006f\u006e\u0074\u0020\u006e\u0061\u006d\u0065\u003a\u0020\u0025\u0073",_ace .String ());_dbg ,_agec :=_ca .GetNumberAsFloat (_cfb .Params [1]);if _agec !=nil {_eb .Log .Debug ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0066\u006f\u006e\u0074\u0020\u0073\u0069z\u0065 \u006f\u0062\u006a\u0065\u0063\u0074\u003a \u0025\u0076",_cfb .Params [1]);
return _acc ;};_eb .Log .Debug ("\u0046\u006f\u006e\u0074\u0020\u0073\u0069\u007a\u0065\u003a\u0020\u0025\u0076",_dbg );_abg ,_de :=_fde .GetFontByName (*_ace );if !_de {_eb .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0046\u006f\u006e\u0074\u0020\u0025s\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064",_ace .String ());
return _e .New ("\u0066\u006f\u006e\u0074\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};_eb .Log .Debug ("\u0046\u006f\u006e\u0074\u003a\u0020\u0025\u0054",_abg );_cecc ,_bcd :=_ca .GetDict (_abg );if !_bcd {_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075l\u0064\u0020\u006e\u006f\u0074\u0020\u0067e\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0069\u0063\u0074");
return _acc ;};_ggcg ,_agec :=_ee .NewPdfFontFromPdfObject (_cecc );if _agec !=nil {_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u006c\u006f\u0061\u0064\u0020\u0066\u006fn\u0074\u0020\u0066\u0072\u006fm\u0020\u006fb\u006a\u0065\u0063\u0074");
return _agec ;};_dag :=_ggcg .BaseFont ();if _dag ==""{_dag =_ace .String ();};_faef ,_bcd :=_bgd [_dag ];if !_bcd {_faef ,_agec =_cc .NewTextFont (_ggcg ,_dbg );if _agec !=nil {_eb .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_agec );};
};if _faef ==nil {if len (_dag )> 7&&_dag [6]=='+'{_dag =_dag [7:];};_ddbgg :=[]string {_dag ,"\u0054i\u006de\u0073\u0020\u004e\u0065\u0077\u0020\u0052\u006f\u006d\u0061\u006e","\u0041\u0072\u0069a\u006c","D\u0065\u006a\u0061\u0056\u0075\u0020\u0053\u0061\u006e\u0073"};
for _ ,_gfeg :=range _ddbgg {_eb .Log .Debug ("\u0044\u0045\u0042\u0055\u0047\u003a \u0073\u0065\u0061\u0072\u0063\u0068\u0069\u006e\u0067\u0020\u0073\u0079\u0073t\u0065\u006d\u0020\u0066\u006f\u006e\u0074 \u0060\u0025\u0073\u0060",_gfeg );if _faef ,_bcd =_bgd [_gfeg ];
_bcd {break ;};_dfag :=_eggb .Match (_gfeg );if _dfag ==nil {_eb .Log .Debug ("c\u006f\u0075\u006c\u0064\u0020\u006eo\u0074\u0020\u0066\u0069\u006e\u0064\u0020\u0066\u006fn\u0074\u0020\u0066i\u006ce\u0020\u0025\u0073",_gfeg );continue ;};_faef ,_agec =_cc .NewTextFontFromPath (_dfag .Filename ,_dbg );
if _agec !=nil {_eb .Log .Debug ("c\u006f\u0075\u006c\u0064\u0020\u006eo\u0074\u0020\u006c\u006f\u0061\u0064\u0020\u0066\u006fn\u0074\u0020\u0066i\u006ce\u0020\u0025\u0073",_dfag .Filename );continue ;};_eb .Log .Debug ("\u0053\u0075\u0062\u0073\u0074\u0069t\u0075\u0074\u0069\u006e\u0067\u0020\u0066\u006f\u006e\u0074\u0020\u0025\u0073 \u0077\u0069\u0074\u0068\u0020\u0025\u0073 \u0028\u0025\u0073\u0029",_dag ,_dfag .Name ,_dfag .Filename );
_bgd [_gfeg ]=_faef ;break ;};};if _faef ==nil {_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020n\u006f\u0074\u0020\u0066\u0069\u006ed\u0020\u0061\u006e\u0079\u0020\u0073\u0075\u0069\u0074\u0061\u0062\u006c\u0065 \u0066\u006f\u006e\u0074");
return _e .New ("\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0066\u0069\u006e\u0064\u0020a\u006ey\u0020\u0073\u0075\u0069\u0074\u0061\u0062\u006c\u0065\u0020\u0066\u006f\u006e\u0074");};_cga .ProcTf (_faef .WithSize (_dbg ,_ggcg ));case "\u0042\u004d\u0043","\u0042\u0044\u0043":case "\u0045\u004d\u0043":default:_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0073u\u0070\u0070\u006f\u0072\u0074\u0065\u0064 \u006f\u0070\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u0073",_cfb .Operand );
};return nil ;});_eff =_afd .Process (_cad );if _eff !=nil {return _eff ;};return nil ;};

// Render converts the specified PDF page into an image and returns the result.
func (_bd *ImageDevice )Render (page *_ee .PdfPage )(_ed .Image ,error ){_dg ,_bg :=page .GetMediaBox ();if _bg !=nil {return nil ,_bg ;};_dg .Normalize ();_ac :=page .CropBox ;var _dga ,_cdf float64 ;if _ac !=nil {_ac .Normalize ();_dga ,_cdf =_ac .Width (),_ac .Height ();
};_cf :=page .Rotate ;_bdc ,_cab ,_ce ,_dfa :=_dg .Llx ,_dg .Lly ,_dg .Width (),_dg .Height ();_ege :=_df .IdentityMatrix ();if _cf !=nil &&*_cf %360!=0&&*_cf %90==0{_gd :=-float64 (*_cf );_bf :=_ecba (_ce ,_dfa ,_gd );_ege =_ege .Translate ((_bf .Width -_ce )/2+_ce /2,(_bf .Height -_dfa )/2+_dfa /2).Rotate (_gd *_eg .Pi /180).Translate (-_ce /2,-_dfa /2);
_ce ,_dfa =_bf .Width ,_bf .Height ;if _ac !=nil {_cdc :=_ecba (_dga ,_cdf ,_gd );_dga ,_cdf =_cdc .Width ,_cdc .Height ;};};if _bdc !=0||_cab !=0{_ege =_ege .Translate (-_bdc ,-_cab );};_bd ._gfd =1.0;if _bd .OutputWidth !=0{_ea :=_ce ;if _ac !=nil {_ea =_dga ;
};_bd ._gfd =float64 (_bd .OutputWidth )/_ea ;_ce ,_dfa ,_dga ,_cdf =_ce *_bd ._gfd ,_dfa *_bd ._gfd ,_dga *_bd ._gfd ,_cdf *_bd ._gfd ;_ege =_df .ScaleMatrix (_bd ._gfd ,_bd ._gfd ).Mult (_ege );};_dfc :=_cd .NewContext (int (_ce ),int (_dfa ));if _fb :=_bd .renderPage (_dfc ,page ,_ege );
_fb !=nil {return nil ,_fb ;};_aa :=_dfc .Image ();if _ac !=nil {_eac ,_dd :=(_ac .Llx -_bdc )*_bd ._gfd ,(_ac .Lly -_cab )*_bd ._gfd ;_egg :=_ed .Rect (0,0,int (_dga ),int (_cdf ));_cce :=_ed .Pt (int (_eac ),int (_dfa -_dd -_cdf ));_bb :=_ed .NewRGBA (_egg );
_g .Draw (_bb ,_egg ,_aa ,_cce ,_g .Src );_aa =_bb ;};return _aa ,nil ;};func _dde (_gee *_ee .Image ,_bag _fa .Color )_ed .Image {_cbc ,_bfga :=int (_gee .Width ),int (_gee .Height );_fafg :=_ed .NewRGBA (_ed .Rect (0,0,_cbc ,_bfga ));for _eeee :=0;_eeee < _bfga ;
_eeee ++{for _effa :=0;_effa < _cbc ;_effa ++{_fea ,_fee :=_gee .ColorAt (_effa ,_eeee );if _fee !=nil {_eb .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_effa ,_eeee );
continue ;};_fdg ,_cffe ,_fdeg ,_ :=_fea .RGBA ();var _bbb _fa .Color ;if _fdg +_cffe +_fdeg ==0{_bbb =_fa .Transparent ;}else {_bbb =_bag ;};_fafg .Set (_effa ,_eeee ,_bbb );};};return _fafg ;};

// ImageDevice is used to render PDF pages to image targets.
type ImageDevice struct{renderer ;

// OutputWidth represents the width of the rendered images in pixels.
// The heights of the output images are calculated based on the selected
// width and the original height of each rendered page.
OutputWidth int ;};func _edad (_eddb string ,_abgf _ed .Image )error {_ggdf ,_agecg :=_fd .Create (_eddb );if _agecg !=nil {return _agecg ;};defer _ggdf .Close ();return _b .Encode (_ggdf ,_abgf );};func _gfag (_afc _ca .PdfObject ,_aef _fa .Color )(_ed .Image ,error ){_cag ,_fab :=_ca .GetStream (_afc );
if !_fab {return nil ,nil ;};_aed ,_dcf :=_ee .NewXObjectImageFromStream (_cag );if _dcf !=nil {return nil ,_dcf ;};_adc ,_dcf :=_aed .ToImage ();if _dcf !=nil {return nil ,_dcf ;};return _dde (_adc ,_aef ),nil ;};func _cfc (_fgg _ca .PdfObject ,_gbb _fa .Color )(_ed .Image ,error ){_bbeb ,_aeg :=_ca .GetStream (_fgg );
if !_aeg {return nil ,nil ;};_debg ,_fcg :=_ee .NewXObjectImageFromStream (_bbeb );if _fcg !=nil {return nil ,_fcg ;};_fce ,_fcg :=_debg .ToImage ();if _fcg !=nil {return nil ,_fcg ;};return _gbe (_fce ,_gbb ),nil ;};func _gbe (_afb *_ee .Image ,_daa _fa .Color )_ed .Image {_gfdc ,_fdf :=int (_afb .Width ),int (_afb .Height );
_abaa :=_ed .NewRGBA (_ed .Rect (0,0,_gfdc ,_fdf ));for _feg :=0;_feg < _fdf ;_feg ++{for _bcc :=0;_bcc < _gfdc ;_bcc ++{_acd ,_dffc :=_afb .ColorAt (_bcc ,_feg );if _dffc !=nil {_eb .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_bcc ,_feg );
continue ;};_debd ,_bde ,_dbc ,_ :=_acd .RGBA ();var _dage _fa .Color ;if _debd +_bde +_dbc ==0{_dage =_daa ;}else {_dage =_fa .Transparent ;};_abaa .Set (_bcc ,_feg ,_dage );};};return _abaa ;};func (_gfg renderer )renderPage (_fg _cc .Context ,_ef *_ee .PdfPage ,_db _df .Matrix )error {_ddg ,_bc :=_ef .GetAllContentStreams ();
if _bc !=nil {return _bc ;};if _gfa :=_db ;!_gfa .Identity (){_ddg =_be .Sprintf ("%\u002e\u0032\u0066\u0020\u0025\u002e2\u0066\u0020\u0025\u002e\u0032\u0066 \u0025\u002e\u0032\u0066\u0020\u0025\u002e2\u0066\u0020\u0025\u002e\u0032\u0066\u0020\u0063\u006d\u0020%\u0073",_gfa [0],_gfa [1],_gfa [3],_gfa [4],_gfa [6],_gfa [7],_ddg );
};_fg .Translate (0,float64 (_fg .Height ()));_fg .Scale (1,-1);_fg .Push ();_fg .SetRGBA (1,1,1,1);_fg .DrawRectangle (0,0,float64 (_fg .Width ()),float64 (_fg .Height ()));_fg .Fill ();_fg .Pop ();_fg .SetLineWidth (1.0);_fg .SetRGBA (0,0,0,1);return _gfg .renderContentStream (_fg ,_ddg ,_ef .Resources );
};type renderer struct{_gfd float64 };

// RenderToPath converts the specified PDF page into an image and saves the
// result at the specified location.
func (_gf *ImageDevice )RenderToPath (page *_ee .PdfPage ,outputPath string )error {_fe ,_cae :=_gf .Render (page );if _cae !=nil {return _cae ;};_fbb :=_ff .ToLower (_a .Ext (outputPath ));if _fbb ==""{return _e .New ("\u0063\u006ful\u0064\u0020\u006eo\u0074\u0020\u0072\u0065cog\u006eiz\u0065\u0020\u006f\u0075\u0074\u0070\u0075t \u0066\u0069\u006c\u0065\u0020\u0074\u0079p\u0065");
};switch _fbb {case "\u002e\u0070\u006e\u0067":return _edad (outputPath ,_fe );case "\u002e\u006a\u0070\u0067","\u002e\u006a\u0070e\u0067":return _cadd (outputPath ,_fe ,100);};return _be .Errorf ("\u0075\u006e\u0072\u0065\u0063\u006fg\u006e\u0069\u007a\u0065\u0064\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020f\u0069\u006c\u0065\u0020\u0074\u0079\u0070e\u003a\u0020\u0025\u0073",_fbb );
};func _cadd (_aceg string ,_afad _ed .Image ,_dcc int )error {_gdc ,_deb :=_fd .Create (_aceg );if _deb !=nil {return _deb ;};defer _gdc .Close ();return _d .Encode (_gdc ,_afad ,&_d .Options {Quality :_dcc });};func _ecba (_ggfe ,_gda ,_ded float64 )_beg .BoundingBox {return _beg .Path {Points :[]_beg .Point {_beg .NewPoint (0,0).Rotate (_ded ),_beg .NewPoint (_ggfe ,0).Rotate (_ded ),_beg .NewPoint (0,_gda ).Rotate (_ded ),_beg .NewPoint (_ggfe ,_gda ).Rotate (_ded )}}.GetBoundingBox ();
};
//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package fdf provides support for loading form field data from Form Field Data (FDF) files.
package fdf ;import (_a "bufio";_dea "bytes";_df "encoding/hex";_b "errors";_dec "fmt";_ag "github.com/unidoc/unipdf/v3/common";_cg "github.com/unidoc/unipdf/v3/core";_abe "io";_ab "os";_de "regexp";_bg "sort";_d "strconv";_c "strings";);var _cgfd =_de .MustCompile ("^\u005c\u0073\u002a\u0028\\d\u002b)\u005c\u0073\u002b\u0028\u005cd\u002b\u0029\u005c\u0073\u002b\u0052");var _gad =_de .MustCompile ("\u0025\u0025\u0045O\u0046");var _gc =_de .MustCompile ("\u0028\u005c\u0064\u002b)\\\u0073\u002b\u0028\u005c\u0064\u002b\u0029\u005c\u0073\u002b\u006f\u0062\u006a");func (_eb *fdfParser )skipComments ()error {if _ ,_dbd :=_eb .skipSpaces ();_dbd !=nil {return _dbd ;};_ed :=true ;for {_ece ,_gdd :=_eb ._faa .Peek (1);if _gdd !=nil {_ag .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_gdd .Error ());return _gdd ;};if _ed &&_ece [0]!='%'{return nil ;};_ed =false ;if (_ece [0]!='\r')&&(_ece [0]!='\n'){_eb ._faa .ReadByte ();}else {break ;};};return _eb .skipComments ();};func (_eca *fdfParser )parseArray ()(*_cg .PdfObjectArray ,error ){_afd :=_cg .MakeArray ();_eca ._faa .ReadByte ();for {_eca .skipSpaces ();_bef ,_dgef :=_eca ._faa .Peek (1);if _dgef !=nil {return _afd ,_dgef ;};if _bef [0]==']'{_eca ._faa .ReadByte ();break ;};_dceb ,_dgef :=_eca .parseObject ();if _dgef !=nil {return _afd ,_dgef ;};_afd .Append (_dceb );};return _afd ,nil ;};func (_ff *fdfParser )parseHexString ()(*_cg .PdfObjectString ,error ){_ff ._faa .ReadByte ();var _egd _dea .Buffer ;for {_bbd ,_bd :=_ff ._faa .Peek (1);if _bd !=nil {return _cg .MakeHexString (""),_bd ;};if _bbd [0]=='>'{_ff ._faa .ReadByte ();break ;};_bdb ,_ :=_ff ._faa .ReadByte ();if !_cg .IsWhiteSpace (_bdb ){_egd .WriteByte (_bdb );};};if _egd .Len ()%2==1{_egd .WriteRune ('0');};_bbc ,_gcce :=_df .DecodeString (_egd .String ());if _gcce !=nil {_ag .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0078\u0020\u0073\u0074r\u0069\u006e\u0067\u003a\u0020\u0027\u0025\u0073\u0027 \u002d\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u0061n\u0020\u0065\u006d\u0070\u0074\u0079 \u0073\u0074\u0072i\u006e\u0067",_egd .String ());return _cg .MakeHexString (""),nil ;};return _cg .MakeHexString (string (_bbc )),nil ;};

// FieldValues implements interface model.FieldValueProvider.
// Returns a map of field names to values (PdfObjects).
func (fdf *Data )FieldValues ()(map[string ]_cg .PdfObject ,error ){_cdd ,_abc :=fdf .FieldDictionaries ();if _abc !=nil {return nil ,_abc ;};var _aa []string ;for _cgf :=range _cdd {_aa =append (_aa ,_cgf );};_bg .Strings (_aa );_dc :=map[string ]_cg .PdfObject {};for _ ,_ga :=range _aa {_cgc :=_cdd [_ga ];_aad :=_cg .TraceToDirectObject (_cgc .Get ("\u0056"));_dc [_ga ]=_aad ;};return _dc ,nil ;};

// LoadFromPath loads FDF form data from file path `fdfPath`.
func LoadFromPath (fdfPath string )(*Data ,error ){_ef ,_cc :=_ab .Open (fdfPath );if _cc !=nil {return nil ,_cc ;};defer _ef .Close ();return Load (_ef );};func (_abdc *fdfParser )parseFdfVersion ()(int ,int ,error ){_abdc ._gbe .Seek (0,_abe .SeekStart );_dbf :=20;_ggd :=make ([]byte ,_dbf );_abdc ._gbe .Read (_ggd );_fce :=_fcf .FindStringSubmatch (string (_ggd ));if len (_fce )< 3{_efb ,_decg ,_bec :=_abdc .seekFdfVersionTopDown ();if _bec !=nil {_ag .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065\u0063\u006f\u0076\u0065\u0072\u0079\u0020\u002d\u0020\u0075n\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0066\u0069nd\u0020\u0076\u0065r\u0073i\u006f\u006e");return 0,0,_bec ;};return _efb ,_decg ,nil ;};_fd ,_gaa :=_d .Atoi (_fce [1]);if _gaa !=nil {return 0,0,_gaa ;};_bfb ,_gaa :=_d .Atoi (_fce [2]);if _gaa !=nil {return 0,0,_gaa ;};_ag .Log .Debug ("\u0046\u0064\u0066\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020%\u0064\u002e\u0025\u0064",_fd ,_bfb );return _fd ,_bfb ,nil ;};func (_afg *fdfParser )readTextLine ()(string ,error ){var _ccb _dea .Buffer ;for {_ccfc ,_dge :=_afg ._faa .Peek (1);if _dge !=nil {_ag .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_dge .Error ());return _ccb .String (),_dge ;};if (_ccfc [0]!='\r')&&(_ccfc [0]!='\n'){_ada ,_ :=_afg ._faa .ReadByte ();_ccb .WriteByte (_ada );}else {break ;};};return _ccb .String (),nil ;};func (_fcgf *fdfParser )parseNumber ()(_cg .PdfObject ,error ){return _cg .ParseNumber (_fcgf ._faa )};func (_ggg *fdfParser )parseNull ()(_cg .PdfObjectNull ,error ){_ ,_deg :=_ggg ._faa .Discard (4);return _cg .PdfObjectNull {},_deg ;};func (_aed *fdfParser )setFileOffset (_ec int64 ){_aed ._gbe .Seek (_ec ,_abe .SeekStart );_aed ._faa =_a .NewReader (_aed ._gbe );};type fdfParser struct{_gfb int ;_cge int ;_db map[int64 ]_cg .PdfObject ;_gbe _abe .ReadSeeker ;_faa *_a .Reader ;_cb int64 ;_bba *_cg .PdfObjectDictionary ;};func _afe (_ceg _abe .ReadSeeker )(*fdfParser ,error ){_cfd :=&fdfParser {};_cfd ._gbe =_ceg ;_cfd ._db =map[int64 ]_cg .PdfObject {};_efcg ,_ee ,_fae :=_cfd .parseFdfVersion ();if _fae !=nil {_ag .Log .Error ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0076e\u0072\u0073\u0069o\u006e:\u0020\u0025\u0076",_fae );return nil ,_fae ;};_cfd ._gfb =_efcg ;_cfd ._cge =_ee ;_fae =_cfd .parse ();return _cfd ,_fae ;};func (_afc *fdfParser )parseObject ()(_cg .PdfObject ,error ){_ag .Log .Trace ("\u0052e\u0061d\u0020\u0064\u0069\u0072\u0065c\u0074\u0020o\u0062\u006a\u0065\u0063\u0074");_afc .skipSpaces ();for {_dfb ,_efgg :=_afc ._faa .Peek (2);if _efgg !=nil {return nil ,_efgg ;};_ag .Log .Trace ("\u0050e\u0065k\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_dfb ));if _dfb [0]=='/'{_bgdb ,_cae :=_afc .parseName ();_ag .Log .Trace ("\u002d\u003e\u004ea\u006d\u0065\u003a\u0020\u0027\u0025\u0073\u0027",_bgdb );return &_bgdb ,_cae ;}else if _dfb [0]=='('{_ag .Log .Trace ("\u002d>\u0053\u0074\u0072\u0069\u006e\u0067!");return _afc .parseString ();}else if _dfb [0]=='['{_ag .Log .Trace ("\u002d\u003e\u0041\u0072\u0072\u0061\u0079\u0021");return _afc .parseArray ();}else if (_dfb [0]=='<')&&(_dfb [1]=='<'){_ag .Log .Trace ("\u002d>\u0044\u0069\u0063\u0074\u0021");return _afc .parseDict ();}else if _dfb [0]=='<'{_ag .Log .Trace ("\u002d\u003e\u0048\u0065\u0078\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0021");return _afc .parseHexString ();}else if _dfb [0]=='%'{_afc .readComment ();_afc .skipSpaces ();}else {_ag .Log .Trace ("\u002d\u003eN\u0075\u006d\u0062e\u0072\u0020\u006f\u0072\u0020\u0072\u0065\u0066\u003f");_dfb ,_ =_afc ._faa .Peek (15);_bge :=string (_dfb );_ag .Log .Trace ("\u0050\u0065\u0065k\u0020\u0073\u0074\u0072\u003a\u0020\u0025\u0073",_bge );if (len (_bge )> 3)&&(_bge [:4]=="\u006e\u0075\u006c\u006c"){_afa ,_ded :=_afc .parseNull ();return &_afa ,_ded ;}else if (len (_bge )> 4)&&(_bge [:5]=="\u0066\u0061\u006cs\u0065"){_gab ,_fcbg :=_afc .parseBool ();return &_gab ,_fcbg ;}else if (len (_bge )> 3)&&(_bge [:4]=="\u0074\u0072\u0075\u0065"){_dac ,_cbb :=_afc .parseBool ();return &_dac ,_cbb ;};_fcab :=_cgfd .FindStringSubmatch (_bge );if len (_fcab )> 1{_dfb ,_ =_afc ._faa .ReadBytes ('R');_ag .Log .Trace ("\u002d\u003e\u0020\u0021\u0052\u0065\u0066\u003a\u0020\u0027\u0025\u0073\u0027",string (_dfb [:]));_ba ,_bgeg :=_dbde (string (_dfb ));return &_ba ,_bgeg ;};_adb :=_ecg .FindStringSubmatch (_bge );if len (_adb )> 1{_ag .Log .Trace ("\u002d\u003e\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u0021");return _afc .parseNumber ();};_adb =_bfd .FindStringSubmatch (_bge );if len (_adb )> 1{_ag .Log .Trace ("\u002d\u003e\u0020\u0045xp\u006f\u006e\u0065\u006e\u0074\u0069\u0061\u006c\u0020\u004e\u0075\u006d\u0062\u0065r\u0021");_ag .Log .Trace ("\u0025\u0020\u0073",_adb );return _afc .parseNumber ();};_ag .Log .Debug ("\u0045R\u0052\u004f\u0052\u0020U\u006e\u006b\u006e\u006f\u0077n\u0020(\u0070e\u0065\u006b\u0020\u0022\u0025\u0073\u0022)",_bge );return nil ,_b .New ("\u006f\u0062\u006a\u0065\u0063t\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0065\u0072\u0072\u006fr\u0020\u002d\u0020\u0075\u006e\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0070\u0061\u0074\u0074\u0065\u0072\u006e");};};};var _bfd =_de .MustCompile ("\u005e\u005b\u005c+-\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e]\u002b)\u0065[\u005c+\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e\u005d\u002b\u0029");

// Data represents forms data format (FDF) file data.
type Data struct{_fe *_cg .PdfObjectDictionary ;_fc *_cg .PdfObjectArray ;};func (_daa *fdfParser )seekToEOFMarker (_cbe int64 )error {_gcb :=int64 (0);_cdf :=int64 (1000);for _gcb < _cbe {if _cbe <=(_cdf +_gcb ){_cdf =_cbe -_gcb ;};_ ,_ffc :=_daa ._gbe .Seek (-_gcb -_cdf ,_abe .SeekEnd );if _ffc !=nil {return _ffc ;};_dfd :=make ([]byte ,_cdf );_daa ._gbe .Read (_dfd );_ag .Log .Trace ("\u004c\u006f\u006f\u006bi\u006e\u0067\u0020\u0066\u006f\u0072\u0020\u0045\u004f\u0046 \u006da\u0072\u006b\u0065\u0072\u003a\u0020\u0022%\u0073\u0022",string (_dfd ));_gdc :=_gad .FindAllStringIndex (string (_dfd ),-1);if _gdc !=nil {_dacd :=_gdc [len (_gdc )-1];_ag .Log .Trace ("\u0049\u006e\u0064\u003a\u0020\u0025\u0020\u0064",_gdc );_daa ._gbe .Seek (-_gcb -_cdf +int64 (_dacd [0]),_abe .SeekEnd );return nil ;};_ag .Log .Debug ("\u0057\u0061\u0072\u006e\u0069\u006eg\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006b\u0065\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0021\u0020\u002d\u0020\u0063\u006f\u006e\u0074\u0069\u006e\u0075\u0065\u0020s\u0065e\u006b\u0069\u006e\u0067");_gcb +=_cdf ;};_ag .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006be\u0072 \u0077\u0061\u0073\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");return _b .New ("\u0045\u004f\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};func (_ebc *fdfParser )parseString ()(*_cg .PdfObjectString ,error ){_ebc ._faa .ReadByte ();var _edf _dea .Buffer ;_fed :=1;for {_ccfe ,_abf :=_ebc ._faa .Peek (1);if _abf !=nil {return _cg .MakeString (_edf .String ()),_abf ;};if _ccfe [0]=='\\'{_ebc ._faa .ReadByte ();_dfg ,_febb :=_ebc ._faa .ReadByte ();if _febb !=nil {return _cg .MakeString (_edf .String ()),_febb ;};if _cg .IsOctalDigit (_dfg ){_bgb ,_afb :=_ebc ._faa .Peek (2);if _afb !=nil {return _cg .MakeString (_edf .String ()),_afb ;};var _cag []byte ;_cag =append (_cag ,_dfg );for _ ,_dgg :=range _bgb {if _cg .IsOctalDigit (_dgg ){_cag =append (_cag ,_dgg );}else {break ;};};_ebc ._faa .Discard (len (_cag )-1);_ag .Log .Trace ("\u004e\u0075\u006d\u0065ri\u0063\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0022\u0025\u0073\u0022",_cag );_gdbc ,_afb :=_d .ParseUint (string (_cag ),8,32);if _afb !=nil {return _cg .MakeString (_edf .String ()),_afb ;};_edf .WriteByte (byte (_gdbc ));continue ;};switch _dfg {case 'n':_edf .WriteRune ('\n');case 'r':_edf .WriteRune ('\r');case 't':_edf .WriteRune ('\t');case 'b':_edf .WriteRune ('\b');case 'f':_edf .WriteRune ('\f');case '(':_edf .WriteRune ('(');case ')':_edf .WriteRune (')');case '\\':_edf .WriteRune ('\\');};continue ;}else if _ccfe [0]=='('{_fed ++;}else if _ccfe [0]==')'{_fed --;if _fed ==0{_ebc ._faa .ReadByte ();break ;};};_ade ,_ :=_ebc ._faa .ReadByte ();_edf .WriteByte (_ade );};return _cg .MakeString (_edf .String ()),nil ;};func (_cgef *fdfParser )parseName ()(_cg .PdfObjectName ,error ){var _dce _dea .Buffer ;_gcc :=false ;for {_ca ,_agge :=_cgef ._faa .Peek (1);if _agge ==_abe .EOF {break ;};if _agge !=nil {return _cg .PdfObjectName (_dce .String ()),_agge ;};if !_gcc {if _ca [0]=='/'{_gcc =true ;_cgef ._faa .ReadByte ();}else if _ca [0]=='%'{_cgef .readComment ();_cgef .skipSpaces ();}else {_ag .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020N\u0061\u006d\u0065\u0020\u0073\u0074\u0061\u0072\u0074\u0069\u006e\u0067\u0020w\u0069\u0074\u0068\u0020\u0025\u0073\u0020(\u0025\u0020\u0078\u0029",_ca ,_ca );return _cg .PdfObjectName (_dce .String ()),_dec .Errorf ("\u0069n\u0076a\u006c\u0069\u0064\u0020\u006ea\u006d\u0065:\u0020\u0028\u0025\u0063\u0029",_ca [0]);};}else {if _cg .IsWhiteSpace (_ca [0]){break ;}else if (_ca [0]=='/')||(_ca [0]=='[')||(_ca [0]=='(')||(_ca [0]==']')||(_ca [0]=='<')||(_ca [0]=='>'){break ;}else if _ca [0]=='#'{_abd ,_fec :=_cgef ._faa .Peek (3);if _fec !=nil {return _cg .PdfObjectName (_dce .String ()),_fec ;};_cgef ._faa .Discard (3);_gbf ,_fec :=_df .DecodeString (string (_abd [1:3]));if _fec !=nil {return _cg .PdfObjectName (_dce .String ()),_fec ;};_dce .Write (_gbf );}else {_caf ,_ :=_cgef ._faa .ReadByte ();_dce .WriteByte (_caf );};};};return _cg .PdfObjectName (_dce .String ()),nil ;};func (_gb *fdfParser )getFileOffset ()int64 {_gf ,_ :=_gb ._gbe .Seek (0,_abe .SeekCurrent );_gf -=int64 (_gb ._faa .Buffered ());return _gf ;};var _fcf =_de .MustCompile ("\u0025F\u0044F\u002d\u0028\u005c\u0064\u0029\u005c\u002e\u0028\u005c\u0064\u0029");func (_bcg *fdfParser )parseDict ()(*_cg .PdfObjectDictionary ,error ){_ag .Log .Trace ("\u0052\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020D\u0069\u0063\u0074\u0021");_bag :=_cg .MakeDict ();_dcd ,_ :=_bcg ._faa .ReadByte ();if _dcd !='<'{return nil ,_b .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};_dcd ,_ =_bcg ._faa .ReadByte ();if _dcd !='<'{return nil ,_b .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};for {_bcg .skipSpaces ();_bcg .skipComments ();_eab ,_edb :=_bcg ._faa .Peek (2);if _edb !=nil {return nil ,_edb ;};_ag .Log .Trace ("D\u0069c\u0074\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_eab ),string (_eab ));if (_eab [0]=='>')&&(_eab [1]=='>'){_ag .Log .Trace ("\u0045\u004f\u0046\u0020\u0064\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079");_bcg ._faa .ReadByte ();_bcg ._faa .ReadByte ();break ;};_ag .Log .Trace ("\u0050a\u0072s\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0021");_agc ,_edb :=_bcg .parseName ();_ag .Log .Trace ("\u004be\u0079\u003a\u0020\u0025\u0073",_agc );if _edb !=nil {_ag .Log .Debug ("E\u0052\u0052\u004f\u0052\u0020\u0052e\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u006ea\u006d\u0065\u0020e\u0072r\u0020\u0025\u0073",_edb );return nil ,_edb ;};if len (_agc )> 4&&_agc [len (_agc )-4:]=="\u006e\u0075\u006c\u006c"{_bfg :=_agc [0:len (_agc )-4];_ag .Log .Debug ("\u0054\u0061\u006b\u0069n\u0067\u0020\u0063\u0061\u0072\u0065\u0020\u006f\u0066\u0020n\u0075l\u006c\u0020\u0062\u0075\u0067\u0020\u0028%\u0073\u0029",_agc );_ag .Log .Debug ("\u004e\u0065\u0077\u0020ke\u0079\u0020\u0022\u0025\u0073\u0022\u0020\u003d\u0020\u006e\u0075\u006c\u006c",_bfg );_bcg .skipSpaces ();_ead ,_ :=_bcg ._faa .Peek (1);if _ead [0]=='/'{_bag .Set (_bfg ,_cg .MakeNull ());continue ;};};_bcg .skipSpaces ();_cdda ,_edb :=_bcg .parseObject ();if _edb !=nil {return nil ,_edb ;};_bag .Set (_agc ,_cdda );_ag .Log .Trace ("\u0064\u0069\u0063\u0074\u005b\u0025\u0073\u005d\u0020\u003d\u0020\u0025\u0073",_agc ,_cdda .String ());};_ag .Log .Trace ("\u0072\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020\u0044\u0069\u0063\u0074\u0021");return _bag ,nil ;};func (_fg *fdfParser )skipSpaces ()(int ,error ){_efg :=0;for {_eg ,_dbg :=_fg ._faa .ReadByte ();if _dbg !=nil {return 0,_dbg ;};if _cg .IsWhiteSpace (_eg ){_efg ++;}else {_fg ._faa .UnreadByte ();break ;};};return _efg ,nil ;};

// Load loads FDF form data from `r`.
func Load (r _abe .ReadSeeker )(*Data ,error ){_e ,_fa :=_afe (r );if _fa !=nil {return nil ,_fa ;};_ae ,_fa :=_e .Root ();if _fa !=nil {return nil ,_fa ;};_cd ,_bf :=_cg .GetArray (_ae .Get ("\u0046\u0069\u0065\u006c\u0064\u0073"));if !_bf {return nil ,_b .New ("\u0066\u0069\u0065\u006c\u0064\u0073\u0020\u006d\u0069s\u0073\u0069\u006e\u0067");};return &Data {_fc :_cd ,_fe :_ae },nil ;};func _baf (_ecad string )(*fdfParser ,error ){_dfe :=fdfParser {};_gaf :=[]byte (_ecad );_bgcg :=_dea .NewReader (_gaf );_dfe ._gbe =_bgcg ;_dfe ._db =map[int64 ]_cg .PdfObject {};_dcf :=_a .NewReader (_bgcg );_dfe ._faa =_dcf ;_dfe ._cb =int64 (len (_ecad ));return &_dfe ,_dfe .parse ();};func (_feg *fdfParser )seekFdfVersionTopDown ()(int ,int ,error ){_feg ._gbe .Seek (0,_abe .SeekStart );_feg ._faa =_a .NewReader (_feg ._gbe );_caa :=20;_ddd :=make ([]byte ,_caa );for {_gac ,_gfee :=_feg ._faa .ReadByte ();if _gfee !=nil {if _gfee ==_abe .EOF {break ;}else {return 0,0,_gfee ;};};if _cg .IsDecimalDigit (_gac )&&_ddd [_caa -1]=='.'&&_cg .IsDecimalDigit (_ddd [_caa -2])&&_ddd [_caa -3]=='-'&&_ddd [_caa -4]=='F'&&_ddd [_caa -5]=='D'&&_ddd [_caa -6]=='P'{_befb :=int (_ddd [_caa -2]-'0');_fea :=int (_gac -'0');return _befb ,_fea ,nil ;};_ddd =append (_ddd [1:_caa ],_gac );};return 0,0,_b .New ("\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};

// FieldDictionaries returns a map of field names to field dictionaries.
func (fdf *Data )FieldDictionaries ()(map[string ]*_cg .PdfObjectDictionary ,error ){_gd :=map[string ]*_cg .PdfObjectDictionary {};for _aee :=0;_aee < fdf ._fc .Len ();_aee ++{_gdb ,_cdg :=_cg .GetDict (fdf ._fc .Get (_aee ));if _cdg {_ad ,_ :=_cg .GetString (_gdb .Get ("\u0054"));if _ad !=nil {_gd [_ad .Str ()]=_gdb ;};};};return _gd ,nil ;};var _ecg =_de .MustCompile ("\u005e\u005b\u005c\u002b\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d9\u002e\u005d\u002b\u0029");func (_cga *fdfParser )readAtLeast (_bgd []byte ,_fcg int )(int ,error ){_da :=_fcg ;_fca :=0;_feb :=0;for _da > 0{_bb ,_aae :=_cga ._faa .Read (_bgd [_fca :]);if _aae !=nil {_ag .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0046\u0061i\u006c\u0065\u0064\u0020\u0072\u0065\u0061d\u0069\u006e\u0067\u0020\u0028\u0025\u0064\u003b\u0025\u0064\u0029\u0020\u0025\u0073",_bb ,_feb ,_aae .Error ());return _fca ,_b .New ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065a\u0064\u0069\u006e\u0067");};_feb ++;_fca +=_bb ;_da -=_bb ;};return _fca ,nil ;};func (_bc *fdfParser )parseBool ()(_cg .PdfObjectBool ,error ){_efc ,_efcf :=_bc ._faa .Peek (4);if _efcf !=nil {return _cg .PdfObjectBool (false ),_efcf ;};if (len (_efc )>=4)&&(string (_efc [:4])=="\u0074\u0072\u0075\u0065"){_bc ._faa .Discard (4);return _cg .PdfObjectBool (true ),nil ;};_efc ,_efcf =_bc ._faa .Peek (5);if _efcf !=nil {return _cg .PdfObjectBool (false ),_efcf ;};if (len (_efc )>=5)&&(string (_efc [:5])=="\u0066\u0061\u006cs\u0065"){_bc ._faa .Discard (5);return _cg .PdfObjectBool (false ),nil ;};return _cg .PdfObjectBool (false ),_b .New ("\u0075n\u0065\u0078\u0070\u0065c\u0074\u0065\u0064\u0020\u0062o\u006fl\u0065a\u006e\u0020\u0073\u0074\u0072\u0069\u006eg");};func (_daf *fdfParser )parse ()error {_daf ._gbe .Seek (0,_abe .SeekStart );_daf ._faa =_a .NewReader (_daf ._gbe );for {_daf .skipComments ();_bgg ,_bdg :=_daf ._faa .Peek (20);if _bdg !=nil {_ag .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");return _bdg ;};if _c .HasPrefix (string (_bgg ),"\u0074r\u0061\u0069\u006c\u0065\u0072"){_daf ._faa .Discard (7);_daf .skipSpaces ();_daf .skipComments ();_gdcb ,_ :=_daf .parseDict ();_daf ._bba =_gdcb ;break ;};_cbf :=_gc .FindStringSubmatchIndex (string (_bgg ));if len (_cbf )< 6{_ag .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_bgg ));return _b .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");};_bagg ,_bdg :=_daf .parseIndirectObject ();if _bdg !=nil {return _bdg ;};switch _agd :=_bagg .(type ){case *_cg .PdfIndirectObject :_daf ._db [_agd .ObjectNumber ]=_agd ;case *_cg .PdfObjectStream :_daf ._db [_agd .ObjectNumber ]=_agd ;default:return _b .New ("\u0074\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");};};return nil ;};

// Root returns the Root of the FDF document.
func (_fbe *fdfParser )Root ()(*_cg .PdfObjectDictionary ,error ){if _fbe ._bba !=nil {if _gcg ,_ecc :=_fbe .trace (_fbe ._bba .Get ("\u0052\u006f\u006f\u0074")).(*_cg .PdfObjectDictionary );_ecc {if _fcaf ,_bbgf :=_fbe .trace (_gcg .Get ("\u0046\u0044\u0046")).(*_cg .PdfObjectDictionary );_bbgf {return _fcaf ,nil ;};};};var _fafc []int64 ;for _gafg :=range _fbe ._db {_fafc =append (_fafc ,_gafg );};_bg .Slice (_fafc ,func (_ac ,_effg int )bool {return _fafc [_ac ]< _fafc [_effg ]});for _ ,_dbgf :=range _fafc {_ccbd :=_fbe ._db [_dbgf ];if _bff ,_dag :=_fbe .trace (_ccbd ).(*_cg .PdfObjectDictionary );_dag {if _abbg ,_dbc :=_fbe .trace (_bff .Get ("\u0046\u0044\u0046")).(*_cg .PdfObjectDictionary );_dbc {return _abbg ,nil ;};};};return nil ,_b .New ("\u0046\u0044\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};func (_ge *fdfParser )readComment ()(string ,error ){var _eag _dea .Buffer ;_ ,_gef :=_ge .skipSpaces ();if _gef !=nil {return _eag .String (),_gef ;};_ccf :=true ;for {_af ,_agg :=_ge ._faa .Peek (1);if _agg !=nil {_ag .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_agg .Error ());return _eag .String (),_agg ;};if _ccf &&_af [0]!='%'{return _eag .String (),_b .New ("c\u006f\u006d\u006d\u0065\u006e\u0074 \u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0073\u0074a\u0072\u0074\u0020w\u0069t\u0068\u0020\u0025");};_ccf =false ;if (_af [0]!='\r')&&(_af [0]!='\n'){_be ,_ :=_ge ._faa .ReadByte ();_eag .WriteByte (_be );}else {break ;};};return _eag .String (),nil ;};func (_dfdf *fdfParser )parseIndirectObject ()(_cg .PdfObject ,error ){_bgeb :=_cg .PdfIndirectObject {};_ag .Log .Trace ("\u002dR\u0065a\u0064\u0020\u0069\u006e\u0064i\u0072\u0065c\u0074\u0020\u006f\u0062\u006a");_ce ,_baa :=_dfdf ._faa .Peek (20);if _baa !=nil {_ag .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");return &_bgeb ,_baa ;};_ag .Log .Trace ("\u0028\u0069\u006edi\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0020\u0070\u0065\u0065\u006b\u0020\u0022\u0025\u0073\u0022",string (_ce ));_fcfe :=_gc .FindStringSubmatchIndex (string (_ce ));if len (_fcfe )< 6{_ag .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_ce ));return &_bgeb ,_b .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");};_dfdf ._faa .Discard (_fcfe [0]);_ag .Log .Trace ("O\u0066\u0066\u0073\u0065\u0074\u0073\u0020\u0025\u0020\u0064",_fcfe );_ebf :=_fcfe [1]-_fcfe [0];_eff :=make ([]byte ,_ebf );_ ,_baa =_dfdf .readAtLeast (_eff ,_ebf );if _baa !=nil {_ag .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0061\u0062l\u0065\u0020\u0074\u006f\u0020\u0072\u0065\u0061\u0064\u0020-\u0020\u0025\u0073",_baa );return nil ,_baa ;};_ag .Log .Trace ("\u0074\u0065\u0078t\u006c\u0069\u006e\u0065\u003a\u0020\u0025\u0073",_eff );_fbd :=_gc .FindStringSubmatch (string (_eff ));if len (_fbd )< 3{_ag .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_eff ));return &_bgeb ,_b .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");};_gag ,_ :=_d .Atoi (_fbd [1]);_cdc ,_ :=_d .Atoi (_fbd [2]);_bgeb .ObjectNumber =int64 (_gag );_bgeb .GenerationNumber =int64 (_cdc );for {_bgdbg ,_bgdg :=_dfdf ._faa .Peek (2);if _bgdg !=nil {return &_bgeb ,_bgdg ;};_ag .Log .Trace ("I\u006ed\u002e\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_bgdbg ),string (_bgdbg ));if _cg .IsWhiteSpace (_bgdbg [0]){_dfdf .skipSpaces ();}else if _bgdbg [0]=='%'{_dfdf .skipComments ();}else if (_bgdbg [0]=='<')&&(_bgdbg [1]=='<'){_ag .Log .Trace ("\u0043\u0061\u006c\u006c\u0020\u0050\u0061\u0072\u0073e\u0044\u0069\u0063\u0074");_bgeb .PdfObject ,_bgdg =_dfdf .parseDict ();_ag .Log .Trace ("\u0045\u004f\u0046\u0020Ca\u006c\u006c\u0020\u0050\u0061\u0072\u0073\u0065\u0044\u0069\u0063\u0074\u003a\u0020%\u0076",_bgdg );if _bgdg !=nil {return &_bgeb ,_bgdg ;};_ag .Log .Trace ("\u0050\u0061\u0072\u0073\u0065\u0064\u0020\u0064\u0069\u0063t\u0069\u006f\u006e\u0061\u0072\u0079\u002e.\u002e\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");}else if (_bgdbg [0]=='/')||(_bgdbg [0]=='(')||(_bgdbg [0]=='[')||(_bgdbg [0]=='<'){_bgeb .PdfObject ,_bgdg =_dfdf .parseObject ();if _bgdg !=nil {return &_bgeb ,_bgdg ;};_ag .Log .Trace ("P\u0061\u0072\u0073\u0065\u0064\u0020o\u0062\u006a\u0065\u0063\u0074\u0020\u002e\u002e\u002e \u0066\u0069\u006ei\u0073h\u0065\u0064\u002e");}else {if _bgdbg [0]=='e'{_fff ,_adac :=_dfdf .readTextLine ();if _adac !=nil {return nil ,_adac ;};if len (_fff )>=6&&_fff [0:6]=="\u0065\u006e\u0064\u006f\u0062\u006a"{break ;};}else if _bgdbg [0]=='s'{_bgdbg ,_ =_dfdf ._faa .Peek (10);if string (_bgdbg [:6])=="\u0073\u0074\u0072\u0065\u0061\u006d"{_bbg :=6;if len (_bgdbg )> 6{if _cg .IsWhiteSpace (_bgdbg [_bbg ])&&_bgdbg [_bbg ]!='\r'&&_bgdbg [_bbg ]!='\n'{_ag .Log .Debug ("\u004e\u006fn\u002d\u0063\u006f\u006e\u0066\u006f\u0072\u006d\u0061\u006e\u0074\u0020\u0046\u0044\u0046\u0020\u006e\u006f\u0074 \u0065\u006e\u0064\u0069\u006e\u0067 \u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006c\u0069\u006e\u0065\u0020\u0070\u0072o\u0070\u0065r\u006c\u0079\u0020\u0077i\u0074\u0068\u0020\u0045\u004fL\u0020\u006d\u0061\u0072\u006b\u0065\u0072");_bbg ++;};if _bgdbg [_bbg ]=='\r'{_bbg ++;if _bgdbg [_bbg ]=='\n'{_bbg ++;};}else if _bgdbg [_bbg ]=='\n'{_bbg ++;};};_dfdf ._faa .Discard (_bbg );_egb ,_fcgb :=_bgeb .PdfObject .(*_cg .PdfObjectDictionary );if !_fcgb {return nil ,_b .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006di\u0073s\u0069\u006e\u0067\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");};_ag .Log .Trace ("\u0053\u0074\u0072\u0065\u0061\u006d\u0020\u0064\u0069c\u0074\u0020\u0025\u0073",_egb );_gefca ,_gcf :=_egb .Get ("\u004c\u0065\u006e\u0067\u0074\u0068").(*_cg .PdfObjectInteger );if !_gcf {return nil ,_b .New ("\u0073\u0074re\u0061\u006d\u0020l\u0065\u006e\u0067\u0074h n\u0065ed\u0073\u0020\u0074\u006f\u0020\u0062\u0065 a\u006e\u0020\u0069\u006e\u0074\u0065\u0067e\u0072");};_dgd :=*_gefca ;if _dgd < 0{return nil ,_b .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006e\u0065\u0065\u0064\u0073\u0020\u0074\u006f \u0062e\u0020\u006c\u006f\u006e\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030");};if int64 (_dgd )> _dfdf ._cb {_ag .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0053t\u0072\u0065\u0061\u006d\u0020l\u0065\u006e\u0067\u0074\u0068\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u006c\u0061\u0072\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0066\u0069\u006c\u0065\u0020\u0073\u0069\u007a\u0065");return nil ,_b .New ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0073t\u0072\u0065\u0061m\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u002c\u0020la\u0072\u0067\u0065r\u0020\u0074h\u0061\u006e\u0020\u0066\u0069\u006ce\u0020\u0073i\u007a\u0065");};_dde :=make ([]byte ,_dgd );_ ,_bgdg =_dfdf .readAtLeast (_dde ,int (_dgd ));if _bgdg !=nil {_ag .Log .Debug ("E\u0052\u0052\u004f\u0052 s\u0074r\u0065\u0061\u006d\u0020\u0028%\u0064\u0029\u003a\u0020\u0025\u0058",len (_dde ),_dde );_ag .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_bgdg );return nil ,_bgdg ;};_edfg :=_cg .PdfObjectStream {};_edfg .Stream =_dde ;_edfg .PdfObjectDictionary =_bgeb .PdfObject .(*_cg .PdfObjectDictionary );_edfg .ObjectNumber =_bgeb .ObjectNumber ;_edfg .GenerationNumber =_bgeb .GenerationNumber ;_dfdf .skipSpaces ();_dfdf ._faa .Discard (9);_dfdf .skipSpaces ();return &_edfg ,nil ;};};_bgeb .PdfObject ,_bgdg =_dfdf .parseObject ();return &_bgeb ,_bgdg ;};};_ag .Log .Trace ("\u0052\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0021");return &_bgeb ,nil ;};func (_acf *fdfParser )trace (_dgf _cg .PdfObject )_cg .PdfObject {switch _ffcc :=_dgf .(type ){case *_cg .PdfObjectReference :_fdd ,_bad :=_acf ._db [_ffcc .ObjectNumber ].(*_cg .PdfIndirectObject );if _bad {return _fdd .PdfObject ;};_ag .Log .Debug ("\u0054\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");return nil ;case *_cg .PdfIndirectObject :return _ffcc .PdfObject ;};return _dgf ;};func _dbde (_aeb string )(_cg .PdfObjectReference ,error ){_abcf :=_cg .PdfObjectReference {};_dd :=_cgfd .FindStringSubmatch (_aeb );if len (_dd )< 3{_ag .Log .Debug ("\u0045\u0072\u0072or\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0072\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");return _abcf ,_b .New ("\u0075n\u0061\u0062\u006c\u0065 \u0074\u006f\u0020\u0070\u0061r\u0073e\u0020r\u0065\u0066\u0065\u0072\u0065\u006e\u0063e");};_ccfed ,_dcc :=_d .Atoi (_dd [1]);if _dcc !=nil {_ag .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0070a\u0072\u0073\u0069n\u0067\u0020\u006fb\u006a\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072 '\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0075\u006d\u0020\u003d\u0020\u0030",_dd [1]);return _abcf ,nil ;};_abcf .ObjectNumber =int64 (_ccfed );_ecb ,_dcc :=_d .Atoi (_dd [2]);if _dcc !=nil {_ag .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061r\u0073\u0069\u006e\u0067\u0020g\u0065\u006e\u0065\u0072\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0027\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u0067\u0065\u006e\u0020\u003d\u0020\u0030",_dd [2]);return _abcf ,nil ;};_abcf .GenerationNumber =int64 (_ecb );return _abcf ,nil ;};
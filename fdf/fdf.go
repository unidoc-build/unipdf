//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package fdf provides support for loading form field data from Form Field Data (FDF) files.
package fdf ;import (_ge "bufio";_cd "bytes";_gb "encoding/hex";_f "errors";_d "fmt";_cf "github.com/unidoc/unipdf/v3/common";_bb "github.com/unidoc/unipdf/v3/core";_gee "io";_b "os";_c "regexp";_db "sort";_ae "strconv";_g "strings";);func (_ca *fdfParser )setFileOffset (_caa int64 ){_ca ._ag .Seek (_caa ,_gee .SeekStart );
_ca ._fcc =_ge .NewReader (_ca ._ag );};func (_cga *fdfParser )parseObject ()(_bb .PdfObject ,error ){_cf .Log .Trace ("\u0052e\u0061d\u0020\u0064\u0069\u0072\u0065c\u0074\u0020o\u0062\u006a\u0065\u0063\u0074");_cga .skipSpaces ();for {_bfd ,_gd :=_cga ._fcc .Peek (2);
if _gd !=nil {return nil ,_gd ;};_cf .Log .Trace ("\u0050e\u0065k\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_bfd ));if _bfd [0]=='/'{_fcd ,_dab :=_cga .parseName ();_cf .Log .Trace ("\u002d\u003e\u004ea\u006d\u0065\u003a\u0020\u0027\u0025\u0073\u0027",_fcd );
return &_fcd ,_dab ;}else if _bfd [0]=='('{_cf .Log .Trace ("\u002d>\u0053\u0074\u0072\u0069\u006e\u0067!");return _cga .parseString ();}else if _bfd [0]=='['{_cf .Log .Trace ("\u002d\u003e\u0041\u0072\u0072\u0061\u0079\u0021");return _cga .parseArray ();
}else if (_bfd [0]=='<')&&(_bfd [1]=='<'){_cf .Log .Trace ("\u002d>\u0044\u0069\u0063\u0074\u0021");return _cga .parseDict ();}else if _bfd [0]=='<'{_cf .Log .Trace ("\u002d\u003e\u0048\u0065\u0078\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0021");return _cga .parseHexString ();
}else if _bfd [0]=='%'{_cga .readComment ();_cga .skipSpaces ();}else {_cf .Log .Trace ("\u002d\u003eN\u0075\u006d\u0062e\u0072\u0020\u006f\u0072\u0020\u0072\u0065\u0066\u003f");_bfd ,_ =_cga ._fcc .Peek (15);_cbb :=string (_bfd );_cf .Log .Trace ("\u0050\u0065\u0065k\u0020\u0073\u0074\u0072\u003a\u0020\u0025\u0073",_cbb );
if (len (_cbb )> 3)&&(_cbb [:4]=="\u006e\u0075\u006c\u006c"){_daf ,_ffc :=_cga .parseNull ();return &_daf ,_ffc ;}else if (len (_cbb )> 4)&&(_cbb [:5]=="\u0066\u0061\u006cs\u0065"){_dee ,_bbg :=_cga .parseBool ();return &_dee ,_bbg ;}else if (len (_cbb )> 3)&&(_cbb [:4]=="\u0074\u0072\u0075\u0065"){_aag ,_dfd :=_cga .parseBool ();
return &_aag ,_dfd ;};_gfee :=_dcc .FindStringSubmatch (_cbb );if len (_gfee )> 1{_bfd ,_ =_cga ._fcc .ReadBytes ('R');_cf .Log .Trace ("\u002d\u003e\u0020\u0021\u0052\u0065\u0066\u003a\u0020\u0027\u0025\u0073\u0027",string (_bfd [:]));_ddc ,_badd :=_ef (string (_bfd ));
return &_ddc ,_badd ;};_bgb :=_fcf .FindStringSubmatch (_cbb );if len (_bgb )> 1{_cf .Log .Trace ("\u002d\u003e\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u0021");return _cga .parseNumber ();};_bgb =_ac .FindStringSubmatch (_cbb );if len (_bgb )> 1{_cf .Log .Trace ("\u002d\u003e\u0020\u0045xp\u006f\u006e\u0065\u006e\u0074\u0069\u0061\u006c\u0020\u004e\u0075\u006d\u0062\u0065r\u0021");
_cf .Log .Trace ("\u0025\u0020\u0073",_bgb );return _cga .parseNumber ();};_cf .Log .Debug ("\u0045R\u0052\u004f\u0052\u0020U\u006e\u006b\u006e\u006f\u0077n\u0020(\u0070e\u0065\u006b\u0020\u0022\u0025\u0073\u0022)",_cbb );return nil ,_f .New ("\u006f\u0062\u006a\u0065\u0063t\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0065\u0072\u0072\u006fr\u0020\u002d\u0020\u0075\u006e\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0070\u0061\u0074\u0074\u0065\u0072\u006e");
};};};

// FieldDictionaries returns a map of field names to field dictionaries.
func (fdf *Data )FieldDictionaries ()(map[string ]*_bb .PdfObjectDictionary ,error ){_cda :=map[string ]*_bb .PdfObjectDictionary {};for _fa :=0;_fa < fdf ._fb .Len ();_fa ++{_dbc ,_de :=_bb .GetDict (fdf ._fb .Get (_fa ));if _de {_faa ,_ :=_bb .GetString (_dbc .Get ("\u0054"));
if _faa !=nil {_cda [_faa .Str ()]=_dbc ;};};};return _cda ,nil ;};

// Root returns the Root of the FDF document.
func (_add *fdfParser )Root ()(*_bb .PdfObjectDictionary ,error ){if _add ._gg !=nil {if _dca ,_gdg :=_add .trace (_add ._gg .Get ("\u0052\u006f\u006f\u0074")).(*_bb .PdfObjectDictionary );_gdg {if _aae ,_baed :=_add .trace (_dca .Get ("\u0046\u0044\u0046")).(*_bb .PdfObjectDictionary );
_baed {return _aae ,nil ;};};};var _cfba []int64 ;for _dbgd :=range _add ._cg {_cfba =append (_cfba ,_dbgd );};_db .Slice (_cfba ,func (_agg ,_cec int )bool {return _cfba [_agg ]< _cfba [_cec ]});for _ ,_gaa :=range _cfba {_aegf :=_add ._cg [_gaa ];if _cgaa ,_ffcb :=_add .trace (_aegf ).(*_bb .PdfObjectDictionary );
_ffcb {if _fag ,_bcfa :=_add .trace (_cgaa .Get ("\u0046\u0044\u0046")).(*_bb .PdfObjectDictionary );_bcfa {return _fag ,nil ;};};};return nil ,_f .New ("\u0046\u0044\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};func (_dg *fdfParser )parseName ()(_bb .PdfObjectName ,error ){var _bag _cd .Buffer ;
_bgfa :=false ;for {_fed ,_ebc :=_dg ._fcc .Peek (1);if _ebc ==_gee .EOF {break ;};if _ebc !=nil {return _bb .PdfObjectName (_bag .String ()),_ebc ;};if !_bgfa {if _fed [0]=='/'{_bgfa =true ;_dg ._fcc .ReadByte ();}else if _fed [0]=='%'{_dg .readComment ();
_dg .skipSpaces ();}else {_cf .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020N\u0061\u006d\u0065\u0020\u0073\u0074\u0061\u0072\u0074\u0069\u006e\u0067\u0020w\u0069\u0074\u0068\u0020\u0025\u0073\u0020(\u0025\u0020\u0078\u0029",_fed ,_fed );return _bb .PdfObjectName (_bag .String ()),_d .Errorf ("\u0069n\u0076a\u006c\u0069\u0064\u0020\u006ea\u006d\u0065:\u0020\u0028\u0025\u0063\u0029",_fed [0]);
};}else {if _bb .IsWhiteSpace (_fed [0]){break ;}else if (_fed [0]=='/')||(_fed [0]=='[')||(_fed [0]=='(')||(_fed [0]==']')||(_fed [0]=='<')||(_fed [0]=='>'){break ;}else if _fed [0]=='#'{_ff ,_fg :=_dg ._fcc .Peek (3);if _fg !=nil {return _bb .PdfObjectName (_bag .String ()),_fg ;
};_dg ._fcc .Discard (3);_eef ,_fg :=_gb .DecodeString (string (_ff [1:3]));if _fg !=nil {return _bb .PdfObjectName (_bag .String ()),_fg ;};_bag .Write (_eef );}else {_ggg ,_ :=_dg ._fcc .ReadByte ();_bag .WriteByte (_ggg );};};};return _bb .PdfObjectName (_bag .String ()),nil ;
};var _fdc =_c .MustCompile ("\u0025F\u0044F\u002d\u0028\u005c\u0064\u0029\u005c\u002e\u0028\u005c\u0064\u0029");func (_bage *fdfParser )parseNumber ()(_bb .PdfObject ,error ){return _bb .ParseNumber (_bage ._fcc )};func (_ab *fdfParser )readTextLine ()(string ,error ){var _cbc _cd .Buffer ;
for {_fcb ,_gcc :=_ab ._fcc .Peek (1);if _gcc !=nil {_cf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_gcc .Error ());return _cbc .String (),_gcc ;};if (_fcb [0]!='\r')&&(_fcb [0]!='\n'){_ebf ,_ :=_ab ._fcc .ReadByte ();_cbc .WriteByte (_ebf );
}else {break ;};};return _cbc .String (),nil ;};func (_aeg *fdfParser )parseNull ()(_bb .PdfObjectNull ,error ){_ ,_dgab :=_aeg ._fcc .Discard (4);return _bb .PdfObjectNull {},_dgab ;};

// FieldValues implements interface model.FieldValueProvider.
// Returns a map of field names to values (PdfObjects).
func (fdf *Data )FieldValues ()(map[string ]_bb .PdfObject ,error ){_ec ,_dd :=fdf .FieldDictionaries ();if _dd !=nil {return nil ,_dd ;};var _dbb []string ;for _dbd :=range _ec {_dbb =append (_dbb ,_dbd );};_db .Strings (_dbb );_fec :=map[string ]_bb .PdfObject {};
for _ ,_aa :=range _dbb {_cb :=_ec [_aa ];_ce :=_bb .TraceToDirectObject (_cb .Get ("\u0056"));_fec [_aa ]=_ce ;};return _fec ,nil ;};func _ef (_cfagg string )(_bb .PdfObjectReference ,error ){_dga :=_bb .PdfObjectReference {};_cea :=_dcc .FindStringSubmatch (_cfagg );
if len (_cea )< 3{_cf .Log .Debug ("\u0045\u0072\u0072or\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0072\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");return _dga ,_f .New ("\u0075n\u0061\u0062\u006c\u0065 \u0074\u006f\u0020\u0070\u0061r\u0073e\u0020r\u0065\u0066\u0065\u0072\u0065\u006e\u0063e");
};_fgb ,_dad :=_ae .Atoi (_cea [1]);if _dad !=nil {_cf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0070a\u0072\u0073\u0069n\u0067\u0020\u006fb\u006a\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072 '\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0075\u006d\u0020\u003d\u0020\u0030",_cea [1]);
return _dga ,nil ;};_dga .ObjectNumber =int64 (_fgb );_dbdd ,_dad :=_ae .Atoi (_cea [2]);if _dad !=nil {_cf .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061r\u0073\u0069\u006e\u0067\u0020g\u0065\u006e\u0065\u0072\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0027\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u0067\u0065\u006e\u0020\u003d\u0020\u0030",_cea [2]);
return _dga ,nil ;};_dga .GenerationNumber =int64 (_dbdd );return _dga ,nil ;};func (_acc *fdfParser )parseArray ()(*_bb .PdfObjectArray ,error ){_bd :=_bb .MakeArray ();_acc ._fcc .ReadByte ();for {_acc .skipSpaces ();_cfag ,_gca :=_acc ._fcc .Peek (1);
if _gca !=nil {return _bd ,_gca ;};if _cfag [0]==']'{_acc ._fcc .ReadByte ();break ;};_eag ,_gca :=_acc .parseObject ();if _gca !=nil {return _bd ,_gca ;};_bd .Append (_eag );};return _bd ,nil ;};var _be =_c .MustCompile ("\u0028\u005c\u0064\u002b)\\\u0073\u002b\u0028\u005c\u0064\u002b\u0029\u005c\u0073\u002b\u006f\u0062\u006a");
func (_cba *fdfParser )skipComments ()error {if _ ,_caag :=_cba .skipSpaces ();_caag !=nil {return _caag ;};_egg :=true ;for {_ea ,_bgf :=_cba ._fcc .Peek (1);if _bgf !=nil {_cf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_bgf .Error ());
return _bgf ;};if _egg &&_ea [0]!='%'{return nil ;};_egg =false ;if (_ea [0]!='\r')&&(_ea [0]!='\n'){_cba ._fcc .ReadByte ();}else {break ;};};return _cba .skipComments ();};var _fcf =_c .MustCompile ("\u005e\u005b\u005c\u002b\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d9\u002e\u005d\u002b\u0029");
func (_bga *fdfParser )parseBool ()(_bb .PdfObjectBool ,error ){_agc ,_dgf :=_bga ._fcc .Peek (4);if _dgf !=nil {return _bb .PdfObjectBool (false ),_dgf ;};if (len (_agc )>=4)&&(string (_agc [:4])=="\u0074\u0072\u0075\u0065"){_bga ._fcc .Discard (4);return _bb .PdfObjectBool (true ),nil ;
};_agc ,_dgf =_bga ._fcc .Peek (5);if _dgf !=nil {return _bb .PdfObjectBool (false ),_dgf ;};if (len (_agc )>=5)&&(string (_agc [:5])=="\u0066\u0061\u006cs\u0065"){_bga ._fcc .Discard (5);return _bb .PdfObjectBool (false ),nil ;};return _bb .PdfObjectBool (false ),_f .New ("\u0075n\u0065\u0078\u0070\u0065c\u0074\u0065\u0064\u0020\u0062o\u006fl\u0065a\u006e\u0020\u0073\u0074\u0072\u0069\u006eg");
};func _fagb (_eac _gee .ReadSeeker )(*fdfParser ,error ){_aec :=&fdfParser {};_aec ._ag =_eac ;_aec ._cg =map[int64 ]_bb .PdfObject {};_cde ,_adb ,_accd :=_aec .parseFdfVersion ();if _accd !=nil {_cf .Log .Error ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0076e\u0072\u0073\u0069o\u006e:\u0020\u0025\u0076",_accd );
return nil ,_accd ;};_aec ._dea =_cde ;_aec ._dde =_adb ;_accd =_aec .parse ();return _aec ,_accd ;};

// LoadFromPath loads FDF form data from file path `fdfPath`.
func LoadFromPath (fdfPath string )(*Data ,error ){_cfa ,_gbd :=_b .Open (fdfPath );if _gbd !=nil {return nil ,_gbd ;};defer _cfa .Close ();return Load (_cfa );};func (_dgb *fdfParser )parse ()error {_dgb ._ag .Seek (0,_gee .SeekStart );_dgb ._fcc =_ge .NewReader (_dgb ._ag );
for {_dgb .skipComments ();_eba ,_geda :=_dgb ._fcc .Peek (20);if _geda !=nil {_cf .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return _geda ;};if _g .HasPrefix (string (_eba ),"\u0074r\u0061\u0069\u006c\u0065\u0072"){_dgb ._fcc .Discard (7);_dgb .skipSpaces ();_dgb .skipComments ();_gcbc ,_ :=_dgb .parseDict ();_dgb ._gg =_gcbc ;break ;};_cfbaf :=_be .FindStringSubmatchIndex (string (_eba ));
if len (_cfbaf )< 6{_cf .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_eba ));
return _f .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_ded ,_geda :=_dgb .parseIndirectObject ();if _geda !=nil {return _geda ;};switch _dgd :=_ded .(type ){case *_bb .PdfIndirectObject :_dgb ._cg [_dgd .ObjectNumber ]=_dgd ;case *_bb .PdfObjectStream :_dgb ._cg [_dgd .ObjectNumber ]=_dgd ;default:return _f .New ("\u0074\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
};};return nil ;};func (_gfa *fdfParser )parseDict ()(*_bb .PdfObjectDictionary ,error ){_cf .Log .Trace ("\u0052\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020D\u0069\u0063\u0074\u0021");_age :=_bb .MakeDict ();_bbe ,_ :=_gfa ._fcc .ReadByte ();
if _bbe !='<'{return nil ,_f .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};_bbe ,_ =_gfa ._fcc .ReadByte ();if _bbe !='<'{return nil ,_f .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};for {_gfa .skipSpaces ();
_gfa .skipComments ();_fga ,_fea :=_gfa ._fcc .Peek (2);if _fea !=nil {return nil ,_fea ;};_cf .Log .Trace ("D\u0069c\u0074\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_fga ),string (_fga ));if (_fga [0]=='>')&&(_fga [1]=='>'){_cf .Log .Trace ("\u0045\u004f\u0046\u0020\u0064\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079");
_gfa ._fcc .ReadByte ();_gfa ._fcc .ReadByte ();break ;};_cf .Log .Trace ("\u0050a\u0072s\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0021");_caf ,_fea :=_gfa .parseName ();_cf .Log .Trace ("\u004be\u0079\u003a\u0020\u0025\u0073",_caf );
if _fea !=nil {_cf .Log .Debug ("E\u0052\u0052\u004f\u0052\u0020\u0052e\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u006ea\u006d\u0065\u0020e\u0072r\u0020\u0025\u0073",_fea );return nil ,_fea ;};if len (_caf )> 4&&_caf [len (_caf )-4:]=="\u006e\u0075\u006c\u006c"{_dgg :=_caf [0:len (_caf )-4];
_cf .Log .Debug ("\u0054\u0061\u006b\u0069n\u0067\u0020\u0063\u0061\u0072\u0065\u0020\u006f\u0066\u0020n\u0075l\u006c\u0020\u0062\u0075\u0067\u0020\u0028%\u0073\u0029",_caf );_cf .Log .Debug ("\u004e\u0065\u0077\u0020ke\u0079\u0020\u0022\u0025\u0073\u0022\u0020\u003d\u0020\u006e\u0075\u006c\u006c",_dgg );
_gfa .skipSpaces ();_bbbd ,_ :=_gfa ._fcc .Peek (1);if _bbbd [0]=='/'{_age .Set (_dgg ,_bb .MakeNull ());continue ;};};_gfa .skipSpaces ();_fedb ,_fea :=_gfa .parseObject ();if _fea !=nil {return nil ,_fea ;};_age .Set (_caf ,_fedb );_cf .Log .Trace ("\u0064\u0069\u0063\u0074\u005b\u0025\u0073\u005d\u0020\u003d\u0020\u0025\u0073",_caf ,_fedb .String ());
};_cf .Log .Trace ("\u0072\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020\u0044\u0069\u0063\u0074\u0021");return _age ,nil ;};

// Data represents forms data format (FDF) file data.
type Data struct{_ba *_bb .PdfObjectDictionary ;_fb *_bb .PdfObjectArray ;};var _ac =_c .MustCompile ("\u005e\u005b\u005c+-\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e]\u002b)\u0065[\u005c+\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e\u005d\u002b\u0029");
type fdfParser struct{_dea int ;_dde int ;_cg map[int64 ]_bb .PdfObject ;_ag _gee .ReadSeeker ;_fcc *_ge .Reader ;_cede int64 ;_gg *_bb .PdfObjectDictionary ;};func (_fbd *fdfParser )getFileOffset ()int64 {_ee ,_ :=_fbd ._ag .Seek (0,_gee .SeekCurrent );
_ee -=int64 (_fbd ._fcc .Buffered ());return _ee ;};func (_ebb *fdfParser )readComment ()(string ,error ){var _cfe _cd .Buffer ;_ ,_ceb :=_ebb .skipSpaces ();if _ceb !=nil {return _cfe .String (),_ceb ;};_bbd :=true ;for {_ecc ,_af :=_ebb ._fcc .Peek (1);
if _af !=nil {_cf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_af .Error ());return _cfe .String (),_af ;};if _bbd &&_ecc [0]!='%'{return _cfe .String (),_f .New ("c\u006f\u006d\u006d\u0065\u006e\u0074 \u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0073\u0074a\u0072\u0074\u0020w\u0069t\u0068\u0020\u0025");
};_bbd =false ;if (_ecc [0]!='\r')&&(_ecc [0]!='\n'){_gfe ,_ :=_ebb ._fcc .ReadByte ();_cfe .WriteByte (_gfe );}else {break ;};};return _cfe .String (),nil ;};

// Load loads FDF form data from `r`.
func Load (r _gee .ReadSeeker )(*Data ,error ){_gf ,_bg :=_fagb (r );if _bg !=nil {return nil ,_bg ;};_e ,_bg :=_gf .Root ();if _bg !=nil {return nil ,_bg ;};_bc ,_dba :=_bb .GetArray (_e .Get ("\u0046\u0069\u0065\u006c\u0064\u0073"));if !_dba {return nil ,_f .New ("\u0066\u0069\u0065\u006c\u0064\u0073\u0020\u006d\u0069s\u0073\u0069\u006e\u0067");
};return &Data {_fb :_bc ,_ba :_e },nil ;};func (_ege *fdfParser )seekToEOFMarker (_cdf int64 )error {_bagf :=int64 (0);_eed :=int64 (1000);for _bagf < _cdf {if _cdf <=(_eed +_bagf ){_eed =_cdf -_bagf ;};_ ,_deb :=_ege ._ag .Seek (-_bagf -_eed ,_gee .SeekEnd );
if _deb !=nil {return _deb ;};_bdc :=make ([]byte ,_eed );_ege ._ag .Read (_bdc );_cf .Log .Trace ("\u004c\u006f\u006f\u006bi\u006e\u0067\u0020\u0066\u006f\u0072\u0020\u0045\u004f\u0046 \u006da\u0072\u006b\u0065\u0072\u003a\u0020\u0022%\u0073\u0022",string (_bdc ));
_gbe :=_dc .FindAllStringIndex (string (_bdc ),-1);if _gbe !=nil {_cbf :=_gbe [len (_gbe )-1];_cf .Log .Trace ("\u0049\u006e\u0064\u003a\u0020\u0025\u0020\u0064",_gbe );_ege ._ag .Seek (-_bagf -_eed +int64 (_cbf [0]),_gee .SeekEnd );return nil ;};_cf .Log .Debug ("\u0057\u0061\u0072\u006e\u0069\u006eg\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006b\u0065\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0021\u0020\u002d\u0020\u0063\u006f\u006e\u0074\u0069\u006e\u0075\u0065\u0020s\u0065e\u006b\u0069\u006e\u0067");
_bagf +=_eed ;};_cf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006be\u0072 \u0077\u0061\u0073\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");return _f .New ("\u0045\u004f\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};func (_cag *fdfParser )parseString ()(*_bb .PdfObjectString ,error ){_cag ._fcc .ReadByte ();var _fdb _cd .Buffer ;_dead :=1;for {_cfb ,_bef :=_cag ._fcc .Peek (1);if _bef !=nil {return _bb .MakeString (_fdb .String ()),_bef ;};if _cfb [0]=='\\'{_cag ._fcc .ReadByte ();
_bae ,_adc :=_cag ._fcc .ReadByte ();if _adc !=nil {return _bb .MakeString (_fdb .String ()),_adc ;};if _bb .IsOctalDigit (_bae ){_cebf ,_cdc :=_cag ._fcc .Peek (2);if _cdc !=nil {return _bb .MakeString (_fdb .String ()),_cdc ;};var _gae []byte ;_gae =append (_gae ,_bae );
for _ ,_dcb :=range _cebf {if _bb .IsOctalDigit (_dcb ){_gae =append (_gae ,_dcb );}else {break ;};};_cag ._fcc .Discard (len (_gae )-1);_cf .Log .Trace ("\u004e\u0075\u006d\u0065ri\u0063\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0022\u0025\u0073\u0022",_gae );
_geb ,_cdc :=_ae .ParseUint (string (_gae ),8,32);if _cdc !=nil {return _bb .MakeString (_fdb .String ()),_cdc ;};_fdb .WriteByte (byte (_geb ));continue ;};switch _bae {case 'n':_fdb .WriteRune ('\n');case 'r':_fdb .WriteRune ('\r');case 't':_fdb .WriteRune ('\t');
case 'b':_fdb .WriteRune ('\b');case 'f':_fdb .WriteRune ('\f');case '(':_fdb .WriteRune ('(');case ')':_fdb .WriteRune (')');case '\\':_fdb .WriteRune ('\\');};continue ;}else if _cfb [0]=='('{_dead ++;}else if _cfb [0]==')'{_dead --;if _dead ==0{_cag ._fcc .ReadByte ();
break ;};};_ceg ,_ :=_cag ._fcc .ReadByte ();_fdb .WriteByte (_ceg );};return _bb .MakeString (_fdb .String ()),nil ;};func (_bcg *fdfParser )parseFdfVersion ()(int ,int ,error ){_bcg ._ag .Seek (0,_gee .SeekStart );_bab :=20;_gfaa :=make ([]byte ,_bab );
_bcg ._ag .Read (_gfaa );_badc :=_fdc .FindStringSubmatch (string (_gfaa ));if len (_badc )< 3{_cge ,_efg ,_def :=_bcg .seekFdfVersionTopDown ();if _def !=nil {_cf .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065\u0063\u006f\u0076\u0065\u0072\u0079\u0020\u002d\u0020\u0075n\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0066\u0069nd\u0020\u0076\u0065r\u0073i\u006f\u006e");
return 0,0,_def ;};return _cge ,_efg ,nil ;};_gce ,_fge :=_ae .Atoi (_badc [1]);if _fge !=nil {return 0,0,_fge ;};_eec ,_fge :=_ae .Atoi (_badc [2]);if _fge !=nil {return 0,0,_fge ;};_cf .Log .Debug ("\u0046\u0064\u0066\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020%\u0064\u002e\u0025\u0064",_gce ,_eec );
return _gce ,_eec ,nil ;};func (_egb *fdfParser )parseHexString ()(*_bb .PdfObjectString ,error ){_egb ._fcc .ReadByte ();var _ed _cd .Buffer ;for {_gea ,_adf :=_egb ._fcc .Peek (1);if _adf !=nil {return _bb .MakeHexString (""),_adf ;};if _gea [0]=='>'{_egb ._fcc .ReadByte ();
break ;};_bad ,_ :=_egb ._fcc .ReadByte ();if !_bb .IsWhiteSpace (_bad ){_ed .WriteByte (_bad );};};if _ed .Len ()%2==1{_ed .WriteRune ('0');};_deg ,_bfg :=_gb .DecodeString (_ed .String ());if _bfg !=nil {_cf .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0078\u0020\u0073\u0074r\u0069\u006e\u0067\u003a\u0020\u0027\u0025\u0073\u0027 \u002d\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u0061n\u0020\u0065\u006d\u0070\u0074\u0079 \u0073\u0074\u0072i\u006e\u0067",_ed .String ());
return _bb .MakeHexString (""),nil ;};return _bb .MakeHexString (string (_deg )),nil ;};func (_aga *fdfParser )trace (_ebca _bb .PdfObject )_bb .PdfObject {switch _cgg :=_ebca .(type ){case *_bb .PdfObjectReference :_bdb ,_gggd :=_aga ._cg [_cgg .ObjectNumber ].(*_bb .PdfIndirectObject );
if _gggd {return _bdb .PdfObject ;};_cf .Log .Debug ("\u0054\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");return nil ;case *_bb .PdfIndirectObject :return _cgg .PdfObject ;};return _ebca ;};func (_ad *fdfParser )readAtLeast (_ced []byte ,_da int )(int ,error ){_ga :=_da ;
_bf :=0;_eb :=0;for _ga > 0{_faag ,_daa :=_ad ._fcc .Read (_ced [_bf :]);if _daa !=nil {_cf .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0046\u0061i\u006c\u0065\u0064\u0020\u0072\u0065\u0061d\u0069\u006e\u0067\u0020\u0028\u0025\u0064\u003b\u0025\u0064\u0029\u0020\u0025\u0073",_faag ,_eb ,_daa .Error ());
return _bf ,_f .New ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065a\u0064\u0069\u006e\u0067");};_eb ++;_bf +=_faag ;_ga -=_faag ;};return _bf ,nil ;};func (_df *fdfParser )skipSpaces ()(int ,error ){_eg :=0;for {_bcf ,_cae :=_df ._fcc .ReadByte ();
if _cae !=nil {return 0,_cae ;};if _bb .IsWhiteSpace (_bcf ){_eg ++;}else {_df ._fcc .UnreadByte ();break ;};};return _eg ,nil ;};var _dc =_c .MustCompile ("\u0025\u0025\u0045O\u0046");func (_dgce *fdfParser )seekFdfVersionTopDown ()(int ,int ,error ){_dgce ._ag .Seek (0,_gee .SeekStart );
_dgce ._fcc =_ge .NewReader (_dgce ._ag );_cab :=20;_aee :=make ([]byte ,_cab );for {_cgd ,_cgf :=_dgce ._fcc .ReadByte ();if _cgf !=nil {if _cgf ==_gee .EOF {break ;}else {return 0,0,_cgf ;};};if _bb .IsDecimalDigit (_cgd )&&_aee [_cab -1]=='.'&&_bb .IsDecimalDigit (_aee [_cab -2])&&_aee [_cab -3]=='-'&&_aee [_cab -4]=='F'&&_aee [_cab -5]=='D'&&_aee [_cab -6]=='P'{_eggb :=int (_aee [_cab -2]-'0');
_agac :=int (_cgd -'0');return _eggb ,_agac ,nil ;};_aee =append (_aee [1:_cab ],_cgd );};return 0,0,_f .New ("\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};func _afd (_ccb string )(*fdfParser ,error ){_cdcd :=fdfParser {};
_aff :=[]byte (_ccb );_edf :=_cd .NewReader (_aff );_cdcd ._ag =_edf ;_cdcd ._cg =map[int64 ]_bb .PdfObject {};_ccd :=_ge .NewReader (_edf );_cdcd ._fcc =_ccd ;_cdcd ._cede =int64 (len (_ccb ));return &_cdcd ,_cdcd .parse ();};func (_dcbd *fdfParser )parseIndirectObject ()(_bb .PdfObject ,error ){_cedc :=_bb .PdfIndirectObject {};
_cf .Log .Trace ("\u002dR\u0065a\u0064\u0020\u0069\u006e\u0064i\u0072\u0065c\u0074\u0020\u006f\u0062\u006a");_dbg ,_dec :=_dcbd ._fcc .Peek (20);if _dec !=nil {_cf .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return &_cedc ,_dec ;};_cf .Log .Trace ("\u0028\u0069\u006edi\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0020\u0070\u0065\u0065\u006b\u0020\u0022\u0025\u0073\u0022",string (_dbg ));_geg :=_be .FindStringSubmatchIndex (string (_dbg ));if len (_geg )< 6{_cf .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_dbg ));
return &_cedc ,_f .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_dcbd ._fcc .Discard (_geg [0]);_cf .Log .Trace ("O\u0066\u0066\u0073\u0065\u0074\u0073\u0020\u0025\u0020\u0064",_geg );_fgbc :=_geg [1]-_geg [0];_bac :=make ([]byte ,_fgbc );_ ,_dec =_dcbd .readAtLeast (_bac ,_fgbc );if _dec !=nil {_cf .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0061\u0062l\u0065\u0020\u0074\u006f\u0020\u0072\u0065\u0061\u0064\u0020-\u0020\u0025\u0073",_dec );
return nil ,_dec ;};_cf .Log .Trace ("\u0074\u0065\u0078t\u006c\u0069\u006e\u0065\u003a\u0020\u0025\u0073",_bac );_cagc :=_be .FindStringSubmatch (string (_bac ));if len (_cagc )< 3{_cf .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_bac ));
return &_cedc ,_f .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_dfe ,_ :=_ae .Atoi (_cagc [1]);_cc ,_ :=_ae .Atoi (_cagc [2]);_cedc .ObjectNumber =int64 (_dfe );_cedc .GenerationNumber =int64 (_cc );for {_bba ,_gff :=_dcbd ._fcc .Peek (2);if _gff !=nil {return &_cedc ,_gff ;};_cf .Log .Trace ("I\u006ed\u002e\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_bba ),string (_bba ));
if _bb .IsWhiteSpace (_bba [0]){_dcbd .skipSpaces ();}else if _bba [0]=='%'{_dcbd .skipComments ();}else if (_bba [0]=='<')&&(_bba [1]=='<'){_cf .Log .Trace ("\u0043\u0061\u006c\u006c\u0020\u0050\u0061\u0072\u0073e\u0044\u0069\u0063\u0074");_cedc .PdfObject ,_gff =_dcbd .parseDict ();
_cf .Log .Trace ("\u0045\u004f\u0046\u0020Ca\u006c\u006c\u0020\u0050\u0061\u0072\u0073\u0065\u0044\u0069\u0063\u0074\u003a\u0020%\u0076",_gff );if _gff !=nil {return &_cedc ,_gff ;};_cf .Log .Trace ("\u0050\u0061\u0072\u0073\u0065\u0064\u0020\u0064\u0069\u0063t\u0069\u006f\u006e\u0061\u0072\u0079\u002e.\u002e\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
}else if (_bba [0]=='/')||(_bba [0]=='(')||(_bba [0]=='[')||(_bba [0]=='<'){_cedc .PdfObject ,_gff =_dcbd .parseObject ();if _gff !=nil {return &_cedc ,_gff ;};_cf .Log .Trace ("P\u0061\u0072\u0073\u0065\u0064\u0020o\u0062\u006a\u0065\u0063\u0074\u0020\u002e\u002e\u002e \u0066\u0069\u006ei\u0073h\u0065\u0064\u002e");
}else {if _bba [0]=='e'{_eeg ,_dgc :=_dcbd .readTextLine ();if _dgc !=nil {return nil ,_dgc ;};if len (_eeg )>=6&&_eeg [0:6]=="\u0065\u006e\u0064\u006f\u0062\u006a"{break ;};}else if _bba [0]=='s'{_bba ,_ =_dcbd ._fcc .Peek (10);if string (_bba [:6])=="\u0073\u0074\u0072\u0065\u0061\u006d"{_beb :=6;
if len (_bba )> 6{if _bb .IsWhiteSpace (_bba [_beb ])&&_bba [_beb ]!='\r'&&_bba [_beb ]!='\n'{_cf .Log .Debug ("\u004e\u006fn\u002d\u0063\u006f\u006e\u0066\u006f\u0072\u006d\u0061\u006e\u0074\u0020\u0046\u0044\u0046\u0020\u006e\u006f\u0074 \u0065\u006e\u0064\u0069\u006e\u0067 \u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006c\u0069\u006e\u0065\u0020\u0070\u0072o\u0070\u0065r\u006c\u0079\u0020\u0077i\u0074\u0068\u0020\u0045\u004fL\u0020\u006d\u0061\u0072\u006b\u0065\u0072");
_beb ++;};if _bba [_beb ]=='\r'{_beb ++;if _bba [_beb ]=='\n'{_beb ++;};}else if _bba [_beb ]=='\n'{_beb ++;};};_dcbd ._fcc .Discard (_beb );_gfab ,_edg :=_cedc .PdfObject .(*_bb .PdfObjectDictionary );if !_edg {return nil ,_f .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006di\u0073s\u0069\u006e\u0067\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};_cf .Log .Trace ("\u0053\u0074\u0072\u0065\u0061\u006d\u0020\u0064\u0069c\u0074\u0020\u0025\u0073",_gfab );_egbf ,_cac :=_gfab .Get ("\u004c\u0065\u006e\u0067\u0074\u0068").(*_bb .PdfObjectInteger );if !_cac {return nil ,_f .New ("\u0073\u0074re\u0061\u006d\u0020l\u0065\u006e\u0067\u0074h n\u0065ed\u0073\u0020\u0074\u006f\u0020\u0062\u0065 a\u006e\u0020\u0069\u006e\u0074\u0065\u0067e\u0072");
};_dbac :=*_egbf ;if _dbac < 0{return nil ,_f .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006e\u0065\u0065\u0064\u0073\u0020\u0074\u006f \u0062e\u0020\u006c\u006f\u006e\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030");};if int64 (_dbac )> _dcbd ._cede {_cf .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0053t\u0072\u0065\u0061\u006d\u0020l\u0065\u006e\u0067\u0074\u0068\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u006c\u0061\u0072\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0066\u0069\u006c\u0065\u0020\u0073\u0069\u007a\u0065");
return nil ,_f .New ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0073t\u0072\u0065\u0061m\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u002c\u0020la\u0072\u0067\u0065r\u0020\u0074h\u0061\u006e\u0020\u0066\u0069\u006ce\u0020\u0073i\u007a\u0065");};_cgb :=make ([]byte ,_dbac );
_ ,_gff =_dcbd .readAtLeast (_cgb ,int (_dbac ));if _gff !=nil {_cf .Log .Debug ("E\u0052\u0052\u004f\u0052 s\u0074r\u0065\u0061\u006d\u0020\u0028%\u0064\u0029\u003a\u0020\u0025\u0058",len (_cgb ),_cgb );_cf .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_gff );
return nil ,_gff ;};_cacf :=_bb .PdfObjectStream {};_cacf .Stream =_cgb ;_cacf .PdfObjectDictionary =_cedc .PdfObject .(*_bb .PdfObjectDictionary );_cacf .ObjectNumber =_cedc .ObjectNumber ;_cacf .GenerationNumber =_cedc .GenerationNumber ;_dcbd .skipSpaces ();
_dcbd ._fcc .Discard (9);_dcbd .skipSpaces ();return &_cacf ,nil ;};};_cedc .PdfObject ,_gff =_dcbd .parseObject ();return &_cedc ,_gff ;};};_cf .Log .Trace ("\u0052\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0021");
return &_cedc ,nil ;};var _dcc =_c .MustCompile ("^\u005c\u0073\u002a\u0028\\d\u002b)\u005c\u0073\u002b\u0028\u005cd\u002b\u0029\u005c\u0073\u002b\u0052");
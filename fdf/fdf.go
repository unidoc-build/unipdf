//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package fdf provides support for loading form field data from Form Field Data (FDF) files.
package fdf ;import (_d "bufio";_ag "bytes";_cc "encoding/hex";_a "errors";_cd "fmt";_f "github.com/unidoc/unipdf/v3/common";_ee "github.com/unidoc/unipdf/v3/core";_agc "io";_ae "os";_b "regexp";_ce "sort";_g "strconv";_c "strings";);func (_edf *fdfParser )parseNull ()(_ee .PdfObjectNull ,error ){_ ,_aef :=_edf ._cf .Discard (4);
return _ee .PdfObjectNull {},_aef ;};var _adg =_b .MustCompile ("\u005e\u005b\u005c\u002b\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d9\u002e\u005d\u002b\u0029");func _gf (_aea _agc .ReadSeeker )(*fdfParser ,error ){_cfce :=&fdfParser {};_cfce ._fdc =_aea ;
_cfce ._adc =map[int64 ]_ee .PdfObject {};_gdd ,_adea ,_bae :=_cfce .parseFdfVersion ();if _bae !=nil {_f .Log .Error ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0076e\u0072\u0073\u0069o\u006e:\u0020\u0025\u0076",_bae );
return nil ,_bae ;};_cfce ._aa =_gdd ;_cfce ._ggg =_adea ;_bae =_cfce .parse ();return _cfce ,_bae ;};var _ecg =_b .MustCompile ("\u0025\u0025\u0045O\u0046");func (_cfa *fdfParser )parseString ()(*_ee .PdfObjectString ,error ){_cfa ._cf .ReadByte ();var _ffe _ag .Buffer ;
_cdb :=1;for {_fca ,_ede :=_cfa ._cf .Peek (1);if _ede !=nil {return _ee .MakeString (_ffe .String ()),_ede ;};if _fca [0]=='\\'{_cfa ._cf .ReadByte ();_ega ,_afc :=_cfa ._cf .ReadByte ();if _afc !=nil {return _ee .MakeString (_ffe .String ()),_afc ;};
if _ee .IsOctalDigit (_ega ){_bef ,_bgb :=_cfa ._cf .Peek (2);if _bgb !=nil {return _ee .MakeString (_ffe .String ()),_bgb ;};var _fgb []byte ;_fgb =append (_fgb ,_ega );for _ ,_eag :=range _bef {if _ee .IsOctalDigit (_eag ){_fgb =append (_fgb ,_eag );
}else {break ;};};_cfa ._cf .Discard (len (_fgb )-1);_f .Log .Trace ("\u004e\u0075\u006d\u0065ri\u0063\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0022\u0025\u0073\u0022",_fgb );_feb ,_bgb :=_g .ParseUint (string (_fgb ),8,32);if _bgb !=nil {return _ee .MakeString (_ffe .String ()),_bgb ;
};_ffe .WriteByte (byte (_feb ));continue ;};switch _ega {case 'n':_ffe .WriteRune ('\n');case 'r':_ffe .WriteRune ('\r');case 't':_ffe .WriteRune ('\t');case 'b':_ffe .WriteRune ('\b');case 'f':_ffe .WriteRune ('\f');case '(':_ffe .WriteRune ('(');case ')':_ffe .WriteRune (')');
case '\\':_ffe .WriteRune ('\\');};continue ;}else if _fca [0]=='('{_cdb ++;}else if _fca [0]==')'{_cdb --;if _cdb ==0{_cfa ._cf .ReadByte ();break ;};};_eff ,_ :=_cfa ._cf .ReadByte ();_ffe .WriteByte (_eff );};return _ee .MakeString (_ffe .String ()),nil ;
};func (_dgf *fdfParser )parseObject ()(_ee .PdfObject ,error ){_f .Log .Trace ("\u0052e\u0061d\u0020\u0064\u0069\u0072\u0065c\u0074\u0020o\u0062\u006a\u0065\u0063\u0074");_dgf .skipSpaces ();for {_aff ,_ced :=_dgf ._cf .Peek (2);if _ced !=nil {return nil ,_ced ;
};_f .Log .Trace ("\u0050e\u0065k\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_aff ));if _aff [0]=='/'{_ead ,_gae :=_dgf .parseName ();_f .Log .Trace ("\u002d\u003e\u004ea\u006d\u0065\u003a\u0020\u0027\u0025\u0073\u0027",_ead );
return &_ead ,_gae ;}else if _aff [0]=='('{_f .Log .Trace ("\u002d>\u0053\u0074\u0072\u0069\u006e\u0067!");return _dgf .parseString ();}else if _aff [0]=='['{_f .Log .Trace ("\u002d\u003e\u0041\u0072\u0072\u0061\u0079\u0021");return _dgf .parseArray ();
}else if (_aff [0]=='<')&&(_aff [1]=='<'){_f .Log .Trace ("\u002d>\u0044\u0069\u0063\u0074\u0021");return _dgf .parseDict ();}else if _aff [0]=='<'{_f .Log .Trace ("\u002d\u003e\u0048\u0065\u0078\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0021");return _dgf .parseHexString ();
}else if _aff [0]=='%'{_dgf .readComment ();_dgf .skipSpaces ();}else {_f .Log .Trace ("\u002d\u003eN\u0075\u006d\u0062e\u0072\u0020\u006f\u0072\u0020\u0072\u0065\u0066\u003f");_aff ,_ =_dgf ._cf .Peek (15);_dgg :=string (_aff );_f .Log .Trace ("\u0050\u0065\u0065k\u0020\u0073\u0074\u0072\u003a\u0020\u0025\u0073",_dgg );
if (len (_dgg )> 3)&&(_dgg [:4]=="\u006e\u0075\u006c\u006c"){_agb ,_ged :=_dgf .parseNull ();return &_agb ,_ged ;}else if (len (_dgg )> 4)&&(_dgg [:5]=="\u0066\u0061\u006cs\u0065"){_dac ,_ddc :=_dgf .parseBool ();return &_dac ,_ddc ;}else if (len (_dgg )> 3)&&(_dgg [:4]=="\u0074\u0072\u0075\u0065"){_egb ,_eeab :=_dgf .parseBool ();
return &_egb ,_eeab ;};_bcf :=_fd .FindStringSubmatch (_dgg );if len (_bcf )> 1{_aff ,_ =_dgf ._cf .ReadBytes ('R');_f .Log .Trace ("\u002d\u003e\u0020\u0021\u0052\u0065\u0066\u003a\u0020\u0027\u0025\u0073\u0027",string (_aff [:]));_bcfb ,_aeb :=_bag (string (_aff ));
return &_bcfb ,_aeb ;};_bfc :=_adg .FindStringSubmatch (_dgg );if len (_bfc )> 1{_f .Log .Trace ("\u002d\u003e\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u0021");return _dgf .parseNumber ();};_bfc =_aca .FindStringSubmatch (_dgg );if len (_bfc )> 1{_f .Log .Trace ("\u002d\u003e\u0020\u0045xp\u006f\u006e\u0065\u006e\u0074\u0069\u0061\u006c\u0020\u004e\u0075\u006d\u0062\u0065r\u0021");
_f .Log .Trace ("\u0025\u0020\u0073",_bfc );return _dgf .parseNumber ();};_f .Log .Debug ("\u0045R\u0052\u004f\u0052\u0020U\u006e\u006b\u006e\u006f\u0077n\u0020(\u0070e\u0065\u006b\u0020\u0022\u0025\u0073\u0022)",_dgg );return nil ,_a .New ("\u006f\u0062\u006a\u0065\u0063t\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0065\u0072\u0072\u006fr\u0020\u002d\u0020\u0075\u006e\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0070\u0061\u0074\u0074\u0065\u0072\u006e");
};};};func _bag (_ded string )(_ee .PdfObjectReference ,error ){_fab :=_ee .PdfObjectReference {};_ga :=_fd .FindStringSubmatch (_ded );if len (_ga )< 3{_f .Log .Debug ("\u0045\u0072\u0072or\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0072\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");
return _fab ,_a .New ("\u0075n\u0061\u0062\u006c\u0065 \u0074\u006f\u0020\u0070\u0061r\u0073e\u0020r\u0065\u0066\u0065\u0072\u0065\u006e\u0063e");};_eea ,_ace :=_g .Atoi (_ga [1]);if _ace !=nil {_f .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0070a\u0072\u0073\u0069n\u0067\u0020\u006fb\u006a\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072 '\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0075\u006d\u0020\u003d\u0020\u0030",_ga [1]);
return _fab ,nil ;};_fab .ObjectNumber =int64 (_eea );_dcf ,_ace :=_g .Atoi (_ga [2]);if _ace !=nil {_f .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061r\u0073\u0069\u006e\u0067\u0020g\u0065\u006e\u0065\u0072\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0027\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u0067\u0065\u006e\u0020\u003d\u0020\u0030",_ga [2]);
return _fab ,nil ;};_fab .GenerationNumber =int64 (_dcf );return _fab ,nil ;};func (_bfa *fdfParser )skipComments ()error {if _ ,_gef :=_bfa .skipSpaces ();_gef !=nil {return _gef ;};_ca :=true ;for {_eb ,_abc :=_bfa ._cf .Peek (1);if _abc !=nil {_f .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_abc .Error ());
return _abc ;};if _ca &&_eb [0]!='%'{return nil ;};_ca =false ;if (_eb [0]!='\r')&&(_eb [0]!='\n'){_bfa ._cf .ReadByte ();}else {break ;};};return _bfa .skipComments ();};

// FieldDictionaries returns a map of field names to field dictionaries.
func (fdf *Data )FieldDictionaries ()(map[string ]*_ee .PdfObjectDictionary ,error ){_fb :=map[string ]*_ee .PdfObjectDictionary {};for _ad :=0;_ad < fdf ._ge .Len ();_ad ++{_ac ,_dd :=_ee .GetDict (fdf ._ge .Get (_ad ));if _dd {_cb ,_ :=_ee .GetString (_ac .Get ("\u0054"));
if _cb !=nil {_fb [_cb .Str ()]=_ac ;};};};return _fb ,nil ;};func (_bbd *fdfParser )parseNumber ()(_ee .PdfObject ,error ){return _ee .ParseNumber (_bbd ._cf )};func (_acd *fdfParser )parse ()error {_acd ._fdc .Seek (0,_agc .SeekStart );_acd ._cf =_d .NewReader (_acd ._fdc );
for {_acd .skipComments ();_ccbc ,_fbd :=_acd ._cf .Peek (20);if _fbd !=nil {_f .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return _fbd ;};if _c .HasPrefix (string (_ccbc ),"\u0074r\u0061\u0069\u006c\u0065\u0072"){_acd ._cf .Discard (7);_acd .skipSpaces ();_acd .skipComments ();_accc ,_ :=_acd .parseDict ();_acd ._abe =_accc ;break ;};_gbe :=_fba .FindStringSubmatchIndex (string (_ccbc ));
if len (_gbe )< 6{_f .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_ccbc ));
return _a .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_bdf ,_fbd :=_acd .parseIndirectObject ();if _fbd !=nil {return _fbd ;};switch _egef :=_bdf .(type ){case *_ee .PdfIndirectObject :_acd ._adc [_egef .ObjectNumber ]=_egef ;case *_ee .PdfObjectStream :_acd ._adc [_egef .ObjectNumber ]=_egef ;default:return _a .New ("\u0074\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
};};return nil ;};func (_dae *fdfParser )readAtLeast (_gc []byte ,_fbg int )(int ,error ){_fe :=_fbg ;_gcc :=0;_bgg :=0;for _fe > 0{_fc ,_gee :=_dae ._cf .Read (_gc [_gcc :]);if _gee !=nil {_f .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0046\u0061i\u006c\u0065\u0064\u0020\u0072\u0065\u0061d\u0069\u006e\u0067\u0020\u0028\u0025\u0064\u003b\u0025\u0064\u0029\u0020\u0025\u0073",_fc ,_bgg ,_gee .Error ());
return _gcc ,_a .New ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065a\u0064\u0069\u006e\u0067");};_bgg ++;_gcc +=_fc ;_fe -=_fc ;};return _gcc ,nil ;};func (_affd *fdfParser )parseFdfVersion ()(int ,int ,error ){_affd ._fdc .Seek (0,_agc .SeekStart );
_gdg :=20;_eab :=make ([]byte ,_gdg );_affd ._fdc .Read (_eab );_dea :=_ed .FindStringSubmatch (string (_eab ));if len (_dea )< 3{_cfd ,_adda ,_aeba :=_affd .seekFdfVersionTopDown ();if _aeba !=nil {_f .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065\u0063\u006f\u0076\u0065\u0072\u0079\u0020\u002d\u0020\u0075n\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0066\u0069nd\u0020\u0076\u0065r\u0073i\u006f\u006e");
return 0,0,_aeba ;};return _cfd ,_adda ,nil ;};_ddeb ,_cbe :=_g .Atoi (_dea [1]);if _cbe !=nil {return 0,0,_cbe ;};_bcg ,_cbe :=_g .Atoi (_dea [2]);if _cbe !=nil {return 0,0,_cbe ;};_f .Log .Debug ("\u0046\u0064\u0066\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020%\u0064\u002e\u0025\u0064",_ddeb ,_bcg );
return _ddeb ,_bcg ,nil ;};var _fd =_b .MustCompile ("^\u005c\u0073\u002a\u0028\\d\u002b)\u005c\u0073\u002b\u0028\u005cd\u002b\u0029\u005c\u0073\u002b\u0052");func (_afa *fdfParser )parseBool ()(_ee .PdfObjectBool ,error ){_bba ,_ccc :=_afa ._cf .Peek (4);
if _ccc !=nil {return _ee .PdfObjectBool (false ),_ccc ;};if (len (_bba )>=4)&&(string (_bba [:4])=="\u0074\u0072\u0075\u0065"){_afa ._cf .Discard (4);return _ee .PdfObjectBool (true ),nil ;};_bba ,_ccc =_afa ._cf .Peek (5);if _ccc !=nil {return _ee .PdfObjectBool (false ),_ccc ;
};if (len (_bba )>=5)&&(string (_bba [:5])=="\u0066\u0061\u006cs\u0065"){_afa ._cf .Discard (5);return _ee .PdfObjectBool (false ),nil ;};return _ee .PdfObjectBool (false ),_a .New ("\u0075n\u0065\u0078\u0070\u0065c\u0074\u0065\u0064\u0020\u0062o\u006fl\u0065a\u006e\u0020\u0073\u0074\u0072\u0069\u006eg");
};var _ed =_b .MustCompile ("\u0025F\u0044F\u002d\u0028\u005c\u0064\u0029\u005c\u002e\u0028\u005c\u0064\u0029");func (_cea *fdfParser )parseHexString ()(*_ee .PdfObjectString ,error ){_cea ._cf .ReadByte ();var _cbc _ag .Buffer ;for {_ggc ,_feg :=_cea ._cf .Peek (1);
if _feg !=nil {return _ee .MakeHexString (""),_feg ;};if _ggc [0]=='>'{_cea ._cf .ReadByte ();break ;};_daed ,_ :=_cea ._cf .ReadByte ();if !_ee .IsWhiteSpace (_daed ){_cbc .WriteByte (_daed );};};if _cbc .Len ()%2==1{_cbc .WriteRune ('0');};_cdd ,_dgb :=_cc .DecodeString (_cbc .String ());
if _dgb !=nil {_f .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0078\u0020\u0073\u0074r\u0069\u006e\u0067\u003a\u0020\u0027\u0025\u0073\u0027 \u002d\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u0061n\u0020\u0065\u006d\u0070\u0074\u0079 \u0073\u0074\u0072i\u006e\u0067",_cbc .String ());
return _ee .MakeHexString (""),nil ;};return _ee .MakeHexString (string (_cdd )),nil ;};func (_fdb *fdfParser )trace (_gaa _ee .PdfObject )_ee .PdfObject {switch _cedc :=_gaa .(type ){case *_ee .PdfObjectReference :_cga ,_gecg :=_fdb ._adc [_cedc .ObjectNumber ].(*_ee .PdfIndirectObject );
if _gecg {return _cga .PdfObject ;};_f .Log .Debug ("\u0054\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");return nil ;case *_ee .PdfIndirectObject :return _cedc .PdfObject ;};return _gaa ;};func (_ecfc *fdfParser )parseDict ()(*_ee .PdfObjectDictionary ,error ){_f .Log .Trace ("\u0052\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020D\u0069\u0063\u0074\u0021");
_fge :=_ee .MakeDict ();_fcc ,_ :=_ecfc ._cf .ReadByte ();if _fcc !='<'{return nil ,_a .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};_fcc ,_ =_ecfc ._cf .ReadByte ();if _fcc !='<'{return nil ,_a .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");
};for {_ecfc .skipSpaces ();_ecfc .skipComments ();_fabd ,_gbc :=_ecfc ._cf .Peek (2);if _gbc !=nil {return nil ,_gbc ;};_f .Log .Trace ("D\u0069c\u0074\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_fabd ),string (_fabd ));
if (_fabd [0]=='>')&&(_fabd [1]=='>'){_f .Log .Trace ("\u0045\u004f\u0046\u0020\u0064\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079");_ecfc ._cf .ReadByte ();_ecfc ._cf .ReadByte ();break ;};_f .Log .Trace ("\u0050a\u0072s\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0021");
_egf ,_gbc :=_ecfc .parseName ();_f .Log .Trace ("\u004be\u0079\u003a\u0020\u0025\u0073",_egf );if _gbc !=nil {_f .Log .Debug ("E\u0052\u0052\u004f\u0052\u0020\u0052e\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u006ea\u006d\u0065\u0020e\u0072r\u0020\u0025\u0073",_gbc );
return nil ,_gbc ;};if len (_egf )> 4&&_egf [len (_egf )-4:]=="\u006e\u0075\u006c\u006c"{_fcb :=_egf [0:len (_egf )-4];_f .Log .Debug ("\u0054\u0061\u006b\u0069n\u0067\u0020\u0063\u0061\u0072\u0065\u0020\u006f\u0066\u0020n\u0075l\u006c\u0020\u0062\u0075\u0067\u0020\u0028%\u0073\u0029",_egf );
_f .Log .Debug ("\u004e\u0065\u0077\u0020ke\u0079\u0020\u0022\u0025\u0073\u0022\u0020\u003d\u0020\u006e\u0075\u006c\u006c",_fcb );_ecfc .skipSpaces ();_ade ,_ :=_ecfc ._cf .Peek (1);if _ade [0]=='/'{_fge .Set (_fcb ,_ee .MakeNull ());continue ;};};_ecfc .skipSpaces ();
_acf ,_gbc :=_ecfc .parseObject ();if _gbc !=nil {return nil ,_gbc ;};_fge .Set (_egf ,_acf );_f .Log .Trace ("\u0064\u0069\u0063\u0074\u005b\u0025\u0073\u005d\u0020\u003d\u0020\u0025\u0073",_egf ,_acf .String ());};_f .Log .Trace ("\u0072\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020\u0044\u0069\u0063\u0074\u0021");
return _fge ,nil ;};

// FieldValues implements interface model.FieldValueProvider.
// Returns a map of field names to values (PdfObjects).
func (fdf *Data )FieldValues ()(map[string ]_ee .PdfObject ,error ){_gg ,_eg :=fdf .FieldDictionaries ();if _eg !=nil {return nil ,_eg ;};var _add []string ;for _da :=range _gg {_add =append (_add ,_da );};_ce .Strings (_add );_gb :=map[string ]_ee .PdfObject {};
for _ ,_abb :=range _add {_bga :=_gg [_abb ];_cg :=_ee .TraceToDirectObject (_bga .Get ("\u0056"));_gb [_abb ]=_cg ;};return _gb ,nil ;};func (_daa *fdfParser )readTextLine ()(string ,error ){var _gca _ag .Buffer ;for {_aaf ,_cgcg :=_daa ._cf .Peek (1);
if _cgcg !=nil {_f .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_cgcg .Error ());return _gca .String (),_cgcg ;};if (_aaf [0]!='\r')&&(_aaf [0]!='\n'){_cfc ,_ :=_daa ._cf .ReadByte ();_gca .WriteByte (_cfc );}else {break ;};};return _gca .String (),nil ;
};func (_ba *fdfParser )readComment ()(string ,error ){var _df _ag .Buffer ;_ ,_dfg :=_ba .skipSpaces ();if _dfg !=nil {return _df .String (),_dfg ;};_fa :=true ;for {_fcd ,_ea :=_ba ._cf .Peek (1);if _ea !=nil {_f .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_ea .Error ());
return _df .String (),_ea ;};if _fa &&_fcd [0]!='%'{return _df .String (),_a .New ("c\u006f\u006d\u006d\u0065\u006e\u0074 \u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0073\u0074a\u0072\u0074\u0020w\u0069t\u0068\u0020\u0025");};_fa =false ;if (_fcd [0]!='\r')&&(_fcd [0]!='\n'){_cgc ,_ :=_ba ._cf .ReadByte ();
_df .WriteByte (_cgc );}else {break ;};};return _df .String (),nil ;};func _ggd (_bfaa string )(*fdfParser ,error ){_ege :=fdfParser {};_dec :=[]byte (_bfaa );_cfg :=_ag .NewReader (_dec );_ege ._fdc =_cfg ;_ege ._adc =map[int64 ]_ee .PdfObject {};_edfa :=_d .NewReader (_cfg );
_ege ._cf =_edfa ;_ege ._fee =int64 (len (_bfaa ));return &_ege ,_ege .parse ();};func (_acc *fdfParser )skipSpaces ()(int ,error ){_fcg :=0;for {_bb ,_de :=_acc ._cf .ReadByte ();if _de !=nil {return 0,_de ;};if _ee .IsWhiteSpace (_bb ){_fcg ++;}else {_acc ._cf .UnreadByte ();
break ;};};return _fcg ,nil ;};

// LoadFromPath loads FDF form data from file path `fdfPath`.
func LoadFromPath (fdfPath string )(*Data ,error ){_be ,_ff :=_ae .Open (fdfPath );if _ff !=nil {return nil ,_ff ;};defer _be .Close ();return Load (_be );};func (_bbe *fdfParser )parseArray ()(*_ee .PdfObjectArray ,error ){_bd :=_ee .MakeArray ();_bbe ._cf .ReadByte ();
for {_bbe .skipSpaces ();_geb ,_dff :=_bbe ._cf .Peek (1);if _dff !=nil {return _bd ,_dff ;};if _geb [0]==']'{_bbe ._cf .ReadByte ();break ;};_ebb ,_dff :=_bbe .parseObject ();if _dff !=nil {return _bd ,_dff ;};_bd .Append (_ebb );};return _bd ,nil ;};
func (_fff *fdfParser )parseIndirectObject ()(_ee .PdfObject ,error ){_gccb :=_ee .PdfIndirectObject {};_f .Log .Trace ("\u002dR\u0065a\u0064\u0020\u0069\u006e\u0064i\u0072\u0065c\u0074\u0020\u006f\u0062\u006a");_agbb ,_bda :=_fff ._cf .Peek (20);if _bda !=nil {_f .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return &_gccb ,_bda ;};_f .Log .Trace ("\u0028\u0069\u006edi\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0020\u0070\u0065\u0065\u006b\u0020\u0022\u0025\u0073\u0022",string (_agbb ));_gda :=_fba .FindStringSubmatchIndex (string (_agbb ));if len (_gda )< 6{_f .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_agbb ));
return &_gccb ,_a .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_fff ._cf .Discard (_gda [0]);_f .Log .Trace ("O\u0066\u0066\u0073\u0065\u0074\u0073\u0020\u0025\u0020\u0064",_gda );_daf :=_gda [1]-_gda [0];_fed :=make ([]byte ,_daf );_ ,_bda =_fff .readAtLeast (_fed ,_daf );if _bda !=nil {_f .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0061\u0062l\u0065\u0020\u0074\u006f\u0020\u0072\u0065\u0061\u0064\u0020-\u0020\u0025\u0073",_bda );
return nil ,_bda ;};_f .Log .Trace ("\u0074\u0065\u0078t\u006c\u0069\u006e\u0065\u003a\u0020\u0025\u0073",_fed );_ccb :=_fba .FindStringSubmatch (string (_fed ));if len (_ccb )< 3{_f .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_fed ));
return &_gccb ,_a .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_cda ,_ :=_g .Atoi (_ccb [1]);_ffd ,_ :=_g .Atoi (_ccb [2]);_gccb .ObjectNumber =int64 (_cda );_gccb .GenerationNumber =int64 (_ffd );for {_cfag ,_eaa :=_fff ._cf .Peek (2);if _eaa !=nil {return &_gccb ,_eaa ;};_f .Log .Trace ("I\u006ed\u002e\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_cfag ),string (_cfag ));
if _ee .IsWhiteSpace (_cfag [0]){_fff .skipSpaces ();}else if _cfag [0]=='%'{_fff .skipComments ();}else if (_cfag [0]=='<')&&(_cfag [1]=='<'){_f .Log .Trace ("\u0043\u0061\u006c\u006c\u0020\u0050\u0061\u0072\u0073e\u0044\u0069\u0063\u0074");_gccb .PdfObject ,_eaa =_fff .parseDict ();
_f .Log .Trace ("\u0045\u004f\u0046\u0020Ca\u006c\u006c\u0020\u0050\u0061\u0072\u0073\u0065\u0044\u0069\u0063\u0074\u003a\u0020%\u0076",_eaa );if _eaa !=nil {return &_gccb ,_eaa ;};_f .Log .Trace ("\u0050\u0061\u0072\u0073\u0065\u0064\u0020\u0064\u0069\u0063t\u0069\u006f\u006e\u0061\u0072\u0079\u002e.\u002e\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
}else if (_cfag [0]=='/')||(_cfag [0]=='(')||(_cfag [0]=='[')||(_cfag [0]=='<'){_gccb .PdfObject ,_eaa =_fff .parseObject ();if _eaa !=nil {return &_gccb ,_eaa ;};_f .Log .Trace ("P\u0061\u0072\u0073\u0065\u0064\u0020o\u0062\u006a\u0065\u0063\u0074\u0020\u002e\u002e\u002e \u0066\u0069\u006ei\u0073h\u0065\u0064\u002e");
}else {if _cfag [0]=='e'{_acac ,_dgfc :=_fff .readTextLine ();if _dgfc !=nil {return nil ,_dgfc ;};if len (_acac )>=6&&_acac [0:6]=="\u0065\u006e\u0064\u006f\u0062\u006a"{break ;};}else if _cfag [0]=='s'{_cfag ,_ =_fff ._cf .Peek (10);if string (_cfag [:6])=="\u0073\u0074\u0072\u0065\u0061\u006d"{_aag :=6;
if len (_cfag )> 6{if _ee .IsWhiteSpace (_cfag [_aag ])&&_cfag [_aag ]!='\r'&&_cfag [_aag ]!='\n'{_f .Log .Debug ("\u004e\u006fn\u002d\u0063\u006f\u006e\u0066\u006f\u0072\u006d\u0061\u006e\u0074\u0020\u0046\u0044\u0046\u0020\u006e\u006f\u0074 \u0065\u006e\u0064\u0069\u006e\u0067 \u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006c\u0069\u006e\u0065\u0020\u0070\u0072o\u0070\u0065r\u006c\u0079\u0020\u0077i\u0074\u0068\u0020\u0045\u004fL\u0020\u006d\u0061\u0072\u006b\u0065\u0072");
_aag ++;};if _cfag [_aag ]=='\r'{_aag ++;if _cfag [_aag ]=='\n'{_aag ++;};}else if _cfag [_aag ]=='\n'{_aag ++;};};_fff ._cf .Discard (_aag );_bbef ,_bbdb :=_gccb .PdfObject .(*_ee .PdfObjectDictionary );if !_bbdb {return nil ,_a .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006di\u0073s\u0069\u006e\u0067\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};_f .Log .Trace ("\u0053\u0074\u0072\u0065\u0061\u006d\u0020\u0064\u0069c\u0074\u0020\u0025\u0073",_bbef );_gec ,_gea :=_bbef .Get ("\u004c\u0065\u006e\u0067\u0074\u0068").(*_ee .PdfObjectInteger );if !_gea {return nil ,_a .New ("\u0073\u0074re\u0061\u006d\u0020l\u0065\u006e\u0067\u0074h n\u0065ed\u0073\u0020\u0074\u006f\u0020\u0062\u0065 a\u006e\u0020\u0069\u006e\u0074\u0065\u0067e\u0072");
};_bee :=*_gec ;if _bee < 0{return nil ,_a .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006e\u0065\u0065\u0064\u0073\u0020\u0074\u006f \u0062e\u0020\u006c\u006f\u006e\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030");};if int64 (_bee )> _fff ._fee {_f .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0053t\u0072\u0065\u0061\u006d\u0020l\u0065\u006e\u0067\u0074\u0068\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u006c\u0061\u0072\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0066\u0069\u006c\u0065\u0020\u0073\u0069\u007a\u0065");
return nil ,_a .New ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0073t\u0072\u0065\u0061m\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u002c\u0020la\u0072\u0067\u0065r\u0020\u0074h\u0061\u006e\u0020\u0066\u0069\u006ce\u0020\u0073i\u007a\u0065");};_cdab :=make ([]byte ,_bee );
_ ,_eaa =_fff .readAtLeast (_cdab ,int (_bee ));if _eaa !=nil {_f .Log .Debug ("E\u0052\u0052\u004f\u0052 s\u0074r\u0065\u0061\u006d\u0020\u0028%\u0064\u0029\u003a\u0020\u0025\u0058",len (_cdab ),_cdab );_f .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_eaa );
return nil ,_eaa ;};_aab :=_ee .PdfObjectStream {};_aab .Stream =_cdab ;_aab .PdfObjectDictionary =_gccb .PdfObject .(*_ee .PdfObjectDictionary );_aab .ObjectNumber =_gccb .ObjectNumber ;_aab .GenerationNumber =_gccb .GenerationNumber ;_fff .skipSpaces ();
_fff ._cf .Discard (9);_fff .skipSpaces ();return &_aab ,nil ;};};_gccb .PdfObject ,_eaa =_fff .parseObject ();return &_gccb ,_eaa ;};};_f .Log .Trace ("\u0052\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0021");
return &_gccb ,nil ;};func (_gd *fdfParser )getFileOffset ()int64 {_abd ,_ :=_gd ._fdc .Seek (0,_agc .SeekCurrent );_abd -=int64 (_gd ._cf .Buffered ());return _abd ;};

// Root returns the Root of the FDF document.
func (_abeg *fdfParser )Root ()(*_ee .PdfObjectDictionary ,error ){if _abeg ._abe !=nil {if _bfad ,_fcde :=_abeg .trace (_abeg ._abe .Get ("\u0052\u006f\u006f\u0074")).(*_ee .PdfObjectDictionary );_fcde {if _acg ,_fgg :=_abeg .trace (_bfad .Get ("\u0046\u0044\u0046")).(*_ee .PdfObjectDictionary );
_fgg {return _acg ,nil ;};};};var _caf []int64 ;for _ccf :=range _abeg ._adc {_caf =append (_caf ,_ccf );};_ce .Slice (_caf ,func (_bbbd ,_efb int )bool {return _caf [_bbbd ]< _caf [_efb ]});for _ ,_gab :=range _caf {_dga :=_abeg ._adc [_gab ];if _deab ,_acgg :=_abeg .trace (_dga ).(*_ee .PdfObjectDictionary );
_acgg {if _gdc ,_edb :=_abeg .trace (_deab .Get ("\u0046\u0044\u0046")).(*_ee .PdfObjectDictionary );_edb {return _gdc ,nil ;};};};return nil ,_a .New ("\u0046\u0044\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};

// Data represents forms data format (FDF) file data.
type Data struct{_bg *_ee .PdfObjectDictionary ;_ge *_ee .PdfObjectArray ;};func (_egd *fdfParser )seekFdfVersionTopDown ()(int ,int ,error ){_egd ._fdc .Seek (0,_agc .SeekStart );_egd ._cf =_d .NewReader (_egd ._fdc );_egab :=20;_ffg :=make ([]byte ,_egab );
for {_dab ,_gac :=_egd ._cf .ReadByte ();if _gac !=nil {if _gac ==_agc .EOF {break ;}else {return 0,0,_gac ;};};if _ee .IsDecimalDigit (_dab )&&_ffg [_egab -1]=='.'&&_ee .IsDecimalDigit (_ffg [_egab -2])&&_ffg [_egab -3]=='-'&&_ffg [_egab -4]=='F'&&_ffg [_egab -5]=='D'&&_ffg [_egab -6]=='P'{_decd :=int (_ffg [_egab -2]-'0');
_gdga :=int (_dab -'0');return _decd ,_gdga ,nil ;};_ffg =append (_ffg [1:_egab ],_dab );};return 0,0,_a .New ("\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};type fdfParser struct{_aa int ;_ggg int ;
_adc map[int64 ]_ee .PdfObject ;_fdc _agc .ReadSeeker ;_cf *_d .Reader ;_fee int64 ;_abe *_ee .PdfObjectDictionary ;};

// Load loads FDF form data from `r`.
func Load (r _agc .ReadSeeker )(*Data ,error ){_bc ,_ab :=_gf (r );if _ab !=nil {return nil ,_ab ;};_cdc ,_ab :=_bc .Root ();if _ab !=nil {return nil ,_ab ;};_db ,_ec :=_ee .GetArray (_cdc .Get ("\u0046\u0069\u0065\u006c\u0064\u0073"));if !_ec {return nil ,_a .New ("\u0066\u0069\u0065\u006c\u0064\u0073\u0020\u006d\u0069s\u0073\u0069\u006e\u0067");
};return &Data {_ge :_db ,_bg :_cdc },nil ;};func (_eae *fdfParser )parseName ()(_ee .PdfObjectName ,error ){var _af _ag .Buffer ;_aac :=false ;for {_bgd ,_gefg :=_eae ._cf .Peek (1);if _gefg ==_agc .EOF {break ;};if _gefg !=nil {return _ee .PdfObjectName (_af .String ()),_gefg ;
};if !_aac {if _bgd [0]=='/'{_aac =true ;_eae ._cf .ReadByte ();}else if _bgd [0]=='%'{_eae .readComment ();_eae .skipSpaces ();}else {_f .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020N\u0061\u006d\u0065\u0020\u0073\u0074\u0061\u0072\u0074\u0069\u006e\u0067\u0020w\u0069\u0074\u0068\u0020\u0025\u0073\u0020(\u0025\u0020\u0078\u0029",_bgd ,_bgd );
return _ee .PdfObjectName (_af .String ()),_cd .Errorf ("\u0069n\u0076a\u006c\u0069\u0064\u0020\u006ea\u006d\u0065:\u0020\u0028\u0025\u0063\u0029",_bgd [0]);};}else {if _ee .IsWhiteSpace (_bgd [0]){break ;}else if (_bgd [0]=='/')||(_bgd [0]=='[')||(_bgd [0]=='(')||(_bgd [0]==']')||(_bgd [0]=='<')||(_bgd [0]=='>'){break ;
}else if _bgd [0]=='#'{_bbg ,_fbe :=_eae ._cf .Peek (3);if _fbe !=nil {return _ee .PdfObjectName (_af .String ()),_fbe ;};_eae ._cf .Discard (3);_fcf ,_fbe :=_cc .DecodeString (string (_bbg [1:3]));if _fbe !=nil {return _ee .PdfObjectName (_af .String ()),_fbe ;
};_af .Write (_fcf );}else {_dde ,_ :=_eae ._cf .ReadByte ();_af .WriteByte (_dde );};};};return _ee .PdfObjectName (_af .String ()),nil ;};func (_acfd *fdfParser )seekToEOFMarker (_bgf int64 )error {_bggc :=int64 (0);_eef :=int64 (1000);for _bggc < _bgf {if _bgf <=(_eef +_bggc ){_eef =_bgf -_bggc ;
};_ ,_dfb :=_acfd ._fdc .Seek (-_bggc -_eef ,_agc .SeekEnd );if _dfb !=nil {return _dfb ;};_gcg :=make ([]byte ,_eef );_acfd ._fdc .Read (_gcg );_f .Log .Trace ("\u004c\u006f\u006f\u006bi\u006e\u0067\u0020\u0066\u006f\u0072\u0020\u0045\u004f\u0046 \u006da\u0072\u006b\u0065\u0072\u003a\u0020\u0022%\u0073\u0022",string (_gcg ));
_gcb :=_ecg .FindAllStringIndex (string (_gcg ),-1);if _gcb !=nil {_gcd :=_gcb [len (_gcb )-1];_f .Log .Trace ("\u0049\u006e\u0064\u003a\u0020\u0025\u0020\u0064",_gcb );_acfd ._fdc .Seek (-_bggc -_eef +int64 (_gcd [0]),_agc .SeekEnd );return nil ;};_f .Log .Debug ("\u0057\u0061\u0072\u006e\u0069\u006eg\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006b\u0065\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0021\u0020\u002d\u0020\u0063\u006f\u006e\u0074\u0069\u006e\u0075\u0065\u0020s\u0065e\u006b\u0069\u006e\u0067");
_bggc +=_eef ;};_f .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006be\u0072 \u0077\u0061\u0073\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");return _a .New ("\u0045\u004f\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};var _fba =_b .MustCompile ("\u0028\u005c\u0064\u002b)\\\u0073\u002b\u0028\u005c\u0064\u002b\u0029\u005c\u0073\u002b\u006f\u0062\u006a");func (_dbb *fdfParser )setFileOffset (_dc int64 ){_dbb ._fdc .Seek (_dc ,_agc .SeekStart );_dbb ._cf =_d .NewReader (_dbb ._fdc );
};var _aca =_b .MustCompile ("\u005e\u005b\u005c+-\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e]\u002b)\u0065[\u005c+\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e\u005d\u002b\u0029");
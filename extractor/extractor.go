//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

//
// Package extractor is used for quickly extracting PDF content through a simple interface.
// Currently offers functionality for extracting textual content.
//
package extractor ;import (_ad "bytes";_b "errors";_ff "fmt";_adc "github.com/unidoc/unipdf/v3/common";_gf "github.com/unidoc/unipdf/v3/contentstream";_ea "github.com/unidoc/unipdf/v3/core";_ce "github.com/unidoc/unipdf/v3/internal/license";_bed "github.com/unidoc/unipdf/v3/internal/textencoding";
_bcc "github.com/unidoc/unipdf/v3/internal/transform";_bc "github.com/unidoc/unipdf/v3/model";_dg "golang.org/x/text/unicode/norm";_e "golang.org/x/xerrors";_bf "image/color";_be "io";_d "math";_g "regexp";_bb "sort";_ba "strings";_c "unicode";_f "unicode/utf8";
);func (_abddf *textTable )log (_dgbf string ){if !_ddgd {return ;};_adc .Log .Info ("~\u007e\u007e\u0020\u0025\u0073\u003a \u0025\u0064\u0020\u0078\u0020\u0025d\u0020\u0067\u0072\u0069\u0064\u003d\u0025t\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0025\u0036\u002e2\u0066",_dgbf ,_abddf ._bbbd ,_abddf ._cfce ,_abddf ._fafcf ,_abddf .PdfRectangle );
for _dade :=0;_dade < _abddf ._cfce ;_dade ++{for _aacce :=0;_aacce < _abddf ._bbbd ;_aacce ++{_agfb :=_abddf .get (_aacce ,_dade );if _agfb ==nil {continue ;};_ff .Printf ("%\u0034\u0064\u0020\u00252d\u003a \u0025\u0036\u002e\u0032\u0066 \u0025\u0071\u0020\u0025\u0064\u000a",_aacce ,_dade ,_agfb .PdfRectangle ,_fcaac (_agfb .text (),50),_f .RuneCountInString (_agfb .text ()));
};};};func _efc (_cfb *Extractor ,_fccad *_bc .PdfPageResources ,_acge _gf .GraphicsState ,_cfd *textState ,_dcgg *stateStack )*textObject {return &textObject {_aag :_cfb ,_feb :_fccad ,_cbc :_acge ,_agb :_dcgg ,_gad :_cfd ,_dfaf :_bcc .IdentityMatrix (),_bef :_bcc .IdentityMatrix ()};
};

// String returns a description of `tm`.
func (_bbbb *textMark )String ()string {return _ff .Sprintf ("\u0025\u002e\u0032f \u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\u0022\u0025\u0073\u0022",_bbbb .PdfRectangle ,_bbbb ._aca ,_bbbb ._cbab );};func (_gecg rulingList )intersections ()map[int ]intSet {var _cebbf ,_dgdd []int ;
for _gdeb ,_eaee :=range _gecg {switch _eaee ._bdffc {case _gda :_cebbf =append (_cebbf ,_gdeb );case _dgca :_dgdd =append (_dgdd ,_gdeb );};};if len (_cebbf )< _dcaa +1||len (_dgdd )< _ccda +1{return nil ;};if len (_cebbf )+len (_dgdd )> _aacd {_adc .Log .Debug ("\u0069\u006e\u0074\u0065\u0072\u0073e\u0063\u0074\u0069\u006f\u006e\u0073\u003a\u0020\u0054\u004f\u004f\u0020\u004d\u0041\u004e\u0059\u0020\u0072\u0075\u006ci\u006e\u0067\u0073\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u003d\u0020%\u0064 \u0078\u0020\u0025\u0064",len (_gecg ),len (_cebbf ),len (_dgdd ));
return nil ;};_acfg :=make (map[int ]intSet ,len (_cebbf )+len (_dgdd ));for _ ,_eeaf :=range _cebbf {for _ ,_feeg :=range _dgdd {if _gecg [_eeaf ].intersects (_gecg [_feeg ]){if _ ,_cfdag :=_acfg [_eeaf ];!_cfdag {_acfg [_eeaf ]=make (intSet );};if _ ,_agaeg :=_acfg [_feeg ];
!_agaeg {_acfg [_feeg ]=make (intSet );};_acfg [_eeaf ].add (_feeg );_acfg [_feeg ].add (_eeaf );};};};return _acfg ;};func (_gbf compositeCell )hasLines (_effaa []*textLine )bool {for _eade ,_addg :=range _effaa {_fgfb :=_dbea (_gbf .PdfRectangle ,_addg .PdfRectangle );
if _ddgd {_ff .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u005e\u005e\u005e\u0069\u006e\u0074\u0065\u0072\u0073e\u0063t\u0073\u003d\u0025\u0074\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u000a",_fgfb ,_eade ,len (_effaa ));_ff .Printf ("\u0020\u0020\u0020\u0020  \u005e\u005e\u005e\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025s\u000a",_gbf );
_ff .Printf ("\u0020 \u0020 \u0020\u0020\u0020\u006c\u0069\u006e\u0065\u003d\u0025\u0073\u000a",_addg );};if _fgfb {return true ;};};return false ;};func _ddcc (_gdba ,_cgae bounded )float64 {return _gdba .bbox ().Llx -_cgae .bbox ().Urx };var _gcfg =map[markKind ]string {_bgae :"\u0073\u0074\u0072\u006f\u006b\u0065",_ffgc :"\u0066\u0069\u006c\u006c",_dcaac :"\u0061u\u0067\u006d\u0065\u006e\u0074"};
func _ffad (_aaea string ,_efdd []rulingList ){_adc .Log .Info ("\u0024\u0024 \u0025\u0064\u0020g\u0072\u0069\u0064\u0073\u0020\u002d\u0020\u0025\u0073",len (_efdd ),_aaea );for _ccab ,_fbbdb :=range _efdd {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ccab ,_fbbdb .String ());
};};func (_decdc *shapesState )newSubPath (){_decdc .clearPath ();if _ccbg {_adc .Log .Info ("\u006e\u0065\u0077\u0053\u0075\u0062\u0050\u0061\u0074h\u003a\u0020\u0025\u0073",_decdc );};};type textState struct{_bdb float64 ;_aefb float64 ;_aedb float64 ;
_bbb float64 ;_fdg float64 ;_fec RenderMode ;_eebg float64 ;_fcg *_bc .PdfFont ;_adec _bc .PdfRectangle ;_fdd int ;_badd int ;};const (_ada =false ;_bggad =false ;_edab =false ;_gedf =false ;_ccbg =false ;_aaba =false ;_fcec =false ;_aaced =false ;_gggb =false ;
_aegf =_gggb &&true ;_ddccd =_aegf &&false ;_ecbe =_gggb &&true ;_ddgd =false ;_cfefc =_ddgd &&false ;_ecaf =_ddgd &&true ;_ggaae =false ;_cgcfa =_ggaae &&false ;_bgfd =_ggaae &&false ;_agef =_ggaae &&true ;_gcea =_ggaae &&false ;_cgaa =_ggaae &&false ;
);var _cf =false ;func (_fcdee gridTiling )log (_ffcf string ){if !_agef {return ;};_adc .Log .Info ("\u0074i\u006ci\u006e\u0067\u003a\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0071",len (_fcdee ._cacc ),len (_fcdee ._gbcfg ),_ffcf );_ff .Printf ("\u0020\u0020\u0020l\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a",_fcdee ._cacc );
_ff .Printf ("\u0020\u0020\u0020l\u006c\u0079\u003d\u0025\u002e\u0032\u0066\u000a",_fcdee ._gbcfg );for _bcdf ,_cadd :=range _fcdee ._gbcfg {_ccgb ,_abbd :=_fcdee ._aabda [_cadd ];if !_abbd {continue ;};_ff .Printf ("%\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_bcdf ,_cadd );
for _bafb ,_bdca :=range _fcdee ._cacc {_dfag ,_cece :=_ccgb [_bdca ];if !_cece {continue ;};_ff .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_bafb ,_dfag .String ());};};};func (_egga *ruling )alignsSec (_abebc *ruling )bool {const _gdaf =_fcef +1.0;
return _egga ._gecca -_gdaf <=_abebc ._fafg &&_abebc ._gecca -_gdaf <=_egga ._fafg ;};func (_daabe rulingList )log (_ffed string ){if !_ggaae {return ;};_adc .Log .Info ("\u0023\u0023\u0023\u0020\u0025\u0031\u0030\u0073\u003a\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_ffed ,_daabe .String ());
for _caee ,_eebdg :=range _daabe {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_caee ,_eebdg .String ());};};func _dcgc (_fddd _bc .PdfRectangle )*ruling {return &ruling {_bdffc :_gda ,_aebg :_fddd .Llx ,_gecca :_fddd .Lly ,_fafg :_fddd .Ury };
};

// RenderMode specifies the text rendering mode (Tmode), which determines whether showing text shall cause
// glyph outlines to be  stroked, filled, used as a clipping boundary, or some combination of the three.
// Stroking, filling, and clipping shall have the same effects for a text object as they do for a path object
// (see 8.5.3, "Path-Painting Operators" and 8.5.4, "Clipping Path Operators").
type RenderMode int ;func (_bafg *wordBag )blocked (_faag *textWord )bool {if _faag .Urx < _bafg .Llx {_gdea :=_bbff (_faag .PdfRectangle );_gacd :=_dcgc (_bafg .PdfRectangle );if _bafg ._dad .blocks (_gdea ,_gacd ){if _cgaa {_adc .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0078\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_faag ,_bafg );
};return true ;};}else if _bafg .Urx < _faag .Llx {_ggae :=_bbff (_bafg .PdfRectangle );_bedee :=_dcgc (_faag .PdfRectangle );if _bafg ._dad .blocks (_ggae ,_bedee ){if _cgaa {_adc .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0078\u2192\u0020:\u0020\u0025\u0073\u0020%s",_faag ,_bafg );
};return true ;};};if _faag .Ury < _bafg .Lly {_befg :=_dga (_faag .PdfRectangle );_ggdg :=_dcce (_bafg .PdfRectangle );if _bafg ._fff .blocks (_befg ,_ggdg ){if _cgaa {_adc .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0079\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_faag ,_bafg );
};return true ;};}else if _bafg .Ury < _faag .Lly {_beag :=_dga (_bafg .PdfRectangle );_fbf :=_dcce (_faag .PdfRectangle );if _bafg ._fff .blocks (_beag ,_fbf ){if _cgaa {_adc .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0079\u2192\u0020:\u0020\u0025\u0073\u0020%s",_faag ,_bafg );
};return true ;};};return false ;};func _bbefa (_abcbd []*textWord ,_bgfc *textWord )[]*textWord {for _eegbeb ,_eeafd :=range _abcbd {if _eeafd ==_bgfc {return _afac (_abcbd ,_eegbeb );};};_adc .Log .Error ("\u0072\u0065\u006d\u006f\u0076e\u0057\u006f\u0072\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u0073\u0020\u0064o\u0065\u0073\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",_bgfc );
return nil ;};type compositeCell struct{_bc .PdfRectangle ;paraList ;};

// Text returns the extracted page text.
func (_cfgd PageText )Text ()string {return _cfgd ._gcca };func (_fgabg *textObject )getFont (_aaca string )(*_bc .PdfFont ,error ){if _fgabg ._aag ._aa !=nil {_cgeb ,_bfd :=_fgabg .getFontDict (_aaca );if _bfd !=nil {_adc .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0067\u0065\u0074\u0046\u006f\u006e\u0074:\u0020n\u0061m\u0065=\u0025\u0073\u002c\u0020\u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0073",_aaca ,_bfd .Error ());
return nil ,_bfd ;};_fgabg ._aag ._ced ++;_cee ,_ggdb :=_fgabg ._aag ._aa [_cgeb .String ()];if _ggdb {_cee ._eedb =_fgabg ._aag ._ced ;return _cee ._gdeg ,nil ;};};_afb ,_dgcc :=_fgabg .getFontDict (_aaca );if _dgcc !=nil {return nil ,_dgcc ;};_aacc ,_dgcc :=_fgabg .getFontDirect (_aaca );
if _dgcc !=nil {return nil ,_dgcc ;};if _fgabg ._aag ._aa !=nil {_gdfg :=fontEntry {_aacc ,_fgabg ._aag ._ced };if len (_fgabg ._aag ._aa )>=_feag {var _afdc []string ;for _cacd :=range _fgabg ._aag ._aa {_afdc =append (_afdc ,_cacd );};_bb .Slice (_afdc ,func (_ddca ,_gfc int )bool {return _fgabg ._aag ._aa [_afdc [_ddca ]]._eedb < _fgabg ._aag ._aa [_afdc [_gfc ]]._eedb ;
});delete (_fgabg ._aag ._aa ,_afdc [0]);};_fgabg ._aag ._aa [_afb .String ()]=_gdfg ;};return _aacc ,nil ;};func (_ddebb paraList )findGridTables (_defg []gridTiling )[]*textTable {if _ddgd {_adc .Log .Info ("\u0066i\u006e\u0064\u0047\u0072\u0069\u0064\u0054\u0061\u0062\u006c\u0065s\u003a\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073",len (_ddebb ));
for _fgbe ,_abbe :=range _ddebb {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fgbe ,_abbe );};};var _ggbee []*textTable ;for _fgbc ,_becdd :=range _defg {_gdege ,_dbfg :=_ddebb .findTableGrid (_becdd );if _gdege !=nil {_gdege .log (_ff .Sprintf ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0057\u0069\u0074\u0068\u0047\u0072\u0069\u0064\u0073\u003a\u0020%\u0064",_fgbc ));
_ggbee =append (_ggbee ,_gdege );_gdege .markCells ();};for _faedf :=range _dbfg {_faedf ._aaee =true ;};};if _ddgd {_adc .Log .Info ("\u0066i\u006e\u0064\u0047\u0072i\u0064\u0054\u0061\u0062\u006ce\u0073:\u0020%\u0064\u0020\u0074\u0061\u0062\u006c\u0065s",len (_ggbee ));
};return _ggbee ;};func (_febg compositeCell )split (_fdfbb ,_fgaag []float64 )*textTable {_aceeaa :=len (_fdfbb )+1;_ffag :=len (_fgaag )+1;if _ddgd {_adc .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0043\u0065l\u006c\u002e\u0073\u0070l\u0069\u0074\u003a\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a\u0009\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025\u0073\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073=\u0025\u0036\u002e\u0032\u0066\u000a\t\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d%\u0036\u002e\u0032\u0066",_ffag ,_aceeaa ,_febg ,_fdfbb ,_fgaag );
_ff .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073\u000a",len (_febg .paraList ));for _gbag ,_adcf :=range _febg .paraList {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gbag ,_adcf .String ());};_ff .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",len (_febg .lines ()));
for _afaae ,_fgacg :=range _febg .lines (){_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_afaae ,_fgacg );};};_fdfbb =_agba (_fdfbb ,_febg .Ury ,_febg .Lly );_fgaag =_agba (_fgaag ,_febg .Llx ,_febg .Urx );_bafcf :=make (map[uint64 ]*textPara ,_ffag *_aceeaa );
_bdbe :=textTable {_bbbd :_ffag ,_cfce :_aceeaa ,_fcefg :_bafcf };_gfga :=_febg .paraList ;_bb .Slice (_gfga ,func (_caac ,_dfbfa int )bool {_gadc ,_aada :=_gfga [_caac ],_gfga [_dfbfa ];_egbe ,_bbafc :=_gadc .Lly ,_aada .Lly ;if _egbe !=_bbafc {return _egbe < _bbafc ;
};return _gadc .Llx < _aada .Llx ;});_fdbf :=make (map[uint64 ]_bc .PdfRectangle ,_ffag *_aceeaa );for _bbdgd ,_acbcc :=range _fdfbb [1:]{_aeae :=_fdfbb [_bbdgd ];for _gdfb ,_bagc :=range _fgaag [1:]{_ecbd :=_fgaag [_gdfb ];_fdbf [_degb (_gdfb ,_bbdgd )]=_bc .PdfRectangle {Llx :_ecbd ,Urx :_bagc ,Lly :_acbcc ,Ury :_aeae };
};};if _ddgd {_adc .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0043\u0065l\u006c\u002e\u0073\u0070\u006c\u0069\u0074\u003a\u0020\u0072e\u0063\u0074\u0073");_ff .Printf ("\u0020\u0020\u0020\u0020");for _ddd :=0;_ddd < _ffag ;_ddd ++{_ff .Printf ("\u0025\u0033\u0030\u0064\u002c\u0020",_ddd );
};_ff .Println ();for _fagbc :=0;_fagbc < _aceeaa ;_fagbc ++{_ff .Printf ("\u0020\u0020\u0025\u0032\u0064\u003a",_fagbc );for _fcdc :=0;_fcdc < _ffag ;_fcdc ++{_ff .Printf ("\u00256\u002e\u0032\u0066\u002c\u0020",_fdbf [_degb (_fcdc ,_fagbc )]);};_ff .Println ();
};};_cfde :=func (_dgfc *textLine )(int ,int ){for _aegc :=0;_aegc < _aceeaa ;_aegc ++{for _ccff :=0;_ccff < _ffag ;_ccff ++{if _fecg (_fdbf [_degb (_ccff ,_aegc )],_dgfc .PdfRectangle ){return _ccff ,_aegc ;};};};return -1,-1;};_egaf :=make (map[uint64 ][]*textLine ,_ffag *_aceeaa );
for _ ,_cdge :=range _gfga .lines (){_ffda ,_baaf :=_cfde (_cdge );if _ffda < 0{continue ;};_egaf [_degb (_ffda ,_baaf )]=append (_egaf [_degb (_ffda ,_baaf )],_cdge );};for _gbbc :=0;_gbbc < len (_fdfbb )-1;_gbbc ++{_aabae :=_fdfbb [_gbbc ];_bdeg :=_fdfbb [_gbbc +1];
for _cagd :=0;_cagd < len (_fgaag )-1;_cagd ++{_gbdea :=_fgaag [_cagd ];_fcfa :=_fgaag [_cagd +1];_fgcd :=_bc .PdfRectangle {Llx :_gbdea ,Urx :_fcfa ,Lly :_bdeg ,Ury :_aabae };_fgeb :=_egaf [_degb (_cagd ,_gbbc )];if len (_fgeb )==0{continue ;};_adgc :=_efaf (_fgcd ,_fgeb );
_bdbe .put (_cagd ,_gbbc ,_adgc );};};return &_bdbe ;};func (_gbed *wordBag )empty (_dcgge int )bool {_ ,_efgf :=_gbed ._egee [_dcgge ];return !_efgf };func (_acba *stateStack )empty ()bool {return len (*_acba )==0};func _cdab (_cdef []TextMark ,_egeb *int ,_ggag string )[]TextMark {_afbf :=_efga ;
_afbf .Text =_ggag ;return _cccg (_cdef ,_egeb ,_afbf );};func (_deff gridTile )contains (_edac _bc .PdfRectangle )bool {if _deff .numBorders ()< 3{return false ;};if _deff ._befe &&_edac .Llx < _deff .Llx -_bfcb {return false ;};if _deff ._eabbc &&_edac .Urx > _deff .Urx +_bfcb {return false ;
};if _deff ._fdaa &&_edac .Lly < _deff .Lly -_bfcb {return false ;};if _deff ._afca &&_edac .Ury > _deff .Ury +_bfcb {return false ;};return true ;};func (_gafe *ruling )gridIntersecting (_aabfc *ruling )bool {return _cgbc (_gafe ._gecca ,_aabfc ._gecca )&&_cgbc (_gafe ._fafg ,_aabfc ._fafg );
};func (_dadd *textLine )toTextMarks (_cggg *int )[]TextMark {var _geed []TextMark ;for _ ,_bbgc :=range _dadd ._fegc {if _bbgc ._fdcfe {_geed =_cdab (_geed ,_cggg ,"\u0020");};_faccd :=_bbgc .toTextMarks (_cggg );_geed =append (_geed ,_faccd ...);};return _geed ;
};func (_ddce gridTiling )complete ()bool {for _ ,_gged :=range _ddce ._aabda {for _ ,_gefe :=range _gged {if !_gefe .complete (){return false ;};};};return true ;};type gridTile struct{_bc .PdfRectangle ;_afca ,_befe ,_fdaa ,_eabbc bool ;};func (_afbg *textPara )fontsize ()float64 {return _afbg ._ebgbb [0]._ebfa };


// ApplyArea processes the page text only within the specified area `bbox`.
// Each time ApplyArea is called, it updates the result set in `pt`.
// Can be called multiple times in a row with different bounding boxes.
func (_eef *PageText )ApplyArea (bbox _bc .PdfRectangle ){_bebe :=make ([]*textMark ,0,len (_eef ._fbga ));for _ ,_acee :=range _eef ._fbga {if _dbea (_acee .bbox (),bbox ){_bebe =append (_bebe ,_acee );};};var _daf paraList ;_gaeb :=len (_bebe );for _eggd :=0;
_eggd < 360&&_gaeb > 0;_eggd +=90{_fdga :=make ([]*textMark ,0,len (_bebe )-_gaeb );for _ ,_cgfe :=range _bebe {if _cgfe ._faed ==_eggd {_fdga =append (_fdga ,_cgfe );};};if len (_fdga )> 0{_gbde :=_bfgb (_fdga ,_eef ._gbcf ,nil ,nil );_daf =append (_daf ,_gbde ...);
_gaeb -=len (_fdga );};};_daed :=new (_ad .Buffer );_daf .writeText (_daed );_eef ._gcca =_daed .String ();_eef ._bede =_daf .toTextMarks ();_eef ._fgde =_daf .tables ();};func (_adefg *textPara )text ()string {_aecec :=new (_ad .Buffer );_adefg .writeText (_aecec );
return _aecec .String ();};type ruling struct{_bdffc rulingKind ;_abge markKind ;_bf .Color ;_aebg float64 ;_gecca float64 ;_fafg float64 ;_bffc float64 ;};func (_aceea *wordBag )text ()string {_gfeaa :=_aceea .allWords ();_facb :=make ([]string ,len (_gfeaa ));
for _gfbfd ,_abe :=range _gfeaa {_facb [_gfbfd ]=_abe ._beaff ;};return _ba .Join (_facb ,"\u0020");};

// Append appends `mark` to the mark array.
func (_gcde *TextMarkArray )Append (mark TextMark ){_gcde ._ecff =append (_gcde ._ecff ,mark )};func (_aefga rulingList )splitSec ()[]rulingList {_bb .Slice (_aefga ,func (_gagd ,_acgab int )bool {_bgdgb ,_dagg :=_aefga [_gagd ],_aefga [_acgab ];if _bgdgb ._gecca !=_dagg ._gecca {return _bgdgb ._gecca < _dagg ._gecca ;
};return _bgdgb ._fafg < _dagg ._fafg ;});_ggceg :=make (map[*ruling ]struct{},len (_aefga ));_dafbf :=func (_gccb *ruling )rulingList {_baecc :=rulingList {_gccb };_ggceg [_gccb ]=struct{}{};for _ ,_egff :=range _aefga {if _ ,_degff :=_ggceg [_egff ];
_degff {continue ;};for _ ,_eagca :=range _baecc {if _egff .alignsSec (_eagca ){_baecc =append (_baecc ,_egff );_ggceg [_egff ]=struct{}{};break ;};};};return _baecc ;};_efcfd :=[]rulingList {_dafbf (_aefga [0])};for _ ,_bbfbg :=range _aefga [1:]{if _ ,_bbgd :=_ggceg [_bbfbg ];
_bbgd {continue ;};_efcfd =append (_efcfd ,_dafbf (_bbfbg ));};return _efcfd ;};func (_fcac *wordBag )firstWord (_ffg int )*textWord {return _fcac ._egee [_ffg ][0]};func _eee (_aeac bounded )float64 {return -_aeac .bbox ().Lly };

// Extractor stores and offers functionality for extracting content from PDF pages.
type Extractor struct{_de string ;_fa *_bc .PdfPageResources ;_fg _bc .PdfRectangle ;_aa map[string ]fontEntry ;_dd map[string ]textResult ;_ced int64 ;_edc int ;};

// String returns a description of `k`.
func (_efcg rulingKind )String ()string {_fafee ,_bgce :=_febdb [_efcg ];if !_bgce {return _ff .Sprintf ("\u004e\u006ft\u0020\u0061\u0020r\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0064",_efcg );};return _fafee ;};func _fgff (_aagfg []*wordBag )[]*wordBag {if len (_aagfg )<=1{return _aagfg ;
};if _gggb {_adc .Log .Info ("\u006d\u0065\u0072\u0067\u0065\u0057\u006f\u0072\u0064B\u0061\u0067\u0073\u003a");};_bb .Slice (_aagfg ,func (_gddd ,_bfag int )bool {_aegg ,_ggbd :=_aagfg [_gddd ],_aagfg [_bfag ];_ffgg :=_aegg .Width ()*_aegg .Height ();
_geea :=_ggbd .Width ()*_ggbd .Height ();if _ffgg !=_geea {return _ffgg > _geea ;};if _aegg .Height ()!=_ggbd .Height (){return _aegg .Height ()> _ggbd .Height ();};return _gddd < _bfag ;});var _gcab []*wordBag ;_bdab :=make (intSet );for _ebbfc :=0;_ebbfc < len (_aagfg );
_ebbfc ++{if _bdab .has (_ebbfc ){continue ;};_facc :=_aagfg [_ebbfc ];for _efce :=_ebbfc +1;_efce < len (_aagfg );_efce ++{if _bdab .has (_ebbfc ){continue ;};_fdfe :=_aagfg [_efce ];_dfdg :=_facc .PdfRectangle ;_dfdg .Llx -=_facc ._gccae ;if _fecg (_dfdg ,_fdfe .PdfRectangle ){_facc .absorb (_fdfe );
_bdab .add (_efce );};};_gcab =append (_gcab ,_facc );};if len (_aagfg )!=len (_gcab )+len (_bdab ){_adc .Log .Error ("\u006d\u0065\u0072ge\u0057\u006f\u0072\u0064\u0042\u0061\u0067\u0073\u003a \u0025d\u2192%\u0064 \u0061\u0062\u0073\u006f\u0072\u0062\u0065\u0064\u003d\u0025\u0064",len (_aagfg ),len (_gcab ),len (_bdab ));
};return _gcab ;};func _bcdc (_fbee map[int ][]float64 ){if len (_fbee )<=1{return ;};_egdf :=_dgge (_fbee );if _ddgd {_adc .Log .Info ("\u0066i\u0078C\u0065\u006c\u006c\u0073\u003a \u006b\u0065y\u0073\u003d\u0025\u002b\u0076",_egdf );};var _cbegea ,_cfga int ;
for _cbegea ,_cfga =range _egdf {if _fbee [_cfga ]!=nil {break ;};};for _gceg ,_aeba :=range _egdf [_cbegea :]{_ageebb :=_fbee [_aeba ];if _ageebb ==nil {continue ;};if _ddgd {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u006b\u0030\u003d\u0025\u0064\u0020\u006b1\u003d\u0025\u0064\u000a",_cbegea +_gceg ,_cfga ,_aeba );
};_gdeae :=_fbee [_aeba ];if _gdeae [len (_gdeae )-1]> _ageebb [0]{_gdeae [len (_gdeae )-1]=_ageebb [0];_fbee [_cfga ]=_gdeae ;};_cfga =_aeba ;};};func (_acaf *textObject )newTextMark (_ddbf string ,_degda _bcc .Matrix ,_bdcfg _bcc .Point ,_dfee float64 ,_fcfd *_bc .PdfFont ,_aacfe float64 ,_cabg ,_ggca _bf .Color )(textMark ,bool ){_eac :=_degda .Angle ();
_edea :=_dbee (_eac ,_gggd );var _dabdd float64 ;if _edea %180!=90{_dabdd =_degda .ScalingFactorY ();}else {_dabdd =_degda .ScalingFactorX ();};_fbgd :=_eagc (_degda );_efff :=_bc .PdfRectangle {Llx :_fbgd .X ,Lly :_fbgd .Y ,Urx :_bdcfg .X ,Ury :_bdcfg .Y };
switch _edea %360{case 90:_efff .Urx -=_dabdd ;case 180:_efff .Ury -=_dabdd ;case 270:_efff .Urx +=_dabdd ;case 0:_efff .Ury +=_dabdd ;default:_edea =0;_efff .Ury +=_dabdd ;};if _efff .Llx > _efff .Urx {_efff .Llx ,_efff .Urx =_efff .Urx ,_efff .Llx ;};
if _efff .Lly > _efff .Ury {_efff .Lly ,_efff .Ury =_efff .Ury ,_efff .Lly ;};_gcdc :=true ;if _acaf ._aag ._fg .Width ()> 0{_cgedd ,_dcc :=_dbed (_efff ,_acaf ._aag ._fg );if !_dcc {_gcdc =false ;_adc .Log .Debug ("\u0054\u0065\u0078\u0074\u0020m\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069\u0064\u0065\u0020\u0070a\u0067\u0065\u002e\u0020\u0062\u0062\u006f\u0078\u003d\u0025\u0067\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u003d\u0025\u0067\u0020\u0074\u0065\u0078\u0074\u003d\u0025q",_efff ,_acaf ._aag ._fg ,_ddbf );
};_efff =_cgedd ;};_eead :=_efff ;_geda :=_acaf ._aag ._fg ;switch _edea %360{case 90:_geda .Urx ,_geda .Ury =_geda .Ury ,_geda .Urx ;_eead =_bc .PdfRectangle {Llx :_geda .Urx -_efff .Ury ,Urx :_geda .Urx -_efff .Lly ,Lly :_efff .Llx ,Ury :_efff .Urx };
case 180:_eead =_bc .PdfRectangle {Llx :_geda .Urx -_efff .Llx ,Urx :_geda .Urx -_efff .Urx ,Lly :_geda .Ury -_efff .Lly ,Ury :_geda .Ury -_efff .Ury };case 270:_geda .Urx ,_geda .Ury =_geda .Ury ,_geda .Urx ;_eead =_bc .PdfRectangle {Llx :_efff .Ury ,Urx :_efff .Lly ,Lly :_geda .Ury -_efff .Llx ,Ury :_geda .Ury -_efff .Urx };
};if _eead .Llx > _eead .Urx {_eead .Llx ,_eead .Urx =_eead .Urx ,_eead .Llx ;};if _eead .Lly > _eead .Ury {_eead .Lly ,_eead .Ury =_eead .Ury ,_eead .Lly ;};_aggd :=textMark {_cbab :_ddbf ,PdfRectangle :_eead ,_fgaa :_efff ,_ccf :_fcfd ,_aca :_dabdd ,_bcg :_aacfe ,_dbgb :_degda ,_efca :_bdcfg ,_faed :_edea ,_bgcc :_cabg ,_gacc :_ggca };
if _bggad {_adc .Log .Info ("n\u0065\u0077\u0054\u0065\u0078\u0074M\u0061\u0072\u006b\u003a\u0020\u0073t\u0061\u0072\u0074\u003d\u0025\u002e\u0032f\u0020\u0065\u006e\u0064\u003d\u0025\u002e\u0032\u0066\u0020%\u0073",_fbgd ,_bdcfg ,_aggd .String ());};return _aggd ,_gcdc ;
};func _bfgb (_cgbb []*textMark ,_ddab _bc .PdfRectangle ,_dbeaa rulingList ,_fece []gridTiling )paraList {_adc .Log .Trace ("\u006d\u0061\u006b\u0065\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065\u003a \u0025\u0064\u0020\u0065\u006c\u0065m\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065=\u0025\u002e\u0032\u0066",len (_cgbb ),_ddab );
if len (_cgbb )==0{return nil ;};_fccc :=_eedbd (_cgbb ,_ddab );if len (_fccc )==0{return nil ;};_dbeaa .log ("\u006d\u0061\u006be\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065");_gdda ,_fbeb :=_dbeaa .vertsHorzs ();_cfae :=_aecd (_fccc ,_ddab .Ury ,_gdda ,_fbeb );
_feed :=_fdfef (_cfae ,_ddab .Ury ,_gdda ,_fbeb );_feed =_fgff (_feed );_ebaf :=make (paraList ,0,len (_feed ));for _ ,_cede :=range _feed {_edda :=_cede .arrangeText ();if _edda !=nil {_ebaf =append (_ebaf ,_edda );};};if len (_ebaf )>=_bdge {_ebaf =_ebaf .extractTables (_fece );
};_ebaf .sortReadingOrder ();_ebaf .log ("\u0073\u006f\u0072te\u0064\u0020\u0069\u006e\u0020\u0072\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u006f\u0072\u0064\u0065\u0072");return _ebaf ;};func _fecg (_gag ,_facd _bc .PdfRectangle )bool {return _gag .Llx <=_facd .Llx &&_facd .Urx <=_gag .Urx &&_gag .Lly <=_facd .Lly &&_facd .Ury <=_gag .Ury ;
};func _cfaf (_fdb ,_aeggb bounded )float64 {return _eee (_fdb )-_eee (_aeggb )};func (_eeb *textObject )showTextAdjusted (_bgb *_ea .PdfObjectArray )error {_cdd :=false ;for _ ,_dbb :=range _bgb .Elements (){switch _dbb .(type ){case *_ea .PdfObjectFloat ,*_ea .PdfObjectInteger :_gcd ,_cab :=_ea .GetNumberAsFloat (_dbb );
if _cab !=nil {_adc .Log .Debug ("\u0045\u0052\u0052\u004fR\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078t\u0041\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0042\u0061\u0064\u0020\u006e\u0075\u006d\u0065r\u0069\u0063\u0061\u006c\u0020a\u0072\u0067\u002e\u0020\u006f\u003d\u0025\u0073\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_dbb ,_bgb );
return _cab ;};_dfgb ,_dcg :=-_gcd *0.001*_eeb ._gad ._fdg ,0.0;if _cdd {_dcg ,_dfgb =_dfgb ,_dcg ;};_dbc :=_fcda (_bcc .Point {X :_dfgb ,Y :_dcg });_eeb ._dfaf .Concat (_dbc );case *_ea .PdfObjectString :_fafe ,_gcgf :=_ea .GetStringBytes (_dbb );if !_gcgf {_adc .Log .Trace ("s\u0068\u006f\u0077\u0054\u0065\u0078\u0074\u0041\u0064j\u0075\u0073\u0074\u0065\u0064\u003a\u0020Ba\u0064\u0020\u0073\u0074r\u0069\u006e\u0067\u0020\u0061\u0072\u0067\u002e\u0020o=\u0025\u0073 \u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_dbb ,_bgb );
return _ea .ErrTypeError ;};_eeb .renderText (_fafe );default:_adc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078\u0074A\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0055\u006e\u0065\u0078p\u0065\u0063\u0074\u0065\u0064\u0020\u0074\u0079\u0070\u0065\u0020\u0028%T\u0029\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_dbb ,_bgb );
return _ea .ErrTypeError ;};};return nil ;};func (_egcf *textPara )isAtom ()*textTable {_ageff :=_egcf ;_gded :=_egcf ._dbeb ;_ccdec :=_egcf ._cgee ;if _gded .taken ()||_ccdec .taken (){return nil ;};_efdab :=_gded ._cgee ;if _efdab .taken ()||_efdab !=_ccdec ._dbeb {return nil ;
};return _cccge (_ageff ,_gded ,_ccdec ,_efdab );};func (_ggdcg *subpath )isQuadrilateral ()bool {if len (_ggdcg ._dged )< 4||len (_ggdcg ._dged )> 5{return false ;};if len (_ggdcg ._dged )==5{_ddfg :=_ggdcg ._dged [0];_dcdc :=_ggdcg ._dged [4];if _ddfg .X !=_dcdc .X ||_ddfg .Y !=_dcdc .Y {return false ;
};};return true ;};const (_gcfe rulingKind =iota ;_dgca ;_gda ;);type bounded interface{bbox ()_bc .PdfRectangle };func (_fca *textObject )moveTextSetLeading (_aegd ,_cfa float64 ){_fca ._gad ._bbb =-_cfa ;_fca .moveLP (_aegd ,_cfa );};func (_bebd *wordBag )highestWord (_aabb int ,_efag ,_cace float64 )*textWord {for _ ,_egcb :=range _bebd ._egee [_aabb ]{if _efag <=_egcb ._edcb &&_egcb ._edcb <=_cace {return _egcb ;
};};return nil ;};func _gcdef (_gfgef ,_deee ,_bfab float64 )rulingKind {if _gfgef >=_bfab &&_cfgee (_deee ,_gfgef ){return _dgca ;};if _deee >=_bfab &&_cfgee (_gfgef ,_deee ){return _gda ;};return _gcfe ;};

// String returns a description of `t`.
func (_cfdff *textTable )String ()string {return _ff .Sprintf ("\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0025\u0074",_cfdff ._bbbd ,_cfdff ._cfce ,_cfdff ._fafcf );};func (_aeda *imageExtractContext )extractXObjectImage (_eag *_ea .PdfObjectName ,_dcf _gf .GraphicsState ,_cac *_bc .PdfPageResources )error {_bab ,_ :=_cac .GetXObjectByName (*_eag );
if _bab ==nil {return nil ;};_ffa ,_cbb :=_aeda ._ge [_bab ];if !_cbb {_cba ,_bcd :=_cac .GetXObjectImageByName (*_eag );if _bcd !=nil {return _bcd ;};if _cba ==nil {return nil ;};_bga ,_bcd :=_cba .ToImage ();if _bcd !=nil {return _bcd ;};_ffa =&cachedImage {_ggd :_bga ,_dbe :_cba .ColorSpace };
_aeda ._ge [_bab ]=_ffa ;};_baa :=_ffa ._ggd ;_edb :=_ffa ._dbe ;_cacg ,_cfg :=_edb .ImageToRGB (*_baa );if _cfg !=nil {return _cfg ;};_adc .Log .Debug ("@\u0044\u006f\u0020\u0043\u0054\u004d\u003a\u0020\u0025\u0073",_dcf .CTM .String ());_cgf :=ImageMark {Image :&_cacg ,Width :_dcf .CTM .ScalingFactorX (),Height :_dcf .CTM .ScalingFactorY (),Angle :_dcf .CTM .Angle ()};
_cgf .X ,_cgf .Y =_dcf .CTM .Translation ();_aeda ._bgd =append (_aeda ._bgd ,_cgf );_aeda ._aef ++;return nil ;};const (_dggdg markKind =iota ;_bgae ;_ffgc ;_dcaac ;);var _eadb =_g .MustCompile ("\u005e\u005c\u0073\u002a\u0028\u005c\u0064\u002b\u005c\u002e\u003f|\u005b\u0049\u0069\u0076\u005d\u002b\u0029\u005c\u0073\u002a\\\u0029\u003f\u0024");
func (_ead *textObject )moveLP (_gece ,_eadc float64 ){_ead ._bef .Concat (_bcc .NewMatrix (1,0,0,1,_gece ,_eadc ));_ead ._dfaf =_ead ._bef ;};func (_bgdb paraList )topoOrder ()[]int {if _aaced {_adc .Log .Info ("\u0074\u006f\u0070\u006f\u004f\u0072\u0064\u0065\u0072\u003a");
};_abeg :=len (_bgdb );_ggfdf :=make ([]bool ,_abeg );_gcga :=make ([]int ,0,_abeg );_gefb :=_bgdb .llyOrdering ();var _adccf func (_agdf int );_adccf =func (_cdc int ){_ggfdf [_cdc ]=true ;for _cccb :=0;_cccb < _abeg ;_cccb ++{if !_ggfdf [_cccb ]{if _bgdb .readBefore (_gefb ,_cdc ,_cccb ){_adccf (_cccb );
};};};_gcga =append (_gcga ,_cdc );};for _ebae :=0;_ebae < _abeg ;_ebae ++{if !_ggfdf [_ebae ]{_adccf (_ebae );};};return _gaeg (_gcga );};func (_ddeae paraList )yNeighbours (_bead float64 )map[*textPara ][]int {_fgfdb :=make ([]event ,2*len (_ddeae ));
if _bead ==0{for _dgaa ,_gdgd :=range _ddeae {_fgfdb [2*_dgaa ]=event {_gdgd .Lly ,true ,_dgaa };_fgfdb [2*_dgaa +1]=event {_gdgd .Ury ,false ,_dgaa };};}else {for _bagg ,_edeb :=range _ddeae {_fgfdb [2*_bagg ]=event {_edeb .Lly -_bead *_edeb .fontsize (),true ,_bagg };
_fgfdb [2*_bagg +1]=event {_edeb .Ury +_bead *_edeb .fontsize (),false ,_bagg };};};return _ddeae .eventNeighbours (_fgfdb );};func (_fbef compositeCell )parasBBox ()(paraList ,_bc .PdfRectangle ){return _fbef .paraList ,_fbef .PdfRectangle ;};func (_ddgb *wordBag )getDepthIdx (_aacf float64 )int {_cacf :=_ddgb .depthIndexes ();
_ffae :=_gaebb (_aacf );if _ffae < _cacf [0]{return _cacf [0];};if _ffae > _cacf [len (_cacf )-1]{return _cacf [len (_cacf )-1];};return _ffae ;};func (_babd *shapesState )lineTo (_fedb ,_fac float64 ){if _ccbg {_adc .Log .Info ("\u006c\u0069\u006eeT\u006f\u0028\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0070\u003d\u0025\u002e\u0032\u0066",_fedb ,_fac ,_babd .devicePoint (_fedb ,_fac ));
};_babd .addPoint (_fedb ,_fac );};func (_adddf paraList )llyRange (_abec []int ,_caec ,_bbefde float64 )[]int {_fdca :=len (_adddf );if _bbefde < _adddf [_abec [0]].Lly ||_caec > _adddf [_abec [_fdca -1]].Lly {return nil ;};_efbg :=_bb .Search (_fdca ,func (_cgfeb int )bool {return _adddf [_abec [_cgfeb ]].Lly >=_caec });
_fccb :=_bb .Search (_fdca ,func (_ebgc int )bool {return _adddf [_abec [_ebgc ]].Lly > _bbefde });return _abec [_efbg :_fccb ];};func (_dfda *wordBag )depthIndexes ()[]int {if len (_dfda ._egee )==0{return nil ;};_cabc :=make ([]int ,len (_dfda ._egee ));
_bbfc :=0;for _aga :=range _dfda ._egee {_cabc [_bbfc ]=_aga ;_bbfc ++;};_bb .Ints (_cabc );return _cabc ;};func _gceaf (_aaed string )bool {for _ ,_fbdg :=range _aaed {if !_c .IsSpace (_fbdg ){return false ;};};return true ;};func _abfd (_bgge ,_ababe _bcc .Point )bool {return _bgge .X ==_ababe .X &&_bgge .Y ==_ababe .Y };
func (_badf *shapesState )establishSubpath ()*subpath {_cdfa ,_gdca :=_badf .lastpointEstablished ();if !_gdca {_badf ._gegg =append (_badf ._gegg ,_gbeb (_cdfa ));};if len (_badf ._gegg )==0{return nil ;};_badf ._febdf =false ;return _badf ._gegg [len (_badf ._gegg )-1];
};func (_fega rulingList )sortStrict (){_bb .Slice (_fega ,func (_gfegdg ,_dacdc int )bool {_gaae ,_caadf :=_fega [_gfegdg ],_fega [_dacdc ];_bbda ,_abef :=_gaae ._bdffc ,_caadf ._bdffc ;if _bbda !=_abef {return _bbda > _abef ;};_deafb ,_bdfeb :=_gaae ._aebg ,_caadf ._aebg ;
if !_ddcaa (_deafb -_bdfeb ){return _deafb < _bdfeb ;};_deafb ,_bdfeb =_gaae ._gecca ,_caadf ._gecca ;if _deafb !=_bdfeb {return _deafb < _bdfeb ;};return _gaae ._fafg < _caadf ._fafg ;});};func (_effg *subpath )removeDuplicates (){if len (_effg ._dged )==0{return ;
};_bdfd :=[]_bcc .Point {_effg ._dged [0]};for _ ,_fceb :=range _effg ._dged [1:]{if !_abfd (_fceb ,_bdfd [len (_bdfd )-1]){_bdfd =append (_bdfd ,_fceb );};};_effg ._dged =_bdfd ;};func (_ecfbc *textLine )bbox ()_bc .PdfRectangle {return _ecfbc .PdfRectangle };
func (_cfc pathSection )bbox ()_bc .PdfRectangle {_bbea :=_cfc ._bdfg [0]._dged [0];_bfda :=_bc .PdfRectangle {Llx :_bbea .X ,Urx :_bbea .X ,Lly :_bbea .Y ,Ury :_bbea .Y };_face :=func (_bdfc _bcc .Point ){if _bdfc .X < _bfda .Llx {_bfda .Llx =_bdfc .X ;
}else if _bdfc .X > _bfda .Urx {_bfda .Urx =_bdfc .X ;};if _bdfc .Y < _bfda .Lly {_bfda .Lly =_bdfc .Y ;}else if _bdfc .Y > _bfda .Ury {_bfda .Ury =_bdfc .Y ;};};for _ ,_bdcg :=range _cfc ._bdfg [0]._dged [1:]{_face (_bdcg );};for _ ,_fgb :=range _cfc ._bdfg [1:]{for _ ,_cfee :=range _fgb ._dged {_face (_cfee );
};};return _bfda ;};func (_cbae *wordBag )absorb (_bcccb *wordBag ){_cdaa :=_bcccb .makeRemovals ();for _bbef ,_gaca :=range _bcccb ._egee {for _ ,_cebc :=range _gaca {_cbae .pullWord (_cebc ,_bbef ,_cdaa );};};_bcccb .applyRemovals (_cdaa );};func _gcfb (_eggg ,_fdeb _bc .PdfRectangle )bool {return _eggg .Lly <=_fdeb .Ury &&_fdeb .Lly <=_eggg .Ury ;
};func (_dddgb *textTable )getRight ()paraList {_bdaa :=make (paraList ,_dddgb ._cfce );for _ffdde :=0;_ffdde < _dddgb ._cfce ;_ffdde ++{_gdcef :=_dddgb .get (_dddgb ._bbbd -1,_ffdde )._dbeb ;if _gdcef .taken (){return nil ;};_bdaa [_ffdde ]=_gdcef ;};
for _eedf :=0;_eedf < _dddgb ._cfce -1;_eedf ++{if _bdaa [_eedf ]._cgee !=_bdaa [_eedf +1]{return nil ;};};return _bdaa ;};func (_ebcd *subpath )close (){if !_abfd (_ebcd ._dged [0],_ebcd .last ()){_ebcd .add (_ebcd ._dged [0]);};_ebcd ._ecfb =true ;_ebcd .removeDuplicates ();
};

// Tables returns the tables extracted from the page.
func (_dfba PageText )Tables ()[]TextTable {if _ddgd {_adc .Log .Info ("\u0054\u0061\u0062\u006c\u0065\u0073\u003a\u0020\u0025\u0064",len (_dfba ._fgde ));};return _dfba ._fgde ;};func (_dcgb *textMark )bbox ()_bc .PdfRectangle {return _dcgb .PdfRectangle };
func _edfg (_ecaca ,_cdbb _bcc .Point )rulingKind {_eabgg :=_d .Abs (_ecaca .X -_cdbb .X );_ebde :=_d .Abs (_ecaca .Y -_cdbb .Y );return _gcdef (_eabgg ,_ebde ,_cdea );};func (_gfea *subpath )clear (){*_gfea =subpath {}};func _fcda (_bebb _bcc .Point )_bcc .Matrix {return _bcc .TranslationMatrix (_bebb .X ,_bebb .Y )};
func _gfefb (_fbfa []pathSection )rulingList {_eegb (_fbfa );if _ggaae {_adc .Log .Info ("\u006d\u0061k\u0065\u0053\u0074\u0072\u006f\u006b\u0065\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0064\u0020\u0073\u0074\u0072ok\u0065\u0073",len (_fbfa ));
};var _edag rulingList ;for _ ,_fgga :=range _fbfa {for _ ,_cgcb :=range _fgga ._bdfg {if len (_cgcb ._dged )< 2{continue ;};_acag :=_cgcb ._dged [0];for _ ,_aefge :=range _cgcb ._dged [1:]{if _deede ,_efdcc :=_eacg (_acag ,_aefge ,_fgga .Color );_efdcc {_edag =append (_edag ,_deede );
};_acag =_aefge ;};};};if _ggaae {_adc .Log .Info ("m\u0061\u006b\u0065\u0053tr\u006fk\u0065\u0052\u0075\u006c\u0069n\u0067\u0073\u003a\u0020\u0025\u0073",_edag );};return _edag ;};var _febdb =map[rulingKind ]string {_gcfe :"\u006e\u006f\u006e\u0065",_dgca :"\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_gda :"\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c"};
func (_ebg *stateStack )pop ()*textState {if _ebg .empty (){return nil ;};_acbf :=*(*_ebg )[len (*_ebg )-1];*_ebg =(*_ebg )[:len (*_ebg )-1];return &_acbf ;};func (_adgf paraList )addNeighbours (){_fbgbd :=func (_eadcb []int ,_cbecf *textPara )([]*textPara ,[]*textPara ){_aefdg :=make ([]*textPara ,0,len (_eadcb )-1);
_abeceb :=make ([]*textPara ,0,len (_eadcb )-1);for _ ,_bcce :=range _eadcb {_gfcff :=_adgf [_bcce ];if _gfcff .Urx <=_cbecf .Llx {_aefdg =append (_aefdg ,_gfcff );}else if _gfcff .Llx >=_cbecf .Urx {_abeceb =append (_abeceb ,_gfcff );};};return _aefdg ,_abeceb ;
};_dcege :=func (_ggfdg []int ,_adaf *textPara )([]*textPara ,[]*textPara ){_dcaaf :=make ([]*textPara ,0,len (_ggfdg )-1);_cfeca :=make ([]*textPara ,0,len (_ggfdg )-1);for _ ,_debfgd :=range _ggfdg {_fafge :=_adgf [_debfgd ];if _fafge .Ury <=_adaf .Lly {_cfeca =append (_cfeca ,_fafge );
}else if _fafge .Lly >=_adaf .Ury {_dcaaf =append (_dcaaf ,_fafge );};};return _dcaaf ,_cfeca ;};_gfdb :=_adgf .yNeighbours (_bdgc );for _ ,_aedg :=range _adgf {_dbcag :=_gfdb [_aedg ];if len (_dbcag )==0{continue ;};_ddccc ,_faabde :=_fbgbd (_dbcag ,_aedg );
if len (_ddccc )==0&&len (_faabde )==0{continue ;};if len (_ddccc )> 0{_ebafb :=_ddccc [0];for _ ,_eegbe :=range _ddccc [1:]{if _eegbe .Urx >=_ebafb .Urx {_ebafb =_eegbe ;};};for _ ,_dgfdc :=range _ddccc {if _dgfdc !=_ebafb &&_dgfdc .Urx > _ebafb .Llx {_ebafb =nil ;
break ;};};if _ebafb !=nil &&_gcfb (_aedg .PdfRectangle ,_ebafb .PdfRectangle ){_aedg ._cgbbb =_ebafb ;};};if len (_faabde )> 0{_bfdab :=_faabde [0];for _ ,_cgfba :=range _faabde [1:]{if _cgfba .Llx <=_bfdab .Llx {_bfdab =_cgfba ;};};for _ ,_gefbd :=range _faabde {if _gefbd !=_bfdab &&_gefbd .Llx < _bfdab .Urx {_bfdab =nil ;
break ;};};if _bfdab !=nil &&_gcfb (_aedg .PdfRectangle ,_bfdab .PdfRectangle ){_aedg ._dbeb =_bfdab ;};};};_gfdb =_adgf .xNeighbours (_eeba );for _ ,_dbbcb :=range _adgf {_bdfff :=_gfdb [_dbbcb ];if len (_bdfff )==0{continue ;};_aefcd ,_bgee :=_dcege (_bdfff ,_dbbcb );
if len (_aefcd )==0&&len (_bgee )==0{continue ;};if len (_bgee )> 0{_caecg :=_bgee [0];for _ ,_agcb :=range _bgee [1:]{if _agcb .Ury >=_caecg .Ury {_caecg =_agcb ;};};for _ ,_bfacg :=range _bgee {if _bfacg !=_caecg &&_bfacg .Ury > _caecg .Lly {_caecg =nil ;
break ;};};if _caecg !=nil &&_dcbb (_dbbcb .PdfRectangle ,_caecg .PdfRectangle ){_dbbcb ._cgee =_caecg ;};};if len (_aefcd )> 0{_edddf :=_aefcd [0];for _ ,_aebga :=range _aefcd [1:]{if _aebga .Lly <=_edddf .Lly {_edddf =_aebga ;};};for _ ,_dcfd :=range _aefcd {if _dcfd !=_edddf &&_dcfd .Lly < _edddf .Ury {_edddf =nil ;
break ;};};if _edddf !=nil &&_dcbb (_dbbcb .PdfRectangle ,_edddf .PdfRectangle ){_dbbcb ._ccce =_edddf ;};};};for _ ,_bedc :=range _adgf {if _bedc ._cgbbb !=nil &&_bedc ._cgbbb ._dbeb !=_bedc {_bedc ._cgbbb =nil ;};if _bedc ._ccce !=nil &&_bedc ._ccce ._cgee !=_bedc {_bedc ._ccce =nil ;
};if _bedc ._dbeb !=nil &&_bedc ._dbeb ._cgbbb !=_bedc {_bedc ._dbeb =nil ;};if _bedc ._cgee !=nil &&_bedc ._cgee ._ccce !=_bedc {_bedc ._cgee =nil ;};};};func (_aedf rulingList )isActualGrid ()(rulingList ,bool ){_dagb ,_dcca :=_aedf .augmentGrid ();if !(len (_dagb )>=_dcaa +1&&len (_dcca )>=_ccda +1){if _ggaae {_adc .Log .Info ("\u0069s\u0041\u0063t\u0075\u0061\u006c\u0047r\u0069\u0064\u003a \u004e\u006f\u0074\u0020\u0061\u006c\u0069\u0067\u006eed\u002e\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u003c\u0020\u0025d\u0020\u0078 \u0025\u0064",len (_dagb ),len (_dcca ),_dcaa +1,_ccda +1);
};return nil ,false ;};if _ggaae {_adc .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075a\u006c\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0073\u0020\u003a\u0020\u0025t\u0020\u0026\u0020\u0025\u0074\u0020\u2192 \u0025\u0074",_aedf ,len (_dagb )>=2,len (_dcca )>=2,len (_dagb )>=2&&len (_dcca )>=2);
for _bbcee ,_dgbe :=range _aedf {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0076\u000a",_bbcee ,_dgbe );};};if _fagg {_afeeg ,_fcb :=_dagb [0],_dagb [len (_dagb )-1];_ggge ,_baabc :=_dcca [0],_dcca [len (_dcca )-1];if !(_aecc (_afeeg ._aebg -_ggge ._gecca )&&_aecc (_fcb ._aebg -_ggge ._fafg )&&_aecc (_ggge ._aebg -_afeeg ._fafg )&&_aecc (_baabc ._aebg -_afeeg ._gecca )){if _ggaae {_adc .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069d\u003a\u0020\u0020N\u006f\u0074 \u0061\u006c\u0069\u0067\u006e\u0065d\u002e\n\t\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0076\u0031\u003d\u0025\u0073\u000a\u0009\u0068\u0030\u003d\u0025\u0073\u000a\u0009\u0068\u0031\u003d\u0025\u0073",_afeeg ,_fcb ,_ggge ,_baabc );
};return nil ,false ;};}else {if !_dagb .aligned (){if _bgfd {_adc .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0076\u0065\u0072\u0074\u0073\u002e\u0020%\u0064",len (_dagb ));
};return nil ,false ;};if !_dcca .aligned (){if _ggaae {_adc .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0068\u006f\u0072\u007a\u0073\u002e\u0020%\u0064",len (_dcca ));
};return nil ,false ;};};_ffdd :=append (_dagb ,_dcca ...);return _ffdd ,true ;};func (_gfgf *wordBag )removeDuplicates (){if _ecbe {_adc .Log .Info ("r\u0065m\u006f\u0076\u0065\u0044\u0075\u0070\u006c\u0069c\u0061\u0074\u0065\u0073: \u0025\u0071",_gfgf .text ());
};for _ ,_eebc :=range _gfgf .depthIndexes (){if len (_gfgf ._egee [_eebc ])==0{continue ;};_gecc :=_gfgf ._egee [_eebc ][0];_cgaf :=_gfed *_gecc ._gcfbc ;_dgef :=_gecc ._edcb ;for _ ,_aabf :=range _gfgf .depthBand (_dgef ,_dgef +_cgaf ){_fbcf :=map[*textWord ]struct{}{};
_dggd :=_gfgf ._egee [_aabf ];for _ ,_cecd :=range _dggd {if _ ,_cdce :=_fbcf [_cecd ];_cdce {continue ;};for _ ,_adcbc :=range _dggd {if _ ,_gaegb :=_fbcf [_adcbc ];_gaegb {continue ;};if _adcbc !=_cecd &&_adcbc ._beaff ==_cecd ._beaff &&_d .Abs (_adcbc .Llx -_cecd .Llx )< _cgaf &&_d .Abs (_adcbc .Urx -_cecd .Urx )< _cgaf &&_d .Abs (_adcbc .Lly -_cecd .Lly )< _cgaf &&_d .Abs (_adcbc .Ury -_cecd .Ury )< _cgaf {_fbcf [_adcbc ]=struct{}{};
};};};if len (_fbcf )> 0{_ggcg :=0;for _ ,_ddabg :=range _dggd {if _ ,_fgag :=_fbcf [_ddabg ];!_fgag {_dggd [_ggcg ]=_ddabg ;_ggcg ++;};};_gfgf ._egee [_aabf ]=_dggd [:len (_dggd )-len (_fbcf )];if len (_gfgf ._egee [_aabf ])==0{delete (_gfgf ._egee ,_aabf );
};};};};};func _bbff (_cefc _bc .PdfRectangle )*ruling {return &ruling {_bdffc :_gda ,_aebg :_cefc .Urx ,_gecca :_cefc .Lly ,_fafg :_cefc .Ury };};func _dgb (_baac ,_cbaf bounded )float64 {_fdgf :=_cfaf (_baac ,_cbaf );if !_ddcaa (_fdgf ){return _fdgf ;
};return _eagg (_baac ,_cbaf );};

// PageFonts represents extracted fonts on a PDF page.
type PageFonts struct{Fonts []Font ;};func (_feba *wordBag )removeWord (_efae *textWord ,_dbef int ){_fda :=_feba ._egee [_dbef ];_fda =_bbefa (_fda ,_efae );if len (_fda )==0{delete (_feba ._egee ,_dbef );}else {_feba ._egee [_dbef ]=_fda ;};};func _degb (_gbbbb ,_fcbg int )uint64 {return uint64 (_gbbbb )*0x1000000+uint64 (_fcbg )};
func (_bbag paraList )extractTables (_gfbd []gridTiling )paraList {if _ddgd {_adc .Log .Debug ("\u0065\u0078\u0074r\u0061\u0063\u0074\u0054\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_bbag ));
};if len (_bbag )< _bdge {return _bbag ;};_efbe :=_bbag .findTables (_gfbd );if _ddgd {_adc .Log .Info ("c\u006f\u006d\u0062\u0069\u006e\u0065d\u0020\u0074\u0061\u0062\u006c\u0065s\u0020\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_efbe ));
for _cbbff ,_cabca :=range _efbe {_cabca .log (_ff .Sprintf ("c\u006f\u006d\u0062\u0069\u006e\u0065\u0064\u0020\u0025\u0064",_cbbff ));};};return _bbag .applyTables (_efbe );};func (_egdg paraList )sortReadingOrder (){_adc .Log .Trace ("\u0073\u006fr\u0074\u0052\u0065\u0061\u0064i\u006e\u0067\u004f\u0072\u0064e\u0072\u003a\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_egdg ));
if len (_egdg )<=1{return ;};_egdg .computeEBBoxes ();_bb .Slice (_egdg ,func (_gcee ,_gegb int )bool {return _dgb (_egdg [_gcee ],_egdg [_gegb ])<=0});_fbgf :=_egdg .topoOrder ();_egdg .reorder (_fbgf );};func _bggae (_acga ,_ccef bounded )float64 {_cffe :=_eagg (_acga ,_ccef );
if !_ddcaa (_cffe ){return _cffe ;};return _cfaf (_acga ,_ccef );};func (_cfbb *shapesState )cubicTo (_egge ,_ebge ,_ecb ,_baed ,_cgfb ,_fcgb float64 ){if _ccbg {_adc .Log .Info ("\u0063\u0075\u0062\u0069\u0063\u0054\u006f\u003a");};_cfbb .addPoint (_cgfb ,_fcgb );
};func (_eddf *shapesState )lastpointEstablished ()(_bcc .Point ,bool ){if _eddf ._febdf {return _eddf ._ggdc ,false ;};_dfce :=len (_eddf ._gegg );if _dfce > 0&&_eddf ._gegg [_dfce -1]._ecfb {return _eddf ._gegg [_dfce -1].last (),false ;};return _bcc .Point {},true ;
};func _aae (_bgf *textWord ,_dcfcb float64 ,_eega ,_gee rulingList )*wordBag {_daab :=_gaebb (_bgf ._edcb );_gab :=[]*textWord {_bgf };_acefg :=wordBag {_egee :map[int ][]*textWord {_daab :_gab },PdfRectangle :_bgf .PdfRectangle ,_gccae :_bgf ._gcfbc ,_eaf :_dcfcb ,_dad :_eega ,_fff :_gee };
return &_acefg ;};func _eagc (_fdcd _bcc .Matrix )_bcc .Point {_gbc ,_agbe :=_fdcd .Translation ();return _bcc .Point {X :_gbc ,Y :_agbe };};func (_cgaee paraList )computeEBBoxes (){if _ada {_adc .Log .Info ("\u0063o\u006dp\u0075\u0074\u0065\u0045\u0042\u0042\u006f\u0078\u0065\u0073\u003a");
};for _ ,_edcf :=range _cgaee {_edcf ._ddccdf =_edcf .PdfRectangle ;};_agaf :=_cgaee .yNeighbours (0);for _faec ,_eecef :=range _cgaee {_gbda :=_eecef ._ddccdf ;_ecac ,_bfdb :=-1.0e9,+1.0e9;for _ ,_gegba :=range _agaf [_eecef ]{_debf :=_cgaee [_gegba ]._ddccdf ;
if _debf .Urx < _gbda .Llx {_ecac =_d .Max (_ecac ,_debf .Urx );}else if _gbda .Urx < _debf .Llx {_bfdb =_d .Min (_bfdb ,_debf .Llx );};};for _cafeb ,_gge :=range _cgaee {_cbgeb :=_gge ._ddccdf ;if _faec ==_cafeb ||_cbgeb .Ury > _gbda .Lly {continue ;};
if _ecac <=_cbgeb .Llx &&_cbgeb .Llx < _gbda .Llx {_gbda .Llx =_cbgeb .Llx ;}else if _cbgeb .Urx <=_bfdb &&_gbda .Urx < _cbgeb .Urx {_gbda .Urx =_cbgeb .Urx ;};};if _ada {_ff .Printf ("\u0025\u0034\u0064\u003a %\u0036\u002e\u0032\u0066\u2192\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0071\u000a",_faec ,_eecef ._ddccdf ,_gbda ,_fcaac (_eecef .text (),50));
};_eecef ._ddccdf =_gbda ;};if _bega {for _ ,_ebe :=range _cgaee {_ebe .PdfRectangle =_ebe ._ddccdf ;};};};func (_bfbd *textTable )emptyCompositeColumn (_badc int )bool {for _edffe :=0;_edffe < _bfbd ._cfce ;_edffe ++{if _gcafc ,_decgg :=_bfbd ._dbdg [_degb (_badc ,_edffe )];
_decgg {if len (_gcafc .paraList )> 0{return false ;};};};return true ;};var (_ag =_b .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");_ed =_b .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072");
);func _caad (_gdde _bc .PdfRectangle )textState {return textState {_aedb :100,_fec :RenderModeFill ,_adec :_gdde };};type subpath struct{_dged []_bcc .Point ;_ecfb bool ;};func (_bcbb lineRuling )yMean ()float64 {return 0.5*(_bcbb ._cbff .Y +_bcbb ._abeb .Y )};
func (_beg *textObject )showText (_eece []byte )error {return _beg .renderText (_eece )};func (_ggbc *wordBag )maxDepth ()float64 {return _ggbc ._eaf -_ggbc .Lly };func (_ebea *textWord )appendMark (_aade *textMark ,_acaag _bc .PdfRectangle ){_ebea ._cdcf =append (_ebea ._cdcf ,_aade );
_ebea .PdfRectangle =_ecgff (_ebea .PdfRectangle ,_aade .PdfRectangle );if _aade ._aca > _ebea ._gcfbc {_ebea ._gcfbc =_aade ._aca ;};_ebea ._edcb =_acaag .Ury -_ebea .PdfRectangle .Lly ;};func _ecgff (_dabd ,_cecaf _bc .PdfRectangle )_bc .PdfRectangle {return _bc .PdfRectangle {Llx :_d .Min (_dabd .Llx ,_cecaf .Llx ),Lly :_d .Min (_dabd .Lly ,_cecaf .Lly ),Urx :_d .Max (_dabd .Urx ,_cecaf .Urx ),Ury :_d .Max (_dabd .Ury ,_cecaf .Ury )};
};func _gccaa (_dfefa []*textMark ,_dacag _bc .PdfRectangle )*textWord {_dfbdc :=_dfefa [0].PdfRectangle ;_ddcab :=_dfefa [0]._aca ;for _ ,_geggc :=range _dfefa [1:]{_dfbdc =_ecgff (_dfbdc ,_geggc .PdfRectangle );if _geggc ._aca > _ddcab {_ddcab =_geggc ._aca ;
};};return &textWord {PdfRectangle :_dfbdc ,_cdcf :_dfefa ,_edcb :_dacag .Ury -_dfbdc .Lly ,_gcfbc :_ddcab };};func (_defbf intSet )del (_gecd int ){delete (_defbf ,_gecd )};func (_babcc *wordBag )minDepth ()float64 {return _babcc ._eaf -(_babcc .Ury -_babcc ._gccae )};
func _dga (_ccea _bc .PdfRectangle )*ruling {return &ruling {_bdffc :_dgca ,_aebg :_ccea .Ury ,_gecca :_ccea .Llx ,_fafg :_ccea .Urx };};var _efga =TextMark {Text :"\u005b\u0058\u005d",Original :"\u0020",Meta :true ,FillColor :_bf .White ,StrokeColor :_bf .White };
func (_abdgb *textTable )getDown ()paraList {_aegge :=make (paraList ,_abdgb ._bbbd );for _gggdb :=0;_gggdb < _abdgb ._bbbd ;_gggdb ++{_acad :=_abdgb .get (_gggdb ,_abdgb ._cfce -1)._cgee ;if _acad .taken (){return nil ;};_aegge [_gggdb ]=_acad ;};for _bcea :=0;
_bcea < _abdgb ._bbbd -1;_bcea ++{if _aegge [_bcea ]._dbeb !=_aegge [_bcea +1]{return nil ;};};return _aegge ;};

// ToTextMark returns the public view of `tm`.
func (_gaabe *textMark )ToTextMark ()TextMark {return TextMark {Text :_gaabe ._cbab ,Original :_gaabe ._ddag ,BBox :_gaabe ._fgaa ,Font :_gaabe ._ccf ,FontSize :_gaabe ._aca ,FillColor :_gaabe ._bgcc ,StrokeColor :_gaabe ._gacc ,Orientation :_gaabe ._faed };
};func (_acaa paraList )log (_adad string ){if !_aaced {return ;};_adc .Log .Info ("%\u0038\u0073\u003a\u0020\u0025\u0064 \u0070\u0061\u0072\u0061\u0073\u0020=\u003d\u003d\u003d\u003d\u003d\u003d\u002d-\u002d\u002d\u002d\u002d\u002d\u003d\u003d\u003d\u003d\u003d=\u003d",_adad ,len (_acaa ));
for _aabd ,_fedef :=range _acaa {if _fedef ==nil {continue ;};_bace :=_fedef .text ();_eabb :="\u0020\u0020";if _fedef ._bdee !=nil {_eabb =_ff .Sprintf ("\u005b%\u0064\u0078\u0025\u0064\u005d",_fedef ._bdee ._bbbd ,_fedef ._bdee ._cfce );};_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0025s\u0020\u0025\u0071\u000a",_aabd ,_fedef .PdfRectangle ,_eabb ,_fcaac (_bace ,50));
};};func (_adce *shapesState )moveTo (_age ,_afgf float64 ){_adce ._febdf =true ;_adce ._ggdc =_adce .devicePoint (_age ,_afgf );if _ccbg {_adc .Log .Info ("\u006d\u006fv\u0065\u0054\u006f\u003a\u0020\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0064\u0065\u0076\u0069\u0063\u0065\u003d%.\u0032\u0066",_age ,_afgf ,_adce ._ggdc );
};};func (_fcca *textObject )setTextLeading (_egdc float64 ){if _fcca ==nil {return ;};_fcca ._gad ._bbb =_egdc ;};type paraList []*textPara ;func (_fbag *imageExtractContext )extractInlineImage (_acg *_gf .ContentStreamInlineImage ,_afg _gf .GraphicsState ,_efd *_bc .PdfPageResources )error {_dbg ,_ceg :=_acg .ToImage (_efd );
if _ceg !=nil {return _ceg ;};_deba ,_ceg :=_acg .GetColorSpace (_efd );if _ceg !=nil {return _ceg ;};if _deba ==nil {_deba =_bc .NewPdfColorspaceDeviceGray ();};_gb ,_ceg :=_deba .ImageToRGB (*_dbg );if _ceg !=nil {return _ceg ;};_cec :=ImageMark {Image :&_gb ,Width :_afg .CTM .ScalingFactorX (),Height :_afg .CTM .ScalingFactorY (),Angle :_afg .CTM .Angle ()};
_cec .X ,_cec .Y =_afg .CTM .Translation ();_fbag ._bgd =append (_fbag ._bgd ,_cec );_fbag ._gae ++;return nil ;};

// ImageExtractOptions contains options for controlling image extraction from
// PDF pages.
type ImageExtractOptions struct{IncludeInlineStencilMasks bool ;};func (_dceg *wordBag )sort (){for _ ,_ecfd :=range _dceg ._egee {_bb .Slice (_ecfd ,func (_fdae ,_afad int )bool {return _eagg (_ecfd [_fdae ],_ecfd [_afad ])< 0});};};func (_babce *textWord )computeText ()string {_gefg :=make ([]string ,len (_babce ._cdcf ));
for _eeebg ,_cabbf :=range _babce ._cdcf {_gefg [_eeebg ]=_cabbf ._cbab ;};return _ba .Join (_gefg ,"");};func (_daga paraList )findTables (_gada []gridTiling )[]*textTable {_daga .addNeighbours ();_bb .Slice (_daga ,func (_dedc ,_ddefg int )bool {return _bggae (_daga [_dedc ],_daga [_ddefg ])< 0});
var _baee []*textTable ;if _efcf {_abaa :=_daga .findGridTables (_gada );_baee =append (_baee ,_abaa ...);};if _bedf {_cffeg :=_daga .findTextTables ();_baee =append (_baee ,_cffeg ...);};return _baee ;};

// String returns a human readable description of `vecs`.
func (_eeada rulingList )String ()string {if len (_eeada )==0{return "\u007b \u0045\u004d\u0050\u0054\u0059\u0020}";};_caff ,_ffbf :=_eeada .vertsHorzs ();_fafba :=len (_caff );_fgagg :=len (_ffbf );if _fafba ==0||_fgagg ==0{return _ff .Sprintf ("\u007b%\u0064\u0020\u0078\u0020\u0025\u0064}",_fafba ,_fgagg );
};_bfca :=_bc .PdfRectangle {Llx :_caff [0]._aebg ,Urx :_caff [_fafba -1]._aebg ,Lly :_ffbf [_fgagg -1]._aebg ,Ury :_ffbf [0]._aebg };return _ff .Sprintf ("\u007b\u0025d\u0020\u0078\u0020%\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u007d",_fafba ,_fgagg ,_bfca );
};func _dedb (_fffd ,_cgca float64 )string {_beed :=!_ddcaa (_fffd -_cgca );if _beed {return "\u000a";};return "\u0020";};func (_bfdbf *ruling )equals (_egcg *ruling )bool {return _bfdbf ._bdffc ==_egcg ._bdffc &&_cgbc (_bfdbf ._aebg ,_egcg ._aebg )&&_cgbc (_bfdbf ._gecca ,_egcg ._gecca )&&_cgbc (_bfdbf ._fafg ,_egcg ._fafg );
};func (_ccde *textPara )bbox ()_bc .PdfRectangle {return _ccde .PdfRectangle };func _dcce (_gdce _bc .PdfRectangle )*ruling {return &ruling {_bdffc :_dgca ,_aebg :_gdce .Lly ,_gecca :_gdce .Llx ,_fafg :_gdce .Urx };};func _dgge (_daac map[int ][]float64 )[]int {_bdaf :=make ([]int ,len (_daac ));
_fgbg :=0;for _fdfg :=range _daac {_bdaf [_fgbg ]=_fdfg ;_fgbg ++;};_bb .Ints (_bdaf );return _bdaf ;};func (_dfa *textObject )setTextMatrix (_aea []float64 ){if len (_aea )!=6{_adc .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u006c\u0065\u006e\u0028\u0066\u0029\u0020\u0021\u003d\u0020\u0036\u0020\u0028\u0025\u0064\u0029",len (_aea ));
return ;};_ggfd ,_bage ,_ddef ,_dfeg ,_fccd ,_cbeb :=_aea [0],_aea [1],_aea [2],_aea [3],_aea [4],_aea [5];_dfa ._dfaf =_bcc .NewMatrix (_ggfd ,_bage ,_ddef ,_dfeg ,_fccd ,_cbeb );_dfa ._bef =_dfa ._dfaf ;};var (_ffgcg =map[rune ]string {0x0060:"\u0300",0x02CB:"\u0300",0x0027:"\u0301",0x00B4:"\u0301",0x02B9:"\u0301",0x02CA:"\u0301",0x005E:"\u0302",0x02C6:"\u0302",0x007E:"\u0303",0x02DC:"\u0303",0x00AF:"\u0304",0x02C9:"\u0304",0x02D8:"\u0306",0x02D9:"\u0307",0x00A8:"\u0308",0x00B0:"\u030a",0x02DA:"\u030a",0x02BA:"\u030b",0x02DD:"\u030b",0x02C7:"\u030c",0x02C8:"\u030d",0x0022:"\u030e",0x02BB:"\u0312",0x02BC:"\u0313",0x0486:"\u0313",0x055A:"\u0313",0x02BD:"\u0314",0x0485:"\u0314",0x0559:"\u0314",0x02D4:"\u031d",0x02D5:"\u031e",0x02D6:"\u031f",0x02D7:"\u0320",0x02B2:"\u0321",0x00B8:"\u0327",0x02CC:"\u0329",0x02B7:"\u032b",0x02CD:"\u0331",0x005F:"\u0332",0x204E:"\u0359"};
);func _cccg (_fafd []TextMark ,_bdgf *int ,_bdag TextMark )[]TextMark {_bdag .Offset =*_bdgf ;_fafd =append (_fafd ,_bdag );*_bdgf +=len (_bdag .Text );return _fafd ;};func (_adaa gridTile )complete ()bool {return _adaa .numBorders ()==4};func (_fcde rulingList )tidied (_beaa string )rulingList {_dfad :=_fcde .removeDuplicates ();
_dfad .log ("\u0075n\u0069\u0071\u0075\u0065\u0073");_gecfd :=_dfad .snapToGroups ();if _gecfd ==nil {return nil ;};_gecfd .sort ();if _ggaae {_adc .Log .Info ("\u0074\u0069\u0064i\u0065\u0064\u003a\u0020\u0025\u0071\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u0075\u006e\u0069\u0071\u0075\u0065\u0073\u003d\u0025\u0064\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0064\u003d\u0025\u0064",_beaa ,len (_fcde ),len (_dfad ),len (_gecfd ));
};_gecfd .log ("\u0063o\u0061\u006c\u0065\u0073\u0063\u0065d");return _gecfd ;};func (_dgac *textTable )get (_bcae ,_beff int )*textPara {return _dgac ._fcefg [_degb (_bcae ,_beff )]};func (_fdf *imageExtractContext )extractContentStreamImages (_aed string ,_egd *_bc .PdfPageResources )error {_cca :=_gf .NewContentStreamParser (_aed );
_gc ,_abg :=_cca .Parse ();if _abg !=nil {return _abg ;};if _fdf ._ge ==nil {_fdf ._ge =map[*_ea .PdfObjectStream ]*cachedImage {};};if _fdf ._fb ==nil {_fdf ._fb =&ImageExtractOptions {};};_gdd :=_gf .NewContentStreamProcessor (*_gc );_gdd .AddHandler (_gf .HandlerConditionEnumAllOperands ,"",_fdf .processOperand );
return _gdd .Process (_egd );};func _bdfe (_cedd func (*wordBag ,*textWord ,float64 )bool ,_efdc float64 )func (*wordBag ,*textWord )bool {return func (_bdfef *wordBag ,_dgbd *textWord )bool {return _cedd (_bdfef ,_dgbd ,_efdc )};};func (_fcdd *textTable )isExportable ()bool {if _fcdd ._fafcf {return true ;
};_eabce :=func (_bdec int )bool {_ddfgd :=_fcdd .get (0,_bdec );if _ddfgd ==nil {return false ;};_ecba :=_ddfgd .text ();_efaca :=_f .RuneCountInString (_ecba );_ffge :=_eadb .MatchString (_ecba );return _efaca <=1||_ffge ;};for _fegae :=0;_fegae < _fcdd ._cfce ;
_fegae ++{if !_eabce (_fegae ){return true ;};};return false ;};func (_aacca rulingList )sort (){_bb .Slice (_aacca ,_aacca .comp )};func (_ddbg rectRuling )asRuling ()(*ruling ,bool ){_dcda :=ruling {_bdffc :_ddbg ._eaad ,Color :_ddbg .Color ,_abge :_ffgc };
switch _ddbg ._eaad {case _gda :_dcda ._aebg =0.5*(_ddbg .Llx +_ddbg .Urx );_dcda ._gecca =_ddbg .Lly ;_dcda ._fafg =_ddbg .Ury ;_dfab ,_dfgcf :=_ddbg .checkWidth (_ddbg .Llx ,_ddbg .Urx );if !_dfgcf {if _gcea {_adc .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067V\u0065\u0072\u0074\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_ddbg );
};return nil ,false ;};_dcda ._bffc =_dfab ;case _dgca :_dcda ._aebg =0.5*(_ddbg .Lly +_ddbg .Ury );_dcda ._gecca =_ddbg .Llx ;_dcda ._fafg =_ddbg .Urx ;_efgd ,_agdg :=_ddbg .checkWidth (_ddbg .Lly ,_ddbg .Ury );if !_agdg {if _gcea {_adc .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067H\u006f\u0072\u007a\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_ddbg );
};return nil ,false ;};_dcda ._bffc =_efgd ;default:_adc .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_ddbg ._eaad );return nil ,false ;};return &_dcda ,true ;};

// ExtractTextWithStats works like ExtractText but returns the number of characters in the output
// (`numChars`) and the number of characters that were not decoded (`numMisses`).
func (_efb *Extractor )ExtractTextWithStats ()(_dgc string ,_egeg int ,_ddc int ,_fbbc error ){_bad ,_egeg ,_ddc ,_fbbc :=_efb .ExtractPageText ();if _fbbc !=nil {return "",_egeg ,_ddc ,_fbbc ;};return _bad .Text (),_egeg ,_ddc ,nil ;};type intSet map[int ]struct{};


// String returns a description of `b`.
func (_ebag *wordBag )String ()string {var _fgf []string ;for _ ,_eegfb :=range _ebag .depthIndexes (){_dfac :=_ebag ._egee [_eegfb ];for _ ,_ebdg :=range _dfac {_fgf =append (_fgf ,_ebdg ._beaff );};};return _ff .Sprintf ("\u0025.\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065=\u0025\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0025\u0071",_ebag .PdfRectangle ,_ebag ._gccae ,len (_fgf ),_fgf );
};func _dbea (_ceae ,_adbd _bc .PdfRectangle )bool {return _dcbb (_ceae ,_adbd )&&_gcfb (_ceae ,_adbd )};func (_gegd *textObject )reset (){_gegd ._dfaf =_bcc .IdentityMatrix ();_gegd ._bef =_bcc .IdentityMatrix ();_gegd ._dac =nil ;};func (_aefc *wordBag )depthRange (_cdb ,_ddad int )[]int {var _edee []int ;
for _bfga :=range _aefc ._egee {if _cdb <=_bfga &&_bfga <=_ddad {_edee =append (_edee ,_bfga );};};if len (_edee )==0{return nil ;};_bb .Ints (_edee );return _edee ;};func (_cbeg *Extractor )extractPageText (_deed string ,_geg *_bc .PdfPageResources ,_abd _bcc .Matrix ,_bd int )(*PageText ,int ,int ,error ){_adc .Log .Trace ("\u0065x\u0074\u0072\u0061\u0063t\u0050\u0061\u0067\u0065\u0054e\u0078t\u003a \u006c\u0065\u0076\u0065\u006c\u003d\u0025d",_bd );
_eage :=&PageText {_gbcf :_cbeg ._fg };_fe :=_caad (_cbeg ._fg );var _dde stateStack ;_bbd :=_efc (_cbeg ,_geg ,_gf .GraphicsState {},&_fe ,&_dde );_gfg :=shapesState {_gfee :_abd ,_agbg :_bcc .IdentityMatrix (),_afgc :_bbd };var _cbg bool ;if _bd > _dec {_ffc :=_b .New ("\u0066\u006f\u0072\u006d s\u0074\u0061\u0063\u006b\u0020\u006f\u0076\u0065\u0072\u0066\u006c\u006f\u0077");
_adc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0065\u0078\u0074\u0072\u0061\u0063\u0074\u0050\u0061\u0067\u0065\u0054\u0065\u0078\u0074\u002e\u0020\u0072\u0065\u0063u\u0072\u0073\u0069\u006f\u006e\u0020\u006c\u0065\u0076\u0065\u006c\u003d\u0025\u0064 \u0065r\u0072\u003d\u0025\u0076",_bd ,_ffc );
return _eage ,_fe ._fdd ,_fe ._badd ,_ffc ;};_aff :=_gf .NewContentStreamParser (_deed );_babc ,_dfbf :=_aff .Parse ();if _dfbf !=nil {_adc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020e\u0078\u0074\u0072a\u0063\u0074\u0050\u0061g\u0065\u0054\u0065\u0078\u0074\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dfbf );
return _eage ,_fe ._fdd ,_fe ._badd ,_dfbf ;};_gccd :=_gf .NewContentStreamProcessor (*_babc );_gccd .AddHandler (_gf .HandlerConditionEnumAllOperands ,"",func (_bdf *_gf .ContentStreamOperation ,_ebbd _gf .GraphicsState ,_eaa *_bc .PdfPageResources )error {_fcc :=_bdf .Operand ;
if _edab {_adc .Log .Info ("\u0026&\u0026\u0020\u006f\u0070\u003d\u0025s",_bdf );};switch _fcc {case "\u0071":if _ccbg {_adc .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_gfg ._agbg );};_dde .push (&_fe );case "\u0051":if !_dde .empty (){_fe =*_dde .pop ();
};_gfg ._agbg =_ebbd .CTM ;if _ccbg {_adc .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_gfg ._agbg );};case "\u0042\u0054":if _cbg {_adc .Log .Debug ("\u0042\u0054\u0020\u0063\u0061\u006c\u006c\u0065\u0064\u0020\u0077\u0068\u0069\u006c\u0065 \u0069n\u0020\u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
_eage ._fbga =append (_eage ._fbga ,_bbd ._dac ...);};_cbg =true ;_bdg :=_ebbd ;_bdg .CTM =_abd .Mult (_bdg .CTM );_bbd =_efc (_cbeg ,_eaa ,_bdg ,&_fe ,&_dde );_gfg ._afgc =_bbd ;case "\u0045\u0054":if !_cbg {_adc .Log .Debug ("\u0045\u0054\u0020ca\u006c\u006c\u0065\u0064\u0020\u006f\u0075\u0074\u0073i\u0064e\u0020o\u0066 \u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
};_cbg =false ;_eage ._fbga =append (_eage ._fbga ,_bbd ._dac ...);_bbd .reset ();case "\u0054\u002a":_bbd .nextLine ();case "\u0054\u0064":if _gec ,_fee :=_bbd .checkOp (_bdf ,2,true );!_gec {_adc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fee );
return _fee ;};_afc ,_gcf ,_egc :=_gfbec (_bdf .Params );if _egc !=nil {return _egc ;};_bbd .moveText (_afc ,_gcf );case "\u0054\u0044":if _afd ,_bda :=_bbd .checkOp (_bdf ,2,true );!_afd {_adc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bda );
return _bda ;};_dba ,_fdc ,_fad :=_gfbec (_bdf .Params );if _fad !=nil {_adc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fad );return _fad ;};_bbd .moveTextSetLeading (_dba ,_fdc );case "\u0054\u006a":if _gfe ,_acef :=_bbd .checkOp (_bdf ,1,true );
!_gfe {_adc .Log .Debug ("\u0045\u0052\u0052\u004fR:\u0020\u0054\u006a\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0065\u0072\u0072\u003d%\u0076",_bdf ,_acef );return _acef ;};_bag ,_gcg :=_ea .GetStringBytes (_bdf .Params [0]);if !_gcg {_adc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020T\u006a\u0020o\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074S\u0074\u0072\u0069\u006e\u0067\u0042\u0079\u0074\u0065\u0073\u0020\u0066a\u0069\u006c\u0065\u0064",_bdf );
return _ea .ErrTypeError ;};return _bbd .showText (_bag );case "\u0054\u004a":if _eda ,_dea :=_bbd .checkOp (_bdf ,1,true );!_eda {_adc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dea );return _dea ;
};_aaaa ,_eff :=_ea .GetArray (_bdf .Params [0]);if !_eff {_adc .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0054\u004a\u0020\u006f\u0070\u003d\u0025s\u0020G\u0065t\u0041r\u0072\u0061\u0079\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_bdf );
return _dfbf ;};return _bbd .showTextAdjusted (_aaaa );case "\u0027":if _egba ,_degd :=_bbd .checkOp (_bdf ,1,true );!_egba {_adc .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0027\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_degd );return _degd ;};_dfg ,_cacgg :=_ea .GetStringBytes (_bdf .Params [0]);
if !_cacgg {_adc .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020'\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_bdf );return _ea .ErrTypeError ;};_bbd .nextLine ();return _bbd .showText (_dfg );
case "\u0022":if _ebbf ,_cea :=_bbd .checkOp (_bdf ,3,true );!_ebbf {_adc .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0022\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cea );return _cea ;};_fga ,_bea ,_def :=_gfbec (_bdf .Params [:2]);if _def !=nil {return _def ;
};_ddb ,_gaab :=_ea .GetStringBytes (_bdf .Params [2]);if !_gaab {_adc .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020\"\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_bdf );
return _ea .ErrTypeError ;};_bbd .setCharSpacing (_fga );_bbd .setWordSpacing (_bea );_bbd .nextLine ();return _bbd .showText (_ddb );case "\u0054\u004c":_fab ,_cga :=_efac (_bdf );if _cga !=nil {_adc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004c\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cga );
return _cga ;};_bbd .setTextLeading (_fab );case "\u0054\u0063":_dfc ,_ebd :=_efac (_bdf );if _ebd !=nil {_adc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0063\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ebd );return _ebd ;};_bbd .setCharSpacing (_dfc );
case "\u0054\u0066":if _ade ,_efg :=_bbd .checkOp (_bdf ,2,true );!_ade {_adc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0066\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_efg );return _efg ;};_eddd ,_egcd :=_ea .GetNameVal (_bdf .Params [0]);
if !_egcd {_adc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u004ea\u006d\u0065\u0056\u0061\u006c\u0020\u0066a\u0069\u006c\u0065\u0064",_bdf );return _ea .ErrTypeError ;};_caf ,_adf :=_ea .GetNumberAsFloat (_bdf .Params [1]);
if !_egcd {_adc .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u0046\u006c\u006f\u0061\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065d\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bdf ,_adf );
return _adf ;};_adf =_bbd .setFont (_eddd ,_caf );_bbd ._fef =_e .Is (_adf ,_ea .ErrNotSupported );if _adf !=nil &&!_bbd ._fef {return _adf ;};case "\u0054\u006d":if _gbg ,_ecgd :=_bbd .checkOp (_bdf ,6,true );!_gbg {_adc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u006d\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ecgd );
return _ecgd ;};_ded ,_fea :=_ea .GetNumbersAsFloat (_bdf .Params );if _fea !=nil {_adc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fea );return _fea ;};_bbd .setTextMatrix (_ded );case "\u0054\u0072":if _gdf ,_effa :=_bbd .checkOp (_bdf ,1,true );
!_gdf {_adc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0072\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_effa );return _effa ;};_eeg ,_eed :=_ea .GetIntVal (_bdf .Params [0]);if !_eed {_adc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0072\u0020\u006f\u0070\u003d\u0025\u0073 \u0047e\u0074\u0049\u006e\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_bdf );
return _ea .ErrTypeError ;};_bbd .setTextRenderMode (_eeg );case "\u0054\u0073":if _dcd ,_beb :=_bbd .checkOp (_bdf ,1,true );!_dcd {_adc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0073\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_beb );return _beb ;
};_gdc ,_ecgf :=_ea .GetNumberAsFloat (_bdf .Params [0]);if _ecgf !=nil {_adc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ecgf );return _ecgf ;};_bbd .setTextRise (_gdc );case "\u0054\u0077":if _geb ,_ccg :=_bbd .checkOp (_bdf ,1,true );
!_geb {_adc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ccg );return _ccg ;};_fcf ,_afa :=_ea .GetNumberAsFloat (_bdf .Params [0]);if _afa !=nil {_adc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_afa );
return _afa ;};_bbd .setWordSpacing (_fcf );case "\u0054\u007a":if _fafb ,_cbbf :=_bbd .checkOp (_bdf ,1,true );!_fafb {_adc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cbbf );return _cbbf ;};_cgba ,_dbd :=_ea .GetNumberAsFloat (_bdf .Params [0]);
if _dbd !=nil {_adc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dbd );return _dbd ;};_bbd .setHorizScaling (_cgba );case "\u0063\u006d":_gfg ._agbg =_ebbd .CTM ;if _gfg ._agbg .Singular (){_cff :=_bcc .IdentityMatrix ().Translate (_gfg ._agbg .Translation ());
_adc .Log .Debug ("S\u0069n\u0067\u0075\u006c\u0061\u0072\u0020\u0063\u0074m\u003d\u0025\u0073\u2192%s",_gfg ._agbg ,_cff );_gfg ._agbg =_cff ;};if _ccbg {_adc .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_gfg ._agbg );};case "\u006d":if len (_bdf .Params )!=2{_adc .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_ed );
return nil ;};_dce ,_eec :=_ea .GetNumbersAsFloat (_bdf .Params );if _eec !=nil {return _eec ;};_gfg .moveTo (_dce [0],_dce [1]);case "\u006c":if len (_bdf .Params )!=2{_adc .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_ed );
return nil ;};_da ,_ddea :=_ea .GetNumbersAsFloat (_bdf .Params );if _ddea !=nil {return _ddea ;};_gfg .lineTo (_da [0],_da [1]);case "\u0063":if len (_bdf .Params )!=6{return _ed ;};_ddg ,_bebg :=_ea .GetNumbersAsFloat (_bdf .Params );if _bebg !=nil {return _bebg ;
};_adc .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_ddg );_gfg .cubicTo (_ddg [0],_ddg [1],_ddg [2],_ddg [3],_ddg [4],_ddg [5]);case "\u0076","\u0079":if len (_bdf .Params )!=4{return _ed ;
};_eea ,_fce :=_ea .GetNumbersAsFloat (_bdf .Params );if _fce !=nil {return _fce ;};_adc .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_eea );_gfg .quadraticTo (_eea [0],_eea [1],_eea [2],_eea [3]);
case "\u0068":_gfg .closePath ();case "\u0072\u0065":if len (_bdf .Params )!=4{return _ed ;};_egg ,_dbda :=_ea .GetNumbersAsFloat (_bdf .Params );if _dbda !=nil {return _dbda ;};_gfg .drawRectangle (_egg [0],_egg [1],_egg [2],_egg [3]);_gfg .closePath ();
case "\u0053":_gfg .stroke (&_eage ._bbaf );_gfg .clearPath ();case "\u0073":_gfg .closePath ();_gfg .stroke (&_eage ._bbaf );_gfg .clearPath ();case "\u0046":_gfg .fill (&_eage ._abdd );_gfg .clearPath ();case "\u0066","\u0066\u002a":_gfg .closePath ();
_gfg .fill (&_eage ._abdd );_gfg .clearPath ();case "\u0042","\u0042\u002a":_gfg .fill (&_eage ._abdd );_gfg .stroke (&_eage ._bbaf );_gfg .clearPath ();case "\u0062","\u0062\u002a":_gfg .closePath ();_gfg .fill (&_eage ._abdd );_gfg .stroke (&_eage ._bbaf );
_gfg .clearPath ();case "\u006e":_gfg .clearPath ();case "\u0044\u006f":if len (_bdf .Params )==0{_adc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0058\u004fbj\u0065c\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006f\u0070\u0065\u0072\u0061n\u0064\u0020\u0066\u006f\u0072\u0020\u0044\u006f\u0020\u006f\u0070\u0065\u0072\u0061\u0074\u006f\u0072.\u0020\u0047\u006f\u0074\u0020\u0025\u002b\u0076\u002e",_bdf .Params );
return _ea .ErrRangeError ;};_gef ,_cag :=_ea .GetName (_bdf .Params [0]);if !_cag {_adc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0044\u006f\u0020\u006f\u0070e\u0072a\u0074\u006f\u0072\u0020\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006fp\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u002b\u0076\u002e",_bdf .Params [0]);
return _ea .ErrTypeError ;};_ ,_baab :=_eaa .GetXObjectByName (*_gef );if _baab !=_bc .XObjectTypeForm {break ;};_bdc ,_cag :=_cbeg ._dd [_gef .String ()];if !_cag {_bgg ,_acf :=_eaa .GetXObjectFormByName (*_gef );if _acf !=nil {_adc .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_acf );
return _acf ;};_gcgg ,_acf :=_bgg .GetContentStream ();if _acf !=nil {_adc .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_acf );return _acf ;};_baf :=_bgg .Resources ;if _baf ==nil {_baf =_eaa ;};_eagb ,_ceca ,_gbe ,_acf :=_cbeg .extractPageText (string (_gcgg ),_baf ,_abd .Mult (_ebbd .CTM ),_bd +1);
if _acf !=nil {_adc .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_acf );return _acf ;};_bdc =textResult {*_eagb ,_ceca ,_gbe };_cbeg ._dd [_gef .String ()]=_bdc ;};_gfg ._agbg =_ebbd .CTM ;if _ccbg {_adc .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_gfg ._agbg );
};_eage ._fbga =append (_eage ._fbga ,_bdc ._cafa ._fbga ...);_eage ._bbaf =append (_eage ._bbaf ,_bdc ._cafa ._bbaf ...);_eage ._abdd =append (_eage ._abdd ,_bdc ._cafa ._abdd ...);_fe ._fdd +=_bdc ._aac ;_fe ._badd +=_bdc ._ddfb ;case "\u0072\u0067","\u0067","\u006b","\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_bbd ._cbc .ColorspaceNonStroking =_ebbd .ColorspaceNonStroking ;
_bbd ._cbc .ColorNonStroking =_ebbd .ColorNonStroking ;case "\u0052\u0047","\u0047","\u004b","\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_bbd ._cbc .ColorspaceStroking =_ebbd .ColorspaceStroking ;_bbd ._cbc .ColorStroking =_ebbd .ColorStroking ;
};return nil ;});_dfbf =_gccd .Process (_geg );return _eage ,_fe ._fdd ,_fe ._badd ,_dfbf ;};func _eaggb (_bgadb int ,_acaga func (int ,int )bool )[]int {_efbd :=make ([]int ,_bgadb );for _fedd :=range _efbd {_efbd [_fedd ]=_fedd ;};_bb .Slice (_efbd ,func (_ceef ,_cgge int )bool {return _acaga (_efbd [_ceef ],_efbd [_cgge ])});
return _efbd ;};func (_faea *wordBag )allWords ()[]*textWord {var _dcbg []*textWord ;for _ ,_bgc :=range _faea ._egee {_dcbg =append (_dcbg ,_bgc ...);};return _dcbg ;};func (_efbac *textTable )putComposite (_dfegb ,_fgaba int ,_bfbg paraList ,_dgcae _bc .PdfRectangle ){if len (_bfbg )==0{_adc .Log .Error ("\u0074\u0065xt\u0054\u0061\u0062l\u0065\u0029\u0020\u0070utC\u006fmp\u006f\u0073\u0069\u0074\u0065\u003a\u0020em\u0070\u0074\u0079\u0020\u0070\u0061\u0072a\u0073");
return ;};_fffa :=compositeCell {PdfRectangle :_dgcae ,paraList :_bfbg };if _ddgd {_ff .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0070\u0075\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u003c\u002d\u0025\u0073\u000a",_dfegb ,_fgaba ,_fffa .String ());
};_fffa .updateBBox ();_efbac ._dbdg [_degb (_dfegb ,_fgaba )]=_fffa ;};func (_eedg *textPara )writeCellText (_begb _be .Writer ){for _eege ,_deef :=range _eedg ._ebgbb {_fecgf :=_deef .text ();_efbb :=_afcg &&_deef .endsInHyphen ()&&_eege !=len (_eedg ._ebgbb )-1;
if _efbb {_fecgf =_gbga (_fecgf );};_begb .Write ([]byte (_fecgf ));if !(_efbb ||_eege ==len (_eedg ._ebgbb )-1){_begb .Write ([]byte (_dedb (_deef ._acgec ,_eedg ._ebgbb [_eege +1]._acgec )));};};};func _cged (_badg *wordBag ,_fgge *textWord ,_gccdb float64 )bool {return _fgge .Llx < _badg .Urx +_gccdb &&_badg .Llx -_gccdb < _fgge .Urx ;
};func (_bgbd *wordBag )scanBand (_cbd string ,_bbee *wordBag ,_cbcd func (_dbcd *wordBag ,_daeg *textWord )bool ,_fege ,_bfef ,_bcde float64 ,_bafea ,_eagee bool )int {_fdcg :=_bbee ._gccae ;var _ddaf map[int ]map[*textWord ]struct{};if !_bafea {_ddaf =_bgbd .makeRemovals ();
};_dadc :=_bebdc *_fdcg ;_fgec :=0;for _ ,_dafb :=range _bgbd .depthBand (_fege -_dadc ,_bfef +_dadc ){if len (_bgbd ._egee [_dafb ])==0{continue ;};for _ ,_abcb :=range _bgbd ._egee [_dafb ]{if !(_fege -_dadc <=_abcb ._edcb &&_abcb ._edcb <=_bfef +_dadc ){continue ;
};if !_cbcd (_bbee ,_abcb ){continue ;};_cbge :=2.0*_d .Abs (_abcb ._gcfbc -_bbee ._gccae )/(_abcb ._gcfbc +_bbee ._gccae );_gfeef :=_d .Max (_abcb ._gcfbc /_bbee ._gccae ,_bbee ._gccae /_abcb ._gcfbc );_dbaa :=_d .Min (_cbge ,_gfeef );if _bcde > 0&&_dbaa > _bcde {continue ;
};if _bbee .blocked (_abcb ){continue ;};if !_bafea {_bbee .pullWord (_abcb ,_dafb ,_ddaf );};_fgec ++;if !_eagee {if _abcb ._edcb < _fege {_fege =_abcb ._edcb ;};if _abcb ._edcb > _bfef {_bfef =_abcb ._edcb ;};};if _bafea {break ;};};};if !_bafea {_bgbd .applyRemovals (_ddaf );
};return _fgec ;};func (_egefc *textTable )reduceTiling (_debbc gridTiling ,_adede float64 )*textTable {_bccca :=make ([]int ,0,_egefc ._cfce );_fgfc :=make ([]int ,0,_egefc ._bbbd );_bcag :=_debbc ._cacc ;_bacg :=_debbc ._gbcfg ;for _dcefb :=0;_dcefb < _egefc ._cfce ;
_dcefb ++{_cgdfg :=_dcefb > 0&&_d .Abs (_bacg [_dcefb -1]-_bacg [_dcefb ])< _adede &&_egefc .emptyCompositeRow (_dcefb );if !_cgdfg {_bccca =append (_bccca ,_dcefb );};};for _abeda :=0;_abeda < _egefc ._bbbd ;_abeda ++{_dgff :=_abeda < _egefc ._bbbd -1&&_d .Abs (_bcag [_abeda +1]-_bcag [_abeda ])< _adede &&_egefc .emptyCompositeColumn (_abeda );
if !_dgff {_fgfc =append (_fgfc ,_abeda );};};if len (_bccca )==_egefc ._cfce &&len (_fgfc )==_egefc ._bbbd {return _egefc ;};_bdaae :=textTable {_fafcf :_egefc ._fafcf ,_bbbd :len (_fgfc ),_cfce :len (_bccca ),_dbdg :make (map[uint64 ]compositeCell ,len (_fgfc )*len (_bccca ))};
if _ddgd {_adc .Log .Info ("\u0072\u0065\u0064\u0075c\u0065\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0025d\u0078%\u0064\u0020\u002d\u003e\u0020\u0025\u0064x\u0025\u0064",_egefc ._bbbd ,_egefc ._cfce ,len (_fgfc ),len (_bccca ));_adc .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_fgfc );
_adc .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_bccca );};for _gbabe ,_bcge :=range _bccca {for _fgbb ,_gfaa :=range _fgfc {_daaeb ,_dfcdc :=_egefc .getComposite (_gfaa ,_bcge );if len (_daaeb )==0{continue ;
};if _ddgd {_ff .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_fgbb ,_gbabe ,_gfaa ,_bcge ,_fcaac (_daaeb .merge ().text (),50));};_bdaae .putComposite (_fgbb ,_gbabe ,_daaeb ,_dfcdc );
};};return &_bdaae ;};func (_edcc *textObject )getCurrentFont ()*_bc .PdfFont {_gebg :=_edcc ._gad ._fcg ;if _gebg ==nil {_adc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020U\u0073\u0069\u006e\u0067\u0020d\u0065\u0066a\u0075\u006c\u0074\u002e");
return _bc .DefaultFont ();};return _gebg ;};func (_fgac *textLine )endsInHyphen ()bool {_abcbb :=_fgac ._fegc [len (_fgac ._fegc )-1];_afcf :=_abcbb ._beaff ;_ecgfa ,_bbcc :=_f .DecodeLastRuneInString (_afcf );if _bbcc <=0||!_c .Is (_c .Hyphen ,_ecgfa ){return false ;
};if _abcbb ._fdcfe &&_afaa (_afcf ){return true ;};return _afaa (_fgac .text ());};func (_bbce *shapesState )drawRectangle (_ggc ,_cfaa ,_cbec ,_add float64 ){if _ccbg {_bdfb :=_bbce .devicePoint (_ggc ,_cfaa );_gff :=_bbce .devicePoint (_ggc +_cbec ,_cfaa +_add );
_bccc :=_bc .PdfRectangle {Llx :_bdfb .X ,Lly :_bdfb .Y ,Urx :_gff .X ,Ury :_gff .Y };_adc .Log .Info ("d\u0072a\u0077\u0052\u0065\u0063\u0074\u0061\u006e\u0067l\u0065\u003a\u0020\u00256.\u0032\u0066",_bccc );};_bbce .newSubPath ();_bbce .moveTo (_ggc ,_cfaa );
_bbce .lineTo (_ggc +_cbec ,_cfaa );_bbce .lineTo (_ggc +_cbec ,_cfaa +_add );_bbce .lineTo (_ggc ,_cfaa +_add );_bbce .closePath ();};func (_cbgee *textLine )pullWord (_dedd *wordBag ,_cgaef *textWord ,_bbdg int ){_cbgee .appendWord (_cgaef );_dedd .removeWord (_cgaef ,_bbdg );
};func (_aece paraList )writeText (_bbefd _be .Writer ){for _bdd ,_dabdb :=range _aece {if _dabdb ._afcb {continue ;};_dabdb .writeText (_bbefd );if _bdd !=len (_aece )-1{if _ebfc (_dabdb ,_aece [_bdd +1]){_bbefd .Write ([]byte ("\u0020"));}else {_bbefd .Write ([]byte ("\u000a"));
_bbefd .Write ([]byte ("\u000a"));};};};_bbefd .Write ([]byte ("\u000a"));_bbefd .Write ([]byte ("\u000a"));};func _aebd (_gceeb map[int ]intSet )[]int {_gceed :=make ([]int ,0,len (_gceeb ));for _aeadf :=range _gceeb {_gceed =append (_gceed ,_aeadf );
};_bb .Ints (_gceed );return _gceed ;};func _ebfc (_cbgg ,_cegb *textPara )bool {if _cbgg ._afcb ||_cegb ._afcb {return true ;};return _ddcaa (_cbgg .depth ()-_cegb .depth ());};func (_cbee *textLine )appendWord (_cbdaf *textWord ){_cbee ._fegc =append (_cbee ._fegc ,_cbdaf );
_cbee .PdfRectangle =_ecgff (_cbee .PdfRectangle ,_cbdaf .PdfRectangle );if _cbdaf ._gcfbc > _cbee ._ebfa {_cbee ._ebfa =_cbdaf ._gcfbc ;};if _cbdaf ._edcb > _cbee ._acgec {_cbee ._acgec =_cbdaf ._edcb ;};};func (_dabfb gridTile )numBorders ()int {_gaag :=0;
if _dabfb ._befe {_gaag ++;};if _dabfb ._eabbc {_gaag ++;};if _dabfb ._fdaa {_gaag ++;};if _dabfb ._afca {_gaag ++;};return _gaag ;};

// ImageMark represents an image drawn on a page and its position in device coordinates.
// All coordinates are in device coordinates.
type ImageMark struct{Image *_bc .Image ;

// Dimensions of the image as displayed in the PDF.
Width float64 ;Height float64 ;

// Position of the image in PDF coordinates (lower left corner).
X float64 ;Y float64 ;

// Angle in degrees, if rotated.
Angle float64 ;};func _eeadd (_gafc _bc .PdfRectangle )rulingKind {_bdea :=_gafc .Width ();_dgee :=_gafc .Height ();if _bdea > _dgee {if _bdea >=_cdea {return _dgca ;};}else {if _dgee >=_cdea {return _gda ;};};return _gcfe ;};func (_feec rulingList )vertsHorzs ()(rulingList ,rulingList ){var _ebeg ,_ebda rulingList ;
for _ ,_dfacg :=range _feec {switch _dfacg ._bdffc {case _gda :_ebeg =append (_ebeg ,_dfacg );case _dgca :_ebda =append (_ebda ,_dfacg );};};return _ebeg ,_ebda ;};func (_gfgbg *textWord )toTextMarks (_dagd *int )[]TextMark {var _dgfe []TextMark ;for _ ,_eacdg :=range _gfgbg ._cdcf {_dgfe =_cccg (_dgfe ,_dagd ,_eacdg .ToTextMark ());
};return _dgfe ;};func (_gebb *textObject )moveText (_edf ,_efa float64 ){_gebb .moveLP (_edf ,_efa )};type rulingList []*ruling ;func _abecea (_gdeaa []rulingList )(rulingList ,rulingList ){var _afab rulingList ;for _ ,_fabgg :=range _gdeaa {_afab =append (_afab ,_fabgg ...);
};return _afab .vertsHorzs ();};func (_bgdg *textPara )depth ()float64 {if _bgdg ._afcb {return -1.0;};if len (_bgdg ._ebgbb )> 0{return _bgdg ._ebgbb [0]._acgec ;};return _bgdg ._bdee .depth ();};

// Elements returns the TextMarks in `ma`.
func (_gba *TextMarkArray )Elements ()[]TextMark {return _gba ._ecff };func _gfbec (_dbdb []_ea .PdfObject )(_cebef ,_bcgeg float64 ,_dabed error ){if len (_dbdb )!=2{return 0,0,_ff .Errorf ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020o\u0066 \u0070\u0061\u0072\u0061\u006d\u0073\u003a \u0025\u0064",len (_dbdb ));
};_cgeed ,_dabed :=_ea .GetNumbersAsFloat (_dbdb );if _dabed !=nil {return 0,0,_dabed ;};return _cgeed [0],_cgeed [1],nil ;};func (_ffab rulingList )bbox ()_bc .PdfRectangle {var _fgdeg _bc .PdfRectangle ;if len (_ffab )==0{_adc .Log .Error ("r\u0075\u006c\u0069\u006e\u0067\u004ci\u0073\u0074\u002e\u0062\u0062\u006f\u0078\u003a\u0020n\u006f\u0020\u0072u\u006ci\u006e\u0067\u0073");
return _bc .PdfRectangle {};};if _ffab [0]._bdffc ==_dgca {_fgdeg .Llx ,_fgdeg .Urx =_ffab .secMinMax ();_fgdeg .Lly ,_fgdeg .Ury =_ffab .primMinMax ();}else {_fgdeg .Llx ,_fgdeg .Urx =_ffab .primMinMax ();_fgdeg .Lly ,_fgdeg .Ury =_ffab .secMinMax ();
};return _fgdeg ;};type fontEntry struct{_gdeg *_bc .PdfFont ;_eedb int64 ;};func (_bgcg rulingList )snapToGroupsDirection ()rulingList {_bgcg .sortStrict ();_babdc :=make (map[*ruling ]rulingList ,len (_bgcg ));_gfcf :=_bgcg [0];_cfdge :=func (_cefg *ruling ){_gfcf =_cefg ;
_babdc [_gfcf ]=rulingList {_cefg }};_cfdge (_bgcg [0]);for _ ,_ggdeg :=range _bgcg [1:]{if _ggdeg ._aebg < _gfcf ._aebg -_dfdb {_adc .Log .Error ("\u0073\u006e\u0061\u0070T\u006f\u0047\u0072\u006f\u0075\u0070\u0073\u0044\u0069r\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0057\u0072\u006f\u006e\u0067\u0020\u0070\u0072\u0069\u006da\u0072\u0079\u0020\u006f\u0072d\u0065\u0072\u002e\u000a\u0009\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0020\u0076\u003d\u0025\u0073",_gfcf ,_ggdeg );
};if _ggdeg ._aebg > _gfcf ._aebg +_fcef {_cfdge (_ggdeg );}else {_babdc [_gfcf ]=append (_babdc [_gfcf ],_ggdeg );};};_beea :=make (map[*ruling ]float64 ,len (_babdc ));_dfbc :=make (map[*ruling ]*ruling ,len (_bgcg ));for _ccfgb ,_afeb :=range _babdc {_beea [_ccfgb ]=_afeb .mergePrimary ();
for _ ,_abff :=range _afeb {_dfbc [_abff ]=_ccfgb ;};};for _ ,_daee :=range _bgcg {_daee ._aebg =_beea [_dfbc [_daee ]];};_dffd :=make (rulingList ,0,len (_bgcg ));for _ ,_dece :=range _babdc {_cabgc :=_dece .splitSec ();for _ccbd ,_egda :=range _cabgc {_dfcc :=_egda .merge ();
if len (_dffd )> 0{_ageeb :=_dffd [len (_dffd )-1];if _ageeb .alignsPrimary (_dfcc )&&_ageeb .alignsSec (_dfcc ){_adc .Log .Error ("\u0073\u006e\u0061\u0070\u0054\u006fG\u0072\u006f\u0075\u0070\u0073\u0044\u0069\u0072\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0044\u0075\u0070\u006ci\u0063\u0061\u0074\u0065\u0020\u0069\u003d\u0025\u0064\u000a\u0009\u0077\u003d\u0025s\u000a\t\u0076\u003d\u0025\u0073",_ccbd ,_ageeb ,_dfcc );
continue ;};};_dffd =append (_dffd ,_dfcc );};};_dffd .sortStrict ();return _dffd ;};func _gdec (_deage ,_gggbg _bcc .Point )bool {_dddf :=_d .Abs (_deage .X -_gggbg .X );_gddcg :=_d .Abs (_deage .Y -_gggbg .Y );return _cfgee (_dddf ,_gddcg );};func (_egbb rulingList )toTilings ()(rulingList ,[]gridTiling ){_egbb .log ("\u0074o\u0054\u0069\u006c\u0069\u006e\u0067s");
if len (_egbb )==0{return nil ,nil ;};_egbb =_egbb .tidied ("\u0061\u006c\u006c");_egbb .log ("\u0074\u0069\u0064\u0069\u0065\u0064");_dacd :=_egbb .toGrids ();_adgg :=make ([]gridTiling ,len (_dacd ));for _bcf ,_cgdfd :=range _dacd {_adgg [_bcf ]=_cgdfd .asTiling ();
};return _egbb ,_adgg ;};

// RangeOffset returns the TextMarks in `ma` that overlap text[start:end] in the extracted text.
// These are tm: `start` <= tm.Offset + len(tm.Text) && tm.Offset < `end` where
// `start` and `end` are offsets in the extracted text.
// NOTE: TextMarks can contain multiple characters. e.g. "ffi" for the  ligature so the first and
// last elements of the returned TextMarkArray may only partially overlap text[start:end].
func (_feff *TextMarkArray )RangeOffset (start ,end int )(*TextMarkArray ,error ){if _feff ==nil {return nil ,_b .New ("\u006da\u003d\u003d\u006e\u0069\u006c");};if end < start {return nil ,_ff .Errorf ("\u0065\u006e\u0064\u0020\u003c\u0020\u0073\u0074\u0061\u0072\u0074\u002e\u0020\u0052\u0061n\u0067\u0065\u004f\u0066\u0066\u0073\u0065\u0074\u0020\u006e\u006f\u0074\u0020d\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020\u0073\u0074\u0061\u0072t=\u0025\u0064\u0020\u0065\u006e\u0064\u003d\u0025\u0064\u0020",start ,end );
};_ccge :=len (_feff ._ecff );if _ccge ==0{return _feff ,nil ;};if start < _feff ._ecff [0].Offset {start =_feff ._ecff [0].Offset ;};if end > _feff ._ecff [_ccge -1].Offset +1{end =_feff ._ecff [_ccge -1].Offset +1;};_daedf :=_bb .Search (_ccge ,func (_edba int )bool {return _feff ._ecff [_edba ].Offset +len (_feff ._ecff [_edba ].Text )-1>=start });
if !(0<=_daedf &&_daedf < _ccge ){_fgg :=_ff .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020\u0072\u0061\u006e\u0067\u0065\u002e\u0020\u0073\u0074\u0061\u0072\u0074\u003d%\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009 \u006c\u0061\u0073\u0074\u003d%\u0076",start ,_daedf ,_ccge ,_feff ._ecff [0],_feff ._ecff [_ccge -1]);
return nil ,_fgg ;};_fdec :=_bb .Search (_ccge ,func (_dag int )bool {return _feff ._ecff [_dag ].Offset > end -1});if !(0<=_fdec &&_fdec < _ccge ){_dab :=_ff .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020r\u0061\u006e\u0067e\u002e\u0020\u0065n\u0064\u003d%\u0064\u0020\u0069\u0045\u006e\u0064=\u0025d \u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d\u0025\u0076",end ,_fdec ,_ccge ,_feff ._ecff [0],_feff ._ecff [_ccge -1]);
return nil ,_dab ;};if _fdec <=_daedf {return nil ,_ff .Errorf ("\u0069\u0045\u006e\u0064\u0020\u003c=\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003a\u0020\u0073\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u0065\u006ed\u003d\u0025\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020i\u0045n\u0064\u003d\u0025\u0064",start ,end ,_daedf ,_fdec );
};return &TextMarkArray {_ecff :_feff ._ecff [_daedf :_fdec ]},nil ;};func (_gcef rulingList )augmentGrid ()(rulingList ,rulingList ){_agfd ,_effd :=_gcef .vertsHorzs ();if len (_agfd )==0||len (_effd )==0{return _agfd ,_effd ;};_ebaaa ,_gefbb :=_agfd ,_effd ;
_aabbb :=_agfd .bbox ();_afbe :=_effd .bbox ();if _ggaae {_adc .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0056\u003d\u0025\u0036\u002e\u0032\u0066",_aabbb );_adc .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0048\u003d\u0025\u0036\u002e\u0032\u0066",_afbe );
};var _ggdbc ,_egdcb ,_fafa ,_cgcee *ruling ;if _afbe .Llx < _aabbb .Llx -_eecf {_ggdbc =&ruling {_abge :_dcaac ,_bdffc :_gda ,_aebg :_afbe .Llx ,_gecca :_aabbb .Lly ,_fafg :_aabbb .Ury };_agfd =append (rulingList {_ggdbc },_agfd ...);};if _afbe .Urx > _aabbb .Urx +_eecf {_egdcb =&ruling {_abge :_dcaac ,_bdffc :_gda ,_aebg :_afbe .Urx ,_gecca :_aabbb .Lly ,_fafg :_aabbb .Ury };
_agfd =append (_agfd ,_egdcb );};if _aabbb .Lly < _afbe .Lly -_eecf {_fafa =&ruling {_abge :_dcaac ,_bdffc :_dgca ,_aebg :_aabbb .Lly ,_gecca :_afbe .Llx ,_fafg :_afbe .Urx };_effd =append (rulingList {_fafa },_effd ...);};if _aabbb .Ury > _afbe .Ury +_eecf {_cgcee =&ruling {_abge :_dcaac ,_bdffc :_dgca ,_aebg :_aabbb .Ury ,_gecca :_afbe .Llx ,_fafg :_afbe .Urx };
_effd =append (_effd ,_cgcee );};if len (_agfd )+len (_effd )==len (_gcef ){return _ebaaa ,_gefbb ;};_abegc :=append (_agfd ,_effd ...);_gcef .log ("u\u006e\u0061\u0075\u0067\u006d\u0065\u006e\u0074\u0065\u0064");_abegc .log ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0065d");
return _agfd ,_effd ;};func (_eadg lineRuling )xMean ()float64 {return 0.5*(_eadg ._cbff .X +_eadg ._abeb .X )};func (_fagf *wordBag )pullWord (_eab *textWord ,_cdbg int ,_daae map[int ]map[*textWord ]struct{}){_fagf .PdfRectangle =_ecgff (_fagf .PdfRectangle ,_eab .PdfRectangle );
if _eab ._gcfbc > _fagf ._gccae {_fagf ._gccae =_eab ._gcfbc ;};_fagf ._egee [_cdbg ]=append (_fagf ._egee [_cdbg ],_eab );_daae [_cdbg ][_eab ]=struct{}{};};func (_fgab *textObject )setCharSpacing (_ccc float64 ){if _fgab ==nil {return ;};_fgab ._gad ._bdb =_ccc ;
if _aaba {_adc .Log .Info ("\u0073\u0065t\u0043\u0068\u0061\u0072\u0053\u0070\u0061\u0063\u0069\u006e\u0067\u003a\u0020\u0025\u002e\u0032\u0066\u0020\u0073\u0074\u0061\u0074e=\u0025\u0073",_ccc ,_fgab ._gad .String ());};};func (_fced rulingList )connections (_gabc map[int ]intSet ,_egfa int )intSet {_defae :=make (intSet );
_badb :=make (intSet );var _edgd func (int );_edgd =func (_ebaee int ){if !_badb .has (_ebaee ){_badb .add (_ebaee );for _effe :=range _fced {if _gabc [_effe ].has (_ebaee ){_defae .add (_effe );};};for _gfgb :=range _fced {if _defae .has (_gfgb ){_edgd (_gfgb );
};};};};_edgd (_egfa );return _defae ;};func (_aedcf *textPara )taken ()bool {return _aedcf ==nil ||_aedcf ._aaee };func (_aefa *textObject )checkOp (_fbgb *_gf .ContentStreamOperation ,_ecd int ,_dfbe bool )(_baff bool ,_abgg error ){if _aefa ==nil {var _aeb []_ea .PdfObject ;
if _ecd > 0{_aeb =_fbgb .Params ;if len (_aeb )> _ecd {_aeb =_aeb [:_ecd ];};};_adc .Log .Debug ("\u0025\u0023q \u006f\u0070\u0065r\u0061\u006e\u0064\u0020out\u0073id\u0065\u0020\u0074\u0065\u0078\u0074\u002e p\u0061\u0072\u0061\u006d\u0073\u003d\u0025+\u0076",_fbgb .Operand ,_aeb );
};if _ecd >=0{if len (_fbgb .Params )!=_ecd {if _dfbe {_abgg =_b .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");};_adc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_fbgb .Operand ,_ecd ,len (_fbgb .Params ),_fbgb .Params );
return false ,_abgg ;};};return true ,nil ;};const _dec =20;func (_ggea paraList )lines ()[]*textLine {var _edec []*textLine ;for _ ,_gddc :=range _ggea {_edec =append (_edec ,_gddc ._ebgbb ...);};return _edec ;};type event struct{_bcbbe float64 ;_dcac bool ;
_cggc int ;};

// String returns a description of `state`.
func (_cebb *textState )String ()string {_ffb :="\u005bN\u004f\u0054\u0020\u0053\u0045\u0054]";if _cebb ._fcg !=nil {_ffb =_cebb ._fcg .BaseFont ();};return _ff .Sprintf ("\u0074\u0063\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0077\u003d\u0025\u002e\u0032\u0066 \u0074f\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u003d\u0025\u0071",_cebb ._bdb ,_cebb ._aefb ,_cebb ._fdg ,_ffb );
};func (_cbfc *textTable )markCells (){for _gffb :=0;_gffb < _cbfc ._cfce ;_gffb ++{for _deaceb :=0;_deaceb < _cbfc ._bbbd ;_deaceb ++{_gadg :=_cbfc .get (_deaceb ,_gffb );if _gadg !=nil {_gadg ._aaee =true ;};};};};

// String returns a human readable description of `ss`.
func (_cae *shapesState )String ()string {return _ff .Sprintf ("\u007b\u0025\u0064\u0020su\u0062\u0070\u0061\u0074\u0068\u0073\u0020\u0066\u0072\u0065\u0073\u0068\u003d\u0025t\u007d",len (_cae ._gegg ),_cae ._febdf );};func _fcaac (_cbba string ,_dbece int )string {if len (_cbba )< _dbece {return _cbba ;
};return _cbba [:_dbece ];};

// ExtractText processes and extracts all text data in content streams and returns as a string.
// It takes into account character encodings in the PDF file, which are decoded by
// CharcodeBytesToUnicode.
// Characters that can't be decoded are replaced with MissingCodeRune ('\ufffd' = ).
func (_cce *Extractor )ExtractText ()(string ,error ){_bfc ,_ ,_ ,_acb :=_cce .ExtractTextWithStats ();return _bfc ,_acb ;};func (_ebec paraList )findTableGrid (_ccac gridTiling )(*textTable ,map[*textPara ]struct{}){_ecc :=len (_ccac ._cacc );_gbdgg :=len (_ccac ._gbcfg );
_afec :=textTable {_fafcf :true ,_bbbd :_ecc ,_cfce :_gbdgg ,_fcefg :make (map[uint64 ]*textPara ,_ecc *_gbdgg ),_dbdg :make (map[uint64 ]compositeCell ,_ecc *_gbdgg )};_bacd :=make (map[*textPara ]struct{});_cgabe :=int ((1.0-_bdcf )*float64 (_ecc *_gbdgg ));
_bcec :=0;if _agef {_adc .Log .Info ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0064\u0020\u0078\u0020%\u0064",_ecc ,_gbdgg );};for _fded ,_dfcdd :=range _ccac ._gbcfg {_cdbf ,_fabfg :=_ccac ._aabda [_dfcdd ];
if !_fabfg {continue ;};for _ddgg ,_gecef :=range _ccac ._cacc {_efgdd ,_ccgfe :=_cdbf [_gecef ];if !_ccgfe {continue ;};_efdaa :=_ebec .inTile (_efgdd );if len (_efdaa )==0{_bcec ++;if _bcec > _cgabe {if _agef {_adc .Log .Info ("\u0021\u006e\u0075m\u0045\u006d\u0070\u0074\u0079\u003d\u0025\u0064",_bcec );
};return nil ,nil ;};}else {_afec .putComposite (_ddgg ,_fded ,_efdaa ,_efgdd .PdfRectangle );for _ ,_abag :=range _efdaa {_bacd [_abag ]=struct{}{};};};};};_geccd :=0;for _fbbcd :=0;_fbbcd < _ecc ;_fbbcd ++{_ggage :=_afec .get (_fbbcd ,0);if _ggage ==nil ||!_ggage ._afcb {_geccd ++;
};};if _geccd ==0{if _agef {_adc .Log .Info ("\u0021\u006e\u0075m\u0048\u0065\u0061\u0064\u0065\u0072\u003d\u0030");};return nil ,nil ;};_dgbge :=_afec .reduceTiling (_ccac ,_ceac );_dgbge =_dgbge .subdivide ();return _dgbge ,_bacd ;};

// String returns a human readable description of `s`.
func (_dcagc intSet )String ()string {var _agcg []int ;for _ecbag :=range _dcagc {if _dcagc .has (_ecbag ){_agcg =append (_agcg ,_ecbag );};};_bb .Ints (_agcg );return _ff .Sprintf ("\u0025\u002b\u0076",_agcg );};func (_gfbfa *shapesState )addPoint (_bfe ,_gfbfe float64 ){_aedbg :=_gfbfa .establishSubpath ();
_ddefb :=_gfbfa .devicePoint (_bfe ,_gfbfe );if _aedbg ==nil {_gfbfa ._febdf =true ;_gfbfa ._ggdc =_ddefb ;}else {_aedbg .add (_ddefb );};};

// String returns a description of `v`.
func (_ecbc *ruling )String ()string {if _ecbc ._bdffc ==_gcfe {return "\u004e\u004f\u0054\u0020\u0052\u0055\u004c\u0049\u004e\u0047";};_cbaed ,_dgec :="\u0078","\u0079";if _ecbc ._bdffc ==_dgca {_cbaed ,_dgec ="\u0079","\u0078";};_dfde :="";if _ecbc ._bffc !=0.0{_dfde =_ff .Sprintf (" \u0077\u0069\u0064\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_ecbc ._bffc );
};return _ff .Sprintf ("\u0025\u00310\u0073\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0020\u0025\u0076\u0025\u0073",_ecbc ._bdffc ,_cbaed ,_ecbc ._aebg ,_dgec ,_ecbc ._gecca ,_ecbc ._fafg ,_ecbc ._fafg -_ecbc ._gecca ,_ecbc ._abge ,_ecbc .Color ,_dfde );
};func (_adcc *stateStack )top ()*textState {if _adcc .empty (){return nil ;};return (*_adcc )[_adcc .size ()-1];};func (_ccae *textObject )setWordSpacing (_aec float64 ){if _ccae ==nil {return ;};_ccae ._gad ._aefb =_aec ;};func (_fde *textObject )setTextRenderMode (_cfff int ){if _fde ==nil {return ;
};_fde ._gad ._fec =RenderMode (_cfff );};const (_dfdb =1.0e-6;_ecfa =1.0e-4;_gggd =10;_ceee =6;_bebdc =0.5;_dfdf =0.12;_dcfg =0.19;_dfgca =0.04;_aadc =0.04;_egf =1.0;_ddbe =0.04;_bfac =0.4;_ddgdc =0.7;_fbe =1.0;_bbeeg =0.1;_ebf =1.4;_dcff =0.46;_cacfd =0.02;
_gfed =0.2;_edca =0.5;_dbdcf =4;_adda =4.0;_bdge =6;_bdcf =0.3;_eeba =0.01;_bdgc =0.02;_dcaa =2;_ccda =2;_aacd =500;_cdea =4.0;_ebaga =4.0;_ebgd =0.05;_ccbgb =0.1;_eecf =2.0;_fcef =2.0;_bfcb =1.5;_ceac =3.0;_cbgb =0.25;);func _cgdg (_fabg ,_ggde *textPara )bool {return _dcbb (_fabg ._ddccdf ,_ggde ._ddccdf )};
func _dbed (_bcef ,_dfdgb _bc .PdfRectangle )(_bc .PdfRectangle ,bool ){if !_dbea (_bcef ,_dfdgb ){return _bc .PdfRectangle {},false ;};return _bc .PdfRectangle {Llx :_d .Max (_bcef .Llx ,_dfdgb .Llx ),Urx :_d .Min (_bcef .Urx ,_dfdgb .Urx ),Lly :_d .Max (_bcef .Lly ,_dfdgb .Lly ),Ury :_d .Min (_bcef .Ury ,_dfdgb .Ury )},true ;
};type markKind int ;

// Font represents the font properties on a PDF page.
type Font struct{PdfFont *_bc .PdfFont ;

// FontName represents Font Name from font properties.
FontName string ;

// FontType represents Font Subtype entry in the font dictionary inside page resources.
// Examples : type0, Type1, MMType1, Type3, TrueType, CIDFont.
FontType string ;

// ToUnicode is true if font provides a `ToUnicode` mapping.
ToUnicode bool ;

// IsCID is true if underlying font is a composite font.
// Composite font is represented by a font dictionary whose Subtype is `Type0`
IsCID bool ;

// IsSimple is true if font is simple font.
// A simple font is limited to only 8 bit (255) character codes.
IsSimple bool ;

// FontData represents the raw data of the embedded font file.
// It can have format TrueType (TTF), PostScript Font (PFB) or Compact Font Format (CCF).
// FontData value can be indicates from `FontFile`, `FontFile2` or `FontFile3` inside Font Descriptor.
// At most, only one of `FontFile`, `FontFile2` or `FontFile3` will be FontData value.
FontData []byte ;

// FontFileName is a name representing the font. it has format:
// (Font Name) + (Font Type Extension), example: helvetica.ttf.
FontFileName string ;

// FontDescriptor represents metrics and other attributes inside font properties from PDF Structure (Font Descriptor).
FontDescriptor *_bc .PdfFontDescriptor ;};func _efac (_fae *_gf .ContentStreamOperation )(float64 ,error ){if len (_fae .Params )!=1{_ddcf :=_b .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");
_adc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_fae .Operand ,1,len (_fae .Params ),_fae .Params );
return 0.0,_ddcf ;};return _ea .GetNumberAsFloat (_fae .Params [0]);};func (_gaff *wordBag )arrangeText ()*textPara {_gaff .sort ();if _eefa {_gaff .removeDuplicates ();};var _cgdc []*textLine ;for _ ,_affe :=range _gaff .depthIndexes (){for !_gaff .empty (_affe ){_cfbg :=_gaff .firstReadingIndex (_affe );
_fadc :=_gaff .firstWord (_cfbg );_fbde :=_cddb (_gaff ,_cfbg );_ebfb :=_fadc ._gcfbc ;_ceff :=_fadc ._edcb -_bebdc *_ebfb ;_dggg :=_fadc ._edcb +_bebdc *_ebfb ;_gedb :=_ebf *_ebfb ;_dbec :=_dcff *_ebfb ;_cagfa :for {var _edff *textWord ;_cfdg :=0;for _ ,_ecafa :=range _gaff .depthBand (_ceff ,_dggg ){_dbca :=_gaff .highestWord (_ecafa ,_ceff ,_dggg );
if _dbca ==nil {continue ;};_dafc :=_ddcc (_dbca ,_fbde ._fegc [len (_fbde ._fegc )-1]);if _dafc < -_dbec {break _cagfa ;};if _dafc > _gedb {continue ;};if _edff !=nil &&_eagg (_dbca ,_edff )>=0{continue ;};_edff =_dbca ;_cfdg =_ecafa ;};if _edff ==nil {break ;
};_fbde .pullWord (_gaff ,_edff ,_cfdg );};_fbde .markWordBoundaries ();_cgdc =append (_cgdc ,_fbde );};};if len (_cgdc )==0{return nil ;};_bb .Slice (_cgdc ,func (_cegaf ,_ffdf int )bool {return _dgb (_cgdc [_cegaf ],_cgdc [_ffdf ])< 0});_abece :=_efaf (_gaff .PdfRectangle ,_cgdc );
if _gggb {_adc .Log .Info ("\u0061\u0072\u0072an\u0067\u0065\u0054\u0065\u0078\u0074\u0020\u0021\u0021\u0021\u0020\u0070\u0061\u0072\u0061\u003d\u0025\u0073",_abece .String ());if _aegf {for _ecacd ,_aded :=range _abece ._ebgbb {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ecacd ,_aded .String ());
if _ddccd {for _fgc ,_fgca :=range _aded ._fegc {_ff .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_fgc ,_fgca .String ());for _defac ,_agfab :=range _fgca ._cdcf {_ff .Printf ("\u00251\u0032\u0064\u003a\u0020\u0025\u0073\n",_defac ,_agfab .String ());
};};};};};};return _abece ;};func (_aebb *ruling )alignsPrimary (_dbaae *ruling )bool {return _aebb ._bdffc ==_dbaae ._bdffc &&_d .Abs (_aebb ._aebg -_dbaae ._aebg )< _fcef *0.5;};

// String returns a string describing `tm`.
func (_dfd TextMark )String ()string {_gbea :=_dfd .BBox ;var _dgd string ;if _dfd .Font !=nil {_dgd =_dfd .Font .String ();if len (_dgd )> 50{_dgd =_dgd [:50]+"\u002e\u002e\u002e";};};var _daa string ;if _dfd .Meta {_daa ="\u0020\u002a\u004d\u002a";};
return _ff .Sprintf ("\u007b\u0054\u0065\u0078t\u004d\u0061\u0072\u006b\u003a\u0020\u0025\u0064\u0020%\u0071\u003d\u0025\u0030\u0032\u0078\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e2\u0066\u0029\u0020\u0028\u00256\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0025\u0073\u007d",_dfd .Offset ,_dfd .Text ,[]rune (_dfd .Text ),_gbea .Llx ,_gbea .Lly ,_gbea .Urx ,_gbea .Ury ,_dgd ,_daa );
};func (_cded *compositeCell )updateBBox (){for _ ,_deae :=range _cded .paraList {_cded .PdfRectangle =_ecgff (_cded .PdfRectangle ,_deae .PdfRectangle );};};

// Len returns the number of TextMarks in `ma`.
func (_efe *TextMarkArray )Len ()int {if _efe ==nil {return 0;};return len (_efe ._ecff );};func (_gedc compositeCell )String ()string {_bdeb :="";if len (_gedc .paraList )> 0{_bdeb =_fcaac (_gedc .paraList .merge ().text (),50);};return _ff .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0070\u0061\u0072a\u0073\u0020\u0025\u0071",_gedc .PdfRectangle ,len (_gedc .paraList ),_bdeb );
};func (_cbfa rulingList )removeDuplicates ()rulingList {if len (_cbfa )==0{return nil ;};_cbfa .sort ();_gbbb :=rulingList {_cbfa [0]};for _ ,_eggdf :=range _cbfa [1:]{if _eggdf .equals (_gbbb [len (_gbbb )-1]){continue ;};_gbbb =append (_gbbb ,_eggdf );
};return _gbbb ;};func (_abaf *shapesState )clearPath (){_abaf ._gegg =nil ;_abaf ._febdf =false ;if _ccbg {_adc .Log .Info ("\u0043\u004c\u0045A\u0052\u003a\u0020\u0073\u0073\u003d\u0025\u0073",_abaf );};};func (_cecf paraList )merge ()*textPara {_adc .Log .Trace ("\u006d\u0065\u0072\u0067\u0065:\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_cecf ));
if len (_cecf )==0{return nil ;};_cecf .sortReadingOrder ();_aefad :=_cecf [0].PdfRectangle ;_cegd :=_cecf [0]._ebgbb ;for _ ,_fbd :=range _cecf [1:]{_aefad =_ecgff (_aefad ,_fbd .PdfRectangle );_cegd =append (_cegd ,_fbd ._ebgbb ...);};return _efaf (_aefad ,_cegd );
};type textResult struct{_cafa PageText ;_aac int ;_ddfb int ;};type textPara struct{_bc .PdfRectangle ;_ddccdf _bc .PdfRectangle ;_ebgbb []*textLine ;_bdee *textTable ;_aaee bool ;_afcb bool ;_cgbbb *textPara ;_dbeb *textPara ;_ccce *textPara ;_cgee *textPara ;
};type textMark struct{_bc .PdfRectangle ;_faed int ;_cbab string ;_ddag string ;_ccf *_bc .PdfFont ;_aca float64 ;_bcg float64 ;_dbgb _bcc .Matrix ;_efca _bcc .Point ;_fgaa _bc .PdfRectangle ;_bgcc _bf .Color ;_gacc _bf .Color ;};func _ffcff (_bagd map[float64 ]map[float64 ]gridTile )[]float64 {_accc :=make ([]float64 ,0,len (_bagd ));
for _fegb :=range _bagd {_accc =append (_accc ,_fegb );};_bb .Float64s (_accc );_ccaba :=len (_accc );for _dbbd :=0;_dbbd < _ccaba /2;_dbbd ++{_accc [_dbbd ],_accc [_ccaba -1-_dbbd ]=_accc [_ccaba -1-_dbbd ],_accc [_dbbd ];};return _accc ;};func (_aaga *wordBag )firstReadingIndex (_cgdf int )int {_fcea :=_aaga .firstWord (_cgdf )._gcfbc ;
_afcd :=float64 (_cgdf +1)*_ceee ;_gfd :=_afcd +_adda *_fcea ;_fcaa :=_cgdf ;for _ ,_dggf :=range _aaga .depthBand (_afcd ,_gfd ){if _eagg (_aaga .firstWord (_dggf ),_aaga .firstWord (_fcaa ))< 0{_fcaa =_dggf ;};};return _fcaa ;};func (_ggce *textPara )toCellTextMarks (_aabc *int )[]TextMark {var _bagb []TextMark ;
for _efcc ,_gfef :=range _ggce ._ebgbb {_egec :=_gfef .toTextMarks (_aabc );_cfec :=_afcg &&_gfef .endsInHyphen ()&&_efcc !=len (_ggce ._ebgbb )-1;if _cfec {_egec =_fddb (_egec ,_aabc );};_bagb =append (_bagb ,_egec ...);if !(_cfec ||_efcc ==len (_ggce ._ebgbb )-1){_bagb =_cdab (_bagb ,_aabc ,_dedb (_gfef ._acgec ,_ggce ._ebgbb [_efcc +1]._acgec ));
};};return _bagb ;};func _eedbd (_fcbb []*textMark ,_ddga _bc .PdfRectangle )[]*textWord {var _egdd []*textWord ;var _dcadb *textWord ;if _bggad {_adc .Log .Info ("\u006d\u0061\u006beT\u0065\u0078\u0074\u0057\u006f\u0072\u0064\u0073\u003a\u0020\u0025\u0064\u0020\u006d\u0061\u0072\u006b\u0073",len (_fcbb ));
};_edebd :=func (){if _dcadb !=nil {_dfdag :=_dcadb .computeText ();if !_gceaf (_dfdag ){_dcadb ._beaff =_dfdag ;_egdd =append (_egdd ,_dcadb );if _bggad {_adc .Log .Info ("\u0061\u0064\u0064Ne\u0077\u0057\u006f\u0072\u0064\u003a\u0020\u0025\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",len (_egdd )-1,_dcadb .String ());
for _aegfef ,_bafbf :=range _dcadb ._cdcf {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_aegfef ,_bafbf .String ());};};};_dcadb =nil ;};};for _ ,_cabb :=range _fcbb {if _cbda &&_dcadb !=nil &&len (_dcadb ._cdcf )> 0{_gadb :=_dcadb ._cdcf [len (_dcadb ._cdcf )-1];
_begbd ,_gdgc :=_fbfc (_cabb ._cbab );_bcgdeb ,_acgg :=_fbfc (_gadb ._cbab );if _gdgc &&!_acgg &&_gadb .inDiacriticArea (_cabb ){_dcadb .addDiacritic (_begbd );continue ;};if _acgg &&!_gdgc &&_cabb .inDiacriticArea (_gadb ){_dcadb ._cdcf =_dcadb ._cdcf [:len (_dcadb ._cdcf )-1];
_dcadb .appendMark (_cabb ,_ddga );_dcadb .addDiacritic (_bcgdeb );continue ;};};_efage :=_gceaf (_cabb ._cbab );if _efage {_edebd ();continue ;};if _dcadb ==nil &&!_efage {_dcadb =_gccaa ([]*textMark {_cabb },_ddga );continue ;};_adbae :=_dcadb ._gcfbc ;
_aabbd :=_d .Abs (_feae (_ddga ,_cabb )-_dcadb ._edcb )/_adbae ;_cggbd :=_ddcc (_cabb ,_dcadb )/_adbae ;if _cggbd >=_dfdf ||!(-_dcfg <=_cggbd &&_aabbd <=_dfgca ){_edebd ();_dcadb =_gccaa ([]*textMark {_cabb },_ddga );continue ;};_dcadb .appendMark (_cabb ,_ddga );
};_edebd ();return _egdd ;};func _dcbb (_gfba ,_adef _bc .PdfRectangle )bool {return _adef .Llx <=_gfba .Urx &&_gfba .Llx <=_adef .Urx ;};type pathSection struct{_bdfg []*subpath ;_bf .Color ;};

// TextTable represents a table.
// Cells are ordered top-to-bottom, left-to-right.
// Cells[y] is the (0-offset) y'th row in the table.
// Cells[y][x] is the (0-offset) x'th column in the table.
type TextTable struct{W ,H int ;Cells [][]TableCell ;};func (_fbgad *subpath )makeRectRuling (_bceb _bf .Color )(*ruling ,bool ){if _gcea {_adc .Log .Info ("\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0070\u0061\u0074\u0068\u003d\u0025\u0076",_fbgad );
};_fdecc :=_fbgad ._dged [:4];_adcff :=make (map[int ]rulingKind ,len (_fdecc ));for _dcag ,_ddfe :=range _fdecc {_gfead :=_fbgad ._dged [(_dcag +1)%4];_adcff [_dcag ]=_gfbe (_ddfe ,_gfead );if _gcea {_ff .Printf ("\u0025\u0034\u0064: \u0025\u0073\u0020\u003d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066",_dcag ,_adcff [_dcag ],_ddfe ,_gfead );
};};if _gcea {_ff .Printf ("\u0020\u0020\u0020\u006b\u0069\u006e\u0064\u0073\u003d\u0025\u002b\u0076\u000a",_adcff );};var _bfgf ,_debce []int ;for _agae ,_eefg :=range _adcff {switch _eefg {case _dgca :_debce =append (_debce ,_agae );case _gda :_bfgf =append (_bfgf ,_agae );
};};if _gcea {_ff .Printf ("\u0020\u0020 \u0068\u006f\u0072z\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_debce ),_debce );_ff .Printf ("\u0020\u0020 \u0076\u0065\u0072t\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_bfgf ),_bfgf );
};_gcbf :=(len (_debce )==2&&len (_bfgf )==2)||(len (_debce )==2&&len (_bfgf )==0&&_gbfc (_fdecc [_debce [0]],_fdecc [_debce [1]]))||(len (_bfgf )==2&&len (_debce )==0&&_gdec (_fdecc [_bfgf [0]],_fdecc [_bfgf [1]]));if _gcea {_ff .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_debce ),len (_bfgf ),_gcbf );
};if !_gcbf {if _gcea {_adc .Log .Error ("\u0021!\u006d\u0061\u006b\u0065R\u0065\u0063\u0074\u0052\u0075l\u0069n\u0067:\u0020\u0070\u0061\u0074\u0068\u003d\u0025v",_fbgad );_ff .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_debce ),len (_bfgf ),_gcbf );
};return &ruling {},false ;};if len (_bfgf )==0{for _ddec ,_deddc :=range _adcff {if _deddc !=_dgca {_bfgf =append (_bfgf ,_ddec );};};};if len (_debce )==0{for _egfe ,_ceacf :=range _adcff {if _ceacf !=_gda {_debce =append (_debce ,_egfe );};};};if _gcea {_adc .Log .Info ("\u006da\u006b\u0065R\u0065\u0063\u0074\u0052u\u006c\u0069\u006eg\u003a\u0020\u0068\u006f\u0072\u007a\u0073\u003d\u0025d \u0076\u0065\u0072t\u0073\u003d%\u0064\u0020\u0070\u006f\u0069\u006et\u0073\u003d%\u0064\u000a"+"\u0009\u0020\u0068o\u0072\u007a\u0073\u003d\u0025\u002b\u0076\u000a"+"\u0009\u0020\u0076e\u0072\u0074\u0073\u003d\u0025\u002b\u0076\u000a"+"\t\u0070\u006f\u0069\u006e\u0074\u0073\u003d\u0025\u002b\u0076",len (_debce ),len (_bfgf ),len (_fdecc ),_debce ,_bfgf ,_fdecc );
};var _afaad ,_ecfg ,_aegfe ,_bca _bcc .Point ;if _fdecc [_debce [0]].Y > _fdecc [_debce [1]].Y {_aegfe ,_bca =_fdecc [_debce [0]],_fdecc [_debce [1]];}else {_aegfe ,_bca =_fdecc [_debce [1]],_fdecc [_debce [0]];};if _fdecc [_bfgf [0]].X > _fdecc [_bfgf [1]].X {_afaad ,_ecfg =_fdecc [_bfgf [0]],_fdecc [_bfgf [1]];
}else {_afaad ,_ecfg =_fdecc [_bfgf [1]],_fdecc [_bfgf [0]];};_ggbg :=_bc .PdfRectangle {Llx :_afaad .X ,Urx :_ecfg .X ,Lly :_bca .Y ,Ury :_aegfe .Y };if _ggbg .Llx > _ggbg .Urx {_ggbg .Llx ,_ggbg .Urx =_ggbg .Urx ,_ggbg .Llx ;};if _ggbg .Lly > _ggbg .Ury {_ggbg .Lly ,_ggbg .Ury =_ggbg .Ury ,_ggbg .Lly ;
};_dfdbb :=rectRuling {PdfRectangle :_ggbg ,_eaad :_eeadd (_ggbg ),Color :_bceb };if _dfdbb ._eaad ==_gcfe {if _gcea {_adc .Log .Error ("\u006da\u006b\u0065\u0052\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006eg\u003a\u0020\u006b\u0069\u006e\u0064\u003d\u006e\u0069\u006c");
};return nil ,false ;};_dfge ,_fdebc :=_dfdbb .asRuling ();if !_fdebc {if _gcea {_adc .Log .Error ("\u006da\u006b\u0065\u0052\u0065c\u0074\u0052\u0075\u006c\u0069n\u0067:\u0020!\u0069\u0073\u0052\u0075\u006c\u0069\u006eg");};return nil ,false ;};if _ggaae {_ff .Printf ("\u0020\u0020\u0020\u0072\u003d\u0025\u0073\u000a",_dfge .String ());
};return _dfge ,true ;};func _cgbc (_cbeeg ,_fbad float64 )bool {return _d .Abs (_cbeeg -_fbad )<=_eecf };func (_cfag paraList )toTextMarks ()[]TextMark {_afe :=0;var _beagf []TextMark ;for _egfg ,_dfcb :=range _cfag {if _dfcb ._afcb {continue ;};_cdec :=_dfcb .toTextMarks (&_afe );
_beagf =append (_beagf ,_cdec ...);if _egfg !=len (_cfag )-1{if _ebfc (_dfcb ,_cfag [_egfg +1]){_beagf =_cdab (_beagf ,&_afe ,"\u0020");}else {_beagf =_cdab (_beagf ,&_afe ,"\u000a");_beagf =_cdab (_beagf ,&_afe ,"\u000a");};};};_beagf =_cdab (_beagf ,&_afe ,"\u000a");
_beagf =_cdab (_beagf ,&_afe ,"\u000a");return _beagf ;};func _bebc (_dbcg _bc .PdfRectangle ,_dage ,_ccfg ,_abad ,_cbac *ruling )gridTile {_cdfe :=_dbcg .Llx ;_becd :=_dbcg .Urx ;_eebb :=_dbcg .Lly ;_baag :=_dbcg .Ury ;return gridTile {PdfRectangle :_dbcg ,_befe :_dage !=nil &&_dage .encloses (_eebb ,_baag ),_eabbc :_ccfg !=nil &&_ccfg .encloses (_eebb ,_baag ),_fdaa :_abad !=nil &&_abad .encloses (_cdfe ,_becd ),_afca :_cbac !=nil &&_cbac .encloses (_cdfe ,_becd )};
};func (_baeb rulingList )primaries ()[]float64 {_debcf :=make (map[float64 ]struct{},len (_baeb ));for _ ,_gcfge :=range _baeb {_debcf [_gcfge ._aebg ]=struct{}{};};_ebcb :=make ([]float64 ,len (_debcf ));_efdg :=0;for _begd :=range _debcf {_ebcb [_efdg ]=_begd ;
_efdg ++;};_bb .Float64s (_ebcb );return _ebcb ;};func (_eabg *textLine )text ()string {var _cbad []string ;for _ ,_aeeg :=range _eabg ._fegc {if _aeeg ._fdcfe {_cbad =append (_cbad ,"\u0020");};_cbad =append (_cbad ,_aeeg ._beaff );};return _ba .Join (_cbad ,"");
};func _gbfc (_adbe ,_ffbg _bcc .Point )bool {_dfbg :=_d .Abs (_adbe .X -_ffbg .X );_fbgda :=_d .Abs (_adbe .Y -_ffbg .Y );return _cfgee (_fbgda ,_dfbg );};func (_abc *imageExtractContext )processOperand (_fbb *_gf .ContentStreamOperation ,_gcc _gf .GraphicsState ,_faf *_bc .PdfPageResources )error {if _fbb .Operand =="\u0042\u0049"&&len (_fbb .Params )==1{_ace ,_cbe :=_fbb .Params [0].(*_gf .ContentStreamInlineImage );
if !_cbe {return nil ;};if _cgb ,_ebb :=_ea .GetBoolVal (_ace .ImageMask );_ebb {if _cgb &&!_abc ._fb .IncludeInlineStencilMasks {return nil ;};};return _abc .extractInlineImage (_ace ,_gcc ,_faf );}else if _fbb .Operand =="\u0044\u006f"&&len (_fbb .Params )==1{_fba ,_caa :=_ea .GetName (_fbb .Params [0]);
if !_caa {_adc .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");return _ag ;};_ ,_ggf :=_faf .GetXObjectByName (*_fba );switch _ggf {case _bc .XObjectTypeImage :return _abc .extractXObjectImage (_fba ,_gcc ,_faf );case _bc .XObjectTypeForm :return _abc .extractFormImages (_fba ,_gcc ,_faf );
};};return nil ;};func (_bcgde paraList )tables ()[]TextTable {var _agbce []TextTable ;if _ddgd {_adc .Log .Info ("\u0070\u0061\u0072\u0061\u0073\u002e\u0074\u0061\u0062\u006c\u0065\u0073\u003a");};for _ ,_fcefa :=range _bcgde {_degc :=_fcefa ._bdee ;if _degc !=nil &&_degc .isExportable (){_agbce =append (_agbce ,_degc .toTextTable ());
};};return _agbce ;};func (_bdcd rulingList )secMinMax ()(float64 ,float64 ){_cagfae ,_dced :=_bdcd [0]._gecca ,_bdcd [0]._fafg ;for _ ,_afee :=range _bdcd [1:]{if _afee ._gecca < _cagfae {_cagfae =_afee ._gecca ;};if _afee ._fafg > _dced {_dced =_afee ._fafg ;
};};return _cagfae ,_dced ;};func (_edce *textObject )getFontDict (_cacb string )(_cfeb _ea .PdfObject ,_cege error ){_dcfc :=_edce ._feb ;if _dcfc ==nil {_adc .Log .Debug ("g\u0065\u0074\u0046\u006f\u006e\u0074D\u0069\u0063\u0074\u002e\u0020\u004eo\u0020\u0072\u0065\u0073\u006f\u0075\u0072c\u0065\u0073\u002e\u0020\u006e\u0061\u006d\u0065\u003d\u0025#\u0071",_cacb );
return nil ,nil ;};_cfeb ,_dgg :=_dcfc .GetFontByName (_ea .PdfObjectName (_cacb ));if !_dgg {_adc .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0067\u0065t\u0046\u006f\u006et\u0044\u0069\u0063\u0074\u003a\u0020\u0046\u006f\u006et \u006e\u006f\u0074 \u0066\u006fu\u006e\u0064\u003a\u0020\u006e\u0061m\u0065\u003d%\u0023\u0071",_cacb );
return nil ,_b .New ("f\u006f\u006e\u0074\u0020no\u0074 \u0069\u006e\u0020\u0072\u0065s\u006f\u0075\u0072\u0063\u0065\u0073");};return _cfeb ,nil ;};func _caab (_bdafd ,_dfef int )int {if _bdafd > _dfef {return _bdafd ;};return _dfef ;};func _cfgee (_aaacc ,_faba float64 )bool {return _aaacc /_d .Max (_ccbgb ,_faba )< _ebgd };
func (_bcb *PageFonts )extractPageResourcesToFont (_gfb *_bc .PdfPageResources )error {_af ,_ae :=_ea .GetDict (_gfb .Font );if !_ae {return _b .New (_df );};for _ ,_eae :=range _af .Keys (){var (_ab =true ;_cg []byte ;_cb string ;);_deg ,_edd :=_gfb .GetFontByName (_eae );
if !_edd {return _b .New (_eg );};_aaf ,_cd :=_bc .NewPdfFontFromPdfObject (_deg );if _cd !=nil {return _cd ;};_aba :=_aaf .FontDescriptor ();_aaa :=_aaf .FontDescriptor ().FontName .String ();_bedd :=_aaf .Subtype ();if _ggb (_bcb .Fonts ,_aaa ){continue ;
};if len (_aaf .ToUnicode ())==0{_ab =false ;};if _aba .FontFile !=nil {if _gd ,_ege :=_ea .GetStream (_aba .FontFile );_ege {_cg ,_cd =_ea .DecodeStream (_gd );if _cd !=nil {return _cd ;};_cb =_aaa +"\u002e\u0070\u0066\u0062";};}else if _aba .FontFile2 !=nil {if _abb ,_bff :=_ea .GetStream (_aba .FontFile2 );
_bff {_cg ,_cd =_ea .DecodeStream (_abb );if _cd !=nil {return _cd ;};_cb =_aaa +"\u002e\u0074\u0074\u0066";};}else if _aba .FontFile3 !=nil {if _gaa ,_ecg :=_ea .GetStream (_aba .FontFile3 );_ecg {_cg ,_cd =_ea .DecodeStream (_gaa );if _cd !=nil {return _cd ;
};_cb =_aaa +"\u002e\u0063\u0066\u0066";};};if len (_cb )< 1{_adc .Log .Debug (_gg );};_cdg :=Font {FontName :_aaa ,PdfFont :_aaf ,IsCID :_aaf .IsCID (),IsSimple :_aaf .IsSimple (),ToUnicode :_ab ,FontType :_bedd ,FontData :_cg ,FontFileName :_cb ,FontDescriptor :_aba };
_bcb .Fonts =append (_bcb .Fonts ,_cdg );};return nil ;};type textLine struct{_bc .PdfRectangle ;_acgec float64 ;_fegc []*textWord ;_ebfa float64 ;};type shapesState struct{_agbg _bcc .Matrix ;_gfee _bcc .Matrix ;_gegg []*subpath ;_febdf bool ;_ggdc _bcc .Point ;
_afgc *textObject ;};func _afac (_dbcb []*textWord ,_cgedde int )[]*textWord {_caba :=len (_dbcb );copy (_dbcb [_cgedde :],_dbcb [_cgedde +1:]);return _dbcb [:_caba -1];};const _dgfa =1.0/1000.0;func (_egcc paraList )eventNeighbours (_daca []event )map[*textPara ][]int {_bb .Slice (_daca ,func (_bgfb ,_abgdg int )bool {_efcdd ,_cbfab :=_daca [_bgfb ],_daca [_abgdg ];
_ceead ,_aeab :=_efcdd ._bcbbe ,_cbfab ._bcbbe ;if _ceead !=_aeab {return _ceead < _aeab ;};if _efcdd ._dcac !=_cbfab ._dcac {return _efcdd ._dcac ;};return _bgfb < _abgdg ;});_agec :=make (map[int ]intSet );_fefcg :=make (intSet );for _ ,_eced :=range _daca {if _eced ._dcac {_agec [_eced ._cggc ]=make (intSet );
for _dded :=range _fefcg {if _dded !=_eced ._cggc {_agec [_eced ._cggc ].add (_dded );_agec [_dded ].add (_eced ._cggc );};};_fefcg .add (_eced ._cggc );}else {_fefcg .del (_eced ._cggc );};};_debd :=map[*textPara ][]int {};for _fgfbe ,_efea :=range _agec {_ebff :=_egcc [_fgfbe ];
if len (_efea )==0{_debd [_ebff ]=nil ;continue ;};_gffc :=make ([]int ,len (_efea ));_dcab :=0;for _fafgc :=range _efea {_gffc [_dcab ]=_fafgc ;_dcab ++;};_debd [_ebff ]=_gffc ;};return _debd ;};

// String returns a description of `w`.
func (_aegga *textWord )String ()string {return _ff .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_aegga ._edcb ,_aegga .PdfRectangle ,_aegga ._gcfbc ,_aegga ._beaff );
};func (_fgfa lineRuling )asRuling ()(*ruling ,bool ){_gbcfb :=ruling {_bdffc :_fgfa ._gacf ,Color :_fgfa .Color ,_abge :_bgae };switch _fgfa ._gacf {case _gda :_gbcfb ._aebg =_fgfa .xMean ();_gbcfb ._gecca =_d .Min (_fgfa ._cbff .Y ,_fgfa ._abeb .Y );
_gbcfb ._fafg =_d .Max (_fgfa ._cbff .Y ,_fgfa ._abeb .Y );case _dgca :_gbcfb ._aebg =_fgfa .yMean ();_gbcfb ._gecca =_d .Min (_fgfa ._cbff .X ,_fgfa ._abeb .X );_gbcfb ._fafg =_d .Max (_fgfa ._cbff .X ,_fgfa ._abeb .X );default:_adc .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_fgfa ._gacf );
return nil ,false ;};return &_gbcfb ,true ;};func (_gfeg *textObject )nextLine (){_gfeg .moveLP (0,-_gfeg ._gad ._bbb )};func (_ceec *textTable )subdivide ()*textTable {_ceec .logComposite ("\u0073u\u0062\u0064\u0069\u0076\u0069\u0064e");_bfeb :=_ceec .compositeRowCorridors ();
_eabf :=_ceec .compositeColCorridors ();if _ddgd {_adc .Log .Info ("\u0073u\u0062\u0064i\u0076\u0069\u0064\u0065:\u000a\u0009\u0072o\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s=\u0025\u0073\u000a\t\u0063\u006fl\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073=\u0025\u0073",_gdge (_bfeb ),_gdge (_eabf ));
};if len (_bfeb )==0||len (_eabf )==0{return _ceec ;};_bcdc (_bfeb );_bcdc (_eabf );if _ddgd {_adc .Log .Info ("\u0073\u0075\u0062\u0064\u0069\u0076\u0069\u0064\u0065\u0020\u0066\u0069\u0078\u0065\u0064\u003a\u000a\u0009r\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073\u003d\u0025\u0073\u000a\u0009\u0063\u006f\u006cC\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d\u0025\u0073",_gdge (_bfeb ),_gdge (_eabf ));
};_efba ,_bced :=_dccad (_ceec ._cfce ,_bfeb );_cgcfag ,_gcad :=_dccad (_ceec ._bbbd ,_eabf );_dbcde :=make (map[uint64 ]*textPara ,_gcad *_bced );_ggdbd :=&textTable {PdfRectangle :_ceec .PdfRectangle ,_fafcf :_ceec ._fafcf ,_cfce :_bced ,_bbbd :_gcad ,_fcefg :_dbcde };
if _ddgd {_adc .Log .Info ("\u0073\u0075b\u0064\u0069\u0076\u0069\u0064\u0065\u003a\u0020\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0020\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0063\u0065\u006c\u006c\u0073\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0079\u004f\u0066\u0066\u0073\u0065\u0074\u0073=\u0025\u002b\u0076\u000a"+"\u0009\u0078\u004f\u0066\u0066\u0073\u0065\u0074\u0073\u003d\u0025\u002b\u0076",_ceec ._bbbd ,_ceec ._cfce ,_gcad ,_bced ,_gdge (_bfeb ),_gdge (_eabf ),_efba ,_cgcfag );
};for _cffd :=0;_cffd < _ceec ._cfce ;_cffd ++{_abgd :=_efba [_cffd ];for _cagff :=0;_cagff < _ceec ._bbbd ;_cagff ++{_dfbd :=_cgcfag [_cagff ];if _ddgd {_ff .Printf ("\u0025\u0036\u0064\u002c %\u0032\u0064\u003a\u0020\u0078\u0030\u003d\u0025\u0064\u0020\u0079\u0030\u003d\u0025d\u000a",_cagff ,_cffd ,_dfbd ,_abgd );
};_becddf ,_deedf :=_ceec ._dbdg [_degb (_cagff ,_cffd )];if !_deedf {continue ;};_dcad :=_becddf .split (_bfeb [_cffd ],_eabf [_cagff ]);for _eebf :=0;_eebf < _dcad ._cfce ;_eebf ++{for _fgagd :=0;_fgagd < _dcad ._bbbd ;_fgagd ++{_gdcf :=_dcad .get (_fgagd ,_eebf );
_ggdbd .put (_dfbd +_fgagd ,_abgd +_eebf ,_gdcf );if _ddgd {_ff .Printf ("\u0025\u0038\u0064\u002c\u0020\u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_dfbd +_fgagd ,_abgd +_eebf ,_gdcf );};};};};};return _ggdbd ;};func (_ebbc paraList )findTextTables ()[]*textTable {var _ddfbg []*textTable ;
for _ ,_bface :=range _ebbc {if _bface .taken ()||_bface .Width ()==0{continue ;};_deec :=_bface .isAtom ();if _deec ==nil {continue ;};_deec .growTable ();if _deec ._bbbd *_deec ._cfce < _bdge {continue ;};_deec .markCells ();_deec .log ("\u0067\u0072\u006fw\u006e");
_ddfbg =append (_ddfbg ,_deec );};return _ddfbg ;};func _caabe (_daecg _bc .PdfColorspace ,_fcgc _bc .PdfColor )_bf .Color {if _daecg ==nil ||_fcgc ==nil {return _bf .Black ;};_cada ,_cdgb :=_daecg .ColorToRGB (_fcgc );if _cdgb !=nil {_adc .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006fu\u006c\u0064\u0020no\u0074\u0020\u0063\u006f\u006e\u0076e\u0072\u0074\u0020\u0063\u006f\u006c\u006f\u0072\u0020\u0025\u0076\u0020\u0028\u0025\u0076)\u0020\u0074\u006f\u0020\u0052\u0047\u0042\u003a \u0025\u0073",_fcgc ,_daecg ,_cdgb );
return _bf .Black ;};_dcbfd ,_ggfc :=_cada .(*_bc .PdfColorDeviceRGB );if !_ggfc {_adc .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0065\u0064 \u0063\u006f\u006c\u006f\u0072\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020i\u006e\u0020\u0074\u0068\u0065\u0020\u0052\u0047\u0042\u0020\u0063\u006flo\u0072\u0073\u0070\u0061\u0063\u0065\u003a\u0020\u0025\u0076",_cada );
return _bf .Black ;};return _bf .NRGBA {R :uint8 (_dcbfd .R ()*255),G :uint8 (_dcbfd .G ()*255),B :uint8 (_dcbfd .B ()*255),A :uint8 (255)};};func _cddb (_fede *wordBag ,_aedaa int )*textLine {_fbc :=_fede .firstWord (_aedaa );_decg :=textLine {PdfRectangle :_fbc .PdfRectangle ,_ebfa :_fbc ._gcfbc ,_acgec :_fbc ._edcb };
_decg .pullWord (_fede ,_fbc ,_aedaa );return &_decg ;};func (_eecc *ruling )intersects (_edcg *ruling )bool {_deeeb :=(_eecc ._bdffc ==_gda &&_edcg ._bdffc ==_dgca )||(_edcg ._bdffc ==_gda &&_eecc ._bdffc ==_dgca );_ggfg :=func (_gddb ,_gfcbe *ruling )bool {return _gddb ._gecca -_eecf <=_gfcbe ._aebg &&_gfcbe ._aebg <=_gddb ._fafg +_eecf ;
};_cbgf :=_ggfg (_eecc ,_edcg );_ggff :=_ggfg (_edcg ,_eecc );if _ggaae {_ff .Printf ("\u0020\u0020\u0020\u0020\u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003a\u0020\u0020\u006fr\u0074\u0068\u006f\u0067\u006f\u006e\u0061l\u003d\u0025\u0074\u0020\u006f\u0031\u003d\u0025\u0074\u0020\u006f2\u003d\u0025\u0074\u0020\u2192\u0020\u0025\u0074\u000a"+"\u0020\u0020\u0020 \u0020\u0020\u0020\u0076\u003d\u0025\u0073\u000a"+" \u0020\u0020\u0020\u0020\u0020\u0077\u003d\u0025\u0073\u000a",_deeeb ,_cbgf ,_ggff ,_deeeb &&_cbgf &&_ggff ,_eecc ,_edcg );
};return _deeeb &&_cbgf &&_ggff ;};func _dccad (_febb int ,_fffc map[int ][]float64 )([]int ,int ){_acbfg :=make ([]int ,_febb );_bbed :=0;for _fdab :=0;_fdab < _febb ;_fdab ++{_acbfg [_fdab ]=_bbed ;_bbed +=len (_fffc [_fdab ])+1;};return _acbfg ,_bbed ;
};

// BBox returns the smallest axis-aligned rectangle that encloses all the TextMarks in `ma`.
func (_cef *TextMarkArray )BBox ()(_bc .PdfRectangle ,bool ){var _agbc _bc .PdfRectangle ;_ceaa :=false ;for _ ,_gca :=range _cef ._ecff {if _gca .Meta ||_gceaf (_gca .Text ){continue ;};if _ceaa {_agbc =_ecgff (_agbc ,_gca .BBox );}else {_agbc =_gca .BBox ;
_ceaa =true ;};};return _agbc ,_ceaa ;};func _gbga (_gbb string )string {_efgb :=[]rune (_gbb );return string (_efgb [:len (_efgb )-1])};func (_bbcg *ruling )encloses (_fcgba ,_eefcae float64 )bool {return _bbcg ._gecca -_eecf <=_fcgba &&_eefcae <=_bbcg ._fafg +_eecf ;
};func (_dcgd *textTable )newTablePara ()*textPara {_ggcee :=_dcgd .computeBbox ();_cbccb :=&textPara {PdfRectangle :_ggcee ,_ddccdf :_ggcee ,_bdee :_dcgd };if _ddgd {_adc .Log .Info ("\u006e\u0065w\u0054\u0061\u0062l\u0065\u0050\u0061\u0072\u0061\u003a\u0020\u0025\u0073",_cbccb );
};return _cbccb ;};func _gaebb (_cdaaa float64 )int {var _gccf int ;if _cdaaa >=0{_gccf =int (_cdaaa /_ceee );}else {_gccf =int (_cdaaa /_ceee )-1;};return _gccf ;};func (_eaff *textTable )computeBbox ()_bc .PdfRectangle {var _bbfa _bc .PdfRectangle ;_dfed :=false ;
for _cfba :=0;_cfba < _eaff ._cfce ;_cfba ++{for _adbb :=0;_adbb < _eaff ._bbbd ;_adbb ++{_ggbde :=_eaff .get (_adbb ,_cfba );if _ggbde ==nil {continue ;};if !_dfed {_bbfa =_ggbde .PdfRectangle ;_dfed =true ;}else {_bbfa =_ecgff (_bbfa ,_ggbde .PdfRectangle );
};};};return _bbfa ;};func (_bbead rulingList )mergePrimary ()float64 {_agea :=_bbead [0]._aebg ;for _ ,_dbac :=range _bbead [1:]{_agea +=_dbac ._aebg ;};return _agea /float64 (len (_bbead ));};type textTable struct{_bc .PdfRectangle ;_bbbd ,_cfce int ;
_fafcf bool ;_fcefg map[uint64 ]*textPara ;_dbdg map[uint64 ]compositeCell ;};func (_effac rulingList )asTiling ()gridTiling {if _agef {_adc .Log .Info ("r\u0075\u006ci\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0063s\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u002b\u002b\u002b\u0020\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_effac ));
};for _dfdec ,_dggdf :=range _effac [1:]{_gebf :=_effac [_dfdec ];if _gebf .alignsPrimary (_dggdf )&&_gebf .alignsSec (_dggdf ){_adc .Log .Error ("a\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0044\u0075\u0070\u006c\u0069\u0063\u0061\u0074\u0065 \u0072\u0075\u006c\u0069\u006e\u0067\u0073\u002e\u000a\u0009v=\u0025\u0073\u000a\t\u0077=\u0025\u0073",_dggdf ,_gebf );
};};_effac .sortStrict ();_effac .log ("\u0073n\u0061\u0070\u0070\u0065\u0064");_bffb ,_agefa :=_effac .vertsHorzs ();_dfgg :=_bffb .primaries ();_dbbge :=_agefa .primaries ();_gabg :=len (_dfgg )-1;_egbg :=len (_dbbge )-1;if _gabg ==0||_egbg ==0{return gridTiling {};
};_baffc :=_bc .PdfRectangle {Llx :_dfgg [0],Urx :_dfgg [_gabg ],Lly :_dbbge [0],Ury :_dbbge [_egbg ]};if _agef {_adc .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0072\u0074s=\u0025\u0064",len (_bffb ));
for _ebfd ,_edcfc :=range _bffb {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ebfd ,_edcfc );};_adc .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0068\u006f\u0072\u007as=\u0025\u0064",len (_agefa ));
for _cfdb ,_fgad :=range _agefa {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cfdb ,_fgad );};_adc .Log .Info ("\u0072\u0075\u006c\u0069\u006eg\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067:\u0020\u0020\u0077\u0078\u0068\u003d\u0025\u0064\u0078\u0025\u0064\u000a\u0009\u006c\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a\u0009\u006c\u006c\u0079\u003d\u0025\u002e\u0032f",_gabg ,_egbg ,_dfgg ,_dbbge );
};_gecce :=make ([]gridTile ,_gabg *_egbg );for _agfabg :=_egbg -1;_agfabg >=0;_agfabg --{_cafcc :=_dbbge [_agfabg ];_adga :=_dbbge [_agfabg +1];for _dbf :=0;_dbf < _gabg ;_dbf ++{_dabfc :=_dfgg [_dbf ];_aaead :=_dfgg [_dbf +1];_dbgbff :=_bffb .findPrimSec (_dabfc ,_cafcc );
_fecd :=_bffb .findPrimSec (_aaead ,_cafcc );_gbdd :=_agefa .findPrimSec (_cafcc ,_dabfc );_effc :=_agefa .findPrimSec (_adga ,_dabfc );_ebbag :=_bc .PdfRectangle {Llx :_dabfc ,Urx :_aaead ,Lly :_cafcc ,Ury :_adga };_ccfa :=_bebc (_ebbag ,_dbgbff ,_fecd ,_gbdd ,_effc );
_gecce [_agfabg *_gabg +_dbf ]=_ccfa ;if _agef {_ff .Printf ("\u0020\u0020\u0078\u003d\u0025\u0032\u0064\u0020\u0079\u003d\u0025\u0032\u0064\u003a\u0020%\u0073 \u0025\u0036\u002e\u0032\u0066\u0020\u0078\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_dbf ,_agfabg ,_ccfa .String (),_ccfa .Width (),_ccfa .Height ());
};};};if _agef {_adc .Log .Info ("r\u0075\u006c\u0069\u006e\u0067\u004c\u0069\u0073\u0074.\u0061\u0073\u0054\u0069\u006c\u0069\u006eg:\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0020\u0068\u006f\u0072\u0069zo\u006e\u0074a\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_baffc );
};_dfcg :=make ([]map[float64 ]gridTile ,_egbg );for _acgd :=_egbg -1;_acgd >=0;_acgd --{if _agef {_ff .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_acgd );};_dfcg [_acgd ]=make (map[float64 ]gridTile ,_gabg );for _agdb :=0;_agdb < _gabg ;
_agdb ++{_ebcg :=_gecce [_acgd *_gabg +_agdb ];if _agef {_ff .Printf ("\u0020\u0020\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_agdb ,_ebcg );};if !_ebcg ._befe {continue ;};_bffa :=_agdb ;for _adbda :=_agdb +1;!_ebcg ._eabbc &&_adbda < _gabg ;_adbda ++{_cegc :=_gecce [_acgd *_gabg +_adbda ];
_ebcg .Urx =_cegc .Urx ;_ebcg ._afca =_ebcg ._afca ||_cegc ._afca ;_ebcg ._fdaa =_ebcg ._fdaa ||_cegc ._fdaa ;_ebcg ._eabbc =_cegc ._eabbc ;if _agef {_ff .Printf ("\u0020 \u0020%\u0034\u0064\u003a\u0020\u0025s\u0020\u2192 \u0025\u0073\u000a",_adbda ,_cegc ,_ebcg );
};_bffa =_adbda ;};if _agef {_ff .Printf (" \u0020 \u0025\u0032\u0064\u0020\u002d\u0020\u0025\u0032d\u0020\u2192\u0020\u0025s\n",_agdb ,_bffa ,_ebcg );};_agdb =_bffa ;_dfcg [_acgd ][_ebcg .Llx ]=_ebcg ;};};_dbdaf :=make (map[float64 ]map[float64 ]gridTile ,_egbg );
_degde :=make (map[float64 ]map[float64 ]struct{},_egbg );for _gedd :=_egbg -1;_gedd >=0;_gedd --{_bebf :=_gecce [_gedd *_gabg ].Lly ;_dbdaf [_bebf ]=make (map[float64 ]gridTile ,_gabg );_degde [_bebf ]=make (map[float64 ]struct{},_gabg );};if _agef {_adc .Log .Info ("\u0072u\u006c\u0069n\u0067\u004c\u0069s\u0074\u002e\u0061\u0073\u0054\u0069\u006ci\u006e\u0067\u003a\u0020\u0063\u006fa\u006c\u0065\u0073\u0063\u0065\u0020\u0076\u0065\u0072\u0074\u0069c\u0061\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_baffc );
};for _daaa :=_egbg -1;_daaa >=0;_daaa --{_adcffe :=_gecce [_daaa *_gabg ].Lly ;_fbadd :=_dfcg [_daaa ];if _agef {_ff .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_daaa );};for _ ,_ddafa :=range _eadd (_fbadd ){if _ ,_bafd :=_degde [_adcffe ][_ddafa ];
_bafd {continue ;};_eeeb :=_fbadd [_ddafa ];if _agef {_ff .Printf (" \u0020\u0020\u0020\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_eeeb .String ());};for _edfe :=_daaa -1;_edfe >=0;_edfe --{if _eeeb ._fdaa {break ;};_adca :=_dfcg [_edfe ];_edde ,_egef :=_adca [_ddafa ];
if !_egef {break ;};if _edde .Urx !=_eeeb .Urx {break ;};_eeeb ._fdaa =_edde ._fdaa ;_eeeb .Lly =_edde .Lly ;if _agef {_ff .Printf ("\u0020\u0020\u0020\u0020  \u0020\u0020\u0076\u003d\u0025\u0073\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_edde .String (),_eeeb .String ());
};_degde [_edde .Lly ][_edde .Llx ]=struct{}{};};if _daaa ==0{_eeeb ._fdaa =true ;};if _eeeb .complete (){_dbdaf [_adcffe ][_ddafa ]=_eeeb ;};};};_faeee :=gridTiling {PdfRectangle :_baffc ,_cacc :_eeag (_dbdaf ),_gbcfg :_ffcff (_dbdaf ),_aabda :_dbdaf };
_faeee .log ("\u0043r\u0065\u0061\u0074\u0065\u0064");return _faeee ;};const _feag =10;

// Marks returns the TextMark collection for a page. It represents all the text on the page.
func (_aafd PageText )Marks ()*TextMarkArray {return &TextMarkArray {_ecff :_aafd ._bede }};func (_bacc *subpath )last ()_bcc .Point {return _bacc ._dged [len (_bacc ._dged )-1]};func _dbee (_fbaa float64 ,_cfade int )int {if _cfade ==0{_cfade =1;};_bde :=float64 (_cfade );
return int (_d .Round (_fbaa /_bde )*_bde );};func _gafbb (_acagf []compositeCell )[]float64 {var _ccfb []*textLine ;_fgdba :=0;for _ ,_cbcg :=range _acagf {_fgdba +=len (_cbcg .paraList );_ccfb =append (_ccfb ,_cbcg .lines ()...);};_bb .Slice (_ccfb ,func (_dbag ,_ccec int )bool {_fbgdf ,_dabea :=_ccfb [_dbag ],_ccfb [_ccec ];
_fcab ,_bbeea :=_fbgdf ._acgec ,_dabea ._acgec ;if !_ddcaa (_fcab -_bbeea ){return _fcab < _bbeea ;};return _fbgdf .Llx < _dabea .Llx ;});if _ddgd {_ff .Printf ("\u0020\u0020\u0020 r\u006f\u0077\u0042\u006f\u0072\u0064\u0065\u0072\u0073:\u0020%\u0064 \u0070a\u0072\u0061\u0073\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",_fgdba ,len (_ccfb ));
for _ccdd ,_cffg :=range _ccfb {_ff .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_ccdd ,_cffg );};};var _ecffb []float64 ;_gbeca :=_ccfb [0];var _ebee [][]*textLine ;_gaea :=[]*textLine {_gbeca };for _ggga ,_bbcd :=range _ccfb [1:]{if _bbcd .Ury < _gbeca .Lly {_beab :=0.5*(_bbcd .Ury +_gbeca .Lly );
if _ddgd {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u003c\u0020\u0025\u0036.\u0032f\u0020\u0062\u006f\u0072\u0064\u0065\u0072\u003d\u0025\u0036\u002e\u0032\u0066\u000a"+"\u0009\u0020\u0071\u003d\u0025\u0073\u000a\u0009\u0020p\u003d\u0025\u0073\u000a",_ggga ,_bbcd .Ury ,_gbeca .Lly ,_beab ,_gbeca ,_bbcd );
};_ecffb =append (_ecffb ,_beab );_ebee =append (_ebee ,_gaea );_gaea =nil ;};_gaea =append (_gaea ,_bbcd );if _bbcd .Lly < _gbeca .Lly {_gbeca =_bbcd ;};};if len (_gaea )> 0{_ebee =append (_ebee ,_gaea );};if _ddgd {_ff .Printf (" \u0020\u0020\u0020\u0020\u0020\u0020 \u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073\u003d%\u0036.\u0032\u0066\u000a",_ecffb );
};if _ddgd {_adc .Log .Info ("\u0072\u006f\u0077\u003d\u0025\u0064",len (_acagf ));for _abbec ,_ceeg :=range _acagf {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_abbec ,_ceeg );};_adc .Log .Info ("\u0067r\u006f\u0075\u0070\u0073\u003d\u0025d",len (_ebee ));
for _ccgf ,_fcbcc :=range _ebee {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0064\u000a",_ccgf ,len (_fcbcc ));for _gafec ,_ceda :=range _fcbcc {_ff .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_gafec ,_ceda );};};};_gdcea :=true ;
for _gebc ,_gbgac :=range _ebee {_adbbf :=true ;for _eecfg ,_fgfdc :=range _acagf {if _ddgd {_ff .Printf ("\u0020\u0020\u0020\u007e\u007e\u007e\u0067\u0072\u006f\u0075\u0070\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u0020\u0063\u0065\u006cl\u0020\u0025\u0064\u0020\u006ff\u0020\u0025d\u0020\u0025\u0073\u000a",_gebc ,len (_ebee ),_eecfg ,len (_acagf ),_fgfdc );
};if !_fgfdc .hasLines (_gbgac ){if _ddgd {_ff .Printf ("\u0020\u0020\u0020\u0021\u0021\u0021\u0067\u0072\u006f\u0075\u0070\u0020\u0025d\u0020\u006f\u0066\u0020\u0025\u0064 \u0063\u0065\u006c\u006c\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064 \u004f\u0055\u0054\u000a",_gebc ,len (_ebee ),_eecfg ,len (_acagf ));
};_adbbf =false ;break ;};};if !_adbbf {_gdcea =false ;break ;};};if !_gdcea {if _ddgd {_adc .Log .Info ("\u0072\u006f\u0077\u0020\u0063o\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u0020\u0064\u006f\u006e\u0027\u0074 \u0073\u0070\u0061\u006e\u0020\u0061\u006c\u006c\u0020\u0063\u0065\u006c\u006c\u0073\u0020\u0069\u006e\u0020\u0072\u006f\u0077\u002e\u0020\u0069\u0067\u006e\u006f\u0072\u0069\u006eg");
};_ecffb =nil ;};if _ddgd &&_ecffb !=nil {_ff .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u002a\u002a*\u0072\u006f\u0077\u0043\u006f\u0072\u0072i\u0064\u006f\u0072\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u000a",_ecffb );};return _ecffb ;
};

// ExtractFonts returns all font information from the page extractor, including
// font name, font type, the raw data of the embedded font file (if embedded), font descriptor and more.
//
// The argument `previousPageFonts` is used when trying to build a complete font catalog for multiple pages or the entire document.
// The entries from `previousPageFonts` are added to the returned result unless already included in the page, i.e. no duplicate entries.
//
// NOTE: If previousPageFonts is nil, all fonts from the page will be returned. Use it when building up a full list of fonts for a document or page range.
func (_ac *Extractor )ExtractFonts (previousPageFonts *PageFonts )(*PageFonts ,error ){_egb :=PageFonts {};_deb :=_egb .extractPageResourcesToFont (_ac ._fa );if _deb !=nil {return nil ,_deb ;};if previousPageFonts !=nil {for _ ,_adg :=range previousPageFonts .Fonts {if !_ggb (_egb .Fonts ,_adg .FontName ){_egb .Fonts =append (_egb .Fonts ,_adg );
};};};return &PageFonts {Fonts :_egb .Fonts },nil ;};const (_df ="\u0045\u0052R\u004f\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u002c\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";
_eg ="\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0043a\u006e\u0027\u0074 g\u0065\u0074\u0020\u0066\u006f\u006et\u0020\u0070\u0072\u006f\u0070\u0065\u0072\u0074\u0069\u0065\u0073\u002c\u0020\u0066\u006fn\u0074\u0020\u006e\u006f\u0074\u0020\u0066\u006fu\u006e\u0064";
_gg ="\u0045\u0052\u0052O\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0067\u0065\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u0073\u0074\u0072\u0065\u0061\u006d\u002c\u0020\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";);
func (_dgcg *wordBag )applyRemovals (_ffef map[int ]map[*textWord ]struct{}){for _fafeb ,_abbf :=range _ffef {if len (_abbf )==0{continue ;};_afda :=_dgcg ._egee [_fafeb ];_cfac :=len (_afda )-len (_abbf );if _cfac ==0{delete (_dgcg ._egee ,_fafeb );continue ;
};_eebgc :=make ([]*textWord ,_cfac );_dda :=0;for _ ,_aace :=range _afda {if _ ,_cecaa :=_abbf [_aace ];!_cecaa {_eebgc [_dda ]=_aace ;_dda ++;};};_dgcg ._egee [_fafeb ]=_eebgc ;};};type textObject struct{_aag *Extractor ;_feb *_bc .PdfPageResources ;
_cbc _gf .GraphicsState ;_gad *textState ;_agb *stateStack ;_dfaf _bcc .Matrix ;_bef _bcc .Matrix ;_dac []*textMark ;_fef bool ;};func _ddcaa (_ece float64 )bool {return _d .Abs (_ece )< _dfdb };type rulingKind int ;type textWord struct{_bc .PdfRectangle ;
_edcb float64 ;_beaff string ;_cdcf []*textMark ;_gcfbc float64 ;_fdcfe bool ;};

// String returns a description of `k`.
func (_ggcc markKind )String ()string {_ddeb ,_bgedf :=_gcfg [_ggcc ];if !_bgedf {return _ff .Sprintf ("\u004e\u006f\u0074\u0020\u0061\u0020\u006d\u0061\u0072k\u003a\u0020\u0025\u0064",_ggcc );};return _ddeb ;};type imageExtractContext struct{_bgd []ImageMark ;
_gae int ;_aef int ;_aee int ;_ge map[*_ea .PdfObjectStream ]*cachedImage ;_fb *ImageExtractOptions ;};func (_bec *shapesState )quadraticTo (_ccd ,_deac ,_fefc ,_cdde float64 ){if _ccbg {_adc .Log .Info ("\u0071\u0075\u0061d\u0072\u0061\u0074\u0069\u0063\u0054\u006f\u003a");
};_bec .addPoint (_fefc ,_cdde );};func _gaeg (_ebaa []int )[]int {_deea :=make ([]int ,len (_ebaa ));for _ddff ,_cbdg :=range _ebaa {_deea [len (_ebaa )-1-_ddff ]=_cbdg ;};return _deea ;};func _eeag (_eacc map[float64 ]map[float64 ]gridTile )[]float64 {_baacf :=make ([]float64 ,0,len (_eacc ));
_cfgdb :=make (map[float64 ]struct{},len (_eacc ));for _ ,_gdbd :=range _eacc {for _ecace :=range _gdbd {if _ ,_eabc :=_cfgdb [_ecace ];_eabc {continue ;};_baacf =append (_baacf ,_ecace );_cfgdb [_ecace ]=struct{}{};};};_bb .Float64s (_baacf );return _baacf ;
};func (_cbdf *textTable )growTable (){_dgdb :=func (_abgfg paraList ){_cbdf ._cfce ++;for _ffdaf :=0;_ffdaf < _cbdf ._bbbd ;_ffdaf ++{_fgfg :=_abgfg [_ffdaf ];_cbdf .put (_ffdaf ,_cbdf ._cfce -1,_fgfg );};};_fbdc :=func (_bfb paraList ){_cbdf ._bbbd ++;
for _ffcffa :=0;_ffcffa < _cbdf ._cfce ;_ffcffa ++{_fdbd :=_bfb [_ffcffa ];_cbdf .put (_cbdf ._bbbd -1,_ffcffa ,_fdbd );};};if _cfefc {_cbdf .log ("\u0067r\u006f\u0077\u0054\u0061\u0062\u006ce");};for _bdfdf :=0;;_bdfdf ++{_gbaf :=false ;_ffea :=_cbdf .getDown ();
_beggf :=_cbdf .getRight ();if _cfefc {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bdfdf ,_cbdf );_ff .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0020\u0064\u006f\u0077\u006e\u003d\u0025\u0073\u000a",_ffea );_ff .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0072\u0069\u0067\u0068\u0074\u003d\u0025\u0073\u000a",_beggf );
};if _ffea !=nil &&_beggf !=nil {_fgcf :=_ffea [len (_ffea )-1];if !_fgcf .taken ()&&_fgcf ==_beggf [len (_beggf )-1]{_dgdb (_ffea );if _beggf =_cbdf .getRight ();_beggf !=nil {_fbdc (_beggf );_cbdf .put (_cbdf ._bbbd -1,_cbdf ._cfce -1,_fgcf );};_gbaf =true ;
};};if !_gbaf &&_ffea !=nil {_dgdb (_ffea );_gbaf =true ;};if !_gbaf &&_beggf !=nil {_fbdc (_beggf );_gbaf =true ;};if !_gbaf {break ;};};};func (_gcdf *textObject )setHorizScaling (_fgd float64 ){if _gcdf ==nil {return ;};_gcdf ._gad ._aedb =_fgd ;};func _efaf (_dgbc _bc .PdfRectangle ,_cgce []*textLine )*textPara {return &textPara {PdfRectangle :_dgbc ,_ebgbb :_cgce };
};func (_cfef *shapesState )devicePoint (_ged ,_cgda float64 )_bcc .Point {_deaf :=_cfef ._gfee .Mult (_cfef ._agbg );_ged ,_cgda =_deaf .Transform (_ged ,_cgda );return _bcc .NewPoint (_ged ,_cgda );};func _afaa (_dacb string )bool {if _f .RuneCountInString (_dacb )< _dbdcf {return false ;
};_adba ,_acbe :=_f .DecodeLastRuneInString (_dacb );if _acbe <=0||!_c .Is (_c .Hyphen ,_adba ){return false ;};_adba ,_acbe =_f .DecodeLastRuneInString (_dacb [:len (_dacb )-_acbe ]);return _acbe > 0&&!_c .IsSpace (_adba );};func (_bffd paraList )reorder (_defb []int ){_deeg :=make (paraList ,len (_bffd ));
for _dcef ,_adbab :=range _defb {_deeg [_dcef ]=_bffd [_adbab ];};copy (_bffd ,_deeg );};func (_gdfa *textTable )emptyCompositeRow (_befc int )bool {for _edgda :=0;_edgda < _gdfa ._bbbd ;_edgda ++{if _gbbe ,_gbgf :=_gdfa ._dbdg [_degb (_edgda ,_befc )];
_gbgf {if len (_gbbe .paraList )> 0{return false ;};};};return true ;};func (_ggbe *subpath )add (_fdde ..._bcc .Point ){_ggbe ._dged =append (_ggbe ._dged ,_fdde ...)};

// TableCell is a cell in a TextTable.
type TableCell struct{

// Text is the extracted text.
Text string ;

// Marks returns the TextMarks corresponding to the text in Text.
Marks TextMarkArray ;};func _aecc (_bfdc float64 )bool {return _d .Abs (_bfdc )< _fcef };func (_dddg rulingList )snapToGroups ()rulingList {_eaggg ,_bggac :=_dddg .vertsHorzs ();if len (_eaggg )> 0{_eaggg =_eaggg .snapToGroupsDirection ();};if len (_bggac )> 0{_bggac =_bggac .snapToGroupsDirection ();
};_bfgc :=append (_eaggg ,_bggac ...);_bfgc .log ("\u0073\u006e\u0061p\u0054\u006f\u0047\u0072\u006f\u0075\u0070\u0073");return _bfgc ;};func (_edace *textTable )reduce ()*textTable {_defe :=make ([]int ,0,_edace ._cfce );_gfcfd :=make ([]int ,0,_edace ._bbbd );
for _fgbea :=0;_fgbea < _edace ._cfce ;_fgbea ++{if !_edace .emptyCompositeRow (_fgbea ){_defe =append (_defe ,_fgbea );};};for _gbbbd :=0;_gbbbd < _edace ._bbbd ;_gbbbd ++{if !_edace .emptyCompositeColumn (_gbbbd ){_gfcfd =append (_gfcfd ,_gbbbd );};};
if len (_defe )==_edace ._cfce &&len (_gfcfd )==_edace ._bbbd {return _edace ;};_aecca :=textTable {_fafcf :_edace ._fafcf ,_bbbd :len (_gfcfd ),_cfce :len (_defe ),_fcefg :make (map[uint64 ]*textPara ,len (_gfcfd )*len (_defe ))};if _ddgd {_adc .Log .Info ("\u0072\u0065\u0064\u0075ce\u003a\u0020\u0025\u0064\u0078\u0025\u0064\u0020\u002d\u003e\u0020\u0025\u0064\u0078%\u0064",_edace ._bbbd ,_edace ._cfce ,len (_gfcfd ),len (_defe ));
_adc .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_gfcfd );_adc .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_defe );};for _gbebf ,_bffbc :=range _defe {for _bgaf ,_bacebc :=range _gfcfd {_gbff ,_cabf :=_edace .getComposite (_bacebc ,_bffbc );
if _gbff ==nil {continue ;};if _ddgd {_ff .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_bgaf ,_gbebf ,_bacebc ,_bffbc ,_fcaac (_gbff .merge ().text (),50));};_aecca .putComposite (_bgaf ,_gbebf ,_gbff ,_cabf );
};};return &_aecca ;};func (_ccdf paraList )applyTables (_efcd []*textTable )paraList {var _egggd paraList ;for _ ,_abee :=range _efcd {_egggd =append (_egggd ,_abee .newTablePara ());};for _ ,_bagda :=range _ccdf {if _bagda ._aaee {continue ;};_egggd =append (_egggd ,_bagda );
};return _egggd ;};func (_bege *textTable )logComposite (_cabcb string ){if !_ddgd {return ;};_adc .Log .Info ("\u007e~\u007eP\u0061\u0072\u0061\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_bege ._bbbd ,_bege ._cfce ,_cabcb );_ff .Printf ("\u0025\u0035\u0073 \u007c","");
for _fadcg :=0;_fadcg < _bege ._bbbd ;_fadcg ++{_ff .Printf ("\u0025\u0033\u0064 \u007c",_fadcg );};_ff .Println ("");_ff .Printf ("\u0025\u0035\u0073 \u002b","");for _gcda :=0;_gcda < _bege ._bbbd ;_gcda ++{_ff .Printf ("\u0025\u0033\u0073 \u002b","\u002d\u002d\u002d");
};_ff .Println ("");for _eacd :=0;_eacd < _bege ._cfce ;_eacd ++{_ff .Printf ("\u0025\u0035\u0064 \u007c",_eacd );for _dgea :=0;_dgea < _bege ._bbbd ;_dgea ++{_ecafg ,_ :=_bege ._dbdg [_degb (_dgea ,_eacd )].parasBBox ();_ff .Printf ("\u0025\u0033\u0064 \u007c",len (_ecafg ));
};_ff .Println ("");};_adc .Log .Info ("\u007e~\u007eT\u0065\u0078\u0074\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_bege ._bbbd ,_bege ._cfce ,_cabcb );_ff .Printf ("\u0025\u0035\u0073 \u007c","");for _adgae :=0;_adgae < _bege ._bbbd ;_adgae ++{_ff .Printf ("\u0025\u0031\u0032\u0064\u0020\u007c",_adgae );
};_ff .Println ("");_ff .Printf ("\u0025\u0035\u0073 \u002b","");for _decab :=0;_decab < _bege ._bbbd ;_decab ++{_ff .Print ("\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d-\u002d\u002d\u002d\u002b");};_ff .Println ("");for _fdfd :=0;_fdfd < _bege ._cfce ;
_fdfd ++{_ff .Printf ("\u0025\u0035\u0064 \u007c",_fdfd );for _eada :=0;_eada < _bege ._bbbd ;_eada ++{_fbec ,_ :=_bege ._dbdg [_degb (_eada ,_fdfd )].parasBBox ();_cdeb :="";_becg :=_fbec .merge ();if _becg !=nil {_cdeb =_becg .text ();};_cdeb =_ff .Sprintf ("\u0025\u0071",_fcaac (_cdeb ,12));
_cdeb =_cdeb [1:len (_cdeb )-1];_ff .Printf ("\u0025\u0031\u0032\u0073\u0020\u007c",_cdeb );};_ff .Println ("");};};

// ExtractPageText returns the text contents of `e` (an Extractor for a page) as a PageText.
// TODO(peterwilliams97): The stats complicate this function signature and aren't very useful.
//                        Replace with a function like Extract() (*PageText, error)
func (_degf *Extractor )ExtractPageText ()(*PageText ,int ,int ,error ){_dgf ,_cda ,_edbe ,_fbg :=_degf .extractPageText (_degf ._de ,_degf ._fa ,_bcc .IdentityMatrix (),0);if _fbg !=nil &&_fbg !=_bc .ErrColorOutOfRange {return nil ,0,0,_fbg ;};_dgf .computeViews ();
_fbg =_dbbb (_dgf );if _fbg !=nil {return nil ,0,0,_fbg ;};return _dgf ,_cda ,_edbe ,nil ;};func _eagg (_begg ,_gaad bounded )float64 {return _begg .bbox ().Llx -_gaad .bbox ().Llx };func (_bccd paraList )llyOrdering ()[]int {_bged :=make ([]int ,len (_bccd ));
for _gcbb :=range _bccd {_bged [_gcbb ]=_gcbb ;};_bb .SliceStable (_bged ,func (_egcbd ,_faeef int )bool {_dfcd ,_edad :=_bged [_egcbd ],_bged [_faeef ];return _bccd [_dfcd ].Lly < _bccd [_edad ].Lly ;});return _bged ;};func (_geggb rulingList )toGrids ()[]rulingList {if _ggaae {_adc .Log .Info ("t\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0025\u0073",_geggb );
};_gbca :=_geggb .intersections ();if _ggaae {_adc .Log .Info ("\u0074\u006f\u0047r\u0069\u0064\u0073\u003a \u0076\u0065\u0063\u0073\u003d\u0025\u0064 \u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003d\u0025\u0064\u0020",len (_geggb ),len (_gbca ));
for _ ,_eddg :=range _aebd (_gbca ){_ff .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_eddg ,_gbca [_eddg ]);};};_fefgd :=make (map[int ]intSet ,len (_geggb ));for _ebba :=range _geggb {_adgb :=_geggb .connections (_gbca ,_ebba );if len (_adgb )> 0{_fefgd [_ebba ]=_adgb ;
};};if _ggaae {_adc .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0063\u006fn\u006e\u0065\u0063\u0074s=\u0025\u0064",len (_fefgd ));for _ ,_fecc :=range _aebd (_fefgd ){_ff .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_fecc ,_fefgd [_fecc ]);
};};_aaae :=_eaggb (len (_geggb ),func (_egde ,_dbgbf int )bool {_adddff ,_daec :=len (_fefgd [_egde ]),len (_fefgd [_dbgbf ]);if _adddff !=_daec {return _adddff > _daec ;};return _geggb .comp (_egde ,_dbgbf );});if _ggaae {_adc .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u006f\u0072d\u0065\u0072\u0069\u006eg=\u0025\u0076",_aaae );
};_gcaf :=[][]int {{_aaae [0]}};_dabf :for _ ,_edg :=range _aaae [1:]{for _bebbc ,_aaac :=range _gcaf {for _ ,_bgbf :=range _aaac {if _fefgd [_bgbf ].has (_edg ){_gcaf [_bebbc ]=append (_aaac ,_edg );continue _dabf ;};};};_gcaf =append (_gcaf ,[]int {_edg });
};if _ggaae {_adc .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020i\u0067\u0072i\u0064\u0073\u003d\u0025\u0076",_gcaf );};_bb .SliceStable (_gcaf ,func (_fadcc ,_ecffc int )bool {return len (_gcaf [_fadcc ])> len (_gcaf [_ecffc ])});for _ ,_aaeg :=range _gcaf {_bb .Slice (_aaeg ,func (_fcfdb ,_eaaf int )bool {return _geggb .comp (_aaeg [_fcfdb ],_aaeg [_eaaf ])});
};_edgb :=make ([]rulingList ,len (_gcaf ));for _efdca ,_bgad :=range _gcaf {_eefca :=make (rulingList ,len (_bgad ));for _egfb ,_eefga :=range _bgad {_eefca [_egfb ]=_geggb [_eefga ];};_edgb [_efdca ]=_eefca ;};if _ggaae {_adc .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020g\u0072\u0069d\u0073\u003d\u0025\u002b\u0076",_edgb );
};var _debfg []rulingList ;for _ ,_ggda :=range _edgb {if _aaec ,_eebdf :=_ggda .isActualGrid ();_eebdf {_ggda =_aaec ;_ggda =_ggda .snapToGroups ();_debfg =append (_debfg ,_ggda );};};if _ggaae {_ffad ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0061\u0063t\u0075\u0061\u006c\u0047ri\u0064\u0073",_debfg );
_adc .Log .Info ("\u0074\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0067\u0072\u0069\u0064\u0073\u003d%\u0064 \u0061\u0063\u0074\u0075\u0061\u006c\u0047\u0072\u0069\u0064\u0073\u003d\u0025\u0064",len (_edgb ),len (_debfg ));};return _debfg ;};func (_fdgd paraList )inTile (_abeac gridTile )paraList {var _feeca paraList ;
for _ ,_bbdge :=range _fdgd {if _abeac .contains (_bbdge .PdfRectangle ){_feeca =append (_feeca ,_bbdge );};};if _ddgd {_ff .Printf ("\u0020 \u0020\u0069\u006e\u0054i\u006c\u0065\u003a\u0020\u0020%\u0073 \u0069n\u0073\u0069\u0064\u0065\u003d\u0025\u0064\n",_abeac ,len (_feeca ));
for _bcca ,_fbgfb :=range _feeca {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bcca ,_fbgfb );};_ff .Println ("");};return _feeca ;};

// NewFromContents creates a new extractor from contents and page resources.
func NewFromContents (contents string ,resources *_bc .PdfPageResources )(*Extractor ,error ){const _fc ="\u0065x\u0074\u0072\u0061\u0063t\u006f\u0072\u002e\u004e\u0065w\u0046r\u006fm\u0043\u006f\u006e\u0074\u0065\u006e\u0074s";_bg :=&Extractor {_de :contents ,_fa :resources ,_aa :map[string ]fontEntry {},_dd :map[string ]textResult {}};
_ce .TrackUse (_fc );return _bg ,nil ;};func (_egbf *textLine )markWordBoundaries (){_dbbg :=_cacfd *_egbf ._ebfa ;for _bfgg ,_adde :=range _egbf ._fegc [1:]{if _ddcc (_adde ,_egbf ._fegc [_bfgg ])>=_dbbg {_adde ._fdcfe =true ;};};};func _ddffc (_cfaaf []pathSection )rulingList {_eegb (_cfaaf );
if _ggaae {_adc .Log .Info ("\u006da\u006b\u0065\u0046\u0069l\u006c\u0052\u0075\u006c\u0069n\u0067s\u003a \u0025\u0064\u0020\u0066\u0069\u006c\u006cs",len (_cfaaf ));};var _bccg rulingList ;for _ ,_bdbf :=range _cfaaf {for _ ,_fdfbbe :=range _bdbf ._bdfg {if !_fdfbbe .isQuadrilateral (){if _ggaae {_adc .Log .Error ("!\u0069s\u0051\u0075\u0061\u0064\u0072\u0069\u006c\u0061t\u0065\u0072\u0061\u006c: \u0025\u0073",_fdfbbe );
};continue ;};if _cagg ,_afdd :=_fdfbbe .makeRectRuling (_bdbf .Color );_afdd {_bccg =append (_bccg ,_cagg );}else {if _gcea {_adc .Log .Error ("\u0021\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0073",_fdfbbe );
};};};};if _ggaae {_adc .Log .Info ("\u006d\u0061\u006b\u0065Fi\u006c\u006c\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0073",_bccg .String ());};return _bccg ;};func _agba (_gfegb []float64 ,_agac ,_debb float64 )[]float64 {_cgdff ,_eecg :=_agac ,_debb ;
if _eecg < _cgdff {_cgdff ,_eecg =_eecg ,_cgdff ;};_begc :=make ([]float64 ,0,len (_gfegb )+2);_begc =append (_begc ,_agac );for _ ,_ddabd :=range _gfegb {if _ddabd <=_cgdff {continue ;}else if _ddabd >=_eecg {break ;};_begc =append (_begc ,_ddabd );};
_begc =append (_begc ,_debb );return _begc ;};func (_agd *shapesState )stroke (_cdf *[]pathSection ){_gaf :=pathSection {_bdfg :_agd ._gegg ,Color :_agd ._afgc .getStrokeColor ()};*_cdf =append (*_cdf ,_gaf );if _ggaae {_ff .Printf ("\u0020 \u0020\u0020S\u0054\u0052\u004fK\u0045\u003a\u0020\u0025\u0064\u0020\u0073t\u0072\u006f\u006b\u0065\u0073\u0020s\u0073\u003d\u0025\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d%\u002b\u0076\u0020\u0025\u0036\u002e\u0032\u0066\u000a",len (*_cdf ),_agd ,_agd ._afgc .getStrokeColor (),_gaf .bbox ());
if _cgcfa {for _gafb ,_cagb :=range _agd ._gegg {_ff .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_gafb ,_cagb );if _gafb ==10{break ;};};};};};func (_aaab *textTable )bbox ()_bc .PdfRectangle {return _aaab .PdfRectangle };

// ExtractPageImages returns the image contents of the page extractor, including data
// and position, size information for each image.
// A set of options to control page image extraction can be passed in. The options
// parameter can be nil for the default options. By default, inline stencil masks
// are not extracted.
func (_fd *Extractor )ExtractPageImages (options *ImageExtractOptions )(*PageImages ,error ){_cc :=&imageExtractContext {_fb :options };_ef :=_cc .extractContentStreamImages (_fd ._de ,_fd ._fa );if _ef !=nil {return nil ,_ef ;};return &PageImages {Images :_cc ._bgd },nil ;
};func (_gdccd rulingList )blocks (_ccbcd ,_cfgc *ruling )bool {if _ccbcd ._gecca > _cfgc ._fafg ||_cfgc ._gecca > _ccbcd ._fafg {return false ;};_gbdg :=_d .Max (_ccbcd ._gecca ,_cfgc ._gecca );_gfab :=_d .Min (_ccbcd ._fafg ,_cfgc ._fafg );if _ccbcd ._aebg > _cfgc ._aebg {_ccbcd ,_cfgc =_cfgc ,_ccbcd ;
};for _ ,_gafa :=range _gdccd {if _ccbcd ._aebg <=_gafa ._aebg +_fcef &&_gafa ._aebg <=_cfgc ._aebg +_fcef &&_gafa ._gecca <=_gfab &&_gbdg <=_gafa ._fafg {return true ;};};return false ;};func _eggbb (_adaag float64 )float64 {return _ecfa *_d .Round (_adaag /_ecfa )};
func (_fegg *textPara )writeText (_abab _be .Writer ){if _fegg ._bdee ==nil {_fegg .writeCellText (_abab );return ;};for _defa :=0;_defa < _fegg ._bdee ._cfce ;_defa ++{for _fbae :=0;_fbae < _fegg ._bdee ._bbbd ;_fbae ++{_cedg :=_fegg ._bdee .get (_fbae ,_defa );
if _cedg ==nil {_abab .Write ([]byte ("\u0009"));}else {_cedg .writeCellText (_abab );};_abab .Write ([]byte ("\u0020"));};if _defa < _fegg ._bdee ._cfce -1{_abab .Write ([]byte ("\u000a"));};};};func _gdge (_aggdf map[int ][]float64 )string {_egad :=_dgge (_aggdf );
_ddae :=make ([]string ,len (_aggdf ));for _abac ,_cbfg :=range _egad {_ddae [_abac ]=_ff .Sprintf ("\u0025\u0064\u003a\u0020\u0025\u002e\u0032\u0066",_cbfg ,_aggdf [_cbfg ]);};return _ff .Sprintf ("\u007b\u0025\u0073\u007d",_ba .Join (_ddae ,"\u002c\u0020"));
};func _dbbb (_dfegc *PageText )error {_afcgb :=_ce .GetLicenseKey ();if _afcgb !=nil &&_afcgb .IsLicensed ()||_cf {return nil ;};_ff .Printf ("\u0055\u006e\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0064\u0020c\u006f\u0070\u0079\u0020\u006f\u0066\u0020\u0055\u006e\u0069P\u0044\u0046\u000a");
_ff .Println ("-\u0020\u0047\u0065\u0074\u0020\u0061\u0020\u0066\u0072e\u0065\u0020\u0074\u0072\u0069\u0061\u006c l\u0069\u0063\u0065\u006es\u0065\u0020\u006f\u006e\u0020\u0068\u0074\u0074\u0070s:\u002f\u002fu\u006e\u0069\u0064\u006f\u0063\u002e\u0069\u006f");
return _b .New ("\u0075\u006e\u0069\u0070d\u0066\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0020c\u006fd\u0065\u0020\u0072\u0065\u0071\u0075\u0069r\u0065\u0064");};func (_ebfaa paraList )readBefore (_fagc []int ,_bbbc ,_cega int )bool {_gfec ,_dada :=_ebfaa [_bbbc ],_ebfaa [_cega ];
if _cgdg (_gfec ,_dada )&&_gfec .Lly > _dada .Lly {return true ;};if !(_gfec ._ddccdf .Urx < _dada ._ddccdf .Llx ){return false ;};_aeagf ,_dacc :=_gfec .Lly ,_dada .Lly ;if _aeagf > _dacc {_dacc ,_aeagf =_aeagf ,_dacc ;};_gagb :=_d .Max (_gfec ._ddccdf .Llx ,_dada ._ddccdf .Llx );
_fgdb :=_d .Min (_gfec ._ddccdf .Urx ,_dada ._ddccdf .Urx );_aeea :=_ebfaa .llyRange (_fagc ,_aeagf ,_dacc );for _ ,_dcdf :=range _aeea {if _dcdf ==_bbbc ||_dcdf ==_cega {continue ;};_gfge :=_ebfaa [_dcdf ];if _gfge ._ddccdf .Llx <=_fgdb &&_gagb <=_gfge ._ddccdf .Urx {return false ;
};};return true ;};func (_fbaf *PageText )computeViews (){var _aeafc rulingList ;if _cgcfc {_debc :=_gfefb (_fbaf ._bbaf );_aeafc =append (_aeafc ,_debc ...);};if _fcgbg {_ega :=_ddffc (_fbaf ._abdd );_aeafc =append (_aeafc ,_ega ...);};_aeafc ,_cge :=_aeafc .toTilings ();
var _dbad paraList ;_dgfd :=len (_fbaf ._fbga );for _bedda :=0;_bedda < 360&&_dgfd > 0;_bedda +=90{_cggb :=make ([]*textMark ,0,len (_fbaf ._fbga )-_dgfd );for _ ,_febd :=range _fbaf ._fbga {if _febd ._faed ==_bedda {_cggb =append (_cggb ,_febd );};};if len (_cggb )> 0{_feg :=_bfgb (_cggb ,_fbaf ._gbcf ,_aeafc ,_cge );
_dbad =append (_dbad ,_feg ...);_dgfd -=len (_cggb );};};_bbg :=new (_ad .Buffer );_dbad .writeText (_bbg );_fbaf ._gcca =_bbg .String ();_fbaf ._bede =_dbad .toTextMarks ();_fbaf ._fgde =_dbad .tables ();if _ddgd {_adc .Log .Info ("\u0063\u006f\u006dpu\u0074\u0065\u0056\u0069\u0065\u0077\u0073\u003a\u0020\u0074\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064",len (_fbaf ._fgde ));
};};type lineRuling struct{_gacf rulingKind ;_cfda markKind ;_bf .Color ;_cbff ,_abeb _bcc .Point ;};func (_dbbgd *textMark )inDiacriticArea (_fdbg *textMark )bool {_bfcd :=_dbbgd .Llx -_fdbg .Llx ;_adcd :=_dbbgd .Urx -_fdbg .Urx ;_cbgd :=_dbbgd .Lly -_fdbg .Lly ;
return _d .Abs (_bfcd +_adcd )< _dbbgd .Width ()*_edca &&_d .Abs (_cbgd )< _dbbgd .Height ()*_edca ;};func (_cefd intSet )add (_fddeg int ){_cefd [_fddeg ]=struct{}{}};func (_bgdf *textObject )getStrokeColor ()_bf .Color {return _caabe (_bgdf ._cbc .ColorspaceStroking ,_bgdf ._cbc .ColorStroking );
};func _gfbe (_gcdd ,_efda _bcc .Point )rulingKind {_ebfcb :=_d .Abs (_gcdd .X -_efda .X );_abdg :=_d .Abs (_gcdd .Y -_efda .Y );return _gcdef (_ebfcb ,_abdg ,_ebgd );};func _caeg (_cecaab ,_bcba int )int {if _cecaab < _bcba {return _cecaab ;};return _bcba ;
};func (_gfegd *stateStack )size ()int {return len (*_gfegd )};func (_fcd *textObject )setFont (_bee string ,_fge float64 )error {if _fcd ==nil {return nil ;};_fcd ._gad ._fdg =_fge ;_aabg ,_aeaf :=_fcd .getFont (_bee );if _aeaf !=nil {return _aeaf ;};
_fcd ._gad ._fcg =_aabg ;return nil ;};func _abea (_fefg *wordBag ,_aeag *textWord ,_bgef float64 )bool {return _fefg .Urx <=_aeag .Llx &&_aeag .Llx < _fefg .Urx +_bgef ;};func (_ggg *wordBag )makeRemovals ()map[int ]map[*textWord ]struct{}{_addd :=make (map[int ]map[*textWord ]struct{},len (_ggg ._egee ));
for _cfgg :=range _ggg ._egee {_addd [_cfgg ]=make (map[*textWord ]struct{});};return _addd ;};type stateStack []*textState ;type gridTiling struct{_bc .PdfRectangle ;_cacc []float64 ;_gbcfg []float64 ;_aabda map[float64 ]map[float64 ]gridTile ;};func _fbfc (_aeded string )(string ,bool ){_ffcg :=[]rune (_aeded );
if len (_ffcg )!=1{return "",false ;};_acaaa ,_egac :=_ffgcg [_ffcg [0]];return _acaaa ,_egac ;};const (RenderModeStroke RenderMode =1<<iota ;RenderModeFill ;RenderModeClip ;);func (_fegcd *textTable )put (_acdd ,_gadca int ,_beafd *textPara ){_fegcd ._fcefg [_degb (_acdd ,_gadca )]=_beafd ;
};func (_eggb *textTable )compositeColCorridors ()map[int ][]float64 {_afgdg :=make (map[int ][]float64 ,_eggb ._bbbd );if _ddgd {_adc .Log .Info ("\u0063\u006f\u006d\u0070o\u0073\u0069\u0074\u0065\u0043\u006f\u006c\u0043\u006f\u0072r\u0069d\u006f\u0072\u0073\u003a\u0020\u0077\u003d%\u0064\u0020",_eggb ._bbbd );
};for _cgdca :=0;_cgdca < _eggb ._bbbd ;_cgdca ++{_afgdg [_cgdca ]=nil ;};return _afgdg ;};func _feae (_dcbf _bc .PdfRectangle ,_efagc bounded )float64 {return _dcbf .Ury -_efagc .bbox ().Lly };func _gbeb (_decdf _bcc .Point )*subpath {return &subpath {_dged :[]_bcc .Point {_decdf }}};


// String returns a description of `p`.
func (_abgf *textPara )String ()string {if _abgf ._afcb {return _ff .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u005b\u0045\u004d\u0050\u0054\u0059\u005d",_abgf .PdfRectangle );};_febaa :="";if _abgf ._bdee !=nil {_febaa =_ff .Sprintf ("\u005b\u0025\u0064\u0078\u0025\u0064\u005d\u0020",_abgf ._bdee ._bbbd ,_abgf ._bdee ._cfce );
};return _ff .Sprintf ("\u0025\u0036\u002e\u0032f \u0025\u0073\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u0020\u0025\u0071",_abgf .PdfRectangle ,_febaa ,len (_abgf ._ebgbb ),_fcaac (_abgf .text (),50));};func (_ffbe *shapesState )fill (_cgc *[]pathSection ){_beda :=pathSection {_bdfg :_ffbe ._gegg ,Color :_ffbe ._afgc .getFillColor ()};
*_cgc =append (*_cgc ,_beda );if _ggaae {_bgga :=_beda .bbox ();_ff .Printf ("\u0020 \u0020\u0020\u0046\u0049\u004c\u004c\u003a %\u0032\u0064\u0020\u0066\u0069\u006c\u006c\u0073\u0020\u0028\u0025\u0064\u0020\u006ee\u0077\u0029 \u0073\u0073\u003d%\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d\u0025\u0033\u0076\u0020\u0025\u0036\u002e\u0032f\u003d\u00256.\u0032\u0066\u0078%\u0036\u002e\u0032\u0066\u000a",len (*_cgc ),len (_beda ._bdfg ),_ffbe ,_beda .Color ,_bgga ,_bgga .Width (),_bgga .Height ());
if _cgcfa {for _eegd ,_abgge :=range _beda ._bdfg {_ff .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_eegd ,_abgge );if _eegd ==10{break ;};};};};};func (_efaeb rectRuling )checkWidth (_gdcd ,_cad float64 )(float64 ,bool ){_fgdbb :=_cad -_gdcd ;
_fgcc :=_fgdbb <=_fcef ;return _fgdbb ,_fgcc ;};

// String returns a description of `l`.
func (_acc *textLine )String ()string {return _ff .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_acc ._acgec ,_acc .PdfRectangle ,_acc ._ebfa ,_acc .text ());
};func _eacg (_acd ,_gecf _bcc .Point ,_gbbce _bf .Color )(*ruling ,bool ){_ecgbd :=lineRuling {_cbff :_acd ,_abeb :_gecf ,_gacf :_edfg (_acd ,_gecf ),Color :_gbbce };if _ecgbd ._gacf ==_gcfe {return nil ,false ;};return _ecgbd .asRuling ();};func (_cagf *stateStack )push (_ceb *textState ){_gcb :=*_ceb ;
*_cagf =append (*_cagf ,&_gcb )};func (_cdabe *textTable )toTextTable ()TextTable {if _ddgd {_adc .Log .Info ("t\u006fT\u0065\u0078\u0074\u0054\u0061\u0062\u006c\u0065:\u0020\u0025\u0064\u0020x \u0025\u0064",_cdabe ._bbbd ,_cdabe ._cfce );};_fdff :=make ([][]TableCell ,_cdabe ._cfce );
for _gfac :=0;_gfac < _cdabe ._cfce ;_gfac ++{_fdff [_gfac ]=make ([]TableCell ,_cdabe ._bbbd );for _aegff :=0;_aegff < _cdabe ._bbbd ;_aegff ++{_bgfa :=_cdabe .get (_aegff ,_gfac );if _bgfa ==nil {continue ;};if _ddgd {_ff .Printf ("\u0025\u0034\u0064 \u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_aegff ,_gfac ,_bgfa );
};_fdff [_gfac ][_aegff ].Text =_bgfa .text ();_eeccd :=0;_fdff [_gfac ][_aegff ].Marks ._ecff =_bgfa .toTextMarks (&_eeccd );};};return TextTable {W :_cdabe ._bbbd ,H :_cdabe ._cfce ,Cells :_fdff };};type rectRuling struct{_eaad rulingKind ;_agad markKind ;
_bf .Color ;_bc .PdfRectangle ;};

// String returns a string describing the current state of the textState stack.
func (_afdg *stateStack )String ()string {_bbf :=[]string {_ff .Sprintf ("\u002d\u002d\u002d\u002d f\u006f\u006e\u0074\u0020\u0073\u0074\u0061\u0063\u006b\u003a\u0020\u0025\u0064",len (*_afdg ))};for _aead ,_aad :=range *_afdg {_fada :="\u003c\u006e\u0069l\u003e";
if _aad !=nil {_fada =_aad .String ();};_bbf =append (_bbf ,_ff .Sprintf ("\u0009\u0025\u0032\u0064\u003a\u0020\u0025\u0073",_aead ,_fada ));};return _ba .Join (_bbf ,"\u000a");};func _aecd (_bgeb []*textWord ,_cgcf float64 ,_gfcb ,_gfegf rulingList )*wordBag {_fffb :=_aae (_bgeb [0],_cgcf ,_gfcb ,_gfegf );
for _ ,_dgedd :=range _bgeb [1:]{_ageg :=_gaebb (_dgedd ._edcb );_fffb ._egee [_ageg ]=append (_fffb ._egee [_ageg ],_dgedd );_fffb .PdfRectangle =_ecgff (_fffb .PdfRectangle ,_dgedd .PdfRectangle );};_fffb .sort ();return _fffb ;};type cachedImage struct{_ggd *_bc .Image ;
_dbe _bc .PdfColorspace ;};

// String returns a string descibing `i`.
func (_dadb gridTile )String ()string {_acfge :=func (_baceb bool ,_cgdce string )string {if _baceb {return _cgdce ;};return "\u005f";};return _ff .Sprintf ("\u00256\u002e2\u0066\u0020\u0025\u0031\u0073%\u0031\u0073%\u0031\u0073\u0025\u0031\u0073",_dadb .PdfRectangle ,_acfge (_dadb ._befe ,"\u004c"),_acfge (_dadb ._eabbc ,"\u0052"),_acfge (_dadb ._fdaa ,"\u0042"),_acfge (_dadb ._afca ,"\u0054"));
};

// TextMark represents extracted text on a page with information regarding both textual content,
// formatting (font and size) and positioning.
// It is the smallest unit of text on a PDF page, typically a single character.
//
// getBBox() in test_text.go shows how to compute bounding boxes of substrings of extracted text.
// The following code extracts the text on PDF page `page` into `text` then finds the bounding box
// `bbox` of substring `term` in `text`.
//
//     ex, _ := New(page)
//     // handle errors
//     pageText, _, _, err := ex.ExtractPageText()
//     // handle errors
//     text := pageText.Text()
//     textMarks := pageText.Marks()
//
//     	start := strings.Index(text, term)
//      end := start + len(term)
//      spanMarks, err := textMarks.RangeOffset(start, end)
//      // handle errors
//      bbox, ok := spanMarks.BBox()
//      // handle errors
type TextMark struct{

// Text is the extracted text.
Text string ;

// Original is the text in the PDF. It has not been decoded like `Text`.
Original string ;

// BBox is the bounding box of the text.
BBox _bc .PdfRectangle ;

// Font is the font the text was drawn with.
Font *_bc .PdfFont ;

// FontSize is the font size the text was drawn with.
FontSize float64 ;

// Offset is the offset of the start of TextMark.Text in the extracted text. If you do this
//   text, textMarks := pageText.Text(), pageText.Marks()
//   marks := textMarks.Elements()
// then marks[i].Offset is the offset of marks[i].Text in text.
Offset int ;

// Meta is set true for spaces and line breaks that we insert in the extracted text. We insert
// spaces (line breaks) when we see characters that are over a threshold horizontal (vertical)
//  distance  apart. See wordJoiner (lineJoiner) in PageText.computeViews().
Meta bool ;

// FillColor is the fill color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
FillColor _bf .Color ;

// StrokeColor is the stroke color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
StrokeColor _bf .Color ;

// Orientation is the text orientation
Orientation int ;};const (_afcg =true ;_eefa =true ;_cbda =true ;_bega =false ;_eebd =false ;_beefg =6;_dcga =3.0;_gdcc =200;_efcf =true ;_bedf =true ;_cgcfc =true ;_fcgbg =true ;_fagg =false ;);func (_ffcd paraList )xNeighbours (_dbdad float64 )map[*textPara ][]int {_gaaf :=make ([]event ,2*len (_ffcd ));
if _dbdad ==0{for _cbegd ,_cgcbg :=range _ffcd {_gaaf [2*_cbegd ]=event {_cgcbg .Llx ,true ,_cbegd };_gaaf [2*_cbegd +1]=event {_cgcbg .Urx ,false ,_cbegd };};}else {for _efgba ,_ggec :=range _ffcd {_gaaf [2*_efgba ]=event {_ggec .Llx -_dbdad *_ggec .fontsize (),true ,_efgba };
_gaaf [2*_efgba +1]=event {_ggec .Urx +_dbdad *_ggec .fontsize (),false ,_efgba };};};return _ffcd .eventNeighbours (_gaaf );};func (_agfe rulingList )findPrimSec (_baec ,_ecda float64 )*ruling {for _ ,_aeca :=range _agfe {if _ddcaa (_aeca ._aebg -_baec )&&_aeca ._gecca -_eecf <=_ecda &&_ecda <=_aeca ._fafg +_eecf {return _aeca ;
};};return nil ;};

// New returns an Extractor instance for extracting content from the input PDF page.
func New (page *_bc .PdfPage )(*Extractor ,error ){const _ga ="\u0065\u0078\u0074\u0072\u0061\u0063\u0074\u006f\u0072\u002e\u004e\u0065\u0077";_ddf ,_ede :=page .GetAllContentStreams ();if _ede !=nil {return nil ,_ede ;};_ec ,_ede :=page .GetMediaBox ();
if _ede !=nil {return nil ,_ff .Errorf ("\u0065\u0078\u0074r\u0061\u0063\u0074\u006fr\u0020\u0072\u0065\u0071\u0075\u0069\u0072e\u0073\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u002e\u0020\u0025\u0076",_ede );};_eb :=&Extractor {_de :_ddf ,_fa :page .Resources ,_fg :*_ec ,_aa :map[string ]fontEntry {},_dd :map[string ]textResult {}};
if _eb ._fg .Llx > _eb ._fg .Urx {_adc .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0058\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_eb ._fg );
_eb ._fg .Llx ,_eb ._fg .Urx =_eb ._fg .Urx ,_eb ._fg .Llx ;};if _eb ._fg .Lly > _eb ._fg .Ury {_adc .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0059\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_eb ._fg );
_eb ._fg .Lly ,_eb ._fg .Ury =_eb ._fg .Ury ,_eb ._fg .Lly ;};_ce .TrackUse (_ga );return _eb ,nil ;};

// PageImages represents extracted images on a PDF page with spatial information:
// display position and size.
type PageImages struct{Images []ImageMark ;};func (_gfbf *textObject )getFillColor ()_bf .Color {return _caabe (_gfbf ._cbc .ColorspaceNonStroking ,_gfbf ._cbc .ColorNonStroking );};func (_cbegb *textObject )getFontDirect (_gbec string )(*_bc .PdfFont ,error ){_cfge ,_eba :=_cbegb .getFontDict (_gbec );
if _eba !=nil {return nil ,_eba ;};_cead ,_eba :=_bc .NewPdfFontFromPdfObject (_cfge );if _eba !=nil {_adc .Log .Debug ("\u0067\u0065\u0074\u0046\u006f\u006e\u0074\u0044\u0069\u0072\u0065\u0063\u0074\u003a\u0020\u004e\u0065\u0077Pd\u0066F\u006f\u006e\u0074\u0046\u0072\u006f\u006d\u0050\u0064\u0066\u004f\u0062j\u0065\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u006e\u0061\u006d\u0065\u003d%\u0023\u0071\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gbec ,_eba );
};return _cead ,_eba ;};

// PageText represents the layout of text on a device page.
type PageText struct{_fbga []*textMark ;_gcca string ;_bede []TextMark ;_fgde []TextTable ;_gbcf _bc .PdfRectangle ;_bbaf []pathSection ;_abdd []pathSection ;};func (_cfeee *textWord )absorb (_acfea *textWord ){_cfeee .PdfRectangle =_ecgff (_cfeee .PdfRectangle ,_acfea .PdfRectangle );
_cfeee ._cdcf =append (_cfeee ._cdcf ,_acfea ._cdcf ...);};func (_beaf *textTable )compositeRowCorridors ()map[int ][]float64 {_gaced :=make (map[int ][]float64 ,_beaf ._cfce );if _ddgd {_adc .Log .Info ("c\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0052\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073:\u0020h\u003d\u0025\u0064",_beaf ._cfce );
};for _bbdd :=1;_bbdd < _beaf ._cfce ;_bbdd ++{var _aabfe []compositeCell ;for _ccfe :=0;_ccfe < _beaf ._bbbd ;_ccfe ++{if _ebgag ,_beddf :=_beaf ._dbdg [_degb (_ccfe ,_bbdd )];_beddf {_aabfe =append (_aabfe ,_ebgag );};};if len (_aabfe )==0{continue ;
};_bbgcd :=_gafbb (_aabfe );_gaced [_bbdd ]=_bbgcd ;if _ddgd {_ff .Printf ("\u0020\u0020\u0020\u0025\u0032\u0064\u003a\u0020\u00256\u002e\u0032\u0066\u000a",_bbdd ,_bbgcd );};};return _gaced ;};func (_ecdb *wordBag )depthBand (_agee ,_bfae float64 )[]int {if len (_ecdb ._egee )==0{return nil ;
};return _ecdb .depthRange (_ecdb .getDepthIdx (_agee ),_ecdb .getDepthIdx (_bfae ));};func _ggb (_ca []Font ,_cfe string )bool {for _ ,_ee :=range _ca {if _ee .FontName ==_cfe {return true ;};};return false ;};func (_gefdg rulingList )comp (_fdce ,_fcbc int )bool {_cbcc ,_bacb :=_gefdg [_fdce ],_gefdg [_fcbc ];
_dgcd ,_badbd :=_cbcc ._bdffc ,_bacb ._bdffc ;if _dgcd !=_badbd {return _dgcd > _badbd ;};if _dgcd ==_gcfe {return false ;};_dbbc :=func (_dggc bool )bool {if _dgcd ==_dgca {return _dggc ;};return !_dggc ;};_aagb ,_aecg :=_cbcc ._aebg ,_bacb ._aebg ;if _aagb !=_aecg {return _dbbc (_aagb > _aecg );
};_aagb ,_aecg =_cbcc ._gecca ,_bacb ._gecca ;if _aagb !=_aecg {return _dbbc (_aagb < _aecg );};return _dbbc (_cbcc ._fafg < _bacb ._fafg );};func (_dagf rulingList )merge ()*ruling {_aadad :=_dagf [0]._aebg ;_edddg :=_dagf [0]._gecca ;_bbcf :=_dagf [0]._fafg ;
for _ ,_bafgf :=range _dagf [1:]{_aadad +=_bafgf ._aebg ;if _bafgf ._gecca < _edddg {_edddg =_bafgf ._gecca ;};if _bafgf ._fafg > _bbcf {_bbcf =_bafgf ._fafg ;};};_eedbf :=&ruling {_bdffc :_dagf [0]._bdffc ,_abge :_dagf [0]._abge ,Color :_dagf [0].Color ,_aebg :_aadad /float64 (len (_dagf )),_gecca :_edddg ,_fafg :_bbcf };
if _bgfd {_adc .Log .Info ("\u006de\u0072g\u0065\u003a\u0020\u0025\u0032d\u0020\u0076e\u0063\u0073\u0020\u0025\u0073",len (_dagf ),_eedbf );for _fcdb ,_gace :=range _dagf {_ff .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fcdb ,_gace );};
};return _eedbf ;};func (_dacf rulingList )aligned ()bool {if len (_dacf )< 2{return false ;};_begbc :=make (map[*ruling ]int );_begbc [_dacf [0]]=0;for _ ,_fbdf :=range _dacf [1:]{_afea :=false ;for _acgeg :=range _begbc {if _fbdf .gridIntersecting (_acgeg ){_begbc [_acgeg ]++;
_afea =true ;break ;};};if !_afea {_begbc [_fbdf ]=0;};};_cacdb :=0;for _ ,_egdcg :=range _begbc {if _egdcg ==0{_cacdb ++;};};_ffeb :=float64 (_cacdb )/float64 (len (_dacf ));_gfa :=_ffeb <=1.0-_cbgb ;if _ggaae {_adc .Log .Info ("\u0061\u006c\u0069\u0067\u006e\u0065\u0064\u003d\u0025\u0074\u0020\u0075\u006em\u0061\u0074\u0063\u0068\u0065\u0064=\u0025\u002e\u0032\u0066\u003d\u0025\u0064\u002f\u0025\u0064\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_gfa ,_ffeb ,_cacdb ,len (_dacf ),_dacf .String ());
};return _gfa ;};func _eegb (_eccg []pathSection ){if _ecfa < 0.0{return ;};if _ggaae {_adc .Log .Info ("\u0067\u0072\u0061\u006e\u0075\u006c\u0061\u0072\u0069\u007a\u0065\u003a\u0020\u0025\u0064 \u0073u\u0062\u0070\u0061\u0074\u0068\u0020\u0073\u0065\u0063\u0074\u0069\u006f\u006e\u0073",len (_eccg ));
};for _adfb ,_ccdb :=range _eccg {for _eaaa ,_eeade :=range _ccdb ._bdfg {for _debcc ,_abde :=range _eeade ._dged {_eeade ._dged [_debcc ]=_bcc .Point {X :_eggbb (_abde .X ),Y :_eggbb (_abde .Y )};if _ggaae {_effaf :=_eeade ._dged [_debcc ];if !_abfd (_abde ,_effaf ){_aaef :=_bcc .Point {X :_effaf .X -_abde .X ,Y :_effaf .Y -_abde .Y };
_ff .Printf ("\u0025\u0034d \u002d\u0020\u00254\u0064\u0020\u002d\u0020%4d\u003a %\u002e\u0032\u0066\u0020\u2192\u0020\u0025.2\u0066\u0020\u0028\u0025\u0067\u0029\u000a",_adfb ,_eaaa ,_debcc ,_abde ,_effaf ,_aaef );};};};};};};func (_fafc *textPara )toTextMarks (_aggg *int )[]TextMark {if _fafc ._bdee ==nil {return _fafc .toCellTextMarks (_aggg );
};var _fdcf []TextMark ;for _fbfd :=0;_fbfd < _fafc ._bdee ._cfce ;_fbfd ++{for _dabe :=0;_dabe < _fafc ._bdee ._bbbd ;_dabe ++{_aaaaa :=_fafc ._bdee .get (_dabe ,_fbfd );if _aaaaa ==nil {_fdcf =_cdab (_fdcf ,_aggg ,"\u0009");}else {_fdfb :=_aaaaa .toCellTextMarks (_aggg );
_fdcf =append (_fdcf ,_fdfb ...);};_fdcf =_cdab (_fdcf ,_aggg ,"\u0020");};if _fbfd < _fafc ._bdee ._cfce -1{_fdcf =_cdab (_fdcf ,_aggg ,"\u000a");};};return _fdcf ;};func (_bdff *shapesState )closePath (){if _bdff ._febdf {_bdff ._gegg =append (_bdff ._gegg ,_gbeb (_bdff ._ggdc ));
_bdff ._febdf =false ;}else if len (_bdff ._gegg )==0{if _ccbg {_adc .Log .Debug ("\u0063\u006c\u006f\u0073eP\u0061\u0074\u0068\u0020\u0077\u0069\u0074\u0068\u0020\u006e\u006f\u0020\u0070\u0061t\u0068");};_bdff ._febdf =false ;return ;};_bdff ._gegg [len (_bdff ._gegg )-1].close ();
if _ccbg {_adc .Log .Info ("\u0063\u006c\u006f\u0073\u0065\u0050\u0061\u0074\u0068\u003a\u0020\u0025\u0073",_bdff );};};func (_aaag *imageExtractContext )extractFormImages (_dee *_ea .PdfObjectName ,_gde _gf .GraphicsState ,_fbbd *_bc .PdfPageResources )error {_aede ,_dfb :=_fbbd .GetXObjectFormByName (*_dee );
if _dfb !=nil {return _dfb ;};if _aede ==nil {return nil ;};_bac ,_dfb :=_aede .GetContentStream ();if _dfb !=nil {return _dfb ;};_aab :=_aede .Resources ;if _aab ==nil {_aab =_fbbd ;};_dfb =_aaag .extractContentStreamImages (string (_bac ),_aab );if _dfb !=nil {return _dfb ;
};_aaag ._aee ++;return nil ;};func _fdfef (_feaeg *wordBag ,_bcgd float64 ,_afgd ,_cgcd rulingList )[]*wordBag {var _aedeb []*wordBag ;for _ ,_cccc :=range _feaeg .depthIndexes (){_cdbd :=false ;for !_feaeg .empty (_cccc ){_cbege :=_feaeg .firstReadingIndex (_cccc );
_bfgbb :=_feaeg .firstWord (_cbege );_abcd :=_aae (_bfgbb ,_bcgd ,_afgd ,_cgcd );_feaeg .removeWord (_bfgbb ,_cbege );if _fcec {_adc .Log .Info ("\u0066\u0069\u0072\u0073\u0074\u0057\u006f\u0072\u0064\u0020\u005e\u005e^\u005e\u0020\u0025\u0073",_bfgbb .String ());
};for _dgce :=true ;_dgce ;_dgce =_cdbd {_cdbd =false ;_cecgb :=_fbe *_abcd ._gccae ;_fagff :=_bfac *_abcd ._gccae ;_aege :=_egf *_abcd ._gccae ;if _fcec {_adc .Log .Info ("\u0070a\u0072a\u0057\u006f\u0072\u0064\u0073\u0020\u0064\u0065\u0070\u0074\u0068 \u0025\u002e\u0032\u0066 \u002d\u0020\u0025\u002e\u0032f\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061\u0044\u0065\u0070\u0074\u0068\u0047\u0061\u0070\u003d\u0025\u002e\u0032\u0066\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061R\u0065\u0061\u0064\u0069\u006e\u0067\u0047\u0061p\u003d\u0025\u002e\u0032\u0066",_abcd .minDepth (),_abcd .maxDepth (),_aege ,_fagff );
};if _feaeg .scanBand ("\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c",_abcd ,_bdfe (_cged ,0),_abcd .minDepth ()-_aege ,_abcd .maxDepth ()+_aege ,_ddbe ,false ,false )> 0{_cdbd =true ;};if _feaeg .scanBand ("\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_abcd ,_bdfe (_cged ,_fagff ),_abcd .minDepth (),_abcd .maxDepth (),_ddgdc ,false ,false )> 0{_cdbd =true ;
};if _cdbd {continue ;};_ccbc :=_feaeg .scanBand ("",_abcd ,_bdfe (_abea ,_cecgb ),_abcd .minDepth (),_abcd .maxDepth (),_bbeeg ,true ,false );if _ccbc > 0{_bfge :=(_abcd .maxDepth ()-_abcd .minDepth ())/_abcd ._gccae ;if (_ccbc > 1&&float64 (_ccbc )> 0.3*_bfge )||_ccbc <=10{if _feaeg .scanBand ("\u006f\u0074\u0068e\u0072",_abcd ,_bdfe (_abea ,_cecgb ),_abcd .minDepth (),_abcd .maxDepth (),_bbeeg ,false ,true )> 0{_cdbd =true ;
};};};};_aedeb =append (_aedeb ,_abcd );};};return _aedeb ;};func (_bbga *textWord )addDiacritic (_cebe string ){_bfcag :=_bbga ._cdcf [len (_bbga ._cdcf )-1];_bfcag ._cbab +=_cebe ;_bfcag ._cbab =_dg .NFKC .String (_bfcag ._cbab );};func _fddb (_faab []TextMark ,_fagb *int )[]TextMark {_egca :=_faab [len (_faab )-1];
_bafeb :=[]rune (_egca .Text );if len (_bafeb )==1{_faab =_faab [:len (_faab )-1];_eefc :=_faab [len (_faab )-1];*_fagb =_eefc .Offset +len (_eefc .Text );}else {_bgefe :=_gbga (_egca .Text );*_fagb +=len (_bgefe )-len (_egca .Text );_egca .Text =_bgefe ;
};return _faab ;};

// String returns a human readable description of `path`.
func (_cgab *subpath )String ()string {_dca :=_cgab ._dged ;_ffe :=len (_dca );if _ffe <=5{return _ff .Sprintf ("\u0025d\u003a\u0020\u0025\u0036\u002e\u0032f",_ffe ,_dca );};return _ff .Sprintf ("\u0025d\u003a\u0020\u0025\u0036.\u0032\u0066\u0020\u0025\u0036.\u0032f\u0020.\u002e\u002e\u0020\u0025\u0036\u002e\u0032f",_ffe ,_dca [0],_dca [1],_dca [_ffe -1]);
};func (_gcdcc rulingList )primMinMax ()(float64 ,float64 ){_gbcd ,_caeec :=_gcdcc [0]._aebg ,_gcdcc [0]._aebg ;for _ ,_gcfd :=range _gcdcc [1:]{if _gcfd ._aebg < _gbcd {_gbcd =_gcfd ._aebg ;}else if _gcfd ._aebg > _caeec {_caeec =_gcfd ._aebg ;};};return _gbcd ,_caeec ;
};type wordBag struct{_bc .PdfRectangle ;_gccae float64 ;_dad ,_fff rulingList ;_eaf float64 ;_egee map[int ][]*textWord ;};func (_gbdggd intSet )has (_bbae int )bool {_ ,_bbdf :=_gbdggd [_bbae ];return _bbdf };func (_aagf *textObject )renderText (_acfe []byte )error {if _aagf ._fef {_adc .Log .Debug ("\u0072\u0065\u006e\u0064\u0065r\u0054\u0065\u0078\u0074\u003a\u0020\u0049\u006e\u0076\u0061\u006c\u0069\u0064 \u0066\u006f\u006e\u0074\u002e\u0020\u004e\u006f\u0074\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u002e");
return nil ;};_eegf :=_aagf .getCurrentFont ();_bfa :=_eegf .BytesToCharcodes (_acfe );_faa ,_fabf ,_cfdf :=_eegf .CharcodesToStrings (_bfa );if _cfdf > 0{_adc .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_fabf ,_cfdf );
};_aagf ._gad ._fdd +=_fabf ;_aagf ._gad ._badd +=_cfdf ;_bbe :=_aagf ._gad ;_agf :=_bbe ._fdg ;_ddeaa :=_bbe ._aedb /100.0;_aeef :=_dgfa ;if _eegf .Subtype ()=="\u0054\u0079\u0070e\u0033"{_aeef =1;};_acbc ,_cfad :=_eegf .GetRuneMetrics (' ');if !_cfad {_acbc ,_cfad =_eegf .GetCharMetrics (32);
};if !_cfad {_acbc ,_ =_bc .DefaultFont ().GetRuneMetrics (' ');};_bafc :=_acbc .Wx *_aeef ;_adc .Log .Trace ("\u0073p\u0061\u0063e\u0057\u0069\u0064t\u0068\u003d\u0025\u002e\u0032\u0066\u0020t\u0065\u0078\u0074\u003d\u0025\u0071 \u0066\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0066\u006f\u006et\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",_bafc ,_faa ,_eegf ,_agf );
_cgg :=_bcc .NewMatrix (_agf *_ddeaa ,0,0,_agf ,0,_bbe ._eebg );if _aaba {_adc .Log .Info ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0074\u0065\u0078t\u0073\u003d\u0025\u0071",len (_bfa ),_bfa ,_faa );
};_adc .Log .Trace ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0072\u0075\u006ee\u0073\u003d\u0025\u0071",len (_bfa ),_bfa ,len (_faa ));_cgd :=_aagf .getFillColor ();
_fed :=_aagf .getStrokeColor ();for _bbc ,_gdb :=range _faa {_fgaf :=[]rune (_gdb );if len (_fgaf )==1&&_fgaf [0]=='\x00'{continue ;};_ecf :=_bfa [_bbc ];_dcb :=_aagf ._cbc .CTM .Mult (_aagf ._dfaf ).Mult (_cgg );_dbdc :=0.0;if len (_fgaf )==1&&_fgaf [0]==32{_dbdc =_bbe ._aefb ;
};_ebc ,_bafe :=_eegf .GetCharMetrics (_ecf );if !_bafe {_adc .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u004e\u006f \u006d\u0065\u0074r\u0069\u0063\u0020\u0066\u006f\u0072\u0020\u0063\u006fde\u003d\u0025\u0064 \u0072\u003d0\u0078\u0025\u0030\u0034\u0078\u003d%\u002b\u0071 \u0025\u0073",_ecf ,_fgaf ,_fgaf ,_eegf );
return _ff .Errorf ("\u006e\u006f\u0020\u0063\u0068\u0061\u0072\u0020\u006d\u0065\u0074\u0072\u0069\u0063\u0073:\u0020f\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0063\u006f\u0064\u0065\u003d\u0025\u0064",_eegf .String (),_ecf );};_gbd :=_bcc .Point {X :_ebc .Wx *_aeef ,Y :_ebc .Wy *_aeef };
_gga :=_bcc .Point {X :(_gbd .X *_agf +_dbdc )*_ddeaa };_bfg :=_bcc .Point {X :(_gbd .X *_agf +_bbe ._bdb +_dbdc )*_ddeaa };if _aaba {_adc .Log .Info ("\u0074\u0066\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0063\u003d\u0025\u002e\u0032f\u0020t\u0077\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_agf ,_bbe ._bdb ,_bbe ._aefb ,_ddeaa );
_adc .Log .Info ("\u0064x\u002c\u0064\u0079\u003d%\u002e\u0033\u0066\u0020\u00740\u003d%\u002e3\u0066\u0020\u0074\u003d\u0025\u002e\u0033f",_gbd ,_gga ,_bfg );};_gefd :=_fcda (_gga );_dae :=_fcda (_bfg );_cecg :=_aagf ._cbc .CTM .Mult (_aagf ._dfaf ).Mult (_gefd );
if _gedf {_adc .Log .Info ("e\u006e\u0064\u003a\u000a\tC\u0054M\u003d\u0025\u0073\u000a\u0009 \u0074\u006d\u003d\u0025\u0073\u000a"+"\u0009\u0020t\u0064\u003d\u0025s\u0020\u0078\u006c\u0061\u0074\u003d\u0025\u0073\u000a"+"\u0009t\u0064\u0030\u003d\u0025s\u000a\u0009\u0020\u0020\u2192 \u0025s\u0020x\u006c\u0061\u0074\u003d\u0025\u0073",_aagf ._cbc .CTM ,_aagf ._dfaf ,_dae ,_eagc (_aagf ._cbc .CTM .Mult (_aagf ._dfaf ).Mult (_dae )),_gefd ,_cecg ,_eagc (_cecg ));
};_dge ,_dfgc :=_aagf .newTextMark (_bed .ExpandLigatures (_fgaf ),_dcb ,_eagc (_cecg ),_d .Abs (_bafc *_dcb .ScalingFactorX ()),_eegf ,_aagf ._gad ._bdb ,_cgd ,_fed );if !_dfgc {_adc .Log .Debug ("\u0054\u0065\u0078\u0074\u0020\u006d\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069d\u0065 \u0070\u0061\u0067\u0065\u002e\u0020\u0053\u006b\u0069\u0070\u0070\u0069\u006e\u0067");
continue ;};if _eegf ==nil {_adc .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u002e");}else if _eegf .Encoder ()==nil {_adc .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020N\u006f\u0020\u0065\u006e\u0063\u006f\u0064\u0069\u006eg\u002e\u0020\u0066o\u006et\u003d\u0025\u0073",_eegf );
}else {if _adb ,_ffd :=_eegf .Encoder ().CharcodeToRune (_ecf );_ffd {_dge ._ddag =string (_adb );};};_adc .Log .Trace ("i\u003d\u0025\u0064\u0020\u0063\u006fd\u0065\u003d\u0025\u0064\u0020\u006d\u0061\u0072\u006b=\u0025\u0073\u0020t\u0072m\u003d\u0025\u0073",_bbc ,_ecf ,_dge ,_dcb );
_aagf ._dac =append (_aagf ._dac ,&_dge );_aagf ._dfaf .Concat (_dae );};return nil ;};func (_gdg *textObject )setTextRise (_bba float64 ){if _gdg ==nil {return ;};_gdg ._gad ._eebg =_bba ;};func (_aaegg *textWord )bbox ()_bc .PdfRectangle {return _aaegg .PdfRectangle };


// String returns a string describing `ma`.
func (_cde TextMarkArray )String ()string {_decd :=len (_cde ._ecff );if _decd ==0{return "\u0045\u004d\u0050T\u0059";};_cfdc :=_cde ._ecff [0];_gce :=_cde ._ecff [_decd -1];return _ff .Sprintf ("\u007b\u0054\u0045\u0058\u0054\u004d\u0041\u0052K\u0041\u0052\u0052AY\u003a\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025s\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d%\u0073\u007d",_decd ,_cfdc ,_gce );
};

// ToText returns the page text as a single string.
// Deprecated: This function is deprecated and will be removed in a future major version. Please use
// Text() instead.
func (_fag PageText )ToText ()string {return _fag .Text ()};func _cccge (_cage ,_abaac ,_cbccf ,_bgedc *textPara )*textTable {_cbgfc :=&textTable {_bbbd :2,_cfce :2,_fcefg :make (map[uint64 ]*textPara ,4)};_cbgfc .put (0,0,_cage );_cbgfc .put (1,0,_abaac );
_cbgfc .put (0,1,_cbccf );_cbgfc .put (1,1,_bgedc );return _cbgfc ;};

// TextMarkArray is a collection of TextMarks.
type TextMarkArray struct{_ecff []TextMark };func _eadd (_bfdf map[float64 ]gridTile )[]float64 {_gaaba :=make ([]float64 ,0,len (_bfdf ));for _eddgd :=range _bfdf {_gaaba =append (_gaaba ,_eddgd );};_bb .Float64s (_gaaba );return _gaaba ;};func (_cgdad *textTable )depth ()float64 {_cbdd :=1e10;
for _bgfdb :=0;_bgfdb < _cgdad ._bbbd ;_bgfdb ++{_afddb :=_cgdad .get (_bgfdb ,0);if _afddb ==nil ||_afddb ._afcb {continue ;};_cbdd =_d .Min (_cbdd ,_afddb .depth ());};return _cbdd ;};

// String returns a string describing `pt`.
func (_eageg PageText )String ()string {_bae :=_ff .Sprintf ("P\u0061\u0067\u0065\u0054ex\u0074:\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073",len (_eageg ._fbga ));_gdga :=[]string {"\u002d"+_bae };for _ ,_abf :=range _eageg ._fbga {_gdga =append (_gdga ,_abf .String ());
};_gdga =append (_gdga ,"\u002b"+_bae );return _ba .Join (_gdga ,"\u000a");};func (_gbbeg *textTable )getComposite (_abcc ,_aged int )(paraList ,_bc .PdfRectangle ){_edfeg ,_ddgdd :=_gbbeg ._dbdg [_degb (_abcc ,_aged )];if _ddgd {_ff .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0067\u0065\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u002d\u003e\u0025\u0073\u000a",_abcc ,_aged ,_edfeg .String ());
};if !_ddgdd {return nil ,_bc .PdfRectangle {};};return _edfeg .parasBBox ();};
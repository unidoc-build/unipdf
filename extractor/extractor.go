//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

//
// Package extractor is used for quickly extracting PDF content through a simple interface.
// Currently offers functionality for extracting textual content.
//
package extractor ;import (_dc "bytes";_g "errors";_fe "fmt";_eb "github.com/unidoc/unipdf/v3/common";_ef "github.com/unidoc/unipdf/v3/contentstream";_de "github.com/unidoc/unipdf/v3/core";_b "github.com/unidoc/unipdf/v3/internal/license";_fea "github.com/unidoc/unipdf/v3/internal/textencoding";
_efc "github.com/unidoc/unipdf/v3/internal/transform";_ga "github.com/unidoc/unipdf/v3/model";_fc "golang.org/x/text/unicode/norm";_ce "golang.org/x/xerrors";_ea "image/color";_f "io";_ca "math";_ed "regexp";_d "sort";_cc "strings";_cb "unicode";_c "unicode/utf8";
);func (_dggd *ruling )intersects (_cfadd *ruling )bool {_ebae :=(_dggd ._bfaa ==_aege &&_cfadd ._bfaa ==_acec )||(_cfadd ._bfaa ==_aege &&_dggd ._bfaa ==_acec );_adfgb :=func (_cada ,_egfae *ruling )bool {return _cada ._dccfd -_afdf <=_egfae ._efef &&_egfae ._efef <=_cada ._dgeg +_afdf ;
};_agge :=_adfgb (_dggd ,_cfadd );_ffbee :=_adfgb (_cfadd ,_dggd );if _eadg {_fe .Printf ("\u0020\u0020\u0020\u0020\u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003a\u0020\u0020\u006fr\u0074\u0068\u006f\u0067\u006f\u006e\u0061l\u003d\u0025\u0074\u0020\u006f\u0031\u003d\u0025\u0074\u0020\u006f2\u003d\u0025\u0074\u0020\u2192\u0020\u0025\u0074\u000a"+"\u0020\u0020\u0020 \u0020\u0020\u0020\u0076\u003d\u0025\u0073\u000a"+" \u0020\u0020\u0020\u0020\u0020\u0077\u003d\u0025\u0073\u000a",_ebae ,_agge ,_ffbee ,_ebae &&_agge &&_ffbee ,_dggd ,_cfadd );
};return _ebae &&_agge &&_ffbee ;};func (_eeed *textObject )getCurrentFont ()*_ga .PdfFont {_cgef :=_eeed ._abde ._fcbg ;if _cgef ==nil {_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020U\u0073\u0069\u006e\u0067\u0020d\u0065\u0066a\u0075\u006c\u0074\u002e");
return _ga .DefaultFont ();};return _cgef ;};func (_fdad *ruling )alignsSec (_eefcf *ruling )bool {const _eage =_ggbc +1.0;return _fdad ._dccfd -_eage <=_eefcf ._dgeg &&_eefcf ._dccfd -_eage <=_fdad ._dgeg ;};func (_ffce paraList )topoOrder ()[]int {if _ddgbd {_eb .Log .Info ("\u0074\u006f\u0070\u006f\u004f\u0072\u0064\u0065\u0072\u003a");
};_efde :=len (_ffce );_aeaf :=make ([]bool ,_efde );_babfe :=make ([]int ,0,_efde );_gcd :=_ffce .llyOrdering ();var _beba func (_bdba int );_beba =func (_dbgb int ){_aeaf [_dbgb ]=true ;for _efdf :=0;_efdf < _efde ;_efdf ++{if !_aeaf [_efdf ]{if _ffce .readBefore (_gcd ,_dbgb ,_efdf ){_beba (_efdf );
};};};_babfe =append (_babfe ,_dbgb );};for _dfeg :=0;_dfeg < _efde ;_dfeg ++{if !_aeaf [_dfeg ]{_beba (_dfeg );};};return _dcgc (_babfe );};type imageExtractContext struct{_dg []ImageMark ;_faf int ;_bf int ;_cac int ;_dac map[*_de .PdfObjectStream ]*cachedImage ;
_eg *ImageExtractOptions ;};func (_adefg *textWord )appendMark (_befb *textMark ,_cagca _ga .PdfRectangle ){_adefg ._afcbb =append (_adefg ._afcbb ,_befb );_adefg .PdfRectangle =_cdg (_adefg .PdfRectangle ,_befb .PdfRectangle );if _befb ._cba > _adefg ._cbaa {_adefg ._cbaa =_befb ._cba ;
};_adefg ._gfgf =_cagca .Ury -_adefg .PdfRectangle .Lly ;};func (_fbbe *ruling )equals (_bcfbe *ruling )bool {return _fbbe ._bfaa ==_bcfbe ._bfaa &&_ageg (_fbbe ._efef ,_bcfbe ._efef )&&_ageg (_fbbe ._dccfd ,_bcfbe ._dccfd )&&_ageg (_fbbe ._dgeg ,_bcfbe ._dgeg );
};func (_abbb *wordBag )makeRemovals ()map[int ]map[*textWord ]struct{}{_bcce :=make (map[int ]map[*textWord ]struct{},len (_abbb ._cade ));for _degd :=range _abbb ._cade {_bcce [_degd ]=make (map[*textWord ]struct{});};return _bcce ;};func (_dfddd rulingList )snapToGroupsDirection ()rulingList {_dfddd .sortStrict ();
_ecccf :=make (map[*ruling ]rulingList ,len (_dfddd ));_bbfbd :=_dfddd [0];_ccdc :=func (_dfac *ruling ){_bbfbd =_dfac ;_ecccf [_bbfbd ]=rulingList {_dfac }};_ccdc (_dfddd [0]);for _ ,_cadc :=range _dfddd [1:]{if _cadc ._efef < _bbfbd ._efef -_dacb {_eb .Log .Error ("\u0073\u006e\u0061\u0070T\u006f\u0047\u0072\u006f\u0075\u0070\u0073\u0044\u0069r\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0057\u0072\u006f\u006e\u0067\u0020\u0070\u0072\u0069\u006da\u0072\u0079\u0020\u006f\u0072d\u0065\u0072\u002e\u000a\u0009\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0020\u0076\u003d\u0025\u0073",_bbfbd ,_cadc );
};if _cadc ._efef > _bbfbd ._efef +_ggbc {_ccdc (_cadc );}else {_ecccf [_bbfbd ]=append (_ecccf [_bbfbd ],_cadc );};};_dabd :=make (map[*ruling ]float64 ,len (_ecccf ));_gfbbg :=make (map[*ruling ]*ruling ,len (_dfddd ));for _fefb ,_bbfa :=range _ecccf {_dabd [_fefb ]=_bbfa .mergePrimary ();
for _ ,_dccg :=range _bbfa {_gfbbg [_dccg ]=_fefb ;};};for _ ,_ggada :=range _dfddd {_ggada ._efef =_dabd [_gfbbg [_ggada ]];};_dcffa :=make (rulingList ,0,len (_dfddd ));for _ ,_affbb :=range _ecccf {_dccad :=_affbb .splitSec ();for _ggbeb ,_gbcf :=range _dccad {_befc :=_gbcf .merge ();
if len (_dcffa )> 0{_efbd :=_dcffa [len (_dcffa )-1];if _efbd .alignsPrimary (_befc )&&_efbd .alignsSec (_befc ){_eb .Log .Error ("\u0073\u006e\u0061\u0070\u0054\u006fG\u0072\u006f\u0075\u0070\u0073\u0044\u0069\u0072\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0044\u0075\u0070\u006ci\u0063\u0061\u0074\u0065\u0020\u0069\u003d\u0025\u0064\u000a\u0009\u0077\u003d\u0025s\u000a\t\u0076\u003d\u0025\u0073",_ggbeb ,_efbd ,_befc );
continue ;};};_dcffa =append (_dcffa ,_befc );};};_dcffa .sortStrict ();return _dcffa ;};func (_fgac *textTable )subdivide ()*textTable {_fgac .logComposite ("\u0073u\u0062\u0064\u0069\u0076\u0069\u0064e");_ebbc :=_fgac .compositeRowCorridors ();_fccfg :=_fgac .compositeColCorridors ();
if _cagbf {_eb .Log .Info ("\u0073u\u0062\u0064i\u0076\u0069\u0064\u0065:\u000a\u0009\u0072o\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s=\u0025\u0073\u000a\t\u0063\u006fl\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073=\u0025\u0073",_ffbac (_ebbc ),_ffbac (_fccfg ));
};if len (_ebbc )==0||len (_fccfg )==0{return _fgac ;};_dgcbc (_ebbc );_dgcbc (_fccfg );if _cagbf {_eb .Log .Info ("\u0073\u0075\u0062\u0064\u0069\u0076\u0069\u0064\u0065\u0020\u0066\u0069\u0078\u0065\u0064\u003a\u000a\u0009r\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073\u003d\u0025\u0073\u000a\u0009\u0063\u006f\u006cC\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d\u0025\u0073",_ffbac (_ebbc ),_ffbac (_fccfg ));
};_afag ,_bcadb :=_gafb (_fgac ._ceccd ,_ebbc );_cddaa ,_ebaed :=_gafb (_fgac ._afbd ,_fccfg );_gdfca :=make (map[uint64 ]*textPara ,_ebaed *_bcadb );_gcefc :=&textTable {PdfRectangle :_fgac .PdfRectangle ,_dbedg :_fgac ._dbedg ,_ceccd :_bcadb ,_afbd :_ebaed ,_geegga :_gdfca };
if _cagbf {_eb .Log .Info ("\u0073\u0075b\u0064\u0069\u0076\u0069\u0064\u0065\u003a\u0020\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0020\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0063\u0065\u006c\u006c\u0073\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0079\u004f\u0066\u0066\u0073\u0065\u0074\u0073=\u0025\u002b\u0076\u000a"+"\u0009\u0078\u004f\u0066\u0066\u0073\u0065\u0074\u0073\u003d\u0025\u002b\u0076",_fgac ._afbd ,_fgac ._ceccd ,_ebaed ,_bcadb ,_ffbac (_ebbc ),_ffbac (_fccfg ),_afag ,_cddaa );
};for _feed :=0;_feed < _fgac ._ceccd ;_feed ++{_dgbgb :=_afag [_feed ];for _babb :=0;_babb < _fgac ._afbd ;_babb ++{_gdge :=_cddaa [_babb ];if _cagbf {_fe .Printf ("\u0025\u0036\u0064\u002c %\u0032\u0064\u003a\u0020\u0078\u0030\u003d\u0025\u0064\u0020\u0079\u0030\u003d\u0025d\u000a",_babb ,_feed ,_gdge ,_dgbgb );
};_deed ,_gfdfb :=_fgac ._dbbd [_adfaf (_babb ,_feed )];if !_gfdfb {continue ;};_bcbabe :=_deed .split (_ebbc [_feed ],_fccfg [_babb ]);for _fbegc :=0;_fbegc < _bcbabe ._ceccd ;_fbegc ++{for _edbe :=0;_edbe < _bcbabe ._afbd ;_edbe ++{_abdg :=_bcbabe .get (_edbe ,_fbegc );
_gcefc .put (_gdge +_edbe ,_dgbgb +_fbegc ,_abdg );if _cagbf {_fe .Printf ("\u0025\u0038\u0064\u002c\u0020\u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_gdge +_edbe ,_dgbgb +_fbegc ,_abdg );};};};};};return _gcefc ;};func (_eedf rulingList )tidied (_cgac string )rulingList {_cccgc :=_eedf .removeDuplicates ();
_cccgc .log ("\u0075n\u0069\u0071\u0075\u0065\u0073");_abaf :=_cccgc .snapToGroups ();if _abaf ==nil {return nil ;};_abaf .sort ();if _eadg {_eb .Log .Info ("\u0074\u0069\u0064i\u0065\u0064\u003a\u0020\u0025\u0071\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u0075\u006e\u0069\u0071\u0075\u0065\u0073\u003d\u0025\u0064\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0064\u003d\u0025\u0064",_cgac ,len (_eedf ),len (_cccgc ),len (_abaf ));
};_abaf .log ("\u0063o\u0061\u006c\u0065\u0073\u0063\u0065d");return _abaf ;};func (_fbaf *PageText )computeViews (){var _dacd rulingList ;if _abad {_bfgg :=_dbed (_fbaf ._abcg );_dacd =append (_dacd ,_bfgg ...);};if _dgag {_faaf :=_eeeb (_fbaf ._babf );
_dacd =append (_dacd ,_faaf ...);};_dacd ,_dcfe :=_dacd .toTilings ();var _ebb paraList ;_ebda :=len (_fbaf ._bec );for _dgcg :=0;_dgcg < 360&&_ebda > 0;_dgcg +=90{_egge :=make ([]*textMark ,0,len (_fbaf ._bec )-_ebda );for _ ,_fgdfd :=range _fbaf ._bec {if _fgdfd ._dbfb ==_dgcg {_egge =append (_egge ,_fgdfd );
};};if len (_egge )> 0{_ccbd :=_bdbc (_egge ,_fbaf ._cgb ,_dacd ,_dcfe );_ebb =append (_ebb ,_ccbd ...);_ebda -=len (_egge );};};_ebeb :=new (_dc .Buffer );_ebb .writeText (_ebeb );_fbaf ._caea =_ebeb .String ();_fbaf ._acbf =_ebb .toTextMarks ();_fbaf ._gdg =_ebb .tables ();
if _cagbf {_eb .Log .Info ("\u0063\u006f\u006dpu\u0074\u0065\u0056\u0069\u0065\u0077\u0073\u003a\u0020\u0074\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064",len (_fbaf ._gdg ));};};func (_gdefa rulingList )sortStrict (){_d .Slice (_gdefa ,func (_cbbdd ,_ccadec int )bool {_gfbe ,_bafa :=_gdefa [_cbbdd ],_gdefa [_ccadec ];
_cacg ,_gcfd :=_gfbe ._bfaa ,_bafa ._bfaa ;if _cacg !=_gcfd {return _cacg > _gcfd ;};_caad ,_bfcb :=_gfbe ._efef ,_bafa ._efef ;if !_bbfcc (_caad -_bfcb ){return _caad < _bfcb ;};_caad ,_bfcb =_gfbe ._dccfd ,_bafa ._dccfd ;if _caad !=_bfcb {return _caad < _bfcb ;
};return _gfbe ._dgeg < _bafa ._dgeg ;});};

// String returns a human readable description of `ss`.
func (_eaf *shapesState )String ()string {return _fe .Sprintf ("\u007b\u0025\u0064\u0020su\u0062\u0070\u0061\u0074\u0068\u0073\u0020\u0066\u0072\u0065\u0073\u0068\u003d\u0025t\u007d",len (_eaf ._bdbb ),_eaf ._dce );};

// TableCell is a cell in a TextTable.
type TableCell struct{

// Text is the extracted text.
Text string ;

// Marks returns the TextMarks corresponding to the text in Text.
Marks TextMarkArray ;};func (_eccd *subpath )isQuadrilateral ()bool {if len (_eccd ._gabf )< 4||len (_eccd ._gabf )> 5{return false ;};if len (_eccd ._gabf )==5{_dgfa :=_eccd ._gabf [0];_eaff :=_eccd ._gabf [4];if _dgfa .X !=_eaff .X ||_dgfa .Y !=_eaff .Y {return false ;
};};return true ;};

// String returns a description of `p`.
func (_eeee *textPara )String ()string {if _eeee ._cace {return _fe .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u005b\u0045\u004d\u0050\u0054\u0059\u005d",_eeee .PdfRectangle );};_abed :="";if _eeee ._cfdd !=nil {_abed =_fe .Sprintf ("\u005b\u0025\u0064\u0078\u0025\u0064\u005d\u0020",_eeee ._cfdd ._afbd ,_eeee ._cfdd ._ceccd );
};return _fe .Sprintf ("\u0025\u0036\u002e\u0032f \u0025\u0073\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u0020\u0025\u0071",_eeee .PdfRectangle ,_abed ,len (_eeee ._gfgc ),_dgff (_eeee .text (),50));};type subpath struct{_gabf []_efc .Point ;_beeb bool ;
};func _faaa (_gfeb ,_afbee _efc .Point )bool {_cdga :=_ca .Abs (_gfeb .X -_afbee .X );_ebbe :=_ca .Abs (_gfeb .Y -_afbee .Y );return _bdfb (_cdga ,_ebbe );};func (_deec *textLine )markWordBoundaries (){_caeb :=_eaaa *_deec ._cefd ;for _dcbg ,_daeb :=range _deec ._gbce [1:]{if _eagc (_daeb ,_deec ._gbce [_dcbg ])>=_caeb {_daeb ._ddgbe =true ;
};};};func _fegg (_dgcf string ,_bbcd []rulingList ){_eb .Log .Info ("\u0024\u0024 \u0025\u0064\u0020g\u0072\u0069\u0064\u0073\u0020\u002d\u0020\u0025\u0073",len (_bbcd ),_dgcf );for _dgbd ,_cgga :=range _bbcd {_fe .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_dgbd ,_cgga .String ());
};};func (_afedc *textTable )emptyCompositeColumn (_adbce int )bool {for _gggfa :=0;_gggfa < _afedc ._ceccd ;_gggfa ++{if _aebdf ,_afcac :=_afedc ._dbbd [_adfaf (_adbce ,_gggfa )];_afcac {if len (_aebdf .paraList )> 0{return false ;};};};return true ;};
func (_gdeg paraList )llyOrdering ()[]int {_deba :=make ([]int ,len (_gdeg ));for _bbcb :=range _gdeg {_deba [_bbcb ]=_bbcb ;};_d .SliceStable (_deba ,func (_bcdd ,_ccdef int )bool {_fagc ,_bdaa :=_deba [_bcdd ],_deba [_ccdef ];return _gdeg [_fagc ].Lly < _gdeg [_bdaa ].Lly ;
});return _deba ;};func (_fgbc gridTile )contains (_gebe _ga .PdfRectangle )bool {if _fgbc .numBorders ()< 3{return false ;};if _fgbc ._bcba &&_gebe .Llx < _fgbc .Llx -_gcfc {return false ;};if _fgbc ._aegf &&_gebe .Urx > _fgbc .Urx +_gcfc {return false ;
};if _fgbc ._ddcc &&_gebe .Lly < _fgbc .Lly -_gcfc {return false ;};if _fgbc ._agbfd &&_gebe .Ury > _fgbc .Ury +_gcfc {return false ;};return true ;};func _aacc (_ecca *wordBag ,_adfg *textWord ,_bdg float64 )bool {return _adfg .Llx < _ecca .Urx +_bdg &&_ecca .Llx -_bdg < _adfg .Urx ;
};type textObject struct{_gda *Extractor ;_dfgf *_ga .PdfPageResources ;_geae _ef .GraphicsState ;_abde *textState ;_cbf *stateStack ;_fbg _efc .Matrix ;_eccg _efc .Matrix ;_fdfa []*textMark ;_cfb bool ;};var _gcbf =_ed .MustCompile ("\u005e\u005c\u0073\u002a\u0028\u005c\u0064\u002b\u005c\u002e\u003f|\u005b\u0049\u0069\u0076\u005d\u002b\u0029\u005c\u0073\u002a\\\u0029\u003f\u0024");
func (_ecded *wordBag )depthIndexes ()[]int {if len (_ecded ._cade )==0{return nil ;};_abcd :=make ([]int ,len (_ecded ._cade ));_befe :=0;for _bdbe :=range _ecded ._cade {_abcd [_befe ]=_bdbe ;_befe ++;};_d .Ints (_abcd );return _abcd ;};func (_eda *imageExtractContext )extractFormImages (_aa *_de .PdfObjectName ,_abf _ef .GraphicsState ,_cff *_ga .PdfPageResources )error {_adfa ,_ede :=_cff .GetXObjectFormByName (*_aa );
if _ede !=nil {return _ede ;};if _adfa ==nil {return nil ;};_bc ,_ede :=_adfa .GetContentStream ();if _ede !=nil {return _ede ;};_gga :=_adfa .Resources ;if _gga ==nil {_gga =_cff ;};_ede =_eda .extractContentStreamImages (string (_bc ),_gga );if _ede !=nil {return _ede ;
};_eda ._cac ++;return nil ;};func (_afaf rulingList )log (_acdad string ){if !_eadg {return ;};_eb .Log .Info ("\u0023\u0023\u0023\u0020\u0025\u0031\u0030\u0073\u003a\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_acdad ,_afaf .String ());for _fbabe ,_acbaf :=range _afaf {_fe .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fbabe ,_acbaf .String ());
};};func (_daf *imageExtractContext )processOperand (_bg *_ef .ContentStreamOperation ,_cdb _ef .GraphicsState ,_ggf *_ga .PdfPageResources )error {if _bg .Operand =="\u0042\u0049"&&len (_bg .Params )==1{_feb ,_fb :=_bg .Params [0].(*_ef .ContentStreamInlineImage );
if !_fb {return nil ;};if _faff ,_cef :=_de .GetBoolVal (_feb .ImageMask );_cef {if _faff &&!_daf ._eg .IncludeInlineStencilMasks {return nil ;};};return _daf .extractInlineImage (_feb ,_cdb ,_ggf );}else if _bg .Operand =="\u0044\u006f"&&len (_bg .Params )==1{_dab ,_bfb :=_de .GetName (_bg .Params [0]);
if !_bfb {_eb .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");return _ec ;};_ ,_fae :=_ggf .GetXObjectByName (*_dab );switch _fae {case _ga .XObjectTypeImage :return _daf .extractXObjectImage (_dab ,_cdb ,_ggf );case _ga .XObjectTypeForm :return _daf .extractFormImages (_dab ,_cdb ,_ggf );
};};return nil ;};

// String returns a description of `b`.
func (_faeb *wordBag )String ()string {var _fbea []string ;for _ ,_acg :=range _faeb .depthIndexes (){_gde :=_faeb ._cade [_acg ];for _ ,_dfab :=range _gde {_fbea =append (_fbea ,_dfab ._cdeef );};};return _fe .Sprintf ("\u0025.\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065=\u0025\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0025\u0071",_faeb .PdfRectangle ,_faeb ._bdfd ,len (_fbea ),_fbea );
};func (_gfbbf *textWord )computeText ()string {_cdea :=make ([]string ,len (_gfbbf ._afcbb ));for _afeg ,_gdagd :=range _gfbbf ._afcbb {_cdea [_afeg ]=_gdagd ._daae ;};return _cc .Join (_cdea ,"");};func (_fdbg *shapesState )stroke (_abbe *[]pathSection ){_bga :=pathSection {_fgefd :_fdbg ._bdbb ,Color :_fdbg ._acab .getStrokeColor ()};
*_abbe =append (*_abbe ,_bga );if _eadg {_fe .Printf ("\u0020 \u0020\u0020S\u0054\u0052\u004fK\u0045\u003a\u0020\u0025\u0064\u0020\u0073t\u0072\u006f\u006b\u0065\u0073\u0020s\u0073\u003d\u0025\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d%\u002b\u0076\u0020\u0025\u0036\u002e\u0032\u0066\u000a",len (*_abbe ),_fdbg ,_fdbg ._acab .getStrokeColor (),_bga .bbox ());
if _aebd {for _ddec ,_gbeg :=range _fdbg ._bdbb {_fe .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_ddec ,_gbeg );if _ddec ==10{break ;};};};};};func _fdffd (_afba int ,_dagf func (int ,int )bool )[]int {_baaab :=make ([]int ,_afba );for _eegbb :=range _baaab {_baaab [_eegbb ]=_eegbb ;
};_d .Slice (_baaab ,func (_dagc ,_adgd int )bool {return _dagf (_baaab [_dagc ],_baaab [_adgd ])});return _baaab ;};func (_ebgbc pathSection )bbox ()_ga .PdfRectangle {_ccba :=_ebgbc ._fgefd [0]._gabf [0];_aaga :=_ga .PdfRectangle {Llx :_ccba .X ,Urx :_ccba .X ,Lly :_ccba .Y ,Ury :_ccba .Y };
_bed :=func (_dege _efc .Point ){if _dege .X < _aaga .Llx {_aaga .Llx =_dege .X ;}else if _dege .X > _aaga .Urx {_aaga .Urx =_dege .X ;};if _dege .Y < _aaga .Lly {_aaga .Lly =_dege .Y ;}else if _dege .Y > _aaga .Ury {_aaga .Ury =_dege .Y ;};};for _ ,_acbc :=range _ebgbc ._fgefd [0]._gabf [1:]{_bed (_acbc );
};for _ ,_egcf :=range _ebgbc ._fgefd [1:]{for _ ,_geac :=range _egcf ._gabf {_bed (_geac );};};return _aaga ;};func (_eea *wordBag )absorb (_gabg *wordBag ){_cfcb :=_gabg .makeRemovals ();for _gdfa ,_cgeg :=range _gabg ._cade {for _ ,_bebg :=range _cgeg {_eea .pullWord (_bebg ,_gdfa ,_cfcb );
};};_gabg .applyRemovals (_cfcb );};func (_ggba *subpath )close (){if !_cbbg (_ggba ._gabf [0],_ggba .last ()){_ggba .add (_ggba ._gabf [0]);};_ggba ._beeb =true ;_ggba .removeDuplicates ();};func _abgba (_dgcc float64 ,_ccdbg int )int {if _ccdbg ==0{_ccdbg =1;
};_fabe :=float64 (_ccdbg );return int (_ca .Round (_dgcc /_fabe )*_fabe );};

// PageText represents the layout of text on a device page.
type PageText struct{_bec []*textMark ;_caea string ;_acbf []TextMark ;_gdg []TextTable ;_cgb _ga .PdfRectangle ;_abcg []pathSection ;_babf []pathSection ;};func (_egf *imageExtractContext )extractXObjectImage (_dga *_de .PdfObjectName ,_gdd _ef .GraphicsState ,_fdf *_ga .PdfPageResources )error {_adf ,_ :=_fdf .GetXObjectByName (*_dga );
if _adf ==nil {return nil ;};_cbb ,_dfe :=_egf ._dac [_adf ];if !_dfe {_dda ,_cf :=_fdf .GetXObjectImageByName (*_dga );if _cf !=nil {return _cf ;};if _dda ==nil {return nil ;};_bgb ,_cf :=_dda .ToImage ();if _cf !=nil {return _cf ;};_cbb =&cachedImage {_egc :_bgb ,_dd :_dda .ColorSpace };
_egf ._dac [_adf ]=_cbb ;};_ecb :=_cbb ._egc ;_abe :=_cbb ._dd ;_bbg ,_gddd :=_abe .ImageToRGB (*_ecb );if _gddd !=nil {return _gddd ;};_eb .Log .Debug ("@\u0044\u006f\u0020\u0043\u0054\u004d\u003a\u0020\u0025\u0073",_gdd .CTM .String ());_ffb :=ImageMark {Image :&_bbg ,Width :_gdd .CTM .ScalingFactorX (),Height :_gdd .CTM .ScalingFactorY (),Angle :_gdd .CTM .Angle ()};
_ffb .X ,_ffb .Y =_gdd .CTM .Translation ();_egf ._dg =append (_egf ._dg ,_ffb );_egf ._bf ++;return nil ;};func (_cefg *shapesState )closePath (){if _cefg ._dce {_cefg ._bdbb =append (_cefg ._bdbb ,_daeg (_cefg ._ffdd ));_cefg ._dce =false ;}else if len (_cefg ._bdbb )==0{if _ccade {_eb .Log .Debug ("\u0063\u006c\u006f\u0073eP\u0061\u0074\u0068\u0020\u0077\u0069\u0074\u0068\u0020\u006e\u006f\u0020\u0070\u0061t\u0068");
};_cefg ._dce =false ;return ;};_cefg ._bdbb [len (_cefg ._bdbb )-1].close ();if _ccade {_eb .Log .Info ("\u0063\u006c\u006f\u0073\u0065\u0050\u0061\u0074\u0068\u003a\u0020\u0025\u0073",_cefg );};};func _cdg (_babc ,_fffb _ga .PdfRectangle )_ga .PdfRectangle {return _ga .PdfRectangle {Llx :_ca .Min (_babc .Llx ,_fffb .Llx ),Lly :_ca .Min (_babc .Lly ,_fffb .Lly ),Urx :_ca .Max (_babc .Urx ,_fffb .Urx ),Ury :_ca .Max (_babc .Ury ,_fffb .Ury )};
};func _cgfe (_ddae ,_fegf _efc .Point )bool {_eadde :=_ca .Abs (_ddae .X -_fegf .X );_dcdg :=_ca .Abs (_ddae .Y -_fegf .Y );return _bdfb (_dcdg ,_eadde );};var _gad =TextMark {Text :"\u005b\u0058\u005d",Original :"\u0020",Meta :true ,FillColor :_ea .White ,StrokeColor :_ea .White };
func (_cfcbf paraList )yNeighbours (_afac float64 )map[*textPara ][]int {_aaab :=make ([]event ,2*len (_cfcbf ));if _afac ==0{for _cfgab ,_ebacb :=range _cfcbf {_aaab [2*_cfgab ]=event {_ebacb .Lly ,true ,_cfgab };_aaab [2*_cfgab +1]=event {_ebacb .Ury ,false ,_cfgab };
};}else {for _fadgd ,_bdfbf :=range _cfcbf {_aaab [2*_fadgd ]=event {_bdfbf .Lly -_afac *_bdfbf .fontsize (),true ,_fadgd };_aaab [2*_fadgd +1]=event {_bdfbf .Ury +_afac *_bdfbf .fontsize (),false ,_fadgd };};};return _cfcbf .eventNeighbours (_aaab );};
func (_deea *wordBag )firstWord (_fag int )*textWord {return _deea ._cade [_fag ][0]};func _cfed (_gace _ga .PdfRectangle )textState {return textState {_bdcb :100,_afbbc :RenderModeFill ,_ada :_gace };};type gridTiling struct{_ga .PdfRectangle ;_bgff []float64 ;
_gefe []float64 ;_ecbd map[float64 ]map[float64 ]gridTile ;};func (_eegc *subpath )makeRectRuling (_acdaa _ea .Color )(*ruling ,bool ){if _babcd {_eb .Log .Info ("\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0070\u0061\u0074\u0068\u003d\u0025\u0076",_eegc );
};_aed :=_eegc ._gabf [:4];_abfa :=make (map[int ]rulingKind ,len (_aed ));for _cgcde ,_degbg :=range _aed {_gbea :=_eegc ._gabf [(_cgcde +1)%4];_abfa [_cgcde ]=_cgddc (_degbg ,_gbea );if _babcd {_fe .Printf ("\u0025\u0034\u0064: \u0025\u0073\u0020\u003d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066",_cgcde ,_abfa [_cgcde ],_degbg ,_gbea );
};};if _babcd {_fe .Printf ("\u0020\u0020\u0020\u006b\u0069\u006e\u0064\u0073\u003d\u0025\u002b\u0076\u000a",_abfa );};var _befee ,_gcb []int ;for _eabec ,_edgg :=range _abfa {switch _edgg {case _acec :_gcb =append (_gcb ,_eabec );case _aege :_befee =append (_befee ,_eabec );
};};if _babcd {_fe .Printf ("\u0020\u0020 \u0068\u006f\u0072z\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_gcb ),_gcb );_fe .Printf ("\u0020\u0020 \u0076\u0065\u0072t\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_befee ),_befee );
};_ebea :=(len (_gcb )==2&&len (_befee )==2)||(len (_gcb )==2&&len (_befee )==0&&_cgfe (_aed [_gcb [0]],_aed [_gcb [1]]))||(len (_befee )==2&&len (_gcb )==0&&_faaa (_aed [_befee [0]],_aed [_befee [1]]));if _babcd {_fe .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_gcb ),len (_befee ),_ebea );
};if !_ebea {if _babcd {_eb .Log .Error ("\u0021!\u006d\u0061\u006b\u0065R\u0065\u0063\u0074\u0052\u0075l\u0069n\u0067:\u0020\u0070\u0061\u0074\u0068\u003d\u0025v",_eegc );_fe .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_gcb ),len (_befee ),_ebea );
};return &ruling {},false ;};if len (_befee )==0{for _bcad ,_bgfca :=range _abfa {if _bgfca !=_acec {_befee =append (_befee ,_bcad );};};};if len (_gcb )==0{for _cecc ,_dgfe :=range _abfa {if _dgfe !=_aege {_gcb =append (_gcb ,_cecc );};};};if _babcd {_eb .Log .Info ("\u006da\u006b\u0065R\u0065\u0063\u0074\u0052u\u006c\u0069\u006eg\u003a\u0020\u0068\u006f\u0072\u007a\u0073\u003d\u0025d \u0076\u0065\u0072t\u0073\u003d%\u0064\u0020\u0070\u006f\u0069\u006et\u0073\u003d%\u0064\u000a"+"\u0009\u0020\u0068o\u0072\u007a\u0073\u003d\u0025\u002b\u0076\u000a"+"\u0009\u0020\u0076e\u0072\u0074\u0073\u003d\u0025\u002b\u0076\u000a"+"\t\u0070\u006f\u0069\u006e\u0074\u0073\u003d\u0025\u002b\u0076",len (_gcb ),len (_befee ),len (_aed ),_gcb ,_befee ,_aed );
};var _aadb ,_fdae ,_bcfb ,_bbgbd _efc .Point ;if _aed [_gcb [0]].Y > _aed [_gcb [1]].Y {_bcfb ,_bbgbd =_aed [_gcb [0]],_aed [_gcb [1]];}else {_bcfb ,_bbgbd =_aed [_gcb [1]],_aed [_gcb [0]];};if _aed [_befee [0]].X > _aed [_befee [1]].X {_aadb ,_fdae =_aed [_befee [0]],_aed [_befee [1]];
}else {_aadb ,_fdae =_aed [_befee [1]],_aed [_befee [0]];};_cbdf :=_ga .PdfRectangle {Llx :_aadb .X ,Urx :_fdae .X ,Lly :_bbgbd .Y ,Ury :_bcfb .Y };if _cbdf .Llx > _cbdf .Urx {_cbdf .Llx ,_cbdf .Urx =_cbdf .Urx ,_cbdf .Llx ;};if _cbdf .Lly > _cbdf .Ury {_cbdf .Lly ,_cbdf .Ury =_cbdf .Ury ,_cbdf .Lly ;
};_dgdc :=rectRuling {PdfRectangle :_cbdf ,_gfae :_gdgd (_cbdf ),Color :_acdaa };if _dgdc ._gfae ==_gdga {if _babcd {_eb .Log .Error ("\u006da\u006b\u0065\u0052\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006eg\u003a\u0020\u006b\u0069\u006e\u0064\u003d\u006e\u0069\u006c");
};return nil ,false ;};_cbac ,_dceb :=_dgdc .asRuling ();if !_dceb {if _babcd {_eb .Log .Error ("\u006da\u006b\u0065\u0052\u0065c\u0074\u0052\u0075\u006c\u0069n\u0067:\u0020!\u0069\u0073\u0052\u0075\u006c\u0069\u006eg");};return nil ,false ;};if _eadg {_fe .Printf ("\u0020\u0020\u0020\u0072\u003d\u0025\u0073\u000a",_cbac .String ());
};return _cbac ,true ;};func _ggede (_dbfcb map[int ]intSet )[]int {_agfb :=make ([]int ,0,len (_dbfcb ));for _ddaeb :=range _dbfcb {_agfb =append (_agfb ,_ddaeb );};_d .Ints (_agfb );return _agfb ;};func (_fdbc compositeCell )String ()string {_gccb :="";
if len (_fdbc .paraList )> 0{_gccb =_dgff (_fdbc .paraList .merge ().text (),50);};return _fe .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0070\u0061\u0072a\u0073\u0020\u0025\u0071",_fdbc .PdfRectangle ,len (_fdbc .paraList ),_gccb );
};func (_edgef *ruling )encloses (_ebbd ,_fged float64 )bool {return _edgef ._dccfd -_afdf <=_ebbd &&_fged <=_edgef ._dgeg +_afdf ;};type textMark struct{_ga .PdfRectangle ;_dbfb int ;_daae string ;_ccaa string ;_fgea *_ga .PdfFont ;_cba float64 ;_gbdf float64 ;
_gcgb _efc .Matrix ;_edcgg _efc .Point ;_gefa _ga .PdfRectangle ;_efbf _ea .Color ;_eedec _ea .Color ;};

// TextMarkArray is a collection of TextMarks.
type TextMarkArray struct{_dfbb []TextMark };func (_abb *shapesState )moveTo (_cdfg ,_cbd float64 ){_abb ._dce =true ;_abb ._ffdd =_abb .devicePoint (_cdfg ,_cbd );if _ccade {_eb .Log .Info ("\u006d\u006fv\u0065\u0054\u006f\u003a\u0020\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0064\u0065\u0076\u0069\u0063\u0065\u003d%.\u0032\u0066",_cdfg ,_cbd ,_abb ._ffdd );
};};func (_affa *textObject )setTextRenderMode (_cebd int ){if _affa ==nil {return ;};_affa ._abde ._afbbc =RenderMode (_cebd );};func (_fg *imageExtractContext )extractContentStreamImages (_gag string ,_cd *_ga .PdfPageResources )error {_bb :=_ef .NewContentStreamParser (_gag );
_bbf ,_ad :=_bb .Parse ();if _ad !=nil {return _ad ;};if _fg ._dac ==nil {_fg ._dac =map[*_de .PdfObjectStream ]*cachedImage {};};if _fg ._eg ==nil {_fg ._eg =&ImageExtractOptions {};};_eca :=_ef .NewContentStreamProcessor (*_bbf );_eca .AddHandler (_ef .HandlerConditionEnumAllOperands ,"",_fg .processOperand );
return _eca .Process (_cd );};func (_acfdc *textTable )depth ()float64 {_bcag :=1e10;for _acff :=0;_acff < _acfdc ._afbd ;_acff ++{_dfec :=_acfdc .get (_acff ,0);if _dfec ==nil ||_dfec ._cace {continue ;};_bcag =_ca .Min (_bcag ,_dfec .depth ());};return _bcag ;
};func _bbgb (_edcf ,_cfgdf _efc .Point ,_dec _ea .Color )(*ruling ,bool ){_fgba :=lineRuling {_faef :_edcf ,_ebf :_cfgdf ,_cafgf :_aegeg (_edcf ,_cfgdf ),Color :_dec };if _fgba ._cafgf ==_gdga {return nil ,false ;};return _fgba .asRuling ();};func (_dfg *textObject )showText (_gcc []byte )error {return _dfg .renderText (_gcc )};
func (_dbfcg *textPara )fontsize ()float64 {return _dbfcg ._gfgc [0]._cefd };func _dfabb (_bece map[int ][]float64 )[]int {_bfdf :=make ([]int ,len (_bece ));_acgcc :=0;for _ggadab :=range _bece {_bfdf [_acgcc ]=_ggadab ;_acgcc ++;};_d .Ints (_bfdf );return _bfdf ;
};func (_eggc *textObject )setCharSpacing (_acc float64 ){if _eggc ==nil {return ;};_eggc ._abde ._eag =_acc ;if _beeg {_eb .Log .Info ("\u0073\u0065t\u0043\u0068\u0061\u0072\u0053\u0070\u0061\u0063\u0069\u006e\u0067\u003a\u0020\u0025\u002e\u0032\u0066\u0020\u0073\u0074\u0061\u0074e=\u0025\u0073",_acc ,_eggc ._abde .String ());
};};func (_gfa *shapesState )fill (_fcee *[]pathSection ){_agcb :=pathSection {_fgefd :_gfa ._bdbb ,Color :_gfa ._acab .getFillColor ()};*_fcee =append (*_fcee ,_agcb );if _eadg {_gae :=_agcb .bbox ();_fe .Printf ("\u0020 \u0020\u0020\u0046\u0049\u004c\u004c\u003a %\u0032\u0064\u0020\u0066\u0069\u006c\u006c\u0073\u0020\u0028\u0025\u0064\u0020\u006ee\u0077\u0029 \u0073\u0073\u003d%\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d\u0025\u0033\u0076\u0020\u0025\u0036\u002e\u0032f\u003d\u00256.\u0032\u0066\u0078%\u0036\u002e\u0032\u0066\u000a",len (*_fcee ),len (_agcb ._fgefd ),_gfa ,_agcb .Color ,_gae ,_gae .Width (),_gae .Height ());
if _aebd {for _fac ,_bda :=range _agcb ._fgefd {_fe .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_fac ,_bda );if _fac ==10{break ;};};};};};func _cfdb (_cffc *wordBag ,_dbeg *textWord ,_gdcb float64 )bool {return _cffc .Urx <=_dbeg .Llx &&_dbeg .Llx < _cffc .Urx +_gdcb ;
};var _bdda =map[markKind ]string {_geegg :"\u0073\u0074\u0072\u006f\u006b\u0065",_cacd :"\u0066\u0069\u006c\u006c",_gfccg :"\u0061u\u0067\u006d\u0065\u006e\u0074"};func (_gdgbc rulingList )toGrids ()[]rulingList {if _eadg {_eb .Log .Info ("t\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0025\u0073",_gdgbc );
};_gfdf :=_gdgbc .intersections ();if _eadg {_eb .Log .Info ("\u0074\u006f\u0047r\u0069\u0064\u0073\u003a \u0076\u0065\u0063\u0073\u003d\u0025\u0064 \u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003d\u0025\u0064\u0020",len (_gdgbc ),len (_gfdf ));
for _ ,_bgbd :=range _ggede (_gfdf ){_fe .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_bgbd ,_gfdf [_bgbd ]);};};_fbdg :=make (map[int ]intSet ,len (_gdgbc ));for _eggb :=range _gdgbc {_cggec :=_gdgbc .connections (_gfdf ,_eggb );if len (_cggec )> 0{_fbdg [_eggb ]=_cggec ;
};};if _eadg {_eb .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0063\u006fn\u006e\u0065\u0063\u0074s=\u0025\u0064",len (_fbdg ));for _ ,_bfbb :=range _ggede (_fbdg ){_fe .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_bfbb ,_fbdg [_bfbb ]);
};};_bafd :=_fdffd (len (_gdgbc ),func (_gacab ,_cefda int )bool {_feda ,_egca :=len (_fbdg [_gacab ]),len (_fbdg [_cefda ]);if _feda !=_egca {return _feda > _egca ;};return _gdgbc .comp (_gacab ,_cefda );});if _eadg {_eb .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u006f\u0072d\u0065\u0072\u0069\u006eg=\u0025\u0076",_bafd );
};_dgee :=[][]int {{_bafd [0]}};_eaddc :for _ ,_ecce :=range _bafd [1:]{for _abdfc ,_fbgd :=range _dgee {for _ ,_accb :=range _fbgd {if _fbdg [_accb ].has (_ecce ){_dgee [_abdfc ]=append (_fbgd ,_ecce );continue _eaddc ;};};};_dgee =append (_dgee ,[]int {_ecce });
};if _eadg {_eb .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020i\u0067\u0072i\u0064\u0073\u003d\u0025\u0076",_dgee );};_d .SliceStable (_dgee ,func (_dggaf ,_bfbae int )bool {return len (_dgee [_dggaf ])> len (_dgee [_bfbae ])});for _ ,_gada :=range _dgee {_d .Slice (_gada ,func (_gaea ,_cdgb int )bool {return _gdgbc .comp (_gada [_gaea ],_gada [_cdgb ])});
};_dbbff :=make ([]rulingList ,len (_dgee ));for _fcfe ,_aggff :=range _dgee {_fegbb :=make (rulingList ,len (_aggff ));for _ecdeb ,_feac :=range _aggff {_fegbb [_ecdeb ]=_gdgbc [_feac ];};_dbbff [_fcfe ]=_fegbb ;};if _eadg {_eb .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020g\u0072\u0069d\u0073\u003d\u0025\u002b\u0076",_dbbff );
};var _gedf []rulingList ;for _ ,_beef :=range _dbbff {if _aacga ,_fceb :=_beef .isActualGrid ();_fceb {_beef =_aacga ;_beef =_beef .snapToGroups ();_gedf =append (_gedf ,_beef );};};if _eadg {_fegg ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0061\u0063t\u0075\u0061\u006c\u0047ri\u0064\u0073",_gedf );
_eb .Log .Info ("\u0074\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0067\u0072\u0069\u0064\u0073\u003d%\u0064 \u0061\u0063\u0074\u0075\u0061\u006c\u0047\u0072\u0069\u0064\u0073\u003d\u0025\u0064",len (_dbbff ),len (_gedf ));};return _gedf ;};func (_deab gridTiling )complete ()bool {for _ ,_ffdgd :=range _deab ._ecbd {for _ ,_facb :=range _ffdgd {if !_facb .complete (){return false ;
};};};return true ;};func (_fbd *textLine )pullWord (_cdbfb *wordBag ,_fde *textWord ,_adaf int ){_fbd .appendWord (_fde );_cdbfb .removeWord (_fde ,_adaf );};func (_cdcd compositeCell )split (_edfd ,_adgb []float64 )*textTable {_efbfa :=len (_edfd )+1;
_caaea :=len (_adgb )+1;if _cagbf {_eb .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0043\u0065l\u006c\u002e\u0073\u0070l\u0069\u0074\u003a\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a\u0009\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025\u0073\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073=\u0025\u0036\u002e\u0032\u0066\u000a\t\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d%\u0036\u002e\u0032\u0066",_caaea ,_efbfa ,_cdcd ,_edfd ,_adgb );
_fe .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073\u000a",len (_cdcd .paraList ));for _gcee ,_dbfgg :=range _cdcd .paraList {_fe .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gcee ,_dbfgg .String ());};
_fe .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",len (_cdcd .lines ()));for _geee ,_baef :=range _cdcd .lines (){_fe .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_geee ,_baef );};};_edfd =_efdd (_edfd ,_cdcd .Ury ,_cdcd .Lly );
_adgb =_efdd (_adgb ,_cdcd .Llx ,_cdcd .Urx );_gfbb :=make (map[uint64 ]*textPara ,_caaea *_efbfa );_bgac :=textTable {_afbd :_caaea ,_ceccd :_efbfa ,_geegga :_gfbb };_dfabc :=_cdcd .paraList ;_d .Slice (_dfabc ,func (_gdag ,_ddcd int )bool {_aagad ,_cebdde :=_dfabc [_gdag ],_dfabc [_ddcd ];
_ffbeg ,_ggc :=_aagad .Lly ,_cebdde .Lly ;if _ffbeg !=_ggc {return _ffbeg < _ggc ;};return _aagad .Llx < _cebdde .Llx ;});_ege :=make (map[uint64 ]_ga .PdfRectangle ,_caaea *_efbfa );for _cfebc ,_bfffc :=range _edfd [1:]{_acgc :=_edfd [_cfebc ];for _gefc ,_dddb :=range _adgb [1:]{_dacgb :=_adgb [_gefc ];
_ege [_adfaf (_gefc ,_cfebc )]=_ga .PdfRectangle {Llx :_dacgb ,Urx :_dddb ,Lly :_bfffc ,Ury :_acgc };};};if _cagbf {_eb .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0043\u0065l\u006c\u002e\u0073\u0070\u006c\u0069\u0074\u003a\u0020\u0072e\u0063\u0074\u0073");
_fe .Printf ("\u0020\u0020\u0020\u0020");for _bac :=0;_bac < _caaea ;_bac ++{_fe .Printf ("\u0025\u0033\u0030\u0064\u002c\u0020",_bac );};_fe .Println ();for _fadd :=0;_fadd < _efbfa ;_fadd ++{_fe .Printf ("\u0020\u0020\u0025\u0032\u0064\u003a",_fadd );
for _dcbb :=0;_dcbb < _caaea ;_dcbb ++{_fe .Printf ("\u00256\u002e\u0032\u0066\u002c\u0020",_ege [_adfaf (_dcbb ,_fadd )]);};_fe .Println ();};};_edfg :=func (_aafc *textLine )(int ,int ){for _cggf :=0;_cggf < _efbfa ;_cggf ++{for _deacc :=0;_deacc < _caaea ;
_deacc ++{if _cged (_ege [_adfaf (_deacc ,_cggf )],_aafc .PdfRectangle ){return _deacc ,_cggf ;};};};return -1,-1;};_aaecc :=make (map[uint64 ][]*textLine ,_caaea *_efbfa );for _ ,_ddgf :=range _dfabc .lines (){_edfde ,_cfada :=_edfg (_ddgf );if _edfde < 0{continue ;
};_aaecc [_adfaf (_edfde ,_cfada )]=append (_aaecc [_adfaf (_edfde ,_cfada )],_ddgf );};for _cage :=0;_cage < len (_edfd )-1;_cage ++{_dgbbb :=_edfd [_cage ];_afcfa :=_edfd [_cage +1];for _gaad :=0;_gaad < len (_adgb )-1;_gaad ++{_bcgc :=_adgb [_gaad ];
_gfgd :=_adgb [_gaad +1];_ggaf :=_ga .PdfRectangle {Llx :_bcgc ,Urx :_gfgd ,Lly :_afcfa ,Ury :_dgbbb };_eeab :=_aaecc [_adfaf (_gaad ,_cage )];if len (_eeab )==0{continue ;};_dcba :=_gdae (_ggaf ,_eeab );_bgac .put (_gaad ,_cage ,_dcba );};};return &_bgac ;
};func _dcbgg (_ffaf map[float64 ]map[float64 ]gridTile )[]float64 {_ceea :=make ([]float64 ,0,len (_ffaf ));_aeae :=make (map[float64 ]struct{},len (_ffaf ));for _ ,_aefd :=range _ffaf {for _cgecb :=range _aefd {if _ ,_fdccc :=_aeae [_cgecb ];_fdccc {continue ;
};_ceea =append (_ceea ,_cgecb );_aeae [_cgecb ]=struct{}{};};};_d .Float64s (_ceea );return _ceea ;};func _cfgd (_dcbc string )bool {if _c .RuneCountInString (_dcbc )< _dccag {return false ;};_gecc ,_gfbfe :=_c .DecodeLastRuneInString (_dcbc );if _gfbfe <=0||!_cb .Is (_cb .Hyphen ,_gecc ){return false ;
};_gecc ,_gfbfe =_c .DecodeLastRuneInString (_dcbc [:len (_dcbc )-_gfbfe ]);return _gfbfe > 0&&!_cb .IsSpace (_gecc );};func _gdc (_eacf ,_gfcc bounded )float64 {return _ebba (_eacf )-_ebba (_gfcc )};

// Marks returns the TextMark collection for a page. It represents all the text on the page.
func (_bgbc PageText )Marks ()*TextMarkArray {return &TextMarkArray {_dfbb :_bgbc ._acbf }};func _acfd (_abga ,_bcab bounded )float64 {_agcba :=_gdc (_abga ,_bcab );if !_bbfcc (_agcba ){return _agcba ;};return _eabb (_abga ,_bcab );};func (_bcfg *textPara )taken ()bool {return _bcfg ==nil ||_bcfg ._eggcf };
func (_bcbag paraList )extractTables (_bdfbd []gridTiling )paraList {if _cagbf {_eb .Log .Debug ("\u0065\u0078\u0074r\u0061\u0063\u0074\u0054\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_bcbag ));
};if len (_bcbag )< _fcbgd {return _bcbag ;};_fcad :=_bcbag .findTables (_bdfbd );if _cagbf {_eb .Log .Info ("c\u006f\u006d\u0062\u0069\u006e\u0065d\u0020\u0074\u0061\u0062\u006c\u0065s\u0020\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_fcad ));
for _edcaa ,_dafbb :=range _fcad {_dafbb .log (_fe .Sprintf ("c\u006f\u006d\u0062\u0069\u006e\u0065\u0064\u0020\u0025\u0064",_edcaa ));};};return _bcbag .applyTables (_fcad );};type textPara struct{_ga .PdfRectangle ;_dcbgb _ga .PdfRectangle ;_gfgc []*textLine ;
_cfdd *textTable ;_eggcf bool ;_cace bool ;_dcbdc *textPara ;_gdef *textPara ;_bfae *textPara ;_bcae *textPara ;};func (_adgaa *textTable )isExportable ()bool {if _adgaa ._dbedg {return true ;};_baga :=func (_cgefd int )bool {_bccc :=_adgaa .get (0,_cgefd );
if _bccc ==nil {return false ;};_fagcg :=_bccc .text ();_gadd :=_c .RuneCountInString (_fagcg );_caaeac :=_gcbf .MatchString (_fagcg );return _gadd <=1||_caaeac ;};for _baff :=0;_baff < _adgaa ._ceccd ;_baff ++{if !_baga (_baff ){return true ;};};return false ;
};

// ToTextMark returns the public view of `tm`.
func (_cde *textMark )ToTextMark ()TextMark {return TextMark {Text :_cde ._daae ,Original :_cde ._ccaa ,BBox :_cde ._gefa ,Font :_cde ._fgea ,FontSize :_cde ._cba ,FillColor :_cde ._efbf ,StrokeColor :_cde ._eedec ,Orientation :_cde ._dbfb };};func (_aaa *Extractor )extractPageText (_ead string ,_gaca *_ga .PdfPageResources ,_cfge _efc .Matrix ,_fcd int )(*PageText ,int ,int ,error ){_eb .Log .Trace ("\u0065x\u0074\u0072\u0061\u0063t\u0050\u0061\u0067\u0065\u0054e\u0078t\u003a \u006c\u0065\u0076\u0065\u006c\u003d\u0025d",_fcd );
_eege :=&PageText {_cgb :_aaa ._cgf };_ffbe :=_cfed (_aaa ._cgf );var _gbb stateStack ;_abg :=_ecaf (_aaa ,_gaca ,_ef .GraphicsState {},&_ffbe ,&_gbb );_fab :=shapesState {_fda :_cfge ,_dcd :_efc .IdentityMatrix (),_acab :_abg };var _gc bool ;if _fcd > _ggg {_gec :=_g .New ("\u0066\u006f\u0072\u006d s\u0074\u0061\u0063\u006b\u0020\u006f\u0076\u0065\u0072\u0066\u006c\u006f\u0077");
_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0065\u0078\u0074\u0072\u0061\u0063\u0074\u0050\u0061\u0067\u0065\u0054\u0065\u0078\u0074\u002e\u0020\u0072\u0065\u0063u\u0072\u0073\u0069\u006f\u006e\u0020\u006c\u0065\u0076\u0065\u006c\u003d\u0025\u0064 \u0065r\u0072\u003d\u0025\u0076",_fcd ,_gec );
return _eege ,_ffbe ._efg ,_ffbe ._bfbg ,_gec ;};_gbe :=_ef .NewContentStreamParser (_ead );_db ,_aba :=_gbe .Parse ();if _aba !=nil {_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020e\u0078\u0074\u0072a\u0063\u0074\u0050\u0061g\u0065\u0054\u0065\u0078\u0074\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_aba );
return _eege ,_ffbe ._efg ,_ffbe ._bfbg ,_aba ;};_fba :=_ef .NewContentStreamProcessor (*_db );_fba .AddHandler (_ef .HandlerConditionEnumAllOperands ,"",func (_bbe *_ef .ContentStreamOperation ,_ged _ef .GraphicsState ,_gbg *_ga .PdfPageResources )error {_ag :=_bbe .Operand ;
if _cgebb {_eb .Log .Info ("\u0026&\u0026\u0020\u006f\u0070\u003d\u0025s",_bbe );};switch _ag {case "\u0071":if _ccade {_eb .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_fab ._dcd );};_gbb .push (&_ffbe );case "\u0051":if !_gbb .empty (){_ffbe =*_gbb .pop ();
};_fab ._dcd =_ged .CTM ;if _ccade {_eb .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_fab ._dcd );};case "\u0042\u0054":if _gc {_eb .Log .Debug ("\u0042\u0054\u0020\u0063\u0061\u006c\u006c\u0065\u0064\u0020\u0077\u0068\u0069\u006c\u0065 \u0069n\u0020\u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
_eege ._bec =append (_eege ._bec ,_abg ._fdfa ...);};_gc =true ;_bfg :=_ged ;_bfg .CTM =_cfge .Mult (_bfg .CTM );_abg =_ecaf (_aaa ,_gbg ,_bfg ,&_ffbe ,&_gbb );_fab ._acab =_abg ;case "\u0045\u0054":if !_gc {_eb .Log .Debug ("\u0045\u0054\u0020ca\u006c\u006c\u0065\u0064\u0020\u006f\u0075\u0074\u0073i\u0064e\u0020o\u0066 \u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
};_gc =false ;_eege ._bec =append (_eege ._bec ,_abg ._fdfa ...);_abg .reset ();case "\u0054\u002a":_abg .nextLine ();case "\u0054\u0064":if _cda ,_dcf :=_abg .checkOp (_bbe ,2,true );!_cda {_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dcf );
return _dcf ;};_ddc ,_gdf ,_efd :=_bcgag (_bbe .Params );if _efd !=nil {return _efd ;};_abg .moveText (_ddc ,_gdf );case "\u0054\u0044":if _gfb ,_ccb :=_abg .checkOp (_bbe ,2,true );!_gfb {_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ccb );
return _ccb ;};_ddbb ,_aca ,_ccd :=_bcgag (_bbe .Params );if _ccd !=nil {_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ccd );return _ccd ;};_abg .moveTextSetLeading (_ddbb ,_aca );case "\u0054\u006a":if _ceb ,_ggd :=_abg .checkOp (_bbe ,1,true );
!_ceb {_eb .Log .Debug ("\u0045\u0052\u0052\u004fR:\u0020\u0054\u006a\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0065\u0072\u0072\u003d%\u0076",_bbe ,_ggd );return _ggd ;};_dfa ,_dea :=_de .GetStringBytes (_bbe .Params [0]);if !_dea {_eb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020T\u006a\u0020o\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074S\u0074\u0072\u0069\u006e\u0067\u0042\u0079\u0074\u0065\u0073\u0020\u0066a\u0069\u006c\u0065\u0064",_bbe );
return _de .ErrTypeError ;};return _abg .showText (_dfa );case "\u0054\u004a":if _fgd ,_dag :=_abg .checkOp (_bbe ,1,true );!_fgd {_eb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dag );return _dag ;
};_aga ,_afb :=_de .GetArray (_bbe .Params [0]);if !_afb {_eb .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0054\u004a\u0020\u006f\u0070\u003d\u0025s\u0020G\u0065t\u0041r\u0072\u0061\u0079\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_bbe );
return _aba ;};return _abg .showTextAdjusted (_aga );case "\u0027":if _cdf ,_gce :=_abg .checkOp (_bbe ,1,true );!_cdf {_eb .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0027\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gce );return _gce ;};_ffba ,_gfd :=_de .GetStringBytes (_bbe .Params [0]);
if !_gfd {_eb .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020'\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_bbe );return _de .ErrTypeError ;};_abg .nextLine ();return _abg .showText (_ffba );
case "\u0022":if _edb ,_cdc :=_abg .checkOp (_bbe ,3,true );!_edb {_eb .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0022\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cdc );return _cdc ;};_dca ,_fff ,_fegd :=_bcgag (_bbe .Params [:2]);if _fegd !=nil {return _fegd ;
};_daca ,_fgdf :=_de .GetStringBytes (_bbe .Params [2]);if !_fgdf {_eb .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020\"\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_bbe );
return _de .ErrTypeError ;};_abg .setCharSpacing (_dca );_abg .setWordSpacing (_fff );_abg .nextLine ();return _abg .showText (_daca );case "\u0054\u004c":_cdd ,_bbd :=_ecbf (_bbe );if _bbd !=nil {_eb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004c\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bbd );
return _bbd ;};_abg .setTextLeading (_cdd );case "\u0054\u0063":_agb ,_gea :=_ecbf (_bbe );if _gea !=nil {_eb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0063\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gea );return _gea ;};_abg .setCharSpacing (_agb );
case "\u0054\u0066":if _bbec ,_edf :=_abg .checkOp (_bbe ,2,true );!_bbec {_eb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0066\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_edf );return _edf ;};_cbg ,_aag :=_de .GetNameVal (_bbe .Params [0]);if !_aag {_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u004ea\u006d\u0065\u0056\u0061\u006c\u0020\u0066a\u0069\u006c\u0065\u0064",_bbe );
return _de .ErrTypeError ;};_faffe ,_adda :=_de .GetNumberAsFloat (_bbe .Params [1]);if !_aag {_eb .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u0046\u006c\u006f\u0061\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065d\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bbe ,_adda );
return _adda ;};_adda =_abg .setFont (_cbg ,_faffe );_abg ._cfb =_ce .Is (_adda ,_de .ErrNotSupported );if _adda !=nil &&!_abg ._cfb {return _adda ;};case "\u0054\u006d":if _afe ,_ae :=_abg .checkOp (_bbe ,6,true );!_afe {_eb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u006d\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ae );
return _ae ;};_cbgg ,_gab :=_de .GetNumbersAsFloat (_bbe .Params );if _gab !=nil {_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gab );return _gab ;};_abg .setTextMatrix (_cbgg );case "\u0054\u0072":if _cbc ,_gbc :=_abg .checkOp (_bbe ,1,true );
!_cbc {_eb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0072\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gbc );return _gbc ;};_dae ,_cag :=_de .GetIntVal (_bbe .Params [0]);if !_cag {_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0072\u0020\u006f\u0070\u003d\u0025\u0073 \u0047e\u0074\u0049\u006e\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_bbe );
return _de .ErrTypeError ;};_abg .setTextRenderMode (_dae );case "\u0054\u0073":if _bcd ,_ded :=_abg .checkOp (_bbe ,1,true );!_bcd {_eb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0073\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ded );return _ded ;
};_ddbbd ,_cbea :=_de .GetNumberAsFloat (_bbe .Params [0]);if _cbea !=nil {_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cbea );return _cbea ;};_abg .setTextRise (_ddbbd );case "\u0054\u0077":if _ecbg ,_geg :=_abg .checkOp (_bbe ,1,true );
!_ecbg {_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_geg );return _geg ;};_aaad ,_dage :=_de .GetNumberAsFloat (_bbe .Params [0]);if _dage !=nil {_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dage );
return _dage ;};_abg .setWordSpacing (_aaad );case "\u0054\u007a":if _cca ,_aec :=_abg .checkOp (_bbe ,1,true );!_cca {_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_aec );return _aec ;};_fdd ,_affb :=_de .GetNumberAsFloat (_bbe .Params [0]);
if _affb !=nil {_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_affb );return _affb ;};_abg .setHorizScaling (_fdd );case "\u0063\u006d":_fab ._dcd =_ged .CTM ;if _fab ._dcd .Singular (){_bfd :=_efc .IdentityMatrix ().Translate (_fab ._dcd .Translation ());
_eb .Log .Debug ("S\u0069n\u0067\u0075\u006c\u0061\u0072\u0020\u0063\u0074m\u003d\u0025\u0073\u2192%s",_fab ._dcd ,_bfd );_fab ._dcd =_bfd ;};if _ccade {_eb .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_fab ._dcd );};case "\u006d":if len (_bbe .Params )!=2{_eb .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_gb );
return nil ;};_ffbad ,_afbc :=_de .GetNumbersAsFloat (_bbe .Params );if _afbc !=nil {return _afbc ;};_fab .moveTo (_ffbad [0],_ffbad [1]);case "\u006c":if len (_bbe .Params )!=2{_eb .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_gb );
return nil ;};_gacad ,_agg :=_de .GetNumbersAsFloat (_bbe .Params );if _agg !=nil {return _agg ;};_fab .lineTo (_gacad [0],_gacad [1]);case "\u0063":if len (_bbe .Params )!=6{return _gb ;};_bfgb ,_cfa :=_de .GetNumbersAsFloat (_bbe .Params );if _cfa !=nil {return _cfa ;
};_eb .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_bfgb );_fab .cubicTo (_bfgb [0],_bfgb [1],_bfgb [2],_bfgb [3],_bfgb [4],_bfgb [5]);case "\u0076","\u0079":if len (_bbe .Params )!=4{return _gb ;
};_ggge ,_ccc :=_de .GetNumbersAsFloat (_bbe .Params );if _ccc !=nil {return _ccc ;};_eb .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_ggge );_fab .quadraticTo (_ggge [0],_ggge [1],_ggge [2],_ggge [3]);
case "\u0068":_fab .closePath ();case "\u0072\u0065":if len (_bbe .Params )!=4{return _gb ;};_gcf ,_dgd :=_de .GetNumbersAsFloat (_bbe .Params );if _dgd !=nil {return _dgd ;};_fab .drawRectangle (_gcf [0],_gcf [1],_gcf [2],_gcf [3]);_fab .closePath ();
case "\u0053":_fab .stroke (&_eege ._abcg );_fab .clearPath ();case "\u0073":_fab .closePath ();_fab .stroke (&_eege ._abcg );_fab .clearPath ();case "\u0046":_fab .fill (&_eege ._babf );_fab .clearPath ();case "\u0066","\u0066\u002a":_fab .closePath ();
_fab .fill (&_eege ._babf );_fab .clearPath ();case "\u0042","\u0042\u002a":_fab .fill (&_eege ._babf );_fab .stroke (&_eege ._abcg );_fab .clearPath ();case "\u0062","\u0062\u002a":_fab .closePath ();_fab .fill (&_eege ._babf );_fab .stroke (&_eege ._abcg );
_fab .clearPath ();case "\u006e":_fab .clearPath ();case "\u0044\u006f":if len (_bbe .Params )==0{_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0058\u004fbj\u0065c\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006f\u0070\u0065\u0072\u0061n\u0064\u0020\u0066\u006f\u0072\u0020\u0044\u006f\u0020\u006f\u0070\u0065\u0072\u0061\u0074\u006f\u0072.\u0020\u0047\u006f\u0074\u0020\u0025\u002b\u0076\u002e",_bbe .Params );
return _de .ErrRangeError ;};_aagf ,_bfgbe :=_de .GetName (_bbe .Params [0]);if !_bfgbe {_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0044\u006f\u0020\u006f\u0070e\u0072a\u0074\u006f\u0072\u0020\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006fp\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u002b\u0076\u002e",_bbe .Params [0]);
return _de .ErrTypeError ;};_ ,_fca :=_gbg .GetXObjectByName (*_aagf );if _fca !=_ga .XObjectTypeForm {break ;};_dbf ,_bfgbe :=_aaa ._ee [_aagf .String ()];if !_bfgbe {_afg ,_dbe :=_gbg .GetXObjectFormByName (*_aagf );if _dbe !=nil {_eb .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_dbe );
return _dbe ;};_dfd ,_dbe :=_afg .GetContentStream ();if _dbe !=nil {_eb .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_dbe );return _dbe ;};_acb :=_afg .Resources ;if _acb ==nil {_acb =_gbg ;};_ddd ,_ddg ,_aab ,_dbe :=_aaa .extractPageText (string (_dfd ),_acb ,_cfge .Mult (_ged .CTM ),_fcd +1);
if _dbe !=nil {_eb .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_dbe );return _dbe ;};_dbf =textResult {*_ddd ,_ddg ,_aab };_aaa ._ee [_aagf .String ()]=_dbf ;};_fab ._dcd =_ged .CTM ;if _ccade {_eb .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_fab ._dcd );
};_eege ._bec =append (_eege ._bec ,_dbf ._ffd ._bec ...);_eege ._abcg =append (_eege ._abcg ,_dbf ._ffd ._abcg ...);_eege ._babf =append (_eege ._babf ,_dbf ._ffd ._babf ...);_ffbe ._efg +=_dbf ._fad ;_ffbe ._bfbg +=_dbf ._gfe ;case "\u0072\u0067","\u0067","\u006b","\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_abg ._geae .ColorspaceNonStroking =_ged .ColorspaceNonStroking ;
_abg ._geae .ColorNonStroking =_ged .ColorNonStroking ;case "\u0052\u0047","\u0047","\u004b","\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_abg ._geae .ColorspaceStroking =_ged .ColorspaceStroking ;_abg ._geae .ColorStroking =_ged .ColorStroking ;
};return nil ;});_aba =_fba .Process (_gaca );return _eege ,_ffbe ._efg ,_ffbe ._bfbg ,_aba ;};

// NewFromContents creates a new extractor from contents and page resources.
func NewFromContents (contents string ,resources *_ga .PdfPageResources )(*Extractor ,error ){const _efe ="\u0065x\u0074\u0072\u0061\u0063t\u006f\u0072\u002e\u004e\u0065w\u0046r\u006fm\u0043\u006f\u006e\u0074\u0065\u006e\u0074s";_ff :=&Extractor {_cg :contents ,_gf :resources ,_a :map[string ]fontEntry {},_ee :map[string ]textResult {}};
_b .TrackUse (_efe );return _ff ,nil ;};func _gcga (_ccgg _efc .Point )_efc .Matrix {return _efc .TranslationMatrix (_ccgg .X ,_ccgg .Y )};func _gcbd (_dfca *PageText )error {_cfeed :=_b .GetLicenseKey ();if _cfeed !=nil &&_cfeed .IsLicensed ()||_fd {return nil ;
};_fe .Printf ("\u0055\u006e\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0064\u0020c\u006f\u0070\u0079\u0020\u006f\u0066\u0020\u0055\u006e\u0069P\u0044\u0046\u000a");_fe .Println ("-\u0020\u0047\u0065\u0074\u0020\u0061\u0020\u0066\u0072e\u0065\u0020\u0074\u0072\u0069\u0061\u006c l\u0069\u0063\u0065\u006es\u0065\u0020\u006f\u006e\u0020\u0068\u0074\u0074\u0070s:\u002f\u002fu\u006e\u0069\u0064\u006f\u0063\u002e\u0069\u006f");
return _g .New ("\u0075\u006e\u0069\u0070d\u0066\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0020c\u006fd\u0065\u0020\u0072\u0065\u0071\u0075\u0069r\u0065\u0064");};

// PageImages represents extracted images on a PDF page with spatial information:
// display position and size.
type PageImages struct{Images []ImageMark ;};func (_cbae rulingList )primaries ()[]float64 {_caff :=make (map[float64 ]struct{},len (_cbae ));for _ ,_eeddc :=range _cbae {_caff [_eeddc ._efef ]=struct{}{};};_agbd :=make ([]float64 ,len (_caff ));_gedb :=0;
for _aede :=range _caff {_agbd [_gedb ]=_aede ;_gedb ++;};_d .Float64s (_agbd );return _agbd ;};func _cbec (_dgab _ga .PdfRectangle ,_fgdbf ,_dbfbb ,_ffea ,_egbg *ruling )gridTile {_acbag :=_dgab .Llx ;_ggdb :=_dgab .Urx ;_adbc :=_dgab .Lly ;_dcdc :=_dgab .Ury ;
return gridTile {PdfRectangle :_dgab ,_bcba :_fgdbf !=nil &&_fgdbf .encloses (_adbc ,_dcdc ),_aegf :_dbfbb !=nil &&_dbfbb .encloses (_adbc ,_dcdc ),_ddcc :_ffea !=nil &&_ffea .encloses (_acbag ,_ggdb ),_agbfd :_egbg !=nil &&_egbg .encloses (_acbag ,_ggdb )};
};func _ebcg (_bbgf []compositeCell )[]float64 {var _dfbd []*textLine ;_acgf :=0;for _ ,_fgagd :=range _bbgf {_acgf +=len (_fgagd .paraList );_dfbd =append (_dfbd ,_fgagd .lines ()...);};_d .Slice (_dfbd ,func (_cdbb ,_cdaaa int )bool {_eebdb ,_egcaf :=_dfbd [_cdbb ],_dfbd [_cdaaa ];
_abcf ,_ggca :=_eebdb ._dbbc ,_egcaf ._dbbc ;if !_bbfcc (_abcf -_ggca ){return _abcf < _ggca ;};return _eebdb .Llx < _egcaf .Llx ;});if _cagbf {_fe .Printf ("\u0020\u0020\u0020 r\u006f\u0077\u0042\u006f\u0072\u0064\u0065\u0072\u0073:\u0020%\u0064 \u0070a\u0072\u0061\u0073\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",_acgf ,len (_dfbd ));
for _caada ,_egdc :=range _dfbd {_fe .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_caada ,_egdc );};};var _bdge []float64 ;_cecd :=_dfbd [0];var _cebb [][]*textLine ;_cebeg :=[]*textLine {_cecd };for _fbadd ,_dddf :=range _dfbd [1:]{if _dddf .Ury < _cecd .Lly {_edag :=0.5*(_dddf .Ury +_cecd .Lly );
if _cagbf {_fe .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u003c\u0020\u0025\u0036.\u0032f\u0020\u0062\u006f\u0072\u0064\u0065\u0072\u003d\u0025\u0036\u002e\u0032\u0066\u000a"+"\u0009\u0020\u0071\u003d\u0025\u0073\u000a\u0009\u0020p\u003d\u0025\u0073\u000a",_fbadd ,_dddf .Ury ,_cecd .Lly ,_edag ,_cecd ,_dddf );
};_bdge =append (_bdge ,_edag );_cebb =append (_cebb ,_cebeg );_cebeg =nil ;};_cebeg =append (_cebeg ,_dddf );if _dddf .Lly < _cecd .Lly {_cecd =_dddf ;};};if len (_cebeg )> 0{_cebb =append (_cebb ,_cebeg );};if _cagbf {_fe .Printf (" \u0020\u0020\u0020\u0020\u0020\u0020 \u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073\u003d%\u0036.\u0032\u0066\u000a",_bdge );
};if _cagbf {_eb .Log .Info ("\u0072\u006f\u0077\u003d\u0025\u0064",len (_bbgf ));for _cfbb ,_ddfcg :=range _bbgf {_fe .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cfbb ,_ddfcg );};_eb .Log .Info ("\u0067r\u006f\u0075\u0070\u0073\u003d\u0025d",len (_cebb ));
for _feea ,_eecfa :=range _cebb {_fe .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0064\u000a",_feea ,len (_eecfa ));for _febd ,_fdab :=range _eecfa {_fe .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_febd ,_fdab );};};};_gacaf :=true ;
for _daabf ,_ggfdf :=range _cebb {_bacc :=true ;for _fgfge ,_dbgc :=range _bbgf {if _cagbf {_fe .Printf ("\u0020\u0020\u0020\u007e\u007e\u007e\u0067\u0072\u006f\u0075\u0070\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u0020\u0063\u0065\u006cl\u0020\u0025\u0064\u0020\u006ff\u0020\u0025d\u0020\u0025\u0073\u000a",_daabf ,len (_cebb ),_fgfge ,len (_bbgf ),_dbgc );
};if !_dbgc .hasLines (_ggfdf ){if _cagbf {_fe .Printf ("\u0020\u0020\u0020\u0021\u0021\u0021\u0067\u0072\u006f\u0075\u0070\u0020\u0025d\u0020\u006f\u0066\u0020\u0025\u0064 \u0063\u0065\u006c\u006c\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064 \u004f\u0055\u0054\u000a",_daabf ,len (_cebb ),_fgfge ,len (_bbgf ));
};_bacc =false ;break ;};};if !_bacc {_gacaf =false ;break ;};};if !_gacaf {if _cagbf {_eb .Log .Info ("\u0072\u006f\u0077\u0020\u0063o\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u0020\u0064\u006f\u006e\u0027\u0074 \u0073\u0070\u0061\u006e\u0020\u0061\u006c\u006c\u0020\u0063\u0065\u006c\u006c\u0073\u0020\u0069\u006e\u0020\u0072\u006f\u0077\u002e\u0020\u0069\u0067\u006e\u006f\u0072\u0069\u006eg");
};_bdge =nil ;};if _cagbf &&_bdge !=nil {_fe .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u002a\u002a*\u0072\u006f\u0077\u0043\u006f\u0072\u0072i\u0064\u006f\u0072\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u000a",_bdge );};return _bdge ;};
func _eadb (_fffd []*wordBag )[]*wordBag {if len (_fffd )<=1{return _fffd ;};if _dbae {_eb .Log .Info ("\u006d\u0065\u0072\u0067\u0065\u0057\u006f\u0072\u0064B\u0061\u0067\u0073\u003a");};_d .Slice (_fffd ,func (_fgdb ,_fefc int )bool {_addaf ,_beg :=_fffd [_fgdb ],_fffd [_fefc ];
_dbac :=_addaf .Width ()*_addaf .Height ();_ega :=_beg .Width ()*_beg .Height ();if _dbac !=_ega {return _dbac > _ega ;};if _addaf .Height ()!=_beg .Height (){return _addaf .Height ()> _beg .Height ();};return _fgdb < _fefc ;});var _ccfa []*wordBag ;_cgbga :=make (intSet );
for _efcca :=0;_efcca < len (_fffd );_efcca ++{if _cgbga .has (_efcca ){continue ;};_cdfe :=_fffd [_efcca ];for _bdfda :=_efcca +1;_bdfda < len (_fffd );_bdfda ++{if _cgbga .has (_efcca ){continue ;};_aggf :=_fffd [_bdfda ];_gdgb :=_cdfe .PdfRectangle ;
_gdgb .Llx -=_cdfe ._bdfd ;if _cged (_gdgb ,_aggf .PdfRectangle ){_cdfe .absorb (_aggf );_cgbga .add (_bdfda );};};_ccfa =append (_ccfa ,_cdfe );};if len (_fffd )!=len (_ccfa )+len (_cgbga ){_eb .Log .Error ("\u006d\u0065\u0072ge\u0057\u006f\u0072\u0064\u0042\u0061\u0067\u0073\u003a \u0025d\u2192%\u0064 \u0061\u0062\u0073\u006f\u0072\u0062\u0065\u0064\u003d\u0025\u0064",len (_fffd ),len (_ccfa ),len (_cgbga ));
};return _ccfa ;};func (_cbad rulingList )splitSec ()[]rulingList {_d .Slice (_cbad ,func (_cgea ,_aecf int )bool {_acbd ,_edbfg :=_cbad [_cgea ],_cbad [_aecf ];if _acbd ._dccfd !=_edbfg ._dccfd {return _acbd ._dccfd < _edbfg ._dccfd ;};return _acbd ._dgeg < _edbfg ._dgeg ;
});_gggd :=make (map[*ruling ]struct{},len (_cbad ));_cfgb :=func (_cdgg *ruling )rulingList {_gbgg :=rulingList {_cdgg };_gggd [_cdgg ]=struct{}{};for _ ,_edegg :=range _cbad {if _ ,_dfgbg :=_gggd [_edegg ];_dfgbg {continue ;};for _ ,_dcebc :=range _gbgg {if _edegg .alignsSec (_dcebc ){_gbgg =append (_gbgg ,_edegg );
_gggd [_edegg ]=struct{}{};break ;};};};return _gbgg ;};_eefdf :=[]rulingList {_cfgb (_cbad [0])};for _ ,_bfag :=range _cbad [1:]{if _ ,_ggaeg :=_gggd [_bfag ];_ggaeg {continue ;};_eefdf =append (_eefdf ,_cfgb (_bfag ));};return _eefdf ;};func (_facf gridTile )complete ()bool {return _facf .numBorders ()==4};
type textLine struct{_ga .PdfRectangle ;_dbbc float64 ;_gbce []*textWord ;_cefd float64 ;};func (_abgfd *wordBag )sort (){for _ ,_ace :=range _abgfd ._cade {_d .Slice (_ace ,func (_cadg ,_ccgf int )bool {return _eabb (_ace [_cadg ],_ace [_ccgf ])< 0});
};};

// ImageExtractOptions contains options for controlling image extraction from
// PDF pages.
type ImageExtractOptions struct{IncludeInlineStencilMasks bool ;};func (_gagff *textTable )compositeRowCorridors ()map[int ][]float64 {_gbee :=make (map[int ][]float64 ,_gagff ._ceccd );if _cagbf {_eb .Log .Info ("c\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0052\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073:\u0020h\u003d\u0025\u0064",_gagff ._ceccd );
};for _fdff :=1;_fdff < _gagff ._ceccd ;_fdff ++{var _agdge []compositeCell ;for _dgbag :=0;_dgbag < _gagff ._afbd ;_dgbag ++{if _fffg ,_ecgda :=_gagff ._dbbd [_adfaf (_dgbag ,_fdff )];_ecgda {_agdge =append (_agdge ,_fffg );};};if len (_agdge )==0{continue ;
};_cdeeb :=_ebcg (_agdge );_gbee [_fdff ]=_cdeeb ;if _cagbf {_fe .Printf ("\u0020\u0020\u0020\u0025\u0032\u0064\u003a\u0020\u00256\u002e\u0032\u0066\u000a",_fdff ,_cdeeb );};};return _gbee ;};func _cdgf (_cgeb ,_fbeb _ga .PdfRectangle )bool {return _cgeb .Lly <=_fbeb .Ury &&_fbeb .Lly <=_cgeb .Ury ;
};

// String returns a string describing the current state of the textState stack.
func (_bab *stateStack )String ()string {_agac :=[]string {_fe .Sprintf ("\u002d\u002d\u002d\u002d f\u006f\u006e\u0074\u0020\u0073\u0074\u0061\u0063\u006b\u003a\u0020\u0025\u0064",len (*_bab ))};for _febb ,_aea :=range *_bab {_gbef :="\u003c\u006e\u0069l\u003e";
if _aea !=nil {_gbef =_aea .String ();};_agac =append (_agac ,_fe .Sprintf ("\u0009\u0025\u0032\u0064\u003a\u0020\u0025\u0073",_febb ,_gbef ));};return _cc .Join (_agac ,"\u000a");};func _bfc (_degga string )string {_cdba :=[]rune (_degga );return string (_cdba [:len (_cdba )-1])};
func (_fbba *textTable )getDown ()paraList {_defb :=make (paraList ,_fbba ._afbd );for _gaga :=0;_gaga < _fbba ._afbd ;_gaga ++{_bcbe :=_fbba .get (_gaga ,_fbba ._ceccd -1)._bcae ;if _bcbe .taken (){return nil ;};_defb [_gaga ]=_bcbe ;};for _egbda :=0;
_egbda < _fbba ._afbd -1;_egbda ++{if _defb [_egbda ]._gdef !=_defb [_egbda +1]{return nil ;};};return _defb ;};func _gdgd (_cegg _ga .PdfRectangle )rulingKind {_dbbe :=_cegg .Width ();_cdgd :=_cegg .Height ();if _dbbe > _cdgd {if _dbbe >=_efeg {return _acec ;
};}else {if _cdgd >=_efeg {return _aege ;};};return _gdga ;};func (_babff rulingList )sort (){_d .Slice (_babff ,_babff .comp )};func (_afbb *stateStack )top ()*textState {if _afbb .empty (){return nil ;};return (*_afbb )[_afbb .size ()-1];};func (_eggbc rulingList )secMinMax ()(float64 ,float64 ){_dddd ,_dcge :=_eggbc [0]._dccfd ,_eggbc [0]._dgeg ;
for _ ,_eabbg :=range _eggbc [1:]{if _eabbg ._dccfd < _dddd {_dddd =_eabbg ._dccfd ;};if _eabbg ._dgeg > _dcge {_dcge =_eabbg ._dgeg ;};};return _dddd ,_dcge ;};func (_agae *textObject )getFont (_fbfc string )(*_ga .PdfFont ,error ){if _agae ._gda ._a !=nil {_agae ._gda ._df ++;
_abfd ,_adad :=_agae ._gda ._a [_fbfc ];if _adad {_abfd ._fbeg =_agae ._gda ._df ;return _abfd ._bce ,nil ;};};_gabd ,_edbf :=_agae .getFontDirect (_fbfc );if _edbf !=nil {return nil ,_edbf ;};if _agae ._gda ._a !=nil {_bdf :=fontEntry {_gabd ,_agae ._gda ._df };
if len (_agae ._gda ._a )>=_bbb {var _eab []string ;for _bca :=range _agae ._gda ._a {_eab =append (_eab ,_bca );};_d .Slice (_eab ,func (_caag ,_bbfg int )bool {return _agae ._gda ._a [_eab [_caag ]]._fbeg < _agae ._gda ._a [_eab [_bbfg ]]._fbeg ;});delete (_agae ._gda ._a ,_eab [0]);
};_agae ._gda ._a [_fbfc ]=_bdf ;};return _gabd ,nil ;};func (_eacg *textLine )toTextMarks (_gebb *int )[]TextMark {var _fgbg []TextMark ;for _ ,_ddde :=range _eacg ._gbce {if _ddde ._ddgbe {_fgbg =_eedd (_fgbg ,_gebb ,"\u0020");};_ccacd :=_ddde .toTextMarks (_gebb );
_fgbg =append (_fgbg ,_ccacd ...);};return _fgbg ;};func _ccdf (_edecc ,_adca _ga .PdfRectangle )bool {return _adca .Llx <=_edecc .Urx &&_edecc .Llx <=_adca .Urx ;};func (_gceb *shapesState )quadraticTo (_cebdd ,_fadc ,_bbfe ,_afbe float64 ){if _ccade {_eb .Log .Info ("\u0071\u0075\u0061d\u0072\u0061\u0074\u0069\u0063\u0054\u006f\u003a");
};_gceb .addPoint (_bbfe ,_afbe );};var _adcd =map[rulingKind ]string {_gdga :"\u006e\u006f\u006e\u0065",_acec :"\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_aege :"\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c"};func _deb (_bfgd ,_cfeb bounded )float64 {_gbgb :=_eabb (_bfgd ,_cfeb );
if !_bbfcc (_gbgb ){return _gbgb ;};return _gdc (_bfgd ,_cfeb );};type event struct{_baeed float64 ;_geef bool ;_bfeb int ;};

// ImageMark represents an image drawn on a page and its position in device coordinates.
// All coordinates are in device coordinates.
type ImageMark struct{Image *_ga .Image ;

// Dimensions of the image as displayed in the PDF.
Width float64 ;Height float64 ;

// Position of the image in PDF coordinates (lower left corner).
X float64 ;Y float64 ;

// Angle in degrees, if rotated.
Angle float64 ;};type paraList []*textPara ;func (_eebfd rulingList )intersections ()map[int ]intSet {var _cadd ,_ebga []int ;for _eeebf ,_cffb :=range _eebfd {switch _cffb ._bfaa {case _aege :_cadd =append (_cadd ,_eeebf );case _acec :_ebga =append (_ebga ,_eeebf );
};};if len (_cadd )< _gbf +1||len (_ebga )< _faba +1{return nil ;};if len (_cadd )+len (_ebga )> _bbgaf {_eb .Log .Debug ("\u0069\u006e\u0074\u0065\u0072\u0073e\u0063\u0074\u0069\u006f\u006e\u0073\u003a\u0020\u0054\u004f\u004f\u0020\u004d\u0041\u004e\u0059\u0020\u0072\u0075\u006ci\u006e\u0067\u0073\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u003d\u0020%\u0064 \u0078\u0020\u0025\u0064",len (_eebfd ),len (_cadd ),len (_ebga ));
return nil ;};_ggfe :=make (map[int ]intSet ,len (_cadd )+len (_ebga ));for _ ,_bdcc :=range _cadd {for _ ,_cbfd :=range _ebga {if _eebfd [_bdcc ].intersects (_eebfd [_cbfd ]){if _ ,_fdce :=_ggfe [_bdcc ];!_fdce {_ggfe [_bdcc ]=make (intSet );};if _ ,_ceeg :=_ggfe [_cbfd ];
!_ceeg {_ggfe [_cbfd ]=make (intSet );};_ggfe [_bdcc ].add (_cbfd );_ggfe [_cbfd ].add (_bdcc );};};};return _ggfe ;};func (_bcbcg *textTable )toTextTable ()TextTable {if _cagbf {_eb .Log .Info ("t\u006fT\u0065\u0078\u0074\u0054\u0061\u0062\u006c\u0065:\u0020\u0025\u0064\u0020x \u0025\u0064",_bcbcg ._afbd ,_bcbcg ._ceccd );
};_dffc :=make ([][]TableCell ,_bcbcg ._ceccd );for _gcea :=0;_gcea < _bcbcg ._ceccd ;_gcea ++{_dffc [_gcea ]=make ([]TableCell ,_bcbcg ._afbd );for _dcga :=0;_dcga < _bcbcg ._afbd ;_dcga ++{_faefa :=_bcbcg .get (_dcga ,_gcea );if _faefa ==nil {continue ;
};if _cagbf {_fe .Printf ("\u0025\u0034\u0064 \u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_dcga ,_gcea ,_faefa );};_dffc [_gcea ][_dcga ].Text =_faefa .text ();_feaec :=0;_dffc [_gcea ][_dcga ].Marks ._dfbb =_faefa .toTextMarks (&_feaec );};};return TextTable {W :_bcbcg ._afbd ,H :_bcbcg ._ceccd ,Cells :_dffc };
};func _eaef (_affae map[float64 ]gridTile )[]float64 {_dgba :=make ([]float64 ,0,len (_affae ));for _accc :=range _affae {_dgba =append (_dgba ,_accc );};_d .Float64s (_dgba );return _dgba ;};func _dccf (_cbbb *wordBag ,_cdfd float64 ,_cafg ,_dggg rulingList )[]*wordBag {var _fafb []*wordBag ;
for _ ,_ggae :=range _cbbb .depthIndexes (){_babfa :=false ;for !_cbbb .empty (_ggae ){_addca :=_cbbb .firstReadingIndex (_ggae );_ccef :=_cbbb .firstWord (_addca );_dbdf :=_daegg (_ccef ,_cdfd ,_cafg ,_dggg );_cbbb .removeWord (_ccef ,_addca );if _gca {_eb .Log .Info ("\u0066\u0069\u0072\u0073\u0074\u0057\u006f\u0072\u0064\u0020\u005e\u005e^\u005e\u0020\u0025\u0073",_ccef .String ());
};for _aacg :=true ;_aacg ;_aacg =_babfa {_babfa =false ;_fedb :=_acef *_dbdf ._bdfd ;_gbda :=_fdbe *_dbdf ._bdfd ;_fddg :=_cfcc *_dbdf ._bdfd ;if _gca {_eb .Log .Info ("\u0070a\u0072a\u0057\u006f\u0072\u0064\u0073\u0020\u0064\u0065\u0070\u0074\u0068 \u0025\u002e\u0032\u0066 \u002d\u0020\u0025\u002e\u0032f\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061\u0044\u0065\u0070\u0074\u0068\u0047\u0061\u0070\u003d\u0025\u002e\u0032\u0066\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061R\u0065\u0061\u0064\u0069\u006e\u0067\u0047\u0061p\u003d\u0025\u002e\u0032\u0066",_dbdf .minDepth (),_dbdf .maxDepth (),_fddg ,_gbda );
};if _cbbb .scanBand ("\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c",_dbdf ,_adgfd (_aacc ,0),_dbdf .minDepth ()-_fddg ,_dbdf .maxDepth ()+_fddg ,_fddb ,false ,false )> 0{_babfa =true ;};if _cbbb .scanBand ("\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_dbdf ,_adgfd (_aacc ,_gbda ),_dbdf .minDepth (),_dbdf .maxDepth (),_dgdf ,false ,false )> 0{_babfa =true ;
};if _babfa {continue ;};_dgedf :=_cbbb .scanBand ("",_dbdf ,_adgfd (_cfdb ,_fedb ),_dbdf .minDepth (),_dbdf .maxDepth (),_fedg ,true ,false );if _dgedf > 0{_dfae :=(_dbdf .maxDepth ()-_dbdf .minDepth ())/_dbdf ._bdfd ;if (_dgedf > 1&&float64 (_dgedf )> 0.3*_dfae )||_dgedf <=10{if _cbbb .scanBand ("\u006f\u0074\u0068e\u0072",_dbdf ,_adgfd (_cfdb ,_fedb ),_dbdf .minDepth (),_dbdf .maxDepth (),_fedg ,false ,true )> 0{_babfa =true ;
};};};};_fafb =append (_fafb ,_dbdf );};};return _fafb ;};func _dbed (_begg []pathSection )rulingList {_ffbed (_begg );if _eadg {_eb .Log .Info ("\u006d\u0061k\u0065\u0053\u0074\u0072\u006f\u006b\u0065\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0064\u0020\u0073\u0074\u0072ok\u0065\u0073",len (_begg ));
};var _cfabd rulingList ;for _ ,_gdecb :=range _begg {for _ ,_bgab :=range _gdecb ._fgefd {if len (_bgab ._gabf )< 2{continue ;};_aabe :=_bgab ._gabf [0];for _ ,_cadf :=range _bgab ._gabf [1:]{if _gacbd ,_ddgd :=_bbgb (_aabe ,_cadf ,_gdecb .Color );_ddgd {_cfabd =append (_cfabd ,_gacbd );
};_aabe =_cadf ;};};};if _eadg {_eb .Log .Info ("m\u0061\u006b\u0065\u0053tr\u006fk\u0065\u0052\u0075\u006c\u0069n\u0067\u0073\u003a\u0020\u0025\u0073",_cfabd );};return _cfabd ;};func (_bbgd *textTable )emptyCompositeRow (_befaa int )bool {for _ccgag :=0;
_ccgag < _bbgd ._afbd ;_ccgag ++{if _bfdcd ,_aaaf :=_bbgd ._dbbd [_adfaf (_ccgag ,_befaa )];_aaaf {if len (_bfdcd .paraList )> 0{return false ;};};};return true ;};func (_ecdb *textWord )absorb (_bcegca *textWord ){_ecdb .PdfRectangle =_cdg (_ecdb .PdfRectangle ,_bcegca .PdfRectangle );
_ecdb ._afcbb =append (_ecdb ._afcbb ,_bcegca ._afcbb ...);};

// Len returns the number of TextMarks in `ma`.
func (_cfec *TextMarkArray )Len ()int {if _cfec ==nil {return 0;};return len (_cfec ._dfbb );};func (_afc *stateStack )empty ()bool {return len (*_afc )==0};func (_afcb *wordBag )empty (_cgg int )bool {_ ,_bfbc :=_afcb ._cade [_cgg ];return !_bfbc };type markKind int ;
func (_dcbf *textPara )toCellTextMarks (_bfgdg *int )[]TextMark {var _abcb []TextMark ;for _becb ,_edd :=range _dcbf ._gfgc {_eeeg :=_edd .toTextMarks (_bfgdg );_ebdc :=_bcdc &&_edd .endsInHyphen ()&&_becb !=len (_dcbf ._gfgc )-1;if _ebdc {_eeeg =_cgde (_eeeg ,_bfgdg );
};_abcb =append (_abcb ,_eeeg ...);if !(_ebdc ||_becb ==len (_dcbf ._gfgc )-1){_abcb =_eedd (_abcb ,_bfgdg ,_dgfg (_edd ._dbbc ,_dcbf ._gfgc [_becb +1]._dbbc ));};};return _abcb ;};type rulingList []*ruling ;func (_aabc *subpath )last ()_efc .Point {return _aabc ._gabf [len (_aabc ._gabf )-1]};


// ExtractPageText returns the text contents of `e` (an Extractor for a page) as a PageText.
// TODO(peterwilliams97): The stats complicate this function signature and aren't very useful.
//                        Replace with a function like Extract() (*PageText, error)
func (_dacg *Extractor )ExtractPageText ()(*PageText ,int ,int ,error ){_fgc ,_ge ,_fdfe ,_add :=_dacg .extractPageText (_dacg ._cg ,_dacg ._gf ,_efc .IdentityMatrix (),0);if _add !=nil &&_add !=_ga .ErrColorOutOfRange {return nil ,0,0,_add ;};_fgc .computeViews ();
_add =_gcbd (_fgc );if _add !=nil {return nil ,0,0,_add ;};return _fgc ,_ge ,_fdfe ,nil ;};func (_ac *imageExtractContext )extractInlineImage (_bd *_ef .ContentStreamInlineImage ,_edg _ef .GraphicsState ,_fcb *_ga .PdfPageResources )error {_ab ,_ebe :=_bd .ToImage (_fcb );
if _ebe !=nil {return _ebe ;};_gd ,_ebe :=_bd .GetColorSpace (_fcb );if _ebe !=nil {return _ebe ;};if _gd ==nil {_gd =_ga .NewPdfColorspaceDeviceGray ();};_cad ,_ebe :=_gd .ImageToRGB (*_ab );if _ebe !=nil {return _ebe ;};_eec :=ImageMark {Image :&_cad ,Width :_edg .CTM .ScalingFactorX (),Height :_edg .CTM .ScalingFactorY (),Angle :_edg .CTM .Angle ()};
_eec .X ,_eec .Y =_edg .CTM .Translation ();_ac ._dg =append (_ac ._dg ,_eec );_ac ._faf ++;return nil ;};

// Elements returns the TextMarks in `ma`.
func (_edc *TextMarkArray )Elements ()[]TextMark {return _edc ._dfbb };func _ageg (_cggb ,_cbfe float64 )bool {return _ca .Abs (_cggb -_cbfe )<=_afdf };func (_agf *wordBag )text ()string {_bcg :=_agf .allWords ();_gge :=make ([]string ,len (_bcg ));for _ccfb ,_edca :=range _bcg {_gge [_ccfb ]=_edca ._cdeef ;
};return _cc .Join (_gge ,"\u0020");};func _bdbc (_fgeec []*textMark ,_cbbeg _ga .PdfRectangle ,_gdbec rulingList ,_bebd []gridTiling )paraList {_eb .Log .Trace ("\u006d\u0061\u006b\u0065\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065\u003a \u0025\u0064\u0020\u0065\u006c\u0065m\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065=\u0025\u002e\u0032\u0066",len (_fgeec ),_cbbeg );
if len (_fgeec )==0{return nil ;};_fccfc :=_acgcg (_fgeec ,_cbbeg );if len (_fccfc )==0{return nil ;};_gdbec .log ("\u006d\u0061\u006be\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065");_gcceb ,_deggb :=_gdbec .vertsHorzs ();_gggfd :=_eaac (_fccfc ,_cbbeg .Ury ,_gcceb ,_deggb );
_badg :=_dccf (_gggfd ,_cbbeg .Ury ,_gcceb ,_deggb );_badg =_eadb (_badg );_fbbf :=make (paraList ,0,len (_badg ));for _ ,_faecc :=range _badg {_dacde :=_faecc .arrangeText ();if _dacde !=nil {_fbbf =append (_fbbf ,_dacde );};};if len (_fbbf )>=_fcbgd {_fbbf =_fbbf .extractTables (_bebd );
};_fbbf .sortReadingOrder ();_fbbf .log ("\u0073\u006f\u0072te\u0064\u0020\u0069\u006e\u0020\u0072\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u006f\u0072\u0064\u0065\u0072");return _fbbf ;};func (_bbdc rectRuling )asRuling ()(*ruling ,bool ){_affg :=ruling {_bfaa :_bbdc ._gfae ,Color :_bbdc .Color ,_feec :_cacd };
switch _bbdc ._gfae {case _aege :_affg ._efef =0.5*(_bbdc .Llx +_bbdc .Urx );_affg ._dccfd =_bbdc .Lly ;_affg ._dgeg =_bbdc .Ury ;_begc ,_dccae :=_bbdc .checkWidth (_bbdc .Llx ,_bbdc .Urx );if !_dccae {if _babcd {_eb .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067V\u0065\u0072\u0074\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_bbdc );
};return nil ,false ;};_affg ._gdab =_begc ;case _acec :_affg ._efef =0.5*(_bbdc .Lly +_bbdc .Ury );_affg ._dccfd =_bbdc .Llx ;_affg ._dgeg =_bbdc .Urx ;_ccca ,_fbdf :=_bbdc .checkWidth (_bbdc .Lly ,_bbdc .Ury );if !_fbdf {if _babcd {_eb .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067H\u006f\u0072\u007a\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_bbdc );
};return nil ,false ;};_affg ._gdab =_ccca ;default:_eb .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_bbdc ._gfae );return nil ,false ;};return &_affg ,true ;};func _fage (_ccbf _ga .PdfRectangle )*ruling {return &ruling {_bfaa :_aege ,_efef :_ccbf .Urx ,_dccfd :_ccbf .Lly ,_dgeg :_ccbf .Ury };
};func (_adcg *wordBag )removeDuplicates (){if _fcdc {_eb .Log .Info ("r\u0065m\u006f\u0076\u0065\u0044\u0075\u0070\u006c\u0069c\u0061\u0074\u0065\u0073: \u0025\u0071",_adcg .text ());};for _ ,_cadec :=range _adcg .depthIndexes (){if len (_adcg ._cade [_cadec ])==0{continue ;
};_eaec :=_adcg ._cade [_cadec ][0];_degef :=_geed *_eaec ._cbaa ;_cfeg :=_eaec ._gfgf ;for _ ,_deace :=range _adcg .depthBand (_cfeg ,_cfeg +_degef ){_cagfb :=map[*textWord ]struct{}{};_agea :=_adcg ._cade [_deace ];for _ ,_ebge :=range _agea {if _ ,_debf :=_cagfb [_ebge ];
_debf {continue ;};for _ ,_bgf :=range _agea {if _ ,_cgddb :=_cagfb [_bgf ];_cgddb {continue ;};if _bgf !=_ebge &&_bgf ._cdeef ==_ebge ._cdeef &&_ca .Abs (_bgf .Llx -_ebge .Llx )< _degef &&_ca .Abs (_bgf .Urx -_ebge .Urx )< _degef &&_ca .Abs (_bgf .Lly -_ebge .Lly )< _degef &&_ca .Abs (_bgf .Ury -_ebge .Ury )< _degef {_cagfb [_bgf ]=struct{}{};
};};};if len (_cagfb )> 0{_addag :=0;for _ ,_efeb :=range _agea {if _ ,_cgec :=_cagfb [_efeb ];!_cgec {_agea [_addag ]=_efeb ;_addag ++;};};_adcg ._cade [_deace ]=_agea [:len (_agea )-len (_cagfb )];if len (_adcg ._cade [_deace ])==0{delete (_adcg ._cade ,_deace );
};};};};};func (_bcdea paraList )eventNeighbours (_eabf []event )map[*textPara ][]int {_d .Slice (_eabf ,func (_bfcag ,_acag int )bool {_affdf ,_geea :=_eabf [_bfcag ],_eabf [_acag ];_gged ,_gbcb :=_affdf ._baeed ,_geea ._baeed ;if _gged !=_gbcb {return _gged < _gbcb ;
};if _affdf ._geef !=_geea ._geef {return _affdf ._geef ;};return _bfcag < _acag ;});_fadf :=make (map[int ]intSet );_cgfb :=make (intSet );for _ ,_gagef :=range _eabf {if _gagef ._geef {_fadf [_gagef ._bfeb ]=make (intSet );for _fceg :=range _cgfb {if _fceg !=_gagef ._bfeb {_fadf [_gagef ._bfeb ].add (_fceg );
_fadf [_fceg ].add (_gagef ._bfeb );};};_cgfb .add (_gagef ._bfeb );}else {_cgfb .del (_gagef ._bfeb );};};_dggf :=map[*textPara ][]int {};for _gbfe ,_dgadf :=range _fadf {_afda :=_bcdea [_gbfe ];if len (_dgadf )==0{_dggf [_afda ]=nil ;continue ;};_dgdb :=make ([]int ,len (_dgadf ));
_cebff :=0;for _gcefb :=range _dgadf {_dgdb [_cebff ]=_gcefb ;_cebff ++;};_dggf [_afda ]=_dgdb ;};return _dggf ;};func _dgg (_fgg ,_faec _ga .PdfRectangle )bool {return _ccdf (_fgg ,_faec )&&_cdgf (_fgg ,_faec )};func (_edgc *textPara )text ()string {_aaccb :=new (_dc .Buffer );
_edgc .writeText (_aaccb );return _aaccb .String ();};func (_eecd *wordBag )depthBand (_cbee ,_efda float64 )[]int {if len (_eecd ._cade )==0{return nil ;};return _eecd .depthRange (_eecd .getDepthIdx (_cbee ),_eecd .getDepthIdx (_efda ));};func (_gabb intSet )has (_baafg int )bool {_ ,_deagg :=_gabb [_baafg ];
return _deagg };func _afggd (_gbbe *wordBag ,_agec int )*textLine {_agd :=_gbbe .firstWord (_agec );_aadag :=textLine {PdfRectangle :_agd .PdfRectangle ,_cefd :_agd ._cbaa ,_dbbc :_agd ._gfgf };_aadag .pullWord (_gbbe ,_agd ,_agec );return &_aadag ;};func (_dgf *textObject )getStrokeColor ()_ea .Color {return _ddfd (_dgf ._geae .ColorspaceStroking ,_dgf ._geae .ColorStroking );
};func (_agecf *textTable )growTable (){_cfdde :=func (_aegegc paraList ){_agecf ._ceccd ++;for _bebceb :=0;_bebceb < _agecf ._afbd ;_bebceb ++{_baeee :=_aegegc [_bebceb ];_agecf .put (_bebceb ,_agecf ._ceccd -1,_baeee );};};_dcdad :=func (_gfaef paraList ){_agecf ._afbd ++;
for _geag :=0;_geag < _agecf ._ceccd ;_geag ++{_debc :=_gfaef [_geag ];_agecf .put (_agecf ._afbd -1,_geag ,_debc );};};if _efa {_agecf .log ("\u0067r\u006f\u0077\u0054\u0061\u0062\u006ce");};for _gaec :=0;;_gaec ++{_caec :=false ;_abdega :=_agecf .getDown ();
_ccbcc :=_agecf .getRight ();if _efa {_fe .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gaec ,_agecf );_fe .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0020\u0064\u006f\u0077\u006e\u003d\u0025\u0073\u000a",_abdega );_fe .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0072\u0069\u0067\u0068\u0074\u003d\u0025\u0073\u000a",_ccbcc );
};if _abdega !=nil &&_ccbcc !=nil {_afcfg :=_abdega [len (_abdega )-1];if !_afcfg .taken ()&&_afcfg ==_ccbcc [len (_ccbcc )-1]{_cfdde (_abdega );if _ccbcc =_agecf .getRight ();_ccbcc !=nil {_dcdad (_ccbcc );_agecf .put (_agecf ._afbd -1,_agecf ._ceccd -1,_afcfg );
};_caec =true ;};};if !_caec &&_abdega !=nil {_cfdde (_abdega );_caec =true ;};if !_caec &&_ccbcc !=nil {_dcdad (_ccbcc );_caec =true ;};if !_caec {break ;};};};func _eabb (_fbfd ,_abdeg bounded )float64 {return _fbfd .bbox ().Llx -_abdeg .bbox ().Llx };
func (_dgaa *textTable )log (_fbga string ){if !_cagbf {return ;};_eb .Log .Info ("~\u007e\u007e\u0020\u0025\u0073\u003a \u0025\u0064\u0020\u0078\u0020\u0025d\u0020\u0067\u0072\u0069\u0064\u003d\u0025t\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0025\u0036\u002e2\u0066",_fbga ,_dgaa ._afbd ,_dgaa ._ceccd ,_dgaa ._dbedg ,_dgaa .PdfRectangle );
for _gaadb :=0;_gaadb < _dgaa ._ceccd ;_gaadb ++{for _gdfb :=0;_gdfb < _dgaa ._afbd ;_gdfb ++{_egfaeg :=_dgaa .get (_gdfb ,_gaadb );if _egfaeg ==nil {continue ;};_fe .Printf ("%\u0034\u0064\u0020\u00252d\u003a \u0025\u0036\u002e\u0032\u0066 \u0025\u0071\u0020\u0025\u0064\u000a",_gdfb ,_gaadb ,_egfaeg .PdfRectangle ,_dgff (_egfaeg .text (),50),_c .RuneCountInString (_egfaeg .text ()));
};};};func _acac (_bgfc _ga .PdfRectangle )*ruling {return &ruling {_bfaa :_acec ,_efef :_bgfc .Lly ,_dccfd :_bgfc .Llx ,_dgeg :_bgfc .Urx };};const (_dacb =1.0e-6;_cedda =1.0e-4;_acfdg =10;_dbda =6;_fgee =0.5;_dfef =0.12;_ggag =0.19;_gcce =0.04;_cbda =0.04;
_cfcc =1.0;_fddb =0.04;_fdbe =0.4;_dgdf =0.7;_acef =1.0;_fedg =0.1;_dad =1.4;_cfee =0.46;_eaaa =0.02;_geed =0.2;_dfbf =0.5;_dccag =4;_bcca =4.0;_fcbgd =6;_eadbe =0.3;_fgde =0.01;_caf =0.02;_gbf =2;_faba =2;_bbgaf =500;_efeg =4.0;_aagb =4.0;_gacc =0.05;
_dfdb =0.1;_afdf =2.0;_ggbc =2.0;_gcfc =1.5;_eeb =3.0;_aeeg =0.25;);type bounded interface{bbox ()_ga .PdfRectangle };func (_ccac *textObject )getFontDirect (_cgcd string )(*_ga .PdfFont ,error ){_agc ,_eefc :=_ccac .getFontDict (_cgcd );if _eefc !=nil {return nil ,_eefc ;
};_bge ,_eefc :=_ga .NewPdfFontFromPdfObject (_agc );if _eefc !=nil {_eb .Log .Debug ("\u0067\u0065\u0074\u0046\u006f\u006e\u0074\u0044\u0069\u0072\u0065\u0063\u0074\u003a\u0020\u004e\u0065\u0077Pd\u0066F\u006f\u006e\u0074\u0046\u0072\u006f\u006d\u0050\u0064\u0066\u004f\u0062j\u0065\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u006e\u0061\u006d\u0065\u003d%\u0023\u0071\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cgcd ,_eefc );
};return _bge ,_eefc ;};func (_ddfc *textTable )markCells (){for _fdcd :=0;_fdcd < _ddfc ._ceccd ;_fdcd ++{for _befa :=0;_befa < _ddfc ._afbd ;_befa ++{_edfc :=_ddfc .get (_befa ,_fdcd );if _edfc !=nil {_edfc ._eggcf =true ;};};};};func _dfacd (_ddeg ,_edbdc int )int {if _ddeg < _edbdc {return _ddeg ;
};return _edbdc ;};func (_ba *textObject )setTextLeading (_gdbe float64 ){if _ba ==nil {return ;};_ba ._abde ._beb =_gdbe ;};func (_ccee *wordBag )firstReadingIndex (_cgcgc int )int {_cedd :=_ccee .firstWord (_cgcgc )._cbaa ;_cagbc :=float64 (_cgcgc +1)*_dbda ;
_degf :=_cagbc +_bcca *_cedd ;_dcgg :=_cgcgc ;for _ ,_age :=range _ccee .depthBand (_cagbc ,_degf ){if _eabb (_ccee .firstWord (_age ),_ccee .firstWord (_dcgg ))< 0{_dcgg =_age ;};};return _dcgg ;};func _cgde (_baaa []TextMark ,_deag *int )[]TextMark {_gabe :=_baaa [len (_baaa )-1];
_dff :=[]rune (_gabe .Text );if len (_dff )==1{_baaa =_baaa [:len (_baaa )-1];_faab :=_baaa [len (_baaa )-1];*_deag =_faab .Offset +len (_faab .Text );}else {_bfbd :=_bfc (_gabe .Text );*_deag +=len (_bfbd )-len (_gabe .Text );_gabe .Text =_bfbd ;};return _baaa ;
};var (_ec =_g .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");_gb =_g .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072"););func _agaa (_fcbdf ,_dfeff *textPara )bool {return _ccdf (_fcbdf ._dcbgb ,_dfeff ._dcbgb )};
var (_degdf =map[rune ]string {0x0060:"\u0300",0x02CB:"\u0300",0x0027:"\u0301",0x00B4:"\u0301",0x02B9:"\u0301",0x02CA:"\u0301",0x005E:"\u0302",0x02C6:"\u0302",0x007E:"\u0303",0x02DC:"\u0303",0x00AF:"\u0304",0x02C9:"\u0304",0x02D8:"\u0306",0x02D9:"\u0307",0x00A8:"\u0308",0x00B0:"\u030a",0x02DA:"\u030a",0x02BA:"\u030b",0x02DD:"\u030b",0x02C7:"\u030c",0x02C8:"\u030d",0x0022:"\u030e",0x02BB:"\u0312",0x02BC:"\u0313",0x0486:"\u0313",0x055A:"\u0313",0x02BD:"\u0314",0x0485:"\u0314",0x0559:"\u0314",0x02D4:"\u031d",0x02D5:"\u031e",0x02D6:"\u031f",0x02D7:"\u0320",0x02B2:"\u0321",0x00B8:"\u0327",0x02CC:"\u0329",0x02B7:"\u032b",0x02CD:"\u0331",0x005F:"\u0332",0x204E:"\u0359"};
);type textResult struct{_ffd PageText ;_fad int ;_gfe int ;};func (_acfed *wordBag )removeWord (_aada *textWord ,_gedg int ){_efcc :=_acfed ._cade [_gedg ];_efcc =_fegfa (_efcc ,_aada );if len (_efcc )==0{delete (_acfed ._cade ,_gedg );}else {_acfed ._cade [_gedg ]=_efcc ;
};};func (_defg rulingList )isActualGrid ()(rulingList ,bool ){_cbead ,_cgace :=_defg .augmentGrid ();if !(len (_cbead )>=_gbf +1&&len (_cgace )>=_faba +1){if _eadg {_eb .Log .Info ("\u0069s\u0041\u0063t\u0075\u0061\u006c\u0047r\u0069\u0064\u003a \u004e\u006f\u0074\u0020\u0061\u006c\u0069\u0067\u006eed\u002e\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u003c\u0020\u0025d\u0020\u0078 \u0025\u0064",len (_cbead ),len (_cgace ),_gbf +1,_faba +1);
};return nil ,false ;};if _eadg {_eb .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075a\u006c\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0073\u0020\u003a\u0020\u0025t\u0020\u0026\u0020\u0025\u0074\u0020\u2192 \u0025\u0074",_defg ,len (_cbead )>=2,len (_cgace )>=2,len (_cbead )>=2&&len (_cgace )>=2);
for _cggda ,_ebbf :=range _defg {_fe .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0076\u000a",_cggda ,_ebbf );};};if _eegb {_geceg ,_cfcg :=_cbead [0],_cbead [len (_cbead )-1];_dfbc ,_efded :=_cgace [0],_cgace [len (_cgace )-1];if !(_fgdg (_geceg ._efef -_dfbc ._dccfd )&&_fgdg (_cfcg ._efef -_dfbc ._dgeg )&&_fgdg (_dfbc ._efef -_geceg ._dgeg )&&_fgdg (_efded ._efef -_geceg ._dccfd )){if _eadg {_eb .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069d\u003a\u0020\u0020N\u006f\u0074 \u0061\u006c\u0069\u0067\u006e\u0065d\u002e\n\t\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0076\u0031\u003d\u0025\u0073\u000a\u0009\u0068\u0030\u003d\u0025\u0073\u000a\u0009\u0068\u0031\u003d\u0025\u0073",_geceg ,_cfcg ,_dfbc ,_efded );
};return nil ,false ;};}else {if !_cbead .aligned (){if _bfba {_eb .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0076\u0065\u0072\u0074\u0073\u002e\u0020%\u0064",len (_cbead ));
};return nil ,false ;};if !_cgace .aligned (){if _eadg {_eb .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0068\u006f\u0072\u007a\u0073\u002e\u0020%\u0064",len (_cgace ));
};return nil ,false ;};};_daff :=append (_cbead ,_cgace ...);return _daff ,true ;};func (_cccd rectRuling )checkWidth (_ccgfc ,_gcag float64 )(float64 ,bool ){_dfaec :=_gcag -_ccgfc ;_cece :=_dfaec <=_ggbc ;return _dfaec ,_cece ;};type gridTile struct{_ga .PdfRectangle ;
_agbfd ,_bcba ,_ddcc ,_aegf bool ;};type stateStack []*textState ;func (_dfgcg *textObject )newTextMark (_dddc string ,_fadb _efc .Matrix ,_afed _efc .Point ,_ebaa float64 ,_afggc *_ga .PdfFont ,_cfcff float64 ,_bbc ,_fdfg _ea .Color )(textMark ,bool ){_faeca :=_fadb .Angle ();
_acaf :=_abgba (_faeca ,_acfdg );var _fcef float64 ;if _acaf %180!=90{_fcef =_fadb .ScalingFactorY ();}else {_fcef =_fadb .ScalingFactorX ();};_edcc :=_fdb (_fadb );_cgbe :=_ga .PdfRectangle {Llx :_edcc .X ,Lly :_edcc .Y ,Urx :_afed .X ,Ury :_afed .Y };
switch _acaf %360{case 90:_cgbe .Urx -=_fcef ;case 180:_cgbe .Ury -=_fcef ;case 270:_cgbe .Urx +=_fcef ;case 0:_cgbe .Ury +=_fcef ;default:_acaf =0;_cgbe .Ury +=_fcef ;};if _cgbe .Llx > _cgbe .Urx {_cgbe .Llx ,_cgbe .Urx =_cgbe .Urx ,_cgbe .Llx ;};if _cgbe .Lly > _cgbe .Ury {_cgbe .Lly ,_cgbe .Ury =_cgbe .Ury ,_cgbe .Lly ;
};_eccab :=true ;if _dfgcg ._gda ._cgf .Width ()> 0{_fedc ,_dbegf :=_bgcf (_cgbe ,_dfgcg ._gda ._cgf );if !_dbegf {_eccab =false ;_eb .Log .Debug ("\u0054\u0065\u0078\u0074\u0020m\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069\u0064\u0065\u0020\u0070a\u0067\u0065\u002e\u0020\u0062\u0062\u006f\u0078\u003d\u0025\u0067\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u003d\u0025\u0067\u0020\u0074\u0065\u0078\u0074\u003d\u0025q",_cgbe ,_dfgcg ._gda ._cgf ,_dddc );
};_cgbe =_fedc ;};_adcb :=_cgbe ;_bcbb :=_dfgcg ._gda ._cgf ;switch _acaf %360{case 90:_bcbb .Urx ,_bcbb .Ury =_bcbb .Ury ,_bcbb .Urx ;_adcb =_ga .PdfRectangle {Llx :_bcbb .Urx -_cgbe .Ury ,Urx :_bcbb .Urx -_cgbe .Lly ,Lly :_cgbe .Llx ,Ury :_cgbe .Urx };
case 180:_adcb =_ga .PdfRectangle {Llx :_bcbb .Urx -_cgbe .Llx ,Urx :_bcbb .Urx -_cgbe .Urx ,Lly :_bcbb .Ury -_cgbe .Lly ,Ury :_bcbb .Ury -_cgbe .Ury };case 270:_bcbb .Urx ,_bcbb .Ury =_bcbb .Ury ,_bcbb .Urx ;_adcb =_ga .PdfRectangle {Llx :_cgbe .Ury ,Urx :_cgbe .Lly ,Lly :_bcbb .Ury -_cgbe .Llx ,Ury :_bcbb .Ury -_cgbe .Urx };
};if _adcb .Llx > _adcb .Urx {_adcb .Llx ,_adcb .Urx =_adcb .Urx ,_adcb .Llx ;};if _adcb .Lly > _adcb .Ury {_adcb .Lly ,_adcb .Ury =_adcb .Ury ,_adcb .Lly ;};_daebe :=textMark {_daae :_dddc ,PdfRectangle :_adcb ,_gefa :_cgbe ,_fgea :_afggc ,_cba :_fcef ,_gbdf :_cfcff ,_gcgb :_fadb ,_edcgg :_afed ,_dbfb :_acaf ,_efbf :_bbc ,_eedec :_fdfg };
if _cga {_eb .Log .Info ("n\u0065\u0077\u0054\u0065\u0078\u0074M\u0061\u0072\u006b\u003a\u0020\u0073t\u0061\u0072\u0074\u003d\u0025\u002e\u0032f\u0020\u0065\u006e\u0064\u003d\u0025\u002e\u0032\u0066\u0020%\u0073",_edcc ,_afed ,_daebe .String ());};return _daebe ,_eccab ;
};func _ecaf (_cge *Extractor ,_eee *_ga .PdfPageResources ,_dgc _ef .GraphicsState ,_cfd *textState ,_bde *stateStack )*textObject {return &textObject {_gda :_cge ,_dfgf :_eee ,_geae :_dgc ,_cbf :_bde ,_abde :_cfd ,_fbg :_efc .IdentityMatrix (),_eccg :_efc .IdentityMatrix ()};
};

// String returns a human readable description of `vecs`.
func (_gdfc rulingList )String ()string {if len (_gdfc )==0{return "\u007b \u0045\u004d\u0050\u0054\u0059\u0020}";};_baea ,_feag :=_gdfc .vertsHorzs ();_ebdcc :=len (_baea );_cbace :=len (_feag );if _ebdcc ==0||_cbace ==0{return _fe .Sprintf ("\u007b%\u0064\u0020\u0078\u0020\u0025\u0064}",_ebdcc ,_cbace );
};_dcab :=_ga .PdfRectangle {Llx :_baea [0]._efef ,Urx :_baea [_ebdcc -1]._efef ,Lly :_feag [_cbace -1]._efef ,Ury :_feag [0]._efef };return _fe .Sprintf ("\u007b\u0025d\u0020\u0078\u0020%\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u007d",_ebdcc ,_cbace ,_dcab );
};func _cbbg (_geaea ,_egba _efc .Point )bool {return _geaea .X ==_egba .X &&_geaea .Y ==_egba .Y };func _cged (_ddee ,_degg _ga .PdfRectangle )bool {return _ddee .Llx <=_degg .Llx &&_degg .Urx <=_ddee .Urx &&_ddee .Lly <=_degg .Lly &&_degg .Ury <=_ddee .Ury ;
};const _ggg =20;

// RenderMode specifies the text rendering mode (Tmode), which determines whether showing text shall cause
// glyph outlines to be  stroked, filled, used as a clipping boundary, or some combination of the three.
// Stroking, filling, and clipping shall have the same effects for a text object as they do for a path object
// (see 8.5.3, "Path-Painting Operators" and 8.5.4, "Clipping Path Operators").
type RenderMode int ;func _bdfb (_fabbd ,_dcbda float64 )bool {return _fabbd /_ca .Max (_dfdb ,_dcbda )< _gacc };func (_fegb *shapesState )drawRectangle (_gdbb ,_abce ,_dfde ,_gee float64 ){if _ccade {_aeb :=_fegb .devicePoint (_gdbb ,_abce );_fgef :=_fegb .devicePoint (_gdbb +_dfde ,_abce +_gee );
_dgbg :=_ga .PdfRectangle {Llx :_aeb .X ,Lly :_aeb .Y ,Urx :_fgef .X ,Ury :_fgef .Y };_eb .Log .Info ("d\u0072a\u0077\u0052\u0065\u0063\u0074\u0061\u006e\u0067l\u0065\u003a\u0020\u00256.\u0032\u0066",_dgbg );};_fegb .newSubPath ();_fegb .moveTo (_gdbb ,_abce );
_fegb .lineTo (_gdbb +_dfde ,_abce );_fegb .lineTo (_gdbb +_dfde ,_abce +_gee );_fegb .lineTo (_gdbb ,_abce +_gee );_fegb .closePath ();};

// String returns a description of `state`.
func (_egd *textState )String ()string {_dcc :="\u005bN\u004f\u0054\u0020\u0053\u0045\u0054]";if _egd ._fcbg !=nil {_dcc =_egd ._fcbg .BaseFont ();};return _fe .Sprintf ("\u0074\u0063\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0077\u003d\u0025\u002e\u0032\u0066 \u0074f\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u003d\u0025\u0071",_egd ._eag ,_egd ._fbed ,_egd ._ddea ,_dcc );
};func (_bad *wordBag )allWords ()[]*textWord {var _abdf []*textWord ;for _ ,_aadd :=range _bad ._cade {_abdf =append (_abdf ,_aadd ...);};return _abdf ;};func (_bfab compositeCell )parasBBox ()(paraList ,_ga .PdfRectangle ){return _bfab .paraList ,_bfab .PdfRectangle ;
};func (_edafg *textTable )bbox ()_ga .PdfRectangle {return _edafg .PdfRectangle };func _feff (_dbdg []*textMark ,_bafg _ga .PdfRectangle )*textWord {_fafa :=_dbdg [0].PdfRectangle ;_aade :=_dbdg [0]._cba ;for _ ,_beab :=range _dbdg [1:]{_fafa =_cdg (_fafa ,_beab .PdfRectangle );
if _beab ._cba > _aade {_aade =_beab ._cba ;};};return &textWord {PdfRectangle :_fafa ,_afcbb :_dbdg ,_gfgf :_bafg .Ury -_fafa .Lly ,_cbaa :_aade };};func _dgfg (_addcc ,_bbab float64 )string {_fcfc :=!_bbfcc (_addcc -_bbab );if _fcfc {return "\u000a";
};return "\u0020";};

// ApplyArea processes the page text only within the specified area `bbox`.
// Each time ApplyArea is called, it updates the result set in `pt`.
// Can be called multiple times in a row with different bounding boxes.
func (_egb *PageText )ApplyArea (bbox _ga .PdfRectangle ){_cbbd :=make ([]*textMark ,0,len (_egb ._bec ));for _ ,_dbc :=range _egb ._bec {if _dgg (_dbc .bbox (),bbox ){_cbbd =append (_cbbd ,_dbc );};};var _eadaa paraList ;_agbf :=len (_cbbd );for _fce :=0;
_fce < 360&&_agbf > 0;_fce +=90{_abdc :=make ([]*textMark ,0,len (_cbbd )-_agbf );for _ ,_eced :=range _cbbd {if _eced ._dbfb ==_fce {_abdc =append (_abdc ,_eced );};};if len (_abdc )> 0{_gdbg :=_bdbc (_abdc ,_egb ._cgb ,nil ,nil );_eadaa =append (_eadaa ,_gdbg ...);
_agbf -=len (_abdc );};};_ccad :=new (_dc .Buffer );_eadaa .writeText (_ccad );_egb ._caea =_ccad .String ();_egb ._acbf =_eadaa .toTextMarks ();_egb ._gdg =_eadaa .tables ();};func (_edcga paraList )reorder (_edegf []int ){_bfdc :=make (paraList ,len (_edcga ));
for _gfge ,_dbcf :=range _edegf {_bfdc [_gfge ]=_edcga [_dbcf ];};copy (_edcga ,_bfdc );};func (_bcbc rulingList )mergePrimary ()float64 {_cfgeb :=_bcbc [0]._efef ;for _ ,_gacg :=range _bcbc [1:]{_cfgeb +=_gacg ._efef ;};return _cfgeb /float64 (len (_bcbc ));
};func _eagc (_ecg ,_fdfaf bounded )float64 {return _ecg .bbox ().Llx -_fdfaf .bbox ().Urx };type rectRuling struct{_gfae rulingKind ;_dgadd markKind ;_ea .Color ;_ga .PdfRectangle ;};func _dgff (_fgbcd string ,_abcda int )string {if len (_fgbcd )< _abcda {return _fgbcd ;
};return _fgbcd [:_abcda ];};type intSet map[int ]struct{};func (_ffcd *textObject )getFontDict (_cec string )(_gece _de .PdfObject ,_fdc error ){_dcg :=_ffcd ._dfgf ;if _dcg ==nil {_eb .Log .Debug ("g\u0065\u0074\u0046\u006f\u006e\u0074D\u0069\u0063\u0074\u002e\u0020\u004eo\u0020\u0072\u0065\u0073\u006f\u0075\u0072c\u0065\u0073\u002e\u0020\u006e\u0061\u006d\u0065\u003d\u0025#\u0071",_cec );
return nil ,nil ;};_gece ,_fge :=_dcg .GetFontByName (_de .PdfObjectName (_cec ));if !_fge {_eb .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0067\u0065t\u0046\u006f\u006et\u0044\u0069\u0063\u0074\u003a\u0020\u0046\u006f\u006et \u006e\u006f\u0074 \u0066\u006fu\u006e\u0064\u003a\u0020\u006e\u0061m\u0065\u003d%\u0023\u0071",_cec );
return nil ,_g .New ("f\u006f\u006e\u0074\u0020no\u0074 \u0069\u006e\u0020\u0072\u0065s\u006f\u0075\u0072\u0063\u0065\u0073");};return _gece ,nil ;};

// String returns a description of `k`.
func (_dgga rulingKind )String ()string {_daaf ,_gcgc :=_adcd [_dgga ];if !_gcgc {return _fe .Sprintf ("\u004e\u006ft\u0020\u0061\u0020r\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0064",_dgga );};return _daaf ;};func (_eabc *textPara )toTextMarks (_dgbb *int )[]TextMark {if _eabc ._cfdd ==nil {return _eabc .toCellTextMarks (_dgbb );
};var _dbfc []TextMark ;for _cfadf :=0;_cfadf < _eabc ._cfdd ._ceccd ;_cfadf ++{for _egfg :=0;_egfg < _eabc ._cfdd ._afbd ;_egfg ++{_fbec :=_eabc ._cfdd .get (_egfg ,_cfadf );if _fbec ==nil {_dbfc =_eedd (_dbfc ,_dgbb ,"\u0009");}else {_dbcb :=_fbec .toCellTextMarks (_dgbb );
_dbfc =append (_dbfc ,_dbcb ...);};_dbfc =_eedd (_dbfc ,_dgbb ,"\u0020");};if _cfadf < _eabc ._cfdd ._ceccd -1{_dbfc =_eedd (_dbfc ,_dgbb ,"\u000a");};};return _dbfc ;};const (_egac markKind =iota ;_geegg ;_cacd ;_gfccg ;);func _efdd (_gadb []float64 ,_aeec ,_eebe float64 )[]float64 {_egggf ,_beebc :=_aeec ,_eebe ;
if _beebc < _egggf {_egggf ,_beebc =_beebc ,_egggf ;};_fcead :=make ([]float64 ,0,len (_gadb )+2);_fcead =append (_fcead ,_aeec );for _ ,_fgdgg :=range _gadb {if _fgdgg <=_egggf {continue ;}else if _fgdgg >=_beebc {break ;};_fcead =append (_fcead ,_fgdgg );
};_fcead =append (_fcead ,_eebe );return _fcead ;};type pathSection struct{_fgefd []*subpath ;_ea .Color ;};func (_cfbc *wordBag )maxDepth ()float64 {return _cfbc ._aaae -_cfbc .Lly };func (_dadee *compositeCell )updateBBox (){for _ ,_abfg :=range _dadee .paraList {_dadee .PdfRectangle =_cdg (_dadee .PdfRectangle ,_abfg .PdfRectangle );
};};func (_fgcd *wordBag )depthRange (_edeg ,_cgee int )[]int {var _fbfe []int ;for _dgef :=range _fgcd ._cade {if _edeg <=_dgef &&_dgef <=_cgee {_fbfe =append (_fbfe ,_dgef );};};if len (_fbfe )==0{return nil ;};_d .Ints (_fbfe );return _fbfe ;};func (_acba paraList )log (_bebce string ){if !_ddgbd {return ;
};_eb .Log .Info ("%\u0038\u0073\u003a\u0020\u0025\u0064 \u0070\u0061\u0072\u0061\u0073\u0020=\u003d\u003d\u003d\u003d\u003d\u003d\u002d-\u002d\u002d\u002d\u002d\u002d\u003d\u003d\u003d\u003d\u003d=\u003d",_bebce ,len (_acba ));for _eabcb ,_bfca :=range _acba {if _bfca ==nil {continue ;
};_babg :=_bfca .text ();_cddd :="\u0020\u0020";if _bfca ._cfdd !=nil {_cddd =_fe .Sprintf ("\u005b%\u0064\u0078\u0025\u0064\u005d",_bfca ._cfdd ._afbd ,_bfca ._cfdd ._ceccd );};_fe .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0025s\u0020\u0025\u0071\u000a",_eabcb ,_bfca .PdfRectangle ,_cddd ,_dgff (_babg ,50));
};};func _ddfd (_acace _ga .PdfColorspace ,_daabeg _ga .PdfColor )_ea .Color {if _acace ==nil ||_daabeg ==nil {return _ea .Black ;};_cgaa ,_beeef :=_acace .ColorToRGB (_daabeg );if _beeef !=nil {_eb .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006fu\u006c\u0064\u0020no\u0074\u0020\u0063\u006f\u006e\u0076e\u0072\u0074\u0020\u0063\u006f\u006c\u006f\u0072\u0020\u0025\u0076\u0020\u0028\u0025\u0076)\u0020\u0074\u006f\u0020\u0052\u0047\u0042\u003a \u0025\u0073",_daabeg ,_acace ,_beeef );
return _ea .Black ;};_aeged ,_eabg :=_cgaa .(*_ga .PdfColorDeviceRGB );if !_eabg {_eb .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0065\u0064 \u0063\u006f\u006c\u006f\u0072\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020i\u006e\u0020\u0074\u0068\u0065\u0020\u0052\u0047\u0042\u0020\u0063\u006flo\u0072\u0073\u0070\u0061\u0063\u0065\u003a\u0020\u0025\u0076",_cgaa );
return _ea .Black ;};return _ea .NRGBA {R :uint8 (_aeged .R ()*255),G :uint8 (_aeged .G ()*255),B :uint8 (_aeged .B ()*255),A :uint8 (255)};};const (RenderModeStroke RenderMode =1<<iota ;RenderModeFill ;RenderModeClip ;);type cachedImage struct{_egc *_ga .Image ;
_dd _ga .PdfColorspace ;};func (_dfgcc rulingList )primMinMax ()(float64 ,float64 ){_gccg ,_gdfd :=_dfgcc [0]._efef ,_dfgcc [0]._efef ;for _ ,_acfdd :=range _dfgcc [1:]{if _acfdd ._efef < _gccg {_gccg =_acfdd ._efef ;}else if _acfdd ._efef > _gdfd {_gdfd =_acfdd ._efef ;
};};return _gccg ,_gdfd ;};func (_bfa *wordBag )blocked (_fdag *textWord )bool {if _fdag .Urx < _bfa .Llx {_bgd :=_fage (_fdag .PdfRectangle );_edec :=_edbbg (_bfa .PdfRectangle );if _bfa ._ffed .blocks (_bgd ,_edec ){if _ccdb {_eb .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0078\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_fdag ,_bfa );
};return true ;};}else if _bfa .Urx < _fdag .Llx {_cdbf :=_fage (_bfa .PdfRectangle );_eaad :=_edbbg (_fdag .PdfRectangle );if _bfa ._ffed .blocks (_cdbf ,_eaad ){if _ccdb {_eb .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0078\u2192\u0020:\u0020\u0025\u0073\u0020%s",_fdag ,_bfa );
};return true ;};};if _fdag .Ury < _bfa .Lly {_gaed :=_cede (_fdag .PdfRectangle );_fcf :=_acac (_bfa .PdfRectangle );if _bfa ._bef .blocks (_gaed ,_fcf ){if _ccdb {_eb .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0079\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_fdag ,_bfa );
};return true ;};}else if _bfa .Ury < _fdag .Lly {_fgcc :=_cede (_bfa .PdfRectangle );_aee :=_acac (_fdag .PdfRectangle );if _bfa ._bef .blocks (_fgcc ,_aee ){if _ccdb {_eb .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0079\u2192\u0020:\u0020\u0025\u0073\u0020%s",_fdag ,_bfa );
};return true ;};};return false ;};func (_fed *textObject )renderText (_eecf []byte )error {if _fed ._cfb {_eb .Log .Debug ("\u0072\u0065\u006e\u0064\u0065r\u0054\u0065\u0078\u0074\u003a\u0020\u0049\u006e\u0076\u0061\u006c\u0069\u0064 \u0066\u006f\u006e\u0074\u002e\u0020\u004e\u006f\u0074\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u002e");
return nil ;};_feae :=_fed .getCurrentFont ();_bbff :=_feae .BytesToCharcodes (_eecf );_adg ,_cgcg ,_fbf :=_feae .CharcodesToStrings (_bbff );if _fbf > 0{_eb .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_cgcg ,_fbf );
};_fed ._abde ._efg +=_cgcg ;_fed ._abde ._bfbg +=_fbf ;_edfb :=_fed ._abde ;_ebg :=_edfb ._ddea ;_adfb :=_edfb ._bdcb /100.0;_gfg :=_dbg ;if _feae .Subtype ()=="\u0054\u0079\u0070e\u0033"{_gfg =1;};_baf ,_adef :=_feae .GetRuneMetrics (' ');if !_adef {_baf ,_adef =_feae .GetCharMetrics (32);
};if !_adef {_baf ,_ =_ga .DefaultFont ().GetRuneMetrics (' ');};_dfdd :=_baf .Wx *_gfg ;_eb .Log .Trace ("\u0073p\u0061\u0063e\u0057\u0069\u0064t\u0068\u003d\u0025\u002e\u0032\u0066\u0020t\u0065\u0078\u0074\u003d\u0025\u0071 \u0066\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0066\u006f\u006et\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",_dfdd ,_adg ,_feae ,_ebg );
_dee :=_efc .NewMatrix (_ebg *_adfb ,0,0,_ebg ,0,_edfb ._gba );if _beeg {_eb .Log .Info ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0074\u0065\u0078t\u0073\u003d\u0025\u0071",len (_bbff ),_bbff ,_adg );
};_eb .Log .Trace ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0072\u0075\u006ee\u0073\u003d\u0025\u0071",len (_bbff ),_bbff ,len (_adg ));_deg :=_fed .getFillColor ();
_acfe :=_fed .getStrokeColor ();for _aeaa ,_cfab :=range _adg {_dfgc :=[]rune (_cfab );if len (_dfgc )==1&&_dfgc [0]=='\x00'{continue ;};_fcbd :=_bbff [_aeaa ];_dged :=_fed ._geae .CTM .Mult (_fed ._fbg ).Mult (_dee );_cdcf :=0.0;if len (_dfgc )==1&&_dfgc [0]==32{_cdcf =_edfb ._fbed ;
};_ebd ,_afgg :=_feae .GetCharMetrics (_fcbd );if !_afgg {_eb .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u004e\u006f \u006d\u0065\u0074r\u0069\u0063\u0020\u0066\u006f\u0072\u0020\u0063\u006fde\u003d\u0025\u0064 \u0072\u003d0\u0078\u0025\u0030\u0034\u0078\u003d%\u002b\u0071 \u0025\u0073",_fcbd ,_dfgc ,_dfgc ,_feae );
return _fe .Errorf ("\u006e\u006f\u0020\u0063\u0068\u0061\u0072\u0020\u006d\u0065\u0074\u0072\u0069\u0063\u0073:\u0020f\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0063\u006f\u0064\u0065\u003d\u0025\u0064",_feae .String (),_fcbd );};_fbcf :=_efc .Point {X :_ebd .Wx *_gfg ,Y :_ebd .Wy *_gfg };
_eefd :=_efc .Point {X :(_fbcf .X *_ebg +_cdcf )*_adfb };_gbgd :=_efc .Point {X :(_fbcf .X *_ebg +_edfb ._eag +_cdcf )*_adfb };if _beeg {_eb .Log .Info ("\u0074\u0066\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0063\u003d\u0025\u002e\u0032f\u0020t\u0077\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_ebg ,_edfb ._eag ,_edfb ._fbed ,_adfb );
_eb .Log .Info ("\u0064x\u002c\u0064\u0079\u003d%\u002e\u0033\u0066\u0020\u00740\u003d%\u002e3\u0066\u0020\u0074\u003d\u0025\u002e\u0033f",_fbcf ,_eefd ,_gbgd );};_gaa :=_gcga (_eefd );_daa :=_gcga (_gbgd );_cae :=_fed ._geae .CTM .Mult (_fed ._fbg ).Mult (_gaa );
if _efb {_eb .Log .Info ("e\u006e\u0064\u003a\u000a\tC\u0054M\u003d\u0025\u0073\u000a\u0009 \u0074\u006d\u003d\u0025\u0073\u000a"+"\u0009\u0020t\u0064\u003d\u0025s\u0020\u0078\u006c\u0061\u0074\u003d\u0025\u0073\u000a"+"\u0009t\u0064\u0030\u003d\u0025s\u000a\u0009\u0020\u0020\u2192 \u0025s\u0020x\u006c\u0061\u0074\u003d\u0025\u0073",_fed ._geae .CTM ,_fed ._fbg ,_daa ,_fdb (_fed ._geae .CTM .Mult (_fed ._fbg ).Mult (_daa )),_gaa ,_cae ,_fdb (_cae ));
};_ggde ,_affe :=_fed .newTextMark (_fea .ExpandLigatures (_dfgc ),_dged ,_fdb (_cae ),_ca .Abs (_dfdd *_dged .ScalingFactorX ()),_feae ,_fed ._abde ._eag ,_deg ,_acfe );if !_affe {_eb .Log .Debug ("\u0054\u0065\u0078\u0074\u0020\u006d\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069d\u0065 \u0070\u0061\u0067\u0065\u002e\u0020\u0053\u006b\u0069\u0070\u0070\u0069\u006e\u0067");
continue ;};if _feae ==nil {_eb .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u002e");}else if _feae .Encoder ()==nil {_eb .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020N\u006f\u0020\u0065\u006e\u0063\u006f\u0064\u0069\u006eg\u002e\u0020\u0066o\u006et\u003d\u0025\u0073",_feae );
}else {if _ccbb ,_bdd :=_feae .Encoder ().CharcodeToRune (_fcbd );_bdd {_ggde ._ccaa =string (_ccbb );};};_eb .Log .Trace ("i\u003d\u0025\u0064\u0020\u0063\u006fd\u0065\u003d\u0025\u0064\u0020\u006d\u0061\u0072\u006b=\u0025\u0073\u0020t\u0072m\u003d\u0025\u0073",_aeaa ,_fcbd ,_ggde ,_dged );
_fed ._fdfa =append (_fed ._fdfa ,&_ggde );_fed ._fbg .Concat (_daa );};return nil ;};func (_dedf *textObject )moveLP (_faa ,_eadf float64 ){_dedf ._eccg .Concat (_efc .NewMatrix (1,0,0,1,_faa ,_eadf ));_dedf ._fbg =_dedf ._eccg ;};func _eeeb (_bfgf []pathSection )rulingList {_ffbed (_bfgf );
if _eadg {_eb .Log .Info ("\u006da\u006b\u0065\u0046\u0069l\u006c\u0052\u0075\u006c\u0069n\u0067s\u003a \u0025\u0064\u0020\u0066\u0069\u006c\u006cs",len (_bfgf ));};var _gaced rulingList ;for _ ,_ccbc :=range _bfgf {for _ ,_gbfa :=range _ccbc ._fgefd {if !_gbfa .isQuadrilateral (){if _eadg {_eb .Log .Error ("!\u0069s\u0051\u0075\u0061\u0064\u0072\u0069\u006c\u0061t\u0065\u0072\u0061\u006c: \u0025\u0073",_gbfa );
};continue ;};if _aecbga ,_cfbcc :=_gbfa .makeRectRuling (_ccbc .Color );_cfbcc {_gaced =append (_gaced ,_aecbga );}else {if _babcd {_eb .Log .Error ("\u0021\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0073",_gbfa );
};};};};if _eadg {_eb .Log .Info ("\u006d\u0061\u006b\u0065Fi\u006c\u006c\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0073",_gaced .String ());};return _gaced ;};func _dgbec (_gdac ,_gbae ,_dfcb ,_efbc *textPara )*textTable {_cfgf :=&textTable {_afbd :2,_ceccd :2,_geegga :make (map[uint64 ]*textPara ,4)};
_cfgf .put (0,0,_gdac );_cfgf .put (1,0,_gbae );_cfgf .put (0,1,_dfcb );_cfgf .put (1,1,_efbc );return _cfgf ;};func (_ggga *textLine )text ()string {var _dcdd []string ;for _ ,_cfcd :=range _ggga ._gbce {if _cfcd ._ddgbe {_dcdd =append (_dcdd ,"\u0020");
};_dcdd =append (_dcdd ,_cfcd ._cdeef );};return _cc .Join (_dcdd ,"");};func (_edcbg rulingList )blocks (_ecdad ,_bbdg *ruling )bool {if _ecdad ._dccfd > _bbdg ._dgeg ||_bbdg ._dccfd > _ecdad ._dgeg {return false ;};_aedd :=_ca .Max (_ecdad ._dccfd ,_bbdg ._dccfd );
_cgebc :=_ca .Min (_ecdad ._dgeg ,_bbdg ._dgeg );if _ecdad ._efef > _bbdg ._efef {_ecdad ,_bbdg =_bbdg ,_ecdad ;};for _ ,_efdef :=range _edcbg {if _ecdad ._efef <=_efdef ._efef +_ggbc &&_efdef ._efef <=_bbdg ._efef +_ggbc &&_efdef ._dccfd <=_cgebc &&_aedd <=_efdef ._dgeg {return true ;
};};return false ;};

// String returns a description of `k`.
func (_efea markKind )String ()string {_ebdf ,_ffbgd :=_bdda [_efea ];if !_ffbgd {return _fe .Sprintf ("\u004e\u006f\u0074\u0020\u0061\u0020\u006d\u0061\u0072k\u003a\u0020\u0025\u0064",_efea );};return _ebdf ;};func (_baggb *textTable )getComposite (_cdcc ,_edcfg int )(paraList ,_ga .PdfRectangle ){_ddffg ,_aecff :=_baggb ._dbbd [_adfaf (_cdcc ,_edcfg )];
if _cagbf {_fe .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0067\u0065\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u002d\u003e\u0025\u0073\u000a",_cdcc ,_edcfg ,_ddffg .String ());};if !_aecff {return nil ,_ga .PdfRectangle {};
};return _ddffg .parasBBox ();};func (_ggbed paraList )writeText (_deddg _f .Writer ){for _adb ,_aegb :=range _ggbed {if _aegb ._cace {continue ;};_aegb .writeText (_deddg );if _adb !=len (_ggbed )-1{if _bebca (_aegb ,_ggbed [_adb +1]){_deddg .Write ([]byte ("\u0020"));
}else {_deddg .Write ([]byte ("\u000a"));_deddg .Write ([]byte ("\u000a"));};};};_deddg .Write ([]byte ("\u000a"));_deddg .Write ([]byte ("\u000a"));};func (_ecdab *textPara )writeCellText (_fgdba _f .Writer ){for _ebbb ,_acefg :=range _ecdab ._gfgc {_eegf :=_acefg .text ();
_adfgd :=_bcdc &&_acefg .endsInHyphen ()&&_ebbb !=len (_ecdab ._gfgc )-1;if _adfgd {_eegf =_bfc (_eegf );};_fgdba .Write ([]byte (_eegf ));if !(_adfgd ||_ebbb ==len (_ecdab ._gfgc )-1){_fgdba .Write ([]byte (_dgfg (_acefg ._dbbc ,_ecdab ._gfgc [_ebbb +1]._dbbc )));
};};};func (_daee *shapesState )clearPath (){_daee ._bdbb =nil ;_daee ._dce =false ;if _ccade {_eb .Log .Info ("\u0043\u004c\u0045A\u0052\u003a\u0020\u0073\u0073\u003d\u0025\u0073",_daee );};};func (_fgefb *textPara )isAtom ()*textTable {_ccabe :=_fgefb ;
_debe :=_fgefb ._gdef ;_fabc :=_fgefb ._bcae ;if _debe .taken ()||_fabc .taken (){return nil ;};_cbeac :=_debe ._bcae ;if _cbeac .taken ()||_cbeac !=_fabc ._gdef {return nil ;};return _dgbec (_ccabe ,_debe ,_fabc ,_cbeac );};func _cede (_eebf _ga .PdfRectangle )*ruling {return &ruling {_bfaa :_acec ,_efef :_eebf .Ury ,_dccfd :_eebf .Llx ,_dgeg :_eebf .Urx };
};func (_ffcde rulingList )bbox ()_ga .PdfRectangle {var _eff _ga .PdfRectangle ;if len (_ffcde )==0{_eb .Log .Error ("r\u0075\u006c\u0069\u006e\u0067\u004ci\u0073\u0074\u002e\u0062\u0062\u006f\u0078\u003a\u0020n\u006f\u0020\u0072u\u006ci\u006e\u0067\u0073");
return _ga .PdfRectangle {};};if _ffcde [0]._bfaa ==_acec {_eff .Llx ,_eff .Urx =_ffcde .secMinMax ();_eff .Lly ,_eff .Ury =_ffcde .primMinMax ();}else {_eff .Llx ,_eff .Urx =_ffcde .primMinMax ();_eff .Lly ,_eff .Ury =_ffcde .secMinMax ();};return _eff ;
};func (_daab *wordBag )getDepthIdx (_ecbe float64 )int {_dbcg :=_daab .depthIndexes ();_bddg :=_bdag (_ecbe );if _bddg < _dbcg [0]{return _dbcg [0];};if _bddg > _dbcg [len (_dbcg )-1]{return _dbcg [len (_dbcg )-1];};return _bddg ;};type ruling struct{_bfaa rulingKind ;
_feec markKind ;_ea .Color ;_efef float64 ;_dccfd float64 ;_dgeg float64 ;_gdab float64 ;};

// ExtractText processes and extracts all text data in content streams and returns as a string.
// It takes into account character encodings in the PDF file, which are decoded by
// CharcodeBytesToUnicode.
// Characters that can't be decoded are replaced with MissingCodeRune ('\ufffd' = ).
func (_gdb *Extractor )ExtractText ()(string ,error ){_bgg ,_ ,_ ,_ggad :=_gdb .ExtractTextWithStats ();return _bgg ,_ggad ;};func _dcgc (_aagc []int )[]int {_bccaf :=make ([]int ,len (_aagc ));for _ddad ,_gega :=range _aagc {_bccaf [len (_aagc )-1-_ddad ]=_gega ;
};return _bccaf ;};func (_cedc paraList )lines ()[]*textLine {var _edde []*textLine ;for _ ,_bccafa :=range _cedc {_edde =append (_edde ,_bccafa ._gfgc ...);};return _edde ;};func _bebca (_cegc ,_fcce *textPara )bool {if _cegc ._cace ||_fcce ._cace {return true ;
};return _bbfcc (_cegc .depth ()-_fcce .depth ());};func (_fcbed *subpath )add (_cccg ..._efc .Point ){_fcbed ._gabf =append (_fcbed ._gabf ,_cccg ...)};func _dgcbc (_aabf map[int ][]float64 ){if len (_aabf )<=1{return ;};_cegcf :=_dfabb (_aabf );if _cagbf {_eb .Log .Info ("\u0066i\u0078C\u0065\u006c\u006c\u0073\u003a \u006b\u0065y\u0073\u003d\u0025\u002b\u0076",_cegcf );
};var _geab ,_feee int ;for _geab ,_feee =range _cegcf {if _aabf [_feee ]!=nil {break ;};};for _gcgf ,_ecae :=range _cegcf [_geab :]{_dbedb :=_aabf [_ecae ];if _dbedb ==nil {continue ;};if _cagbf {_fe .Printf ("\u0025\u0034\u0064\u003a\u0020\u006b\u0030\u003d\u0025\u0064\u0020\u006b1\u003d\u0025\u0064\u000a",_geab +_gcgf ,_feee ,_ecae );
};_feedb :=_aabf [_ecae ];if _feedb [len (_feedb )-1]> _dbedb [0]{_feedb [len (_feedb )-1]=_dbedb [0];_aabf [_feee ]=_feedb ;};_feee =_ecae ;};};

// TextMark represents extracted text on a page with information regarding both textual content,
// formatting (font and size) and positioning.
// It is the smallest unit of text on a PDF page, typically a single character.
//
// getBBox() in test_text.go shows how to compute bounding boxes of substrings of extracted text.
// The following code extracts the text on PDF page `page` into `text` then finds the bounding box
// `bbox` of substring `term` in `text`.
//
//     ex, _ := New(page)
//     // handle errors
//     pageText, _, _, err := ex.ExtractPageText()
//     // handle errors
//     text := pageText.Text()
//     textMarks := pageText.Marks()
//
//     	start := strings.Index(text, term)
//      end := start + len(term)
//      spanMarks, err := textMarks.RangeOffset(start, end)
//      // handle errors
//      bbox, ok := spanMarks.BBox()
//      // handle errors
type TextMark struct{

// Text is the extracted text.
Text string ;

// Original is the text in the PDF. It has not been decoded like `Text`.
Original string ;

// BBox is the bounding box of the text.
BBox _ga .PdfRectangle ;

// Font is the font the text was drawn with.
Font *_ga .PdfFont ;

// FontSize is the font size the text was drawn with.
FontSize float64 ;

// Offset is the offset of the start of TextMark.Text in the extracted text. If you do this
//   text, textMarks := pageText.Text(), pageText.Marks()
//   marks := textMarks.Elements()
// then marks[i].Offset is the offset of marks[i].Text in text.
Offset int ;

// Meta is set true for spaces and line breaks that we insert in the extracted text. We insert
// spaces (line breaks) when we see characters that are over a threshold horizontal (vertical)
//  distance  apart. See wordJoiner (lineJoiner) in PageText.computeViews().
Meta bool ;

// FillColor is the fill color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
FillColor _ea .Color ;

// StrokeColor is the stroke color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
StrokeColor _ea .Color ;

// Orientation is the text orientation
Orientation int ;};func (_gdgf lineRuling )xMean ()float64 {return 0.5*(_gdgf ._faef .X +_gdgf ._ebf .X )};func (_gfbf *wordBag )minDepth ()float64 {return _gfbf ._aaae -(_gfbf .Ury -_gfbf ._bdfd )};func _bgcf (_eafd ,_fgfg _ga .PdfRectangle )(_ga .PdfRectangle ,bool ){if !_dgg (_eafd ,_fgfg ){return _ga .PdfRectangle {},false ;
};return _ga .PdfRectangle {Llx :_ca .Max (_eafd .Llx ,_fgfg .Llx ),Urx :_ca .Min (_eafd .Urx ,_fgfg .Urx ),Lly :_ca .Max (_eafd .Lly ,_fgfg .Lly ),Ury :_ca .Min (_eafd .Ury ,_fgfg .Ury )},true ;};func _aegeg (_ebfa ,_gbaa _efc .Point )rulingKind {_bccbb :=_ca .Abs (_ebfa .X -_gbaa .X );
_fegc :=_ca .Abs (_ebfa .Y -_gbaa .Y );return _egacc (_bccbb ,_fegc ,_efeg );};func (_fgfe rulingList )toTilings ()(rulingList ,[]gridTiling ){_fgfe .log ("\u0074o\u0054\u0069\u006c\u0069\u006e\u0067s");if len (_fgfe )==0{return nil ,nil ;};_fgfe =_fgfe .tidied ("\u0061\u006c\u006c");
_fgfe .log ("\u0074\u0069\u0064\u0069\u0065\u0064");_gcfb :=_fgfe .toGrids ();_dfgbb :=make ([]gridTiling ,len (_gcfb ));for _agbfb ,_ggef :=range _gcfb {_dfgbb [_agbfb ]=_ggef .asTiling ();};return _fgfe ,_dfgbb ;};func (_gaaa paraList )tables ()[]TextTable {var _gcfac []TextTable ;
if _cagbf {_eb .Log .Info ("\u0070\u0061\u0072\u0061\u0073\u002e\u0074\u0061\u0062\u006c\u0065\u0073\u003a");};for _ ,_daad :=range _gaaa {_efegf :=_daad ._cfdd ;if _efegf !=nil &&_efegf .isExportable (){_gcfac =append (_gcfac ,_efegf .toTextTable ());
};};return _gcfac ;};const _bbb =10;func (_febc *shapesState )devicePoint (_aaec ,_ccde float64 )_efc .Point {_abeg :=_febc ._fda .Mult (_febc ._dcd );_aaec ,_ccde =_abeg .Transform (_aaec ,_ccde );return _efc .NewPoint (_aaec ,_ccde );};func _aeg (_bedg []TextMark ,_ffcc *int ,_dddg TextMark )[]TextMark {_dddg .Offset =*_ffcc ;
_bedg =append (_bedg ,_dddg );*_ffcc +=len (_dddg .Text );return _bedg ;};func (_cce *textObject )setFont (_bggb string ,_bbfc float64 )error {if _cce ==nil {return nil ;};_cce ._abde ._ddea =_bbfc ;_cdaa ,_ece :=_cce .getFont (_bggb );if _ece !=nil {return _ece ;
};_cce ._abde ._fcbg =_cdaa ;return nil ;};func _acgcg (_ggcg []*textMark ,_bccd _ga .PdfRectangle )[]*textWord {var _daed []*textWord ;var _afgga *textWord ;if _cga {_eb .Log .Info ("\u006d\u0061\u006beT\u0065\u0078\u0074\u0057\u006f\u0072\u0064\u0073\u003a\u0020\u0025\u0064\u0020\u006d\u0061\u0072\u006b\u0073",len (_ggcg ));
};_fdg :=func (){if _afgga !=nil {_fecf :=_afgga .computeText ();if !_fcadg (_fecf ){_afgga ._cdeef =_fecf ;_daed =append (_daed ,_afgga );if _cga {_eb .Log .Info ("\u0061\u0064\u0064Ne\u0077\u0057\u006f\u0072\u0064\u003a\u0020\u0025\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",len (_daed )-1,_afgga .String ());
for _debd ,_cfbd :=range _afgga ._afcbb {_fe .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_debd ,_cfbd .String ());};};};_afgga =nil ;};};for _ ,_bcdbc :=range _ggcg {if _gadc &&_afgga !=nil &&len (_afgga ._afcbb )> 0{_bbdcb :=_afgga ._afcbb [len (_afgga ._afcbb )-1];
_acdc ,_aagd :=_fadgdf (_bcdbc ._daae );_fced ,_cagfd :=_fadgdf (_bbdcb ._daae );if _aagd &&!_cagfd &&_bbdcb .inDiacriticArea (_bcdbc ){_afgga .addDiacritic (_acdc );continue ;};if _cagfd &&!_aagd &&_bcdbc .inDiacriticArea (_bbdcb ){_afgga ._afcbb =_afgga ._afcbb [:len (_afgga ._afcbb )-1];
_afgga .appendMark (_bcdbc ,_bccd );_afgga .addDiacritic (_fced );continue ;};};_bgeg :=_fcadg (_bcdbc ._daae );if _bgeg {_fdg ();continue ;};if _afgga ==nil &&!_bgeg {_afgga =_feff ([]*textMark {_bcdbc },_bccd );continue ;};_cfabb :=_afgga ._cbaa ;_bcef :=_ca .Abs (_cfgc (_bccd ,_bcdbc )-_afgga ._gfgf )/_cfabb ;
_gagc :=_eagc (_bcdbc ,_afgga )/_cfabb ;if _gagc >=_dfef ||!(-_ggag <=_gagc &&_bcef <=_gcce ){_fdg ();_afgga =_feff ([]*textMark {_bcdbc },_bccd );continue ;};_afgga .appendMark (_bcdbc ,_bccd );};_fdg ();return _daed ;};

// String returns a string descibing `i`.
func (_aefe gridTile )String ()string {_fagab :=func (_gafg bool ,_aaeb string )string {if _gafg {return _aaeb ;};return "\u005f";};return _fe .Sprintf ("\u00256\u002e2\u0066\u0020\u0025\u0031\u0073%\u0031\u0073%\u0031\u0073\u0025\u0031\u0073",_aefe .PdfRectangle ,_fagab (_aefe ._bcba ,"\u004c"),_fagab (_aefe ._aegf ,"\u0052"),_fagab (_aefe ._ddcc ,"\u0042"),_fagab (_aefe ._agbfd ,"\u0054"));
};func (_bcgb *textLine )bbox ()_ga .PdfRectangle {return _bcgb .PdfRectangle };func _fcadg (_fgeed string )bool {for _ ,_eecfg :=range _fgeed {if !_cb .IsSpace (_eecfg ){return false ;};};return true ;};func (_fbagg *textTable )newTablePara ()*textPara {_cgff :=_fbagg .computeBbox ();
_dfgbgb :=&textPara {PdfRectangle :_cgff ,_dcbgb :_cgff ,_cfdd :_fbagg };if _cagbf {_eb .Log .Info ("\u006e\u0065w\u0054\u0061\u0062l\u0065\u0050\u0061\u0072\u0061\u003a\u0020\u0025\u0073",_dfgbgb );};return _dfgbgb ;};func (_gfbc *textObject )moveText (_egg ,_dfdg float64 ){_gfbc .moveLP (_egg ,_dfdg )};
func (_cgdef gridTile )numBorders ()int {_adag :=0;if _cgdef ._bcba {_adag ++;};if _cgdef ._aegf {_adag ++;};if _cgdef ._ddcc {_adag ++;};if _cgdef ._agbfd {_adag ++;};return _adag ;};func _daegg (_dbb *textWord ,_fbaa float64 ,_bcedc ,_gfcd rulingList )*wordBag {_fbcb :=_bdag (_dbb ._gfgf );
_gfdb :=[]*textWord {_dbb };_ffbg :=wordBag {_cade :map[int ][]*textWord {_fbcb :_gfdb },PdfRectangle :_dbb .PdfRectangle ,_bdfd :_dbb ._cbaa ,_aaae :_fbaa ,_ffed :_bcedc ,_bef :_gfcd };return &_ffbg ;};type textWord struct{_ga .PdfRectangle ;_gfgf float64 ;
_cdeef string ;_afcbb []*textMark ;_cbaa float64 ;_ddgbe bool ;};

// ToText returns the page text as a single string.
// Deprecated: This function is deprecated and will be removed in a future major version. Please use
// Text() instead.
func (_adefd PageText )ToText ()string {return _adefd .Text ()};func (_agcf *textTable )computeBbox ()_ga .PdfRectangle {var _eeag _ga .PdfRectangle ;_bbcda :=false ;for _dfad :=0;_dfad < _agcf ._ceccd ;_dfad ++{for _gdegb :=0;_gdegb < _agcf ._afbd ;_gdegb ++{_baeea :=_agcf .get (_gdegb ,_dfad );
if _baeea ==nil {continue ;};if !_bbcda {_eeag =_baeea .PdfRectangle ;_bbcda =true ;}else {_eeag =_cdg (_eeag ,_baeea .PdfRectangle );};};};return _eeag ;};type rulingKind int ;func (_cggc rulingList )findPrimSec (_adea ,_ecbc float64 )*ruling {for _ ,_cfegg :=range _cggc {if _bbfcc (_cfegg ._efef -_adea )&&_cfegg ._dccfd -_afdf <=_ecbc &&_ecbc <=_cfegg ._dgeg +_afdf {return _cfegg ;
};};return nil ;};func (_cddc rulingList )comp (_agdc ,_fcfd int )bool {_ddge ,_ddba :=_cddc [_agdc ],_cddc [_fcfd ];_efccf ,_dfc :=_ddge ._bfaa ,_ddba ._bfaa ;if _efccf !=_dfc {return _efccf > _dfc ;};if _efccf ==_gdga {return false ;};_ebad :=func (_ceec bool )bool {if _efccf ==_acec {return _ceec ;
};return !_ceec ;};_aacb ,_ceef :=_ddge ._efef ,_ddba ._efef ;if _aacb !=_ceef {return _ebad (_aacb > _ceef );};_aacb ,_ceef =_ddge ._dccfd ,_ddba ._dccfd ;if _aacb !=_ceef {return _ebad (_aacb < _ceef );};return _ebad (_ddge ._dgeg < _ddba ._dgeg );};
const (_geeg =false ;_cga =false ;_cgebb =false ;_efb =false ;_ccade =false ;_beeg =false ;_gca =false ;_ddgbd =false ;_dbae =false ;_gede =_dbae &&true ;_geff =_gede &&false ;_fcdc =_dbae &&true ;_cagbf =false ;_efa =_cagbf &&false ;_edbd =_cagbf &&true ;
_eadg =false ;_aebd =_eadg &&false ;_bfba =_eadg &&false ;_degb =_eadg &&true ;_babcd =_eadg &&false ;_ccdb =_eadg &&false ;);func (_fabb *textLine )endsInHyphen ()bool {_cdbfg :=_fabb ._gbce [len (_fabb ._gbce )-1];_eegg :=_cdbfg ._cdeef ;_cgdd ,_faae :=_c .DecodeLastRuneInString (_eegg );
if _faae <=0||!_cb .Is (_cb .Hyphen ,_cgdd ){return false ;};if _cdbfg ._ddgbe &&_cfgd (_eegg ){return true ;};return _cfgd (_fabb .text ());};func (_degbe paraList )findGridTables (_aebg []gridTiling )[]*textTable {if _cagbf {_eb .Log .Info ("\u0066i\u006e\u0064\u0047\u0072\u0069\u0064\u0054\u0061\u0062\u006c\u0065s\u003a\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073",len (_degbe ));
for _abca ,_bagg :=range _degbe {_fe .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_abca ,_bagg );};};var _faaeb []*textTable ;for _ddbd ,_begd :=range _aebg {_fegdb ,_bbfec :=_degbe .findTableGrid (_begd );if _fegdb !=nil {_fegdb .log (_fe .Sprintf ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0057\u0069\u0074\u0068\u0047\u0072\u0069\u0064\u0073\u003a\u0020%\u0064",_ddbd ));
_faaeb =append (_faaeb ,_fegdb );_fegdb .markCells ();};for _bfcd :=range _bbfec {_bfcd ._eggcf =true ;};};if _cagbf {_eb .Log .Info ("\u0066i\u006e\u0064\u0047\u0072i\u0064\u0054\u0061\u0062\u006ce\u0073:\u0020%\u0064\u0020\u0074\u0061\u0062\u006c\u0065s",len (_faaeb ));
};return _faaeb ;};func (_dcdf *shapesState )lastpointEstablished ()(_efc .Point ,bool ){if _dcdf ._dce {return _dcdf ._ffdd ,false ;};_ddcg :=len (_dcdf ._bdbb );if _ddcg > 0&&_dcdf ._bdbb [_ddcg -1]._beeb {return _dcdf ._bdbb [_ddcg -1].last (),false ;
};return _efc .Point {},true ;};func (_eedc *textTable )reduceTiling (_cgcb gridTiling ,_cfbbd float64 )*textTable {_aace :=make ([]int ,0,_eedc ._ceccd );_cfeee :=make ([]int ,0,_eedc ._afbd );_cbbegc :=_cgcb ._bgff ;_gbdc :=_cgcb ._gefe ;for _fbdgb :=0;
_fbdgb < _eedc ._ceccd ;_fbdgb ++{_dafd :=_fbdgb > 0&&_ca .Abs (_gbdc [_fbdgb -1]-_gbdc [_fbdgb ])< _cfbbd &&_eedc .emptyCompositeRow (_fbdgb );if !_dafd {_aace =append (_aace ,_fbdgb );};};for _eeca :=0;_eeca < _eedc ._afbd ;_eeca ++{_cabf :=_eeca < _eedc ._afbd -1&&_ca .Abs (_cbbegc [_eeca +1]-_cbbegc [_eeca ])< _cfbbd &&_eedc .emptyCompositeColumn (_eeca );
if !_cabf {_cfeee =append (_cfeee ,_eeca );};};if len (_aace )==_eedc ._ceccd &&len (_cfeee )==_eedc ._afbd {return _eedc ;};_agee :=textTable {_dbedg :_eedc ._dbedg ,_afbd :len (_cfeee ),_ceccd :len (_aace ),_dbbd :make (map[uint64 ]compositeCell ,len (_cfeee )*len (_aace ))};
if _cagbf {_eb .Log .Info ("\u0072\u0065\u0064\u0075c\u0065\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0025d\u0078%\u0064\u0020\u002d\u003e\u0020\u0025\u0064x\u0025\u0064",_eedc ._afbd ,_eedc ._ceccd ,len (_cfeee ),len (_aace ));_eb .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_cfeee );
_eb .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_aace );};for _decf ,_cffga :=range _aace {for _agacc ,_gfdfc :=range _cfeee {_faacg ,_dbfbc :=_eedc .getComposite (_gfdfc ,_cffga );if len (_faacg )==0{continue ;
};if _cagbf {_fe .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_agacc ,_decf ,_gfdfc ,_cffga ,_dgff (_faacg .merge ().text (),50));};_agee .putComposite (_agacc ,_decf ,_faacg ,_dbfbc );
};};return &_agee ;};func _ddbab (_fgge float64 )float64 {return _cedda *_ca .Round (_fgge /_cedda )};func (_eaae *textPara )writeText (_baee _f .Writer ){if _eaae ._cfdd ==nil {_eaae .writeCellText (_baee );return ;};for _deac :=0;_deac < _eaae ._cfdd ._ceccd ;
_deac ++{for _ggged :=0;_ggged < _eaae ._cfdd ._afbd ;_ggged ++{_agffc :=_eaae ._cfdd .get (_ggged ,_deac );if _agffc ==nil {_baee .Write ([]byte ("\u0009"));}else {_agffc .writeCellText (_baee );};_baee .Write ([]byte ("\u0020"));};if _deac < _eaae ._cfdd ._ceccd -1{_baee .Write ([]byte ("\u000a"));
};};};func _efbdb (_fgeb ,_dfcbe int )int {if _fgeb > _dfcbe {return _fgeb ;};return _dfcbe ;};func (_dgb *stateStack )pop ()*textState {if _dgb .empty (){return nil ;};_ceg :=*(*_dgb )[len (*_dgb )-1];*_dgb =(*_dgb )[:len (*_dgb )-1];return &_ceg ;};func (_ceefa *textTable )reduce ()*textTable {_gacba :=make ([]int ,0,_ceefa ._ceccd );
_dbdc :=make ([]int ,0,_ceefa ._afbd );for _bcaf :=0;_bcaf < _ceefa ._ceccd ;_bcaf ++{if !_ceefa .emptyCompositeRow (_bcaf ){_gacba =append (_gacba ,_bcaf );};};for _ceaac :=0;_ceaac < _ceefa ._afbd ;_ceaac ++{if !_ceefa .emptyCompositeColumn (_ceaac ){_dbdc =append (_dbdc ,_ceaac );
};};if len (_gacba )==_ceefa ._ceccd &&len (_dbdc )==_ceefa ._afbd {return _ceefa ;};_ffcdb :=textTable {_dbedg :_ceefa ._dbedg ,_afbd :len (_dbdc ),_ceccd :len (_gacba ),_geegga :make (map[uint64 ]*textPara ,len (_dbdc )*len (_gacba ))};if _cagbf {_eb .Log .Info ("\u0072\u0065\u0064\u0075ce\u003a\u0020\u0025\u0064\u0078\u0025\u0064\u0020\u002d\u003e\u0020\u0025\u0064\u0078%\u0064",_ceefa ._afbd ,_ceefa ._ceccd ,len (_dbdc ),len (_gacba ));
_eb .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_dbdc );_eb .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_gacba );};for _addb ,_ccga :=range _gacba {for _ecbge ,_ebac :=range _dbdc {_bcegc ,_ecdebc :=_ceefa .getComposite (_ebac ,_ccga );
if _bcegc ==nil {continue ;};if _cagbf {_fe .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_ecbge ,_addb ,_ebac ,_ccga ,_dgff (_bcegc .merge ().text (),50));};_ffcdb .putComposite (_ecbge ,_addb ,_bcegc ,_ecdebc );
};};return &_ffcdb ;};func _edbbg (_fbafa _ga .PdfRectangle )*ruling {return &ruling {_bfaa :_aege ,_efef :_fbafa .Llx ,_dccfd :_fbafa .Lly ,_dgeg :_fbafa .Ury };};var _fd =false ;func (_afee *wordBag )highestWord (_bbece int ,_cacf ,_edba float64 )*textWord {for _ ,_fega :=range _afee ._cade [_bbece ]{if _cacf <=_fega ._gfgf &&_fega ._gfgf <=_edba {return _fega ;
};};return nil ;};func (_dgbe rulingList )connections (_bag map[int ]intSet ,_fbfa int )intSet {_acbea :=make (intSet );_bfcaa :=make (intSet );var _gegd func (int );_gegd =func (_dgca int ){if !_bfcaa .has (_dgca ){_bfcaa .add (_dgca );for _ddbba :=range _dgbe {if _bag [_ddbba ].has (_dgca ){_acbea .add (_ddbba );
};};for _ecgde :=range _dgbe {if _acbea .has (_ecgde ){_gegd (_ecgde );};};};};_gegd (_fbfa );return _acbea ;};func (_cee *stateStack )size ()int {return len (*_cee )};func _bbfcc (_gcdb float64 )bool {return _ca .Abs (_gcdb )< _dacb };func (_eaa *subpath )clear (){*_eaa =subpath {}};
func _ffbac (_cfcbb map[int ][]float64 )string {_fgfeb :=_dfabb (_cfcbb );_dcfec :=make ([]string ,len (_cfcbb ));for _cbed ,_dffb :=range _fgfeb {_dcfec [_cbed ]=_fe .Sprintf ("\u0025\u0064\u003a\u0020\u0025\u002e\u0032\u0066",_dffb ,_cfcbb [_dffb ]);
};return _fe .Sprintf ("\u007b\u0025\u0073\u007d",_cc .Join (_dcfec ,"\u002c\u0020"));};func _adgfd (_gbdb func (*wordBag ,*textWord ,float64 )bool ,_gfea float64 )func (*wordBag ,*textWord )bool {return func (_ddfb *wordBag ,_ceaa *textWord )bool {return _gbdb (_ddfb ,_ceaa ,_gfea )};
};

// RangeOffset returns the TextMarks in `ma` that overlap text[start:end] in the extracted text.
// These are tm: `start` <= tm.Offset + len(tm.Text) && tm.Offset < `end` where
// `start` and `end` are offsets in the extracted text.
// NOTE: TextMarks can contain multiple characters. e.g. "ffi" for the  ligature so the first and
// last elements of the returned TextMarkArray may only partially overlap text[start:end].
func (_ebcd *TextMarkArray )RangeOffset (start ,end int )(*TextMarkArray ,error ){if _ebcd ==nil {return nil ,_g .New ("\u006da\u003d\u003d\u006e\u0069\u006c");};if end < start {return nil ,_fe .Errorf ("\u0065\u006e\u0064\u0020\u003c\u0020\u0073\u0074\u0061\u0072\u0074\u002e\u0020\u0052\u0061n\u0067\u0065\u004f\u0066\u0066\u0073\u0065\u0074\u0020\u006e\u006f\u0074\u0020d\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020\u0073\u0074\u0061\u0072t=\u0025\u0064\u0020\u0065\u006e\u0064\u003d\u0025\u0064\u0020",start ,end );
};_ebgb :=len (_ebcd ._dfbb );if _ebgb ==0{return _ebcd ,nil ;};if start < _ebcd ._dfbb [0].Offset {start =_ebcd ._dfbb [0].Offset ;};if end > _ebcd ._dfbb [_ebgb -1].Offset +1{end =_ebcd ._dfbb [_ebgb -1].Offset +1;};_dcb :=_d .Search (_ebgb ,func (_cdda int )bool {return _ebcd ._dfbb [_cdda ].Offset +len (_ebcd ._dfbb [_cdda ].Text )-1>=start });
if !(0<=_dcb &&_dcb < _ebgb ){_aad :=_fe .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020\u0072\u0061\u006e\u0067\u0065\u002e\u0020\u0073\u0074\u0061\u0072\u0074\u003d%\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009 \u006c\u0061\u0073\u0074\u003d%\u0076",start ,_dcb ,_ebgb ,_ebcd ._dfbb [0],_ebcd ._dfbb [_ebgb -1]);
return nil ,_aad ;};_fgb :=_d .Search (_ebgb ,func (_daea int )bool {return _ebcd ._dfbb [_daea ].Offset > end -1});if !(0<=_fgb &&_fgb < _ebgb ){_abgc :=_fe .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020r\u0061\u006e\u0067e\u002e\u0020\u0065n\u0064\u003d%\u0064\u0020\u0069\u0045\u006e\u0064=\u0025d \u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d\u0025\u0076",end ,_fgb ,_ebgb ,_ebcd ._dfbb [0],_ebcd ._dfbb [_ebgb -1]);
return nil ,_abgc ;};if _fgb <=_dcb {return nil ,_fe .Errorf ("\u0069\u0045\u006e\u0064\u0020\u003c=\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003a\u0020\u0073\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u0065\u006ed\u003d\u0025\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020i\u0045n\u0064\u003d\u0025\u0064",start ,end ,_dcb ,_fgb );
};return &TextMarkArray {_dfbb :_ebcd ._dfbb [_dcb :_fgb ]},nil ;};func _eaac (_afca []*textWord ,_edge float64 ,_fccf ,_cffg rulingList )*wordBag {_ggbef :=_daegg (_afca [0],_edge ,_fccf ,_cffg );for _ ,_cfaa :=range _afca [1:]{_bdff :=_bdag (_cfaa ._gfgf );
_ggbef ._cade [_bdff ]=append (_ggbef ._cade [_bdff ],_cfaa );_ggbef .PdfRectangle =_cdg (_ggbef .PdfRectangle ,_cfaa .PdfRectangle );};_ggbef .sort ();return _ggbef ;};func (_fcea *ruling )gridIntersecting (_eeec *ruling )bool {return _ageg (_fcea ._dccfd ,_eeec ._dccfd )&&_ageg (_fcea ._dgeg ,_eeec ._dgeg );
};func (_dfbe lineRuling )yMean ()float64 {return 0.5*(_dfbe ._faef .Y +_dfbe ._ebf .Y )};func (_bbea *textObject )setTextRise (_abc float64 ){if _bbea ==nil {return ;};_bbea ._abde ._gba =_abc ;};func (_gddb paraList )findTextTables ()[]*textTable {var _ebfd []*textTable ;
for _ ,_bfaec :=range _gddb {if _bfaec .taken ()||_bfaec .Width ()==0{continue ;};_bfgce :=_bfaec .isAtom ();if _bfgce ==nil {continue ;};_bfgce .growTable ();if _bfgce ._afbd *_bfgce ._ceccd < _fcbgd {continue ;};_bfgce .markCells ();_bfgce .log ("\u0067\u0072\u006fw\u006e");
_ebfd =append (_ebfd ,_bfgce );};return _ebfd ;};func (_gbfg *textLine )appendWord (_agff *textWord ){_gbfg ._gbce =append (_gbfg ._gbce ,_agff );_gbfg .PdfRectangle =_cdg (_gbfg .PdfRectangle ,_agff .PdfRectangle );if _agff ._cbaa > _gbfg ._cefd {_gbfg ._cefd =_agff ._cbaa ;
};if _agff ._gfgf > _gbfg ._dbbc {_gbfg ._dbbc =_agff ._gfgf ;};};func (_bbga *shapesState )addPoint (_daef ,_gbd float64 ){_abcc :=_bbga .establishSubpath ();_gacd :=_bbga .devicePoint (_daef ,_gbd );if _abcc ==nil {_bbga ._dce =true ;_bbga ._ffdd =_gacd ;
}else {_abcc .add (_gacd );};};

// Append appends `mark` to the mark array.
func (_bcb *TextMarkArray )Append (mark TextMark ){_bcb ._dfbb =append (_bcb ._dfbb ,mark )};

// ExtractTextWithStats works like ExtractText but returns the number of characters in the output
// (`numChars`) and the number of characters that were not decoded (`numMisses`).
func (_cgc *Extractor )ExtractTextWithStats ()(_cfg string ,_ddb int ,_eed int ,_ffe error ){_ade ,_ddb ,_eed ,_ffe :=_cgc .ExtractPageText ();if _ffe !=nil {return "",_ddb ,_eed ,_ffe ;};return _ade .Text (),_ddb ,_eed ,nil ;};func (_eedca intSet )del (_abbbc int ){delete (_eedca ,_abbbc )};
func (_efcd *textWord )toTextMarks (_dagd *int )[]TextMark {var _ebgbf []TextMark ;for _ ,_affbc :=range _efcd ._afcbb {_ebgbf =_aeg (_ebgbf ,_dagd ,_affbc .ToTextMark ());};return _ebgbf ;};func (_caddb *ruling )alignsPrimary (_acbcb *ruling )bool {return _caddb ._bfaa ==_acbcb ._bfaa &&_ca .Abs (_caddb ._efef -_acbcb ._efef )< _ggbc *0.5;
};func (_eaca *wordBag )scanBand (_acd string ,_agbgg *wordBag ,_dbbf func (_cbcc *wordBag ,_gbca *textWord )bool ,_afd ,_dgae ,_dcbd float64 ,_gceg ,_dgfd bool )int {_baag :=_agbgg ._bdfd ;var _cceb map[int ]map[*textWord ]struct{};if !_gceg {_cceb =_eaca .makeRemovals ();
};_fga :=_fgee *_baag ;_fgf :=0;for _ ,_dbdb :=range _eaca .depthBand (_afd -_fga ,_dgae +_fga ){if len (_eaca ._cade [_dbdb ])==0{continue ;};for _ ,_acda :=range _eaca ._cade [_dbdb ]{if !(_afd -_fga <=_acda ._gfgf &&_acda ._gfgf <=_dgae +_fga ){continue ;
};if !_dbbf (_agbgg ,_acda ){continue ;};_ddgb :=2.0*_ca .Abs (_acda ._cbaa -_agbgg ._bdfd )/(_acda ._cbaa +_agbgg ._bdfd );_aecb :=_ca .Max (_acda ._cbaa /_agbgg ._bdfd ,_agbgg ._bdfd /_acda ._cbaa );_aeed :=_ca .Min (_ddgb ,_aecb );if _dcbd > 0&&_aeed > _dcbd {continue ;
};if _agbgg .blocked (_acda ){continue ;};if !_gceg {_agbgg .pullWord (_acda ,_dbdb ,_cceb );};_fgf ++;if !_dgfd {if _acda ._gfgf < _afd {_afd =_acda ._gfgf ;};if _acda ._gfgf > _dgae {_dgae =_acda ._gfgf ;};};if _gceg {break ;};};};if !_gceg {_eaca .applyRemovals (_cceb );
};return _fgf ;};func _fegfa (_bbgeb []*textWord ,_cecdg *textWord )[]*textWord {for _dfda ,_dcfcb :=range _bbgeb {if _dcfcb ==_cecdg {return _ebeca (_bbgeb ,_dfda );};};_eb .Log .Error ("\u0072\u0065\u006d\u006f\u0076e\u0057\u006f\u0072\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u0073\u0020\u0064o\u0065\u0073\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",_cecdg );
return nil ;};func (_ccfg rulingList )snapToGroups ()rulingList {_becc ,_bdbd :=_ccfg .vertsHorzs ();if len (_becc )> 0{_becc =_becc .snapToGroupsDirection ();};if len (_bdbd )> 0{_bdbd =_bdbd .snapToGroupsDirection ();};_gdad :=append (_becc ,_bdbd ...);
_gdad .log ("\u0073\u006e\u0061p\u0054\u006f\u0047\u0072\u006f\u0075\u0070\u0073");return _gdad ;};func (_gcfa *textObject )setHorizScaling (_ced float64 ){if _gcfa ==nil {return ;};_gcfa ._abde ._bdcb =_ced ;};

// String returns a string describing `pt`.
func (_aae PageText )String ()string {_dgad :=_fe .Sprintf ("P\u0061\u0067\u0065\u0054ex\u0074:\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073",len (_aae ._bec ));_acfb :=[]string {"\u002d"+_dgad };for _ ,_bcc :=range _aae ._bec {_acfb =append (_acfb ,_bcc .String ());
};_acfb =append (_acfb ,"\u002b"+_dgad );return _cc .Join (_acfb ,"\u000a");};func (_bffe *textTable )putComposite (_fdefg ,_eeded int ,_gbab paraList ,_degea _ga .PdfRectangle ){if len (_gbab )==0{_eb .Log .Error ("\u0074\u0065xt\u0054\u0061\u0062l\u0065\u0029\u0020\u0070utC\u006fmp\u006f\u0073\u0069\u0074\u0065\u003a\u0020em\u0070\u0074\u0079\u0020\u0070\u0061\u0072a\u0073");
return ;};_bfce :=compositeCell {PdfRectangle :_degea ,paraList :_gbab };if _cagbf {_fe .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0070\u0075\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u003c\u002d\u0025\u0073\u000a",_fdefg ,_eeded ,_bfce .String ());
};_bfce .updateBBox ();_bffe ._dbbd [_adfaf (_fdefg ,_eeded )]=_bfce ;};func (_dgagc paraList )readBefore (_faga []int ,_cdae ,_gggfdg int )bool {_dfdf ,_aafa :=_dgagc [_cdae ],_dgagc [_gggfdg ];if _agaa (_dfdf ,_aafa )&&_dfdf .Lly > _aafa .Lly {return true ;
};if !(_dfdf ._dcbgb .Urx < _aafa ._dcbgb .Llx ){return false ;};_efede ,_ageb :=_dfdf .Lly ,_aafa .Lly ;if _efede > _ageb {_ageb ,_efede =_efede ,_ageb ;};_eeac :=_ca .Max (_dfdf ._dcbgb .Llx ,_aafa ._dcbgb .Llx );_dcda :=_ca .Min (_dfdf ._dcbgb .Urx ,_aafa ._dcbgb .Urx );
_eacc :=_dgagc .llyRange (_faga ,_efede ,_ageb );for _ ,_edaf :=range _eacc {if _edaf ==_cdae ||_edaf ==_gggfdg {continue ;};_fbee :=_dgagc [_edaf ];if _fbee ._dcbgb .Llx <=_dcda &&_eeac <=_fbee ._dcbgb .Urx {return false ;};};return true ;};func _ecbf (_eae *_ef .ContentStreamOperation )(float64 ,error ){if len (_eae .Params )!=1{_adc :=_g .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");
_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_eae .Operand ,1,len (_eae .Params ),_eae .Params );
return 0.0,_adc ;};return _de .GetNumberAsFloat (_eae .Params [0]);};type compositeCell struct{_ga .PdfRectangle ;paraList ;};

// BBox returns the smallest axis-aligned rectangle that encloses all the TextMarks in `ma`.
func (_fbab *TextMarkArray )BBox ()(_ga .PdfRectangle ,bool ){var _dcfb _ga .PdfRectangle ;_ggbe :=false ;for _ ,_bdb :=range _fbab ._dfbb {if _bdb .Meta ||_fcadg (_bdb .Text ){continue ;};if _ggbe {_dcfb =_cdg (_dcfb ,_bdb .BBox );}else {_dcfb =_bdb .BBox ;
_ggbe =true ;};};return _dcfb ,_ggbe ;};func (_dece paraList )findTables (_bcfbee []gridTiling )[]*textTable {_dece .addNeighbours ();_d .Slice (_dece ,func (_beegc ,_ddac int )bool {return _deb (_dece [_beegc ],_dece [_ddac ])< 0});var _adbb []*textTable ;
if _adcf {_bcda :=_dece .findGridTables (_bcfbee );_adbb =append (_adbb ,_bcda ...);};if _dcca {_ccab :=_dece .findTextTables ();_adbb =append (_adbb ,_ccab ...);};return _adbb ;};func (_bged compositeCell )hasLines (_gdgg []*textLine )bool {for _gcgda ,_eebd :=range _gdgg {_faac :=_dgg (_bged .PdfRectangle ,_eebd .PdfRectangle );
if _cagbf {_fe .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u005e\u005e\u005e\u0069\u006e\u0074\u0065\u0072\u0073e\u0063t\u0073\u003d\u0025\u0074\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u000a",_faac ,_gcgda ,len (_gdgg ));_fe .Printf ("\u0020\u0020\u0020\u0020  \u005e\u005e\u005e\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025s\u000a",_bged );
_fe .Printf ("\u0020 \u0020 \u0020\u0020\u0020\u006c\u0069\u006e\u0065\u003d\u0025\u0073\u000a",_eebd );};if _faac {return true ;};};return false ;};func (_adga lineRuling )asRuling ()(*ruling ,bool ){_acbe :=ruling {_bfaa :_adga ._cafgf ,Color :_adga .Color ,_feec :_geegg };
switch _adga ._cafgf {case _aege :_acbe ._efef =_adga .xMean ();_acbe ._dccfd =_ca .Min (_adga ._faef .Y ,_adga ._ebf .Y );_acbe ._dgeg =_ca .Max (_adga ._faef .Y ,_adga ._ebf .Y );case _acec :_acbe ._efef =_adga .yMean ();_acbe ._dccfd =_ca .Min (_adga ._faef .X ,_adga ._ebf .X );
_acbe ._dgeg =_ca .Max (_adga ._faef .X ,_adga ._ebf .X );default:_eb .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_adga ._cafgf );return nil ,false ;};return &_acbe ,true ;};func (_gbdfa *textPara )depth ()float64 {if _gbdfa ._cace {return -1.0;
};if len (_gbdfa ._gfgc )> 0{return _gbdfa ._gfgc [0]._dbbc ;};return _gbdfa ._cfdd .depth ();};func _ebba (_gbag bounded )float64 {return -_gbag .bbox ().Lly };func (_geb *shapesState )cubicTo (_gbec ,_gcef ,_ecde ,_bfbge ,_cbcb ,_cea float64 ){if _ccade {_eb .Log .Info ("\u0063\u0075\u0062\u0069\u0063\u0054\u006f\u003a");
};_geb .addPoint (_cbcb ,_cea );};func (_bfgc *shapesState )establishSubpath ()*subpath {_gaf ,_baa :=_bfgc .lastpointEstablished ();if !_baa {_bfgc ._bdbb =append (_bfgc ._bdbb ,_daeg (_gaf ));};if len (_bfgc ._bdbb )==0{return nil ;};_bfgc ._dce =false ;
return _bfgc ._bdbb [len (_bfgc ._bdbb )-1];};type wordBag struct{_ga .PdfRectangle ;_bdfd float64 ;_ffed ,_bef rulingList ;_aaae float64 ;_cade map[int ][]*textWord ;};func _fgdg (_gdcf float64 )bool {return _ca .Abs (_gdcf )< _ggbc };func (_eadga rulingList )merge ()*ruling {_bbef :=_eadga [0]._efef ;
_gbcfa :=_eadga [0]._dccfd ;_bgdc :=_eadga [0]._dgeg ;for _ ,_ccadeg :=range _eadga [1:]{_bbef +=_ccadeg ._efef ;if _ccadeg ._dccfd < _gbcfa {_gbcfa =_ccadeg ._dccfd ;};if _ccadeg ._dgeg > _bgdc {_bgdc =_ccadeg ._dgeg ;};};_ecee :=&ruling {_bfaa :_eadga [0]._bfaa ,_feec :_eadga [0]._feec ,Color :_eadga [0].Color ,_efef :_bbef /float64 (len (_eadga )),_dccfd :_gbcfa ,_dgeg :_bgdc };
if _bfba {_eb .Log .Info ("\u006de\u0072g\u0065\u003a\u0020\u0025\u0032d\u0020\u0076e\u0063\u0073\u0020\u0025\u0073",len (_eadga ),_ecee );for _bada ,_gcfbe :=range _eadga {_fe .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bada ,_gcfbe );
};};return _ecee ;};func (_aeafc paraList )applyTables (_bdbaf []*textTable )paraList {var _eggg paraList ;for _ ,_agega :=range _bdbaf {_eggg =append (_eggg ,_agega .newTablePara ());};for _ ,_cbcg :=range _aeafc {if _cbcg ._eggcf {continue ;};_eggg =append (_eggg ,_cbcg );
};return _eggg ;};func (_gegb *textTable )logComposite (_eaecb string ){if !_cagbf {return ;};_eb .Log .Info ("\u007e~\u007eP\u0061\u0072\u0061\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_gegb ._afbd ,_gegb ._ceccd ,_eaecb );_fe .Printf ("\u0025\u0035\u0073 \u007c","");
for _deagc :=0;_deagc < _gegb ._afbd ;_deagc ++{_fe .Printf ("\u0025\u0033\u0064 \u007c",_deagc );};_fe .Println ("");_fe .Printf ("\u0025\u0035\u0073 \u002b","");for _cdbae :=0;_cdbae < _gegb ._afbd ;_cdbae ++{_fe .Printf ("\u0025\u0033\u0073 \u002b","\u002d\u002d\u002d");
};_fe .Println ("");for _cdeg :=0;_cdeg < _gegb ._ceccd ;_cdeg ++{_fe .Printf ("\u0025\u0035\u0064 \u007c",_cdeg );for _fbefb :=0;_fbefb < _gegb ._afbd ;_fbefb ++{_cggbb ,_ :=_gegb ._dbbd [_adfaf (_fbefb ,_cdeg )].parasBBox ();_fe .Printf ("\u0025\u0033\u0064 \u007c",len (_cggbb ));
};_fe .Println ("");};_eb .Log .Info ("\u007e~\u007eT\u0065\u0078\u0074\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_gegb ._afbd ,_gegb ._ceccd ,_eaecb );_fe .Printf ("\u0025\u0035\u0073 \u007c","");for _babcf :=0;_babcf < _gegb ._afbd ;_babcf ++{_fe .Printf ("\u0025\u0031\u0032\u0064\u0020\u007c",_babcf );
};_fe .Println ("");_fe .Printf ("\u0025\u0035\u0073 \u002b","");for _cbggc :=0;_cbggc < _gegb ._afbd ;_cbggc ++{_fe .Print ("\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d-\u002d\u002d\u002d\u002b");};_fe .Println ("");for _afdd :=0;_afdd < _gegb ._ceccd ;
_afdd ++{_fe .Printf ("\u0025\u0035\u0064 \u007c",_afdd );for _cabg :=0;_cabg < _gegb ._afbd ;_cabg ++{_ffbefc ,_ :=_gegb ._dbbd [_adfaf (_cabg ,_afdd )].parasBBox ();_ddfcc :="";_caef :=_ffbefc .merge ();if _caef !=nil {_ddfcc =_caef .text ();};_ddfcc =_fe .Sprintf ("\u0025\u0071",_dgff (_ddfcc ,12));
_ddfcc =_ddfcc [1:len (_ddfcc )-1];_fe .Printf ("\u0025\u0031\u0032\u0073\u0020\u007c",_ddfcc );};_fe .Println ("");};};func (_edcg *shapesState )lineTo (_efed ,_agbg float64 ){if _ccade {_eb .Log .Info ("\u006c\u0069\u006eeT\u006f\u0028\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0070\u003d\u0025\u002e\u0032\u0066",_efed ,_agbg ,_edcg .devicePoint (_efed ,_agbg ));
};_edcg .addPoint (_efed ,_agbg );};func (_gadf *textMark )bbox ()_ga .PdfRectangle {return _gadf .PdfRectangle };func _gafb (_bccbg int ,_fcca map[int ][]float64 )([]int ,int ){_gedea :=make ([]int ,_bccbg );_faafb :=0;for _ecgc :=0;_ecgc < _bccbg ;_ecgc ++{_gedea [_ecgc ]=_faafb ;
_faafb +=len (_fcca [_ecgc ])+1;};return _gedea ,_faafb ;};func (_gbbb *subpath )removeDuplicates (){if len (_gbbb ._gabf )==0{return ;};_dcff :=[]_efc .Point {_gbbb ._gabf [0]};for _ ,_eabe :=range _gbbb ._gabf [1:]{if !_cbbg (_eabe ,_dcff [len (_dcff )-1]){_dcff =append (_dcff ,_eabe );
};};_gbbb ._gabf =_dcff ;};func (_bbgff paraList )addNeighbours (){_adbba :=func (_eaddf []int ,_dagbb *textPara )([]*textPara ,[]*textPara ){_fgfec :=make ([]*textPara ,0,len (_eaddf )-1);_dbdd :=make ([]*textPara ,0,len (_eaddf )-1);for _ ,_gddbb :=range _eaddf {_bdgf :=_bbgff [_gddbb ];
if _bdgf .Urx <=_dagbb .Llx {_fgfec =append (_fgfec ,_bdgf );}else if _bdgf .Llx >=_dagbb .Urx {_dbdd =append (_dbdd ,_bdgf );};};return _fgfec ,_dbdd ;};_badd :=func (_fbbb []int ,_ggbf *textPara )([]*textPara ,[]*textPara ){_egec :=make ([]*textPara ,0,len (_fbbb )-1);
_bcde :=make ([]*textPara ,0,len (_fbbb )-1);for _ ,_gceag :=range _fbbb {_fffdd :=_bbgff [_gceag ];if _fffdd .Ury <=_ggbf .Lly {_bcde =append (_bcde ,_fffdd );}else if _fffdd .Lly >=_ggbf .Ury {_egec =append (_egec ,_fffdd );};};return _egec ,_bcde ;};
_aeee :=_bbgff .yNeighbours (_caf );for _ ,_abec :=range _bbgff {_gdfg :=_aeee [_abec ];if len (_gdfg )==0{continue ;};_ecdc ,_ebef :=_adbba (_gdfg ,_abec );if len (_ecdc )==0&&len (_ebef )==0{continue ;};if len (_ecdc )> 0{_abba :=_ecdc [0];for _ ,_dcce :=range _ecdc [1:]{if _dcce .Urx >=_abba .Urx {_abba =_dcce ;
};};for _ ,_gcac :=range _ecdc {if _gcac !=_abba &&_gcac .Urx > _abba .Llx {_abba =nil ;break ;};};if _abba !=nil &&_cdgf (_abec .PdfRectangle ,_abba .PdfRectangle ){_abec ._dcbdc =_abba ;};};if len (_ebef )> 0{_bcdaf :=_ebef [0];for _ ,_bbfeg :=range _ebef [1:]{if _bbfeg .Llx <=_bcdaf .Llx {_bcdaf =_bbfeg ;
};};for _ ,_abgad :=range _ebef {if _abgad !=_bcdaf &&_abgad .Llx < _bcdaf .Urx {_bcdaf =nil ;break ;};};if _bcdaf !=nil &&_cdgf (_abec .PdfRectangle ,_bcdaf .PdfRectangle ){_abec ._gdef =_bcdaf ;};};};_aeee =_bbgff .xNeighbours (_fgde );for _ ,_ecfc :=range _bbgff {_dcbba :=_aeee [_ecfc ];
if len (_dcbba )==0{continue ;};_egece ,_dbfba :=_badd (_dcbba ,_ecfc );if len (_egece )==0&&len (_dbfba )==0{continue ;};if len (_dbfba )> 0{_efbff :=_dbfba [0];for _ ,_ebde :=range _dbfba [1:]{if _ebde .Ury >=_efbff .Ury {_efbff =_ebde ;};};for _ ,_daabe :=range _dbfba {if _daabe !=_efbff &&_daabe .Ury > _efbff .Lly {_efbff =nil ;
break ;};};if _efbff !=nil &&_ccdf (_ecfc .PdfRectangle ,_efbff .PdfRectangle ){_ecfc ._bcae =_efbff ;};};if len (_egece )> 0{_bea :=_egece [0];for _ ,_gebfg :=range _egece [1:]{if _gebfg .Lly <=_bea .Lly {_bea =_gebfg ;};};for _ ,_eacaa :=range _egece {if _eacaa !=_bea &&_eacaa .Lly < _bea .Ury {_bea =nil ;
break ;};};if _bea !=nil &&_ccdf (_ecfc .PdfRectangle ,_bea .PdfRectangle ){_ecfc ._bfae =_bea ;};};};for _ ,_eedaf :=range _bbgff {if _eedaf ._dcbdc !=nil &&_eedaf ._dcbdc ._gdef !=_eedaf {_eedaf ._dcbdc =nil ;};if _eedaf ._bfae !=nil &&_eedaf ._bfae ._bcae !=_eedaf {_eedaf ._bfae =nil ;
};if _eedaf ._gdef !=nil &&_eedaf ._gdef ._dcbdc !=_eedaf {_eedaf ._gdef =nil ;};if _eedaf ._bcae !=nil &&_eedaf ._bcae ._bfae !=_eedaf {_eedaf ._bcae =nil ;};};};func (_feba *wordBag )arrangeText ()*textPara {_feba .sort ();if _eeef {_feba .removeDuplicates ();
};var _cgcdc []*textLine ;for _ ,_ddbc :=range _feba .depthIndexes (){for !_feba .empty (_ddbc ){_bbfgf :=_feba .firstReadingIndex (_ddbc );_aeeb :=_feba .firstWord (_bbfgf );_fbde :=_afggd (_feba ,_bbfgf );_dcgce :=_aeeb ._cbaa ;_faad :=_aeeb ._gfgf -_fgee *_dcgce ;
_fec :=_aeeb ._gfgf +_fgee *_dcgce ;_fedde :=_dad *_dcgce ;_dbabc :=_cfee *_dcgce ;_daac :for {var _gddc *textWord ;_bgge :=0;for _ ,_dbfg :=range _feba .depthBand (_faad ,_fec ){_fggf :=_feba .highestWord (_dbfg ,_faad ,_fec );if _fggf ==nil {continue ;
};_fcff :=_eagc (_fggf ,_fbde ._gbce [len (_fbde ._gbce )-1]);if _fcff < -_dbabc {break _daac ;};if _fcff > _fedde {continue ;};if _gddc !=nil &&_eabb (_fggf ,_gddc )>=0{continue ;};_gddc =_fggf ;_bgge =_dbfg ;};if _gddc ==nil {break ;};_fbde .pullWord (_feba ,_gddc ,_bgge );
};_fbde .markWordBoundaries ();_cgcdc =append (_cgcdc ,_fbde );};};if len (_cgcdc )==0{return nil ;};_d .Slice (_cgcdc ,func (_bafb ,_aebf int )bool {return _acfd (_cgcdc [_bafb ],_cgcdc [_aebf ])< 0});_bfff :=_gdae (_feba .PdfRectangle ,_cgcdc );if _dbae {_eb .Log .Info ("\u0061\u0072\u0072an\u0067\u0065\u0054\u0065\u0078\u0074\u0020\u0021\u0021\u0021\u0020\u0070\u0061\u0072\u0061\u003d\u0025\u0073",_bfff .String ());
if _gede {for _fbge ,_bdee :=range _bfff ._gfgc {_fe .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fbge ,_bdee .String ());if _geff {for _dgcb ,_dacc :=range _bdee ._gbce {_fe .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_dgcb ,_dacc .String ());
for _bfcg ,_afa :=range _dacc ._afcbb {_fe .Printf ("\u00251\u0032\u0064\u003a\u0020\u0025\u0073\n",_bfcg ,_afa .String ());};};};};};};return _bfff ;};func (_agfd paraList )findTableGrid (_eaegda gridTiling )(*textTable ,map[*textPara ]struct{}){_ccedd :=len (_eaegda ._bgff );
_ceccda :=len (_eaegda ._gefe );_gdage :=textTable {_dbedg :true ,_afbd :_ccedd ,_ceccd :_ceccda ,_geegga :make (map[uint64 ]*textPara ,_ccedd *_ceccda ),_dbbd :make (map[uint64 ]compositeCell ,_ccedd *_ceccda )};_efdea :=make (map[*textPara ]struct{});
_cddag :=int ((1.0-_eadbe )*float64 (_ccedd *_ceccda ));_fbbee :=0;if _degb {_eb .Log .Info ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0064\u0020\u0078\u0020%\u0064",_ccedd ,_ceccda );};for _badb ,_fcge :=range _eaegda ._gefe {_dabg ,_ddbdg :=_eaegda ._ecbd [_fcge ];
if !_ddbdg {continue ;};for _dafc ,_fgdbab :=range _eaegda ._bgff {_ceceg ,_abfc :=_dabg [_fgdbab ];if !_abfc {continue ;};_fbcff :=_agfd .inTile (_ceceg );if len (_fbcff )==0{_fbbee ++;if _fbbee > _cddag {if _degb {_eb .Log .Info ("\u0021\u006e\u0075m\u0045\u006d\u0070\u0074\u0079\u003d\u0025\u0064",_fbbee );
};return nil ,nil ;};}else {_gdage .putComposite (_dafc ,_badb ,_fbcff ,_ceceg .PdfRectangle );for _ ,_badf :=range _fbcff {_efdea [_badf ]=struct{}{};};};};};_affda :=0;for _dcef :=0;_dcef < _ccedd ;_dcef ++{_gdgfe :=_gdage .get (_dcef ,0);if _gdgfe ==nil ||!_gdgfe ._cace {_affda ++;
};};if _affda ==0{if _degb {_eb .Log .Info ("\u0021\u006e\u0075m\u0048\u0065\u0061\u0064\u0065\u0072\u003d\u0030");};return nil ,nil ;};_fabcg :=_gdage .reduceTiling (_eaegda ,_eeb );_fabcg =_fabcg .subdivide ();return _fabcg ,_efdea ;};func _bcgag (_eeebb []_de .PdfObject )(_eccga ,_agcg float64 ,_dcfbb error ){if len (_eeebb )!=2{return 0,0,_fe .Errorf ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020o\u0066 \u0070\u0061\u0072\u0061\u006d\u0073\u003a \u0025\u0064",len (_eeebb ));
};_eegd ,_dcfbb :=_de .GetNumbersAsFloat (_eeebb );if _dcfbb !=nil {return 0,0,_dcfbb ;};return _eegd [0],_eegd [1],nil ;};type fontEntry struct{_bce *_ga .PdfFont ;_fbeg int64 ;};func _fdb (_dfb _efc .Matrix )_efc .Point {_ddf ,_bff :=_dfb .Translation ();
return _efc .Point {X :_ddf ,Y :_bff };};

// Tables returns the tables extracted from the page.
func (_eadd PageText )Tables ()[]TextTable {if _cagbf {_eb .Log .Info ("\u0054\u0061\u0062\u006c\u0065\u0073\u003a\u0020\u0025\u0064",len (_eadd ._gdg ));};return _eadd ._gdg ;};func (_bggea *textTable )get (_geabe ,_fgagf int )*textPara {return _bggea ._geegga [_adfaf (_geabe ,_fgagf )];
};func (_gagf *textObject )moveTextSetLeading (_gfc ,_caa float64 ){_gagf ._abde ._beb =-_caa ;_gagf .moveLP (_gfc ,_caa );};func _gcbgc (_cbeb []rulingList )(rulingList ,rulingList ){var _fadgg rulingList ;for _ ,_bgfd :=range _cbeb {_fadgg =append (_fadgg ,_bgfd ...);
};return _fadgg .vertsHorzs ();};func (_fcc *textObject )getFillColor ()_ea .Color {return _ddfd (_fcc ._geae .ColorspaceNonStroking ,_fcc ._geae .ColorNonStroking );};func _bdag (_deae float64 )int {var _egbe int ;if _deae >=0{_egbe =int (_deae /_dbda );
}else {_egbe =int (_deae /_dbda )-1;};return _egbe ;};func (_daefe paraList )llyRange (_cfca []int ,_cgfa ,_dgde float64 )[]int {_dacfa :=len (_daefe );if _dgde < _daefe [_cfca [0]].Lly ||_cgfa > _daefe [_cfca [_dacfa -1]].Lly {return nil ;};_adec :=_d .Search (_dacfa ,func (_bbffg int )bool {return _daefe [_cfca [_bbffg ]].Lly >=_cgfa });
_edbb :=_d .Search (_dacfa ,func (_fedcf int )bool {return _daefe [_cfca [_fedcf ]].Lly > _dgde });return _cfca [_adec :_edbb ];};

// Text returns the extracted page text.
func (_bddc PageText )Text ()string {return _bddc ._caea };func (_fcbgc paraList )xNeighbours (_aaaa float64 )map[*textPara ][]int {_dfcd :=make ([]event ,2*len (_fcbgc ));if _aaaa ==0{for _cdfea ,_caead :=range _fcbgc {_dfcd [2*_cdfea ]=event {_caead .Llx ,true ,_cdfea };
_dfcd [2*_cdfea +1]=event {_caead .Urx ,false ,_cdfea };};}else {for _cbeg ,_cecdf :=range _fcbgc {_dfcd [2*_cbeg ]=event {_cecdf .Llx -_aaaa *_cecdf .fontsize (),true ,_cbeg };_dfcd [2*_cbeg +1]=event {_cecdf .Urx +_aaaa *_cecdf .fontsize (),false ,_cbeg };
};};return _fcbgc .eventNeighbours (_dfcd );};func (_cfe *textObject )nextLine (){_cfe .moveLP (0,-_cfe ._abde ._beb )};const _dbg =1.0/1000.0;

// String returns a description of `v`.
func (_fdeg *ruling )String ()string {if _fdeg ._bfaa ==_gdga {return "\u004e\u004f\u0054\u0020\u0052\u0055\u004c\u0049\u004e\u0047";};_bcgd ,_bceg :="\u0078","\u0079";if _fdeg ._bfaa ==_acec {_bcgd ,_bceg ="\u0079","\u0078";};_ebed :="";if _fdeg ._gdab !=0.0{_ebed =_fe .Sprintf (" \u0077\u0069\u0064\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_fdeg ._gdab );
};return _fe .Sprintf ("\u0025\u00310\u0073\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0020\u0025\u0076\u0025\u0073",_fdeg ._bfaa ,_bcgd ,_fdeg ._efef ,_bceg ,_fdeg ._dccfd ,_fdeg ._dgeg ,_fdeg ._dgeg -_fdeg ._dccfd ,_fdeg ._feec ,_fdeg .Color ,_ebed );
};func _ffbed (_abefd []pathSection ){if _cedda < 0.0{return ;};if _eadg {_eb .Log .Info ("\u0067\u0072\u0061\u006e\u0075\u006c\u0061\u0072\u0069\u007a\u0065\u003a\u0020\u0025\u0064 \u0073u\u0062\u0070\u0061\u0074\u0068\u0020\u0073\u0065\u0063\u0074\u0069\u006f\u006e\u0073",len (_abefd ));
};for _cdbfgg ,_bdgd :=range _abefd {for _bedc ,_dbca :=range _bdgd ._fgefd {for _ggee ,_eaeebf :=range _dbca ._gabf {_dbca ._gabf [_ggee ]=_efc .Point {X :_ddbab (_eaeebf .X ),Y :_ddbab (_eaeebf .Y )};if _eadg {_fgaca :=_dbca ._gabf [_ggee ];if !_cbbg (_eaeebf ,_fgaca ){_aeddb :=_efc .Point {X :_fgaca .X -_eaeebf .X ,Y :_fgaca .Y -_eaeebf .Y };
_fe .Printf ("\u0025\u0034d \u002d\u0020\u00254\u0064\u0020\u002d\u0020%4d\u003a %\u002e\u0032\u0066\u0020\u2192\u0020\u0025.2\u0066\u0020\u0028\u0025\u0067\u0029\u000a",_cdbfgg ,_bedc ,_ggee ,_eaeebf ,_fgaca ,_aeddb );};};};};};};func (_dba *stateStack )push (_eac *textState ){_gcg :=*_eac ;
*_dba =append (*_dba ,&_gcg )};func (_cced rulingList )aligned ()bool {if len (_cced )< 2{return false ;};_edcb :=make (map[*ruling ]int );_edcb [_cced [0]]=0;for _ ,_gfaa :=range _cced [1:]{_egbd :=false ;for _agbe :=range _edcb {if _gfaa .gridIntersecting (_agbe ){_edcb [_agbe ]++;
_egbd =true ;break ;};};if !_egbd {_edcb [_gfaa ]=0;};};_dfabcd :=0;for _ ,_dgfdg :=range _edcb {if _dgfdg ==0{_dfabcd ++;};};_edgga :=float64 (_dfabcd )/float64 (len (_cced ));_cegga :=_edgga <=1.0-_aeeg ;if _eadg {_eb .Log .Info ("\u0061\u006c\u0069\u0067\u006e\u0065\u0064\u003d\u0025\u0074\u0020\u0075\u006em\u0061\u0074\u0063\u0068\u0065\u0064=\u0025\u002e\u0032\u0066\u003d\u0025\u0064\u002f\u0025\u0064\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_cegga ,_edgga ,_dfabcd ,len (_cced ),_cced .String ());
};return _cegga ;};func _fadgdf (_adcde string )(string ,bool ){_gadbb :=[]rune (_adcde );if len (_gadbb )!=1{return "",false ;};_effa ,_bbcc :=_degdf [_gadbb [0]];return _effa ,_bbcc ;};

// String returns a description of `w`.
func (_dcbe *textWord )String ()string {return _fe .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_dcbe ._gfgf ,_dcbe .PdfRectangle ,_dcbe ._cbaa ,_dcbe ._cdeef );
};func _daeg (_cebf _efc .Point )*subpath {return &subpath {_gabf :[]_efc .Point {_cebf }}};func (_bgfg rulingList )removeDuplicates ()rulingList {if len (_bgfg )==0{return nil ;};_bgfg .sort ();_bcee :=rulingList {_bgfg [0]};for _ ,_dcddd :=range _bgfg [1:]{if _dcddd .equals (_bcee [len (_bcee )-1]){continue ;
};_bcee =append (_bcee ,_dcddd );};return _bcee ;};func _cfgc (_cdce _ga .PdfRectangle ,_ecdd bounded )float64 {return _cdce .Ury -_ecdd .bbox ().Lly };func _gdae (_abef _ga .PdfRectangle ,_aaadb []*textLine )*textPara {return &textPara {PdfRectangle :_abef ,_gfgc :_aaadb };
};func (_fabg rulingList )vertsHorzs ()(rulingList ,rulingList ){var _gagb ,_eaegd rulingList ;for _ ,_fbad :=range _fabg {switch _fbad ._bfaa {case _aege :_gagb =append (_gagb ,_fbad );case _acec :_eaegd =append (_eaegd ,_fbad );};};return _gagb ,_eaegd ;
};func (_fbef paraList )merge ()*textPara {_eb .Log .Trace ("\u006d\u0065\u0072\u0067\u0065:\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_fbef ));
if len (_fbef )==0{return nil ;};_fbef .sortReadingOrder ();_eaeg :=_fbef [0].PdfRectangle ;_dadg :=_fbef [0]._gfgc ;for _ ,_dcfg :=range _fbef [1:]{_eaeg =_cdg (_eaeg ,_dcfg .PdfRectangle );_dadg =append (_dadg ,_dcfg ._gfgc ...);};return _gdae (_eaeg ,_dadg );
};func (_eeebg *textTable )getRight ()paraList {_bfgcf :=make (paraList ,_eeebg ._ceccd );for _bcgce :=0;_bcgce < _eeebg ._ceccd ;_bcgce ++{_bdae :=_eeebg .get (_eeebg ._afbd -1,_bcgce )._gdef ;if _bdae .taken (){return nil ;};_bfgcf [_bcgce ]=_bdae ;};
for _bddaa :=0;_bddaa < _eeebg ._ceccd -1;_bddaa ++{if _bfgcf [_bddaa ]._bcae !=_bfgcf [_bddaa +1]{return nil ;};};return _bfgcf ;};const (_bcdc =true ;_eeef =true ;_gadc =true ;_dacf =false ;_cfad =false ;_aecbg =6;_dbce =3.0;_ecda =200;_adcf =true ;_dcca =true ;
_abad =true ;_dgag =true ;_eegb =false ;);func (_cdgcb rulingList )asTiling ()gridTiling {if _degb {_eb .Log .Info ("r\u0075\u006ci\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0063s\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u002b\u002b\u002b\u0020\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_cdgcb ));
};for _fggac ,_dega :=range _cdgcb [1:]{_bbdf :=_cdgcb [_fggac ];if _bbdf .alignsPrimary (_dega )&&_bbdf .alignsSec (_dega ){_eb .Log .Error ("a\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0044\u0075\u0070\u006c\u0069\u0063\u0061\u0074\u0065 \u0072\u0075\u006c\u0069\u006e\u0067\u0073\u002e\u000a\u0009v=\u0025\u0073\u000a\t\u0077=\u0025\u0073",_dega ,_bbdf );
};};_cdgcb .sortStrict ();_cdgcb .log ("\u0073n\u0061\u0070\u0070\u0065\u0064");_gcdd ,_fgdd :=_cdgcb .vertsHorzs ();_eaeeb :=_gcdd .primaries ();_eefb :=_fgdd .primaries ();_eeda :=len (_eaeeb )-1;_ddcgd :=len (_eefb )-1;if _eeda ==0||_ddcgd ==0{return gridTiling {};
};_ebfg :=_ga .PdfRectangle {Llx :_eaeeb [0],Urx :_eaeeb [_eeda ],Lly :_eefb [0],Ury :_eefb [_ddcgd ]};if _degb {_eb .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0072\u0074s=\u0025\u0064",len (_gcdd ));
for _egea ,_gacf :=range _gcdd {_fe .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_egea ,_gacf );};_eb .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0068\u006f\u0072\u007as=\u0025\u0064",len (_fgdd ));
for _egcde ,_fbgg :=range _fgdd {_fe .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_egcde ,_fbgg );};_eb .Log .Info ("\u0072\u0075\u006c\u0069\u006eg\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067:\u0020\u0020\u0077\u0078\u0068\u003d\u0025\u0064\u0078\u0025\u0064\u000a\u0009\u006c\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a\u0009\u006c\u006c\u0079\u003d\u0025\u002e\u0032f",_eeda ,_ddcgd ,_eaeeb ,_eefb );
};_efcf :=make ([]gridTile ,_eeda *_ddcgd );for _bbge :=_ddcgd -1;_bbge >=0;_bbge --{_bacf :=_eefb [_bbge ];_ddcgb :=_eefb [_bbge +1];for _feaba :=0;_feaba < _eeda ;_feaba ++{_adcea :=_eaeeb [_feaba ];_gfdg :=_eaeeb [_feaba +1];_dbaef :=_gcdd .findPrimSec (_adcea ,_bacf );
_fggb :=_gcdd .findPrimSec (_gfdg ,_bacf );_cdee :=_fgdd .findPrimSec (_bacf ,_adcea );_eegba :=_fgdd .findPrimSec (_ddcgb ,_adcea );_ccfbf :=_ga .PdfRectangle {Llx :_adcea ,Urx :_gfdg ,Lly :_bacf ,Ury :_ddcgb };_bfaed :=_cbec (_ccfbf ,_dbaef ,_fggb ,_cdee ,_eegba );
_efcf [_bbge *_eeda +_feaba ]=_bfaed ;if _degb {_fe .Printf ("\u0020\u0020\u0078\u003d\u0025\u0032\u0064\u0020\u0079\u003d\u0025\u0032\u0064\u003a\u0020%\u0073 \u0025\u0036\u002e\u0032\u0066\u0020\u0078\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_feaba ,_bbge ,_bfaed .String (),_bfaed .Width (),_bfaed .Height ());
};};};if _degb {_eb .Log .Info ("r\u0075\u006c\u0069\u006e\u0067\u004c\u0069\u0073\u0074.\u0061\u0073\u0054\u0069\u006c\u0069\u006eg:\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0020\u0068\u006f\u0072\u0069zo\u006e\u0074a\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_ebfg );
};_eabae :=make ([]map[float64 ]gridTile ,_ddcgd );for _baaf :=_ddcgd -1;_baaf >=0;_baaf --{if _degb {_fe .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_baaf );};_eabae [_baaf ]=make (map[float64 ]gridTile ,_eeda );for _acgg :=0;_acgg < _eeda ;
_acgg ++{_baac :=_efcf [_baaf *_eeda +_acgg ];if _degb {_fe .Printf ("\u0020\u0020\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_acgg ,_baac );};if !_baac ._bcba {continue ;};_bded :=_acgg ;for _cgfd :=_acgg +1;!_baac ._aegf &&_cgfd < _eeda ;_cgfd ++{_ffede :=_efcf [_baaf *_eeda +_cgfd ];
_baac .Urx =_ffede .Urx ;_baac ._agbfd =_baac ._agbfd ||_ffede ._agbfd ;_baac ._ddcc =_baac ._ddcc ||_ffede ._ddcc ;_baac ._aegf =_ffede ._aegf ;if _degb {_fe .Printf ("\u0020 \u0020%\u0034\u0064\u003a\u0020\u0025s\u0020\u2192 \u0025\u0073\u000a",_cgfd ,_ffede ,_baac );
};_bded =_cgfd ;};if _degb {_fe .Printf (" \u0020 \u0025\u0032\u0064\u0020\u002d\u0020\u0025\u0032d\u0020\u2192\u0020\u0025s\n",_acgg ,_bded ,_baac );};_acgg =_bded ;_eabae [_baaf ][_baac .Llx ]=_baac ;};};_fgce :=make (map[float64 ]map[float64 ]gridTile ,_ddcgd );
_adfd :=make (map[float64 ]map[float64 ]struct{},_ddcgd );for _agdg :=_ddcgd -1;_agdg >=0;_agdg --{_cggbf :=_efcf [_agdg *_eeda ].Lly ;_fgce [_cggbf ]=make (map[float64 ]gridTile ,_eeda );_adfd [_cggbf ]=make (map[float64 ]struct{},_eeda );};if _degb {_eb .Log .Info ("\u0072u\u006c\u0069n\u0067\u004c\u0069s\u0074\u002e\u0061\u0073\u0054\u0069\u006ci\u006e\u0067\u003a\u0020\u0063\u006fa\u006c\u0065\u0073\u0063\u0065\u0020\u0076\u0065\u0072\u0074\u0069c\u0061\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_ebfg );
};for _dafb :=_ddcgd -1;_dafb >=0;_dafb --{_gecd :=_efcf [_dafb *_eeda ].Lly ;_efegg :=_eabae [_dafb ];if _degb {_fe .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_dafb );};for _ ,_bdeg :=range _eaef (_efegg ){if _ ,_bcbab :=_adfd [_gecd ][_bdeg ];
_bcbab {continue ;};_geba :=_efegg [_bdeg ];if _degb {_fe .Printf (" \u0020\u0020\u0020\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_geba .String ());};for _fbgb :=_dafb -1;_fbgb >=0;_fbgb --{if _geba ._ddcc {break ;};_acbb :=_eabae [_fbgb ];_ceddag ,_aedg :=_acbb [_bdeg ];
if !_aedg {break ;};if _ceddag .Urx !=_geba .Urx {break ;};_geba ._ddcc =_ceddag ._ddcc ;_geba .Lly =_ceddag .Lly ;if _degb {_fe .Printf ("\u0020\u0020\u0020\u0020  \u0020\u0020\u0076\u003d\u0025\u0073\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_ceddag .String (),_geba .String ());
};_adfd [_ceddag .Lly ][_ceddag .Llx ]=struct{}{};};if _dafb ==0{_geba ._ddcc =true ;};if _geba .complete (){_fgce [_gecd ][_bdeg ]=_geba ;};};};_ecadg :=gridTiling {PdfRectangle :_ebfg ,_bgff :_dcbgg (_fgce ),_gefe :_ecf (_fgce ),_ecbd :_fgce };_ecadg .log ("\u0043r\u0065\u0061\u0074\u0065\u0064");
return _ecadg ;};func (_fdbd paraList )inTile (_dbbda gridTile )paraList {var _gedbg paraList ;for _ ,_ggdd :=range _fdbd {if _dbbda .contains (_ggdd .PdfRectangle ){_gedbg =append (_gedbg ,_ggdd );};};if _cagbf {_fe .Printf ("\u0020 \u0020\u0069\u006e\u0054i\u006c\u0065\u003a\u0020\u0020%\u0073 \u0069n\u0073\u0069\u0064\u0065\u003d\u0025\u0064\n",_dbbda ,len (_gedbg ));
for _dadgg ,_cbbbc :=range _gedbg {_fe .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_dadgg ,_cbbbc );};_fe .Println ("");};return _gedbg ;};func (_gccd paraList )sortReadingOrder (){_eb .Log .Trace ("\u0073\u006fr\u0074\u0052\u0065\u0061\u0064i\u006e\u0067\u004f\u0072\u0064e\u0072\u003a\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_gccd ));
if len (_gccd )<=1{return ;};_gccd .computeEBBoxes ();_d .Slice (_gccd ,func (_gafa ,_bffa int )bool {return _acfd (_gccd [_gafa ],_gccd [_bffa ])<=0});_gafe :=_gccd .topoOrder ();_gccd .reorder (_gafe );};

// String returns a human readable description of `path`.
func (_fdcc *subpath )String ()string {_acbfb :=_fdcc ._gabf ;_cbbe :=len (_acbfb );if _cbbe <=5{return _fe .Sprintf ("\u0025d\u003a\u0020\u0025\u0036\u002e\u0032f",_cbbe ,_acbfb );};return _fe .Sprintf ("\u0025d\u003a\u0020\u0025\u0036.\u0032\u0066\u0020\u0025\u0036.\u0032f\u0020.\u002e\u002e\u0020\u0025\u0036\u002e\u0032f",_cbbe ,_acbfb [0],_acbfb [1],_acbfb [_cbbe -1]);
};func (_feab *shapesState )newSubPath (){_feab .clearPath ();if _ccade {_eb .Log .Info ("\u006e\u0065\u0077\u0053\u0075\u0062\u0050\u0061\u0074h\u003a\u0020\u0025\u0073",_feab );};};func (_abea *textPara )bbox ()_ga .PdfRectangle {return _abea .PdfRectangle };


// Extractor stores and offers functionality for extracting content from PDF pages.
type Extractor struct{_cg string ;_gf *_ga .PdfPageResources ;_cgf _ga .PdfRectangle ;_a map[string ]fontEntry ;_ee map[string ]textResult ;_df int64 ;_fef int ;};func (_cagb *textObject )checkOp (_bdc *_ef .ContentStreamOperation ,_eaee int ,_addc bool )(_bgc bool ,_dfgb error ){if _cagb ==nil {var _ggb []_de .PdfObject ;
if _eaee > 0{_ggb =_bdc .Params ;if len (_ggb )> _eaee {_ggb =_ggb [:_eaee ];};};_eb .Log .Debug ("\u0025\u0023q \u006f\u0070\u0065r\u0061\u006e\u0064\u0020out\u0073id\u0065\u0020\u0074\u0065\u0078\u0074\u002e p\u0061\u0072\u0061\u006d\u0073\u003d\u0025+\u0076",_bdc .Operand ,_ggb );
};if _eaee >=0{if len (_bdc .Params )!=_eaee {if _addc {_dfgb =_g .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");};_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_bdc .Operand ,_eaee ,len (_bdc .Params ),_bdc .Params );
return false ,_dfgb ;};};return true ,nil ;};func (_cagec *textTable )put (_bebgd ,_abfgb int ,_ecgb *textPara ){_cagec ._geegga [_adfaf (_bebgd ,_abfgb )]=_ecgb ;};func (_caecg *textWord )bbox ()_ga .PdfRectangle {return _caecg .PdfRectangle };func (_bbdd *textTable )compositeColCorridors ()map[int ][]float64 {_gafgb :=make (map[int ][]float64 ,_bbdd ._afbd );
if _cagbf {_eb .Log .Info ("\u0063\u006f\u006d\u0070o\u0073\u0069\u0074\u0065\u0043\u006f\u006c\u0043\u006f\u0072r\u0069d\u006f\u0072\u0073\u003a\u0020\u0077\u003d%\u0064\u0020",_bbdd ._afbd );};for _cacbd :=0;_cacbd < _bbdd ._afbd ;_cacbd ++{_gafgb [_cacbd ]=nil ;
};return _gafgb ;};type textTable struct{_ga .PdfRectangle ;_afbd ,_ceccd int ;_dbedg bool ;_geegga map[uint64 ]*textPara ;_dbbd map[uint64 ]compositeCell ;};func _egacc (_beee ,_ggac ,_aaea float64 )rulingKind {if _beee >=_aaea &&_bdfb (_ggac ,_beee ){return _acec ;
};if _ggac >=_aaea &&_bdfb (_beee ,_ggac ){return _aege ;};return _gdga ;};func (_ebcf *textObject )reset (){_ebcf ._fbg =_efc .IdentityMatrix ();_ebcf ._eccg =_efc .IdentityMatrix ();_ebcf ._fdfa =nil ;};

// New returns an Extractor instance for extracting content from the input PDF page.
func New (page *_ga .PdfPage )(*Extractor ,error ){const _cbe ="\u0065\u0078\u0074\u0072\u0061\u0063\u0074\u006f\u0072\u002e\u004e\u0065\u0077";_gg ,_fa :=page .GetAllContentStreams ();if _fa !=nil {return nil ,_fa ;};_da ,_fa :=page .GetMediaBox ();if _fa !=nil {return nil ,_fe .Errorf ("\u0065\u0078\u0074r\u0061\u0063\u0074\u006fr\u0020\u0072\u0065\u0071\u0075\u0069\u0072e\u0073\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u002e\u0020\u0025\u0076",_fa );
};_eeg :=&Extractor {_cg :_gg ,_gf :page .Resources ,_cgf :*_da ,_a :map[string ]fontEntry {},_ee :map[string ]textResult {}};if _eeg ._cgf .Llx > _eeg ._cgf .Urx {_eb .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0058\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_eeg ._cgf );
_eeg ._cgf .Llx ,_eeg ._cgf .Urx =_eeg ._cgf .Urx ,_eeg ._cgf .Llx ;};if _eeg ._cgf .Lly > _eeg ._cgf .Ury {_eb .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0059\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_eeg ._cgf );
_eeg ._cgf .Lly ,_eeg ._cgf .Ury =_eeg ._cgf .Ury ,_eeg ._cgf .Lly ;};_b .TrackUse (_cbe );return _eeg ,nil ;};func _eedd (_abgb []TextMark ,_caae *int ,_cagf string )[]TextMark {_eacd :=_gad ;_eacd .Text =_cagf ;return _aeg (_abgb ,_caae ,_eacd );};func (_bbfb paraList )computeEBBoxes (){if _geeg {_eb .Log .Info ("\u0063o\u006dp\u0075\u0074\u0065\u0045\u0042\u0042\u006f\u0078\u0065\u0073\u003a");
};for _ ,_bcec :=range _bbfb {_bcec ._dcbgb =_bcec .PdfRectangle ;};_agfc :=_bbfb .yNeighbours (0);for _afdfd ,_bcf :=range _bbfb {_acefc :=_bcf ._dcbgb ;_gfdd ,_bcbd :=-1.0e9,+1.0e9;for _ ,_ecgd :=range _agfc [_bcf ]{_efdb :=_bbfb [_ecgd ]._dcbgb ;if _efdb .Urx < _acefc .Llx {_gfdd =_ca .Max (_gfdd ,_efdb .Urx );
}else if _acefc .Urx < _efdb .Llx {_bcbd =_ca .Min (_bcbd ,_efdb .Llx );};};for _acdb ,_fceff :=range _bbfb {_gfed :=_fceff ._dcbgb ;if _afdfd ==_acdb ||_gfed .Ury > _acefc .Lly {continue ;};if _gfdd <=_gfed .Llx &&_gfed .Llx < _acefc .Llx {_acefc .Llx =_gfed .Llx ;
}else if _gfed .Urx <=_bcbd &&_acefc .Urx < _gfed .Urx {_acefc .Urx =_gfed .Urx ;};};if _geeg {_fe .Printf ("\u0025\u0034\u0064\u003a %\u0036\u002e\u0032\u0066\u2192\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0071\u000a",_afdfd ,_bcf ._dcbgb ,_acefc ,_dgff (_bcf .text (),50));
};_bcf ._dcbgb =_acefc ;};if _dacf {for _ ,_agab :=range _bbfb {_agab .PdfRectangle =_agab ._dcbgb ;};};};func (_ffedea *textWord )addDiacritic (_egbab string ){_gcfcg :=_ffedea ._afcbb [len (_ffedea ._afcbb )-1];_gcfcg ._daae +=_egbab ;_gcfcg ._daae =_fc .NFKC .String (_gcfcg ._daae );
};type textState struct{_eag float64 ;_fbed float64 ;_bdcb float64 ;_beb float64 ;_ddea float64 ;_afbbc RenderMode ;_gba float64 ;_fcbg *_ga .PdfFont ;_ada _ga .PdfRectangle ;_efg int ;_bfbg int ;};func (_bceb *wordBag )pullWord (_dedd *textWord ,_cgd int ,_gfad map[int ]map[*textWord ]struct{}){_bceb .PdfRectangle =_cdg (_bceb .PdfRectangle ,_dedd .PdfRectangle );
if _dedd ._cbaa > _bceb ._bdfd {_bceb ._bdfd =_dedd ._cbaa ;};_bceb ._cade [_cgd ]=append (_bceb ._cade [_cgd ],_dedd );_gfad [_cgd ][_dedd ]=struct{}{};};

// String returns a description of `l`.
func (_gcgd *textLine )String ()string {return _fe .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_gcgd ._dbbc ,_gcgd .PdfRectangle ,_gcgd ._cefd ,_gcgd .text ());
};

// String returns a string describing `tm`.
func (_aef TextMark )String ()string {_edgb :=_aef .BBox ;var _gacb string ;if _aef .Font !=nil {_gacb =_aef .Font .String ();if len (_gacb )> 50{_gacb =_gacb [:50]+"\u002e\u002e\u002e";};};var _cgbg string ;if _aef .Meta {_cgbg ="\u0020\u002a\u004d\u002a";
};return _fe .Sprintf ("\u007b\u0054\u0065\u0078t\u004d\u0061\u0072\u006b\u003a\u0020\u0025\u0064\u0020%\u0071\u003d\u0025\u0030\u0032\u0078\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e2\u0066\u0029\u0020\u0028\u00256\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0025\u0073\u007d",_aef .Offset ,_aef .Text ,[]rune (_aef .Text ),_edgb .Llx ,_edgb .Lly ,_edgb .Urx ,_edgb .Ury ,_gacb ,_cgbg );
};

// TextTable represents a table.
// Cells are ordered top-to-bottom, left-to-right.
// Cells[y] is the (0-offset) y'th row in the table.
// Cells[y][x] is the (0-offset) x'th column in the table.
type TextTable struct{W ,H int ;Cells [][]TableCell ;};func (_ccda *textMark )inDiacriticArea (_dagb *textMark )bool {_bdgb :=_ccda .Llx -_dagb .Llx ;_geeb :=_ccda .Urx -_dagb .Urx ;_ccfad :=_ccda .Lly -_dagb .Lly ;return _ca .Abs (_bdgb +_geeb )< _ccda .Width ()*_dfbf &&_ca .Abs (_ccfad )< _ccda .Height ()*_dfbf ;
};func (_bdfdf intSet )add (_aaef int ){_bdfdf [_aaef ]=struct{}{}};type lineRuling struct{_cafgf rulingKind ;_cfce markKind ;_ea .Color ;_faef ,_ebf _efc .Point ;};func _adfaf (_ddce ,_aeda int )uint64 {return uint64 (_ddce )*0x1000000+uint64 (_aeda )};


// String returns a human readable description of `s`.
func (_edgea intSet )String ()string {var _badfc []int ;for _fcgec :=range _edgea {if _edgea .has (_fcgec ){_badfc =append (_badfc ,_fcgec );};};_d .Ints (_badfc );return _fe .Sprintf ("\u0025\u002b\u0076",_badfc );};func (_ebc *textObject )setWordSpacing (_fcbe float64 ){if _ebc ==nil {return ;
};_ebc ._abde ._fbed =_fcbe ;};func (_gcbg rulingList )augmentGrid ()(rulingList ,rulingList ){_gdcd ,_cfga :=_gcbg .vertsHorzs ();if len (_gdcd )==0||len (_cfga )==0{return _gdcd ,_cfga ;};_gdde ,_dgaec :=_gdcd ,_cfga ;_ffa :=_gdcd .bbox ();_egfa :=_cfga .bbox ();
if _eadg {_eb .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0056\u003d\u0025\u0036\u002e\u0032\u0066",_ffa );_eb .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0048\u003d\u0025\u0036\u002e\u0032\u0066",_egfa );
};var _badc ,_bgfge ,_fcae ,_cdgc *ruling ;if _egfa .Llx < _ffa .Llx -_afdf {_badc =&ruling {_feec :_gfccg ,_bfaa :_aege ,_efef :_egfa .Llx ,_dccfd :_ffa .Lly ,_dgeg :_ffa .Ury };_gdcd =append (rulingList {_badc },_gdcd ...);};if _egfa .Urx > _ffa .Urx +_afdf {_bgfge =&ruling {_feec :_gfccg ,_bfaa :_aege ,_efef :_egfa .Urx ,_dccfd :_ffa .Lly ,_dgeg :_ffa .Ury };
_gdcd =append (_gdcd ,_bgfge );};if _ffa .Lly < _egfa .Lly -_afdf {_fcae =&ruling {_feec :_gfccg ,_bfaa :_acec ,_efef :_ffa .Lly ,_dccfd :_egfa .Llx ,_dgeg :_egfa .Urx };_cfga =append (rulingList {_fcae },_cfga ...);};if _ffa .Ury > _egfa .Ury +_afdf {_cdgc =&ruling {_feec :_gfccg ,_bfaa :_acec ,_efef :_ffa .Ury ,_dccfd :_egfa .Llx ,_dgeg :_egfa .Urx };
_cfga =append (_cfga ,_cdgc );};if len (_gdcd )+len (_cfga )==len (_gcbg ){return _gdde ,_dgaec ;};_cega :=append (_gdcd ,_cfga ...);_gcbg .log ("u\u006e\u0061\u0075\u0067\u006d\u0065\u006e\u0074\u0065\u0064");_cega .log ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0065d");
return _gdcd ,_cfga ;};

// String returns a string describing `ma`.
func (_cebe TextMarkArray )String ()string {_gbbf :=len (_cebe ._dfbb );if _gbbf ==0{return "\u0045\u004d\u0050T\u0059";};_ecad :=_cebe ._dfbb [0];_cfc :=_cebe ._dfbb [_gbbf -1];return _fe .Sprintf ("\u007b\u0054\u0045\u0058\u0054\u004d\u0041\u0052K\u0041\u0052\u0052AY\u003a\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025s\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d%\u0073\u007d",_gbbf ,_ecad ,_cfc );
};

// ExtractPageImages returns the image contents of the page extractor, including data
// and position, size information for each image.
// A set of options to control page image extraction can be passed in. The options
// parameter can be nil for the default options. By default, inline stencil masks
// are not extracted.
func (_gac *Extractor )ExtractPageImages (options *ImageExtractOptions )(*PageImages ,error ){_feg :=&imageExtractContext {_eg :options };_ffc :=_feg .extractContentStreamImages (_gac ._cg ,_gac ._gf );if _ffc !=nil {return nil ,_ffc ;};return &PageImages {Images :_feg ._dg },nil ;
};func _cgddc (_bgcb ,_dfgd _efc .Point )rulingKind {_ccdfc :=_ca .Abs (_bgcb .X -_dfgd .X );_gceea :=_ca .Abs (_bgcb .Y -_dfgd .Y );return _egacc (_ccdfc ,_gceea ,_gacc );};func (_bebc *wordBag )applyRemovals (_dbd map[int ]map[*textWord ]struct{}){for _gef ,_bced :=range _dbd {if len (_bced )==0{continue ;
};_deda :=_bebc ._cade [_gef ];_gggf :=len (_deda )-len (_bced );if _gggf ==0{delete (_bebc ._cade ,_gef );continue ;};_ccf :=make ([]*textWord ,_gggf );_abfe :=0;for _ ,_eedg :=range _deda {if _ ,_ffcb :=_bced [_eedg ];!_ffcb {_ccf [_abfe ]=_eedg ;_abfe ++;
};};_bebc ._cade [_gef ]=_ccf ;};};func (_fbc *textObject )showTextAdjusted (_eef *_de .PdfObjectArray )error {_aac :=false ;for _ ,_ggfd :=range _eef .Elements (){switch _ggfd .(type ){case *_de .PdfObjectFloat ,*_de .PdfObjectInteger :_fbe ,_eede :=_de .GetNumberAsFloat (_ggfd );
if _eede !=nil {_eb .Log .Debug ("\u0045\u0052\u0052\u004fR\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078t\u0041\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0042\u0061\u0064\u0020\u006e\u0075\u006d\u0065r\u0069\u0063\u0061\u006c\u0020a\u0072\u0067\u002e\u0020\u006f\u003d\u0025\u0073\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_ggfd ,_eef );
return _eede ;};_abd ,_ccg :=-_fbe *0.001*_fbc ._abde ._ddea ,0.0;if _aac {_ccg ,_abd =_abd ,_ccg ;};_fadg :=_gcga (_efc .Point {X :_abd ,Y :_ccg });_fbc ._fbg .Concat (_fadg );case *_de .PdfObjectString :_egcd ,_dcfc :=_de .GetStringBytes (_ggfd );if !_dcfc {_eb .Log .Trace ("s\u0068\u006f\u0077\u0054\u0065\u0078\u0074\u0041\u0064j\u0075\u0073\u0074\u0065\u0064\u003a\u0020Ba\u0064\u0020\u0073\u0074r\u0069\u006e\u0067\u0020\u0061\u0072\u0067\u002e\u0020o=\u0025\u0073 \u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_ggfd ,_eef );
return _de .ErrTypeError ;};_fbc .renderText (_egcd );default:_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078\u0074A\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0055\u006e\u0065\u0078p\u0065\u0063\u0074\u0065\u0064\u0020\u0074\u0079\u0070\u0065\u0020\u0028%T\u0029\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_ggfd ,_eef );
return _de .ErrTypeError ;};};return nil ;};

// String returns a description of `t`.
func (_gaag *textTable )String ()string {return _fe .Sprintf ("\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0025\u0074",_gaag ._afbd ,_gaag ._ceccd ,_gaag ._dbedg );};func (_egfe gridTiling )log (_eefce string ){if !_degb {return ;};_eb .Log .Info ("\u0074i\u006ci\u006e\u0067\u003a\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0071",len (_egfe ._bgff ),len (_egfe ._gefe ),_eefce );
_fe .Printf ("\u0020\u0020\u0020l\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a",_egfe ._bgff );_fe .Printf ("\u0020\u0020\u0020l\u006c\u0079\u003d\u0025\u002e\u0032\u0066\u000a",_egfe ._gefe );for _cfff ,_edgcc :=range _egfe ._gefe {_fbeff ,_baad :=_egfe ._ecbd [_edgcc ];
if !_baad {continue ;};_fe .Printf ("%\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_cfff ,_edgcc );for _dgge ,_cab :=range _egfe ._bgff {_fffa ,_cagc :=_fbeff [_cab ];if !_cagc {continue ;};_fe .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_dgge ,_fffa .String ());
};};};func _ecf (_egfee map[float64 ]map[float64 ]gridTile )[]float64 {_daffb :=make ([]float64 ,0,len (_egfee ));for _gbdfd :=range _egfee {_daffb =append (_daffb ,_gbdfd );};_d .Float64s (_daffb );_baadb :=len (_daffb );for _ddff :=0;_ddff < _baadb /2;
_ddff ++{_daffb [_ddff ],_daffb [_baadb -1-_ddff ]=_daffb [_baadb -1-_ddff ],_daffb [_ddff ];};return _daffb ;};func (_dge *textObject )setTextMatrix (_fabd []float64 ){if len (_fabd )!=6{_eb .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u006c\u0065\u006e\u0028\u0066\u0029\u0020\u0021\u003d\u0020\u0036\u0020\u0028\u0025\u0064\u0029",len (_fabd ));
return ;};_acf ,_ffdg ,_dde ,_ecc ,_efcb ,_ecd :=_fabd [0],_fabd [1],_fabd [2],_fabd [3],_fabd [4],_fabd [5];_dge ._fbg =_efc .NewMatrix (_acf ,_ffdg ,_dde ,_ecc ,_efcb ,_ecd );_dge ._eccg =_dge ._fbg ;};func (_ccdaf paraList )toTextMarks ()[]TextMark {_cgge :=0;
var _ffbef []TextMark ;for _bbee ,_ddfe :=range _ccdaf {if _ddfe ._cace {continue ;};_gdeb :=_ddfe .toTextMarks (&_cgge );_ffbef =append (_ffbef ,_gdeb ...);if _bbee !=len (_ccdaf )-1{if _bebca (_ddfe ,_ccdaf [_bbee +1]){_ffbef =_eedd (_ffbef ,&_cgge ,"\u0020");
}else {_ffbef =_eedd (_ffbef ,&_cgge ,"\u000a");_ffbef =_eedd (_ffbef ,&_cgge ,"\u000a");};};};_ffbef =_eedd (_ffbef ,&_cgge ,"\u000a");_ffbef =_eedd (_ffbef ,&_cgge ,"\u000a");return _ffbef ;};type shapesState struct{_dcd _efc .Matrix ;_fda _efc .Matrix ;
_bdbb []*subpath ;_dce bool ;_ffdd _efc .Point ;_acab *textObject ;};

// String returns a description of `tm`.
func (_gdec *textMark )String ()string {return _fe .Sprintf ("\u0025\u002e\u0032f \u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\u0022\u0025\u0073\u0022",_gdec .PdfRectangle ,_gdec ._cba ,_gdec ._daae );};const (_gdga rulingKind =iota ;
_acec ;_aege ;);func _ebeca (_acae []*textWord ,_gdada int )[]*textWord {_fagd :=len (_acae );copy (_acae [_gdada :],_acae [_gdada +1:]);return _acae [:_fagd -1];};
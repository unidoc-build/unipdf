//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

//
// Package extractor is used for quickly extracting PDF content through a simple interface.
// Currently offers functionality for extracting textual content.
//
package extractor ;import (_fg "bytes";_f "errors";_df "fmt";_fd "github.com/unidoc/unipdf/v3/common";_dd "github.com/unidoc/unipdf/v3/contentstream";_bc "github.com/unidoc/unipdf/v3/core";_bf "github.com/unidoc/unipdf/v3/internal/license";_ef "github.com/unidoc/unipdf/v3/internal/textencoding";
_aa "github.com/unidoc/unipdf/v3/internal/transform";_ec "github.com/unidoc/unipdf/v3/model";_ab "golang.org/x/image/draw";_fc "golang.org/x/text/unicode/norm";_dg "golang.org/x/xerrors";_ag "image";_gf "image/color";_b "io";_g "math";_fa "reflect";_c "regexp";
_e "sort";_da "strings";_d "unicode";_cb "unicode/utf8";);func (_gacgb *textTable )isExportable ()bool {if _gacgb ._beagb {return true ;};_acfcb :=func (_cgdea int )bool {_ebba :=_gacgb .get (0,_cgdea );if _ebba ==nil {return false ;};_efbb :=_ebba .text ();
_caccfd :=_cb .RuneCountInString (_efbb );_abfe :=_dgaf .MatchString (_efbb );return _caccfd <=1||_abfe ;};for _eddbg :=0;_eddbg < _gacgb ._gfae ;_eddbg ++{if !_acfcb (_eddbg ){return true ;};};return false ;};func (_ebaf *subpath )makeRectRuling (_cbdd _gf .Color )(*ruling ,bool ){if _begb {_fd .Log .Info ("\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0070\u0061\u0074\u0068\u003d\u0025\u0076",_ebaf );
};_fgcab :=_ebaf ._afgg [:4];_cffg :=make (map[int ]rulingKind ,len (_fgcab ));for _bdcd ,_deaed :=range _fgcab {_bfadd :=_ebaf ._afgg [(_bdcd +1)%4];_cffg [_bdcd ]=_gdefad (_deaed ,_bfadd );if _begb {_df .Printf ("\u0025\u0034\u0064: \u0025\u0073\u0020\u003d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066",_bdcd ,_cffg [_bdcd ],_deaed ,_bfadd );
};};if _begb {_df .Printf ("\u0020\u0020\u0020\u006b\u0069\u006e\u0064\u0073\u003d\u0025\u002b\u0076\u000a",_cffg );};var _ecgeg ,_dafe []int ;for _agfe ,_deeg :=range _cffg {switch _deeg {case _dfdf :_dafe =append (_dafe ,_agfe );case _cebaac :_ecgeg =append (_ecgeg ,_agfe );
};};if _begb {_df .Printf ("\u0020\u0020 \u0068\u006f\u0072z\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_dafe ),_dafe );_df .Printf ("\u0020\u0020 \u0076\u0065\u0072t\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_ecgeg ),_ecgeg );
};_cgdbd :=(len (_dafe )==2&&len (_ecgeg )==2)||(len (_dafe )==2&&len (_ecgeg )==0&&_eaaegg (_fgcab [_dafe [0]],_fgcab [_dafe [1]]))||(len (_ecgeg )==2&&len (_dafe )==0&&_fagg (_fgcab [_ecgeg [0]],_fgcab [_ecgeg [1]]));if _begb {_df .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_dafe ),len (_ecgeg ),_cgdbd );
};if !_cgdbd {if _begb {_fd .Log .Error ("\u0021!\u006d\u0061\u006b\u0065R\u0065\u0063\u0074\u0052\u0075l\u0069n\u0067:\u0020\u0070\u0061\u0074\u0068\u003d\u0025v",_ebaf );_df .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_dafe ),len (_ecgeg ),_cgdbd );
};return &ruling {},false ;};if len (_ecgeg )==0{for _acbe ,_acbd :=range _cffg {if _acbd !=_dfdf {_ecgeg =append (_ecgeg ,_acbe );};};};if len (_dafe )==0{for _dcege ,_fbf :=range _cffg {if _fbf !=_cebaac {_dafe =append (_dafe ,_dcege );};};};if _begb {_fd .Log .Info ("\u006da\u006b\u0065R\u0065\u0063\u0074\u0052u\u006c\u0069\u006eg\u003a\u0020\u0068\u006f\u0072\u007a\u0073\u003d\u0025d \u0076\u0065\u0072t\u0073\u003d%\u0064\u0020\u0070\u006f\u0069\u006et\u0073\u003d%\u0064\u000a"+"\u0009\u0020\u0068o\u0072\u007a\u0073\u003d\u0025\u002b\u0076\u000a"+"\u0009\u0020\u0076e\u0072\u0074\u0073\u003d\u0025\u002b\u0076\u000a"+"\t\u0070\u006f\u0069\u006e\u0074\u0073\u003d\u0025\u002b\u0076",len (_dafe ),len (_ecgeg ),len (_fgcab ),_dafe ,_ecgeg ,_fgcab );
};var _acaae ,_gaec ,_bbfeg ,_eede _aa .Point ;if _fgcab [_dafe [0]].Y > _fgcab [_dafe [1]].Y {_bbfeg ,_eede =_fgcab [_dafe [0]],_fgcab [_dafe [1]];}else {_bbfeg ,_eede =_fgcab [_dafe [1]],_fgcab [_dafe [0]];};if _fgcab [_ecgeg [0]].X > _fgcab [_ecgeg [1]].X {_acaae ,_gaec =_fgcab [_ecgeg [0]],_fgcab [_ecgeg [1]];
}else {_acaae ,_gaec =_fgcab [_ecgeg [1]],_fgcab [_ecgeg [0]];};_fdeca :=_ec .PdfRectangle {Llx :_acaae .X ,Urx :_gaec .X ,Lly :_eede .Y ,Ury :_bbfeg .Y };if _fdeca .Llx > _fdeca .Urx {_fdeca .Llx ,_fdeca .Urx =_fdeca .Urx ,_fdeca .Llx ;};if _fdeca .Lly > _fdeca .Ury {_fdeca .Lly ,_fdeca .Ury =_fdeca .Ury ,_fdeca .Lly ;
};_gfgc :=rectRuling {PdfRectangle :_fdeca ,_geec :_feebg (_fdeca ),Color :_cbdd };if _gfgc ._geec ==_adabg {if _begb {_fd .Log .Error ("\u006da\u006b\u0065\u0052\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006eg\u003a\u0020\u006b\u0069\u006e\u0064\u003d\u006e\u0069\u006c");
};return nil ,false ;};_caae ,_cdebb :=_gfgc .asRuling ();if !_cdebb {if _begb {_fd .Log .Error ("\u006da\u006b\u0065\u0052\u0065c\u0074\u0052\u0075\u006c\u0069n\u0067:\u0020!\u0069\u0073\u0052\u0075\u006c\u0069\u006eg");};return nil ,false ;};if _bcbd {_df .Printf ("\u0020\u0020\u0020\u0072\u003d\u0025\u0073\u000a",_caae .String ());
};return _caae ,true ;};func _fecc (_bfdee int ,_gfdc map[int ][]float64 )([]int ,int ){_bceb :=make ([]int ,_bfdee );_dcgd :=0;for _adeff :=0;_adeff < _bfdee ;_adeff ++{_bceb [_adeff ]=_dcgd ;_dcgd +=len (_gfdc [_adeff ])+1;};return _bceb ,_dcgd ;};func (_gdad *shapesState )moveTo (_fgc ,_bded float64 ){_gdad ._faba =true ;
_gdad ._fdggg =_gdad .devicePoint (_fgc ,_bded );if _cgab {_fd .Log .Info ("\u006d\u006fv\u0065\u0054\u006f\u003a\u0020\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0064\u0065\u0076\u0069\u0063\u0065\u003d%.\u0032\u0066",_fgc ,_bded ,_gdad ._fdggg );
};};func _efcc (_beagg ,_fggda _aa .Point )bool {return _beagg .X ==_fggda .X &&_beagg .Y ==_fggda .Y };func _gggfg (_fccdb ,_bgfee ,_dfca ,_ebcde *textPara )*textTable {_eecc :=&textTable {_cfaac :2,_gfae :2,_cadda :make (map[uint64 ]*textPara ,4)};_eecc .put (0,0,_fccdb );
_eecc .put (1,0,_bgfee );_eecc .put (0,1,_dfca );_eecc .put (1,1,_ebcde );return _eecc ;};func (_effgf *textTable )reduceTiling (_abge gridTiling ,_fcaee float64 )*textTable {_eecg :=make ([]int ,0,_effgf ._gfae );_edcde :=make ([]int ,0,_effgf ._cfaac );
_aecd :=_abge ._babea ;_bfacf :=_abge ._bgfdg ;for _egga :=0;_egga < _effgf ._gfae ;_egga ++{_ecaeb :=_egga > 0&&_g .Abs (_bfacf [_egga -1]-_bfacf [_egga ])< _fcaee &&_effgf .emptyCompositeRow (_egga );if !_ecaeb {_eecg =append (_eecg ,_egga );};};for _feec :=0;
_feec < _effgf ._cfaac ;_feec ++{_cccbd :=_feec < _effgf ._cfaac -1&&_g .Abs (_aecd [_feec +1]-_aecd [_feec ])< _fcaee &&_effgf .emptyCompositeColumn (_feec );if !_cccbd {_edcde =append (_edcde ,_feec );};};if len (_eecg )==_effgf ._gfae &&len (_edcde )==_effgf ._cfaac {return _effgf ;
};_adge :=textTable {_beagb :_effgf ._beagb ,_cfaac :len (_edcde ),_gfae :len (_eecg ),_edeab :make (map[uint64 ]compositeCell ,len (_edcde )*len (_eecg ))};if _abfa {_fd .Log .Info ("\u0072\u0065\u0064\u0075c\u0065\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0025d\u0078%\u0064\u0020\u002d\u003e\u0020\u0025\u0064x\u0025\u0064",_effgf ._cfaac ,_effgf ._gfae ,len (_edcde ),len (_eecg ));
_fd .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_edcde );_fd .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_eecg );};for _bcgdd ,_ddgag :=range _eecg {for _cbfd ,_gged :=range _edcde {_cbgbc ,_fefa :=_effgf .getComposite (_gged ,_ddgag );
if len (_cbgbc )==0{continue ;};if _abfa {_df .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_cbfd ,_bcgdd ,_gged ,_ddgag ,_gebg (_cbgbc .merge ().text (),50));};_adge .putComposite (_cbfd ,_bcgdd ,_cbgbc ,_fefa );
};};return &_adge ;};func (_dffc rulingList )connections (_bfff map[int ]intSet ,_fcbdc int )intSet {_bgef :=make (intSet );_bgeg :=make (intSet );var _bbecd func (int );_bbecd =func (_agege int ){if !_bgeg .has (_agege ){_bgeg .add (_agege );for _addc :=range _dffc {if _bfff [_addc ].has (_agege ){_bgef .add (_addc );
};};for _ggdff :=range _dffc {if _bgef .has (_ggdff ){_bbecd (_ggdff );};};};};_bbecd (_fcbdc );return _bgef ;};type lists []*list ;func (_eaab *textObject )nextLine (){_eaab .moveLP (0,-_eaab ._acad ._dfb )};

// String returns a description of `v`.
func (_gddd *ruling )String ()string {if _gddd ._aabaf ==_adabg {return "\u004e\u004f\u0054\u0020\u0052\u0055\u004c\u0049\u004e\u0047";};_fecgg ,_bdbb :="\u0078","\u0079";if _gddd ._aabaf ==_dfdf {_fecgg ,_bdbb ="\u0079","\u0078";};_aabce :="";if _gddd ._faac !=0.0{_aabce =_df .Sprintf (" \u0077\u0069\u0064\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_gddd ._faac );
};return _df .Sprintf ("\u0025\u00310\u0073\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0020\u0025\u0076\u0025\u0073",_gddd ._aabaf ,_fecgg ,_gddd ._ggda ,_bdbb ,_gddd ._afbbf ,_gddd ._gdgd ,_gddd ._gdgd -_gddd ._afbbf ,_gddd ._ggfd ,_gddd .Color ,_aabce );
};

// Text returns the text content of the `bulletLists`.
func (_bdgb *lists )Text ()string {_dgcg :=&_da .Builder {};for _ ,_gcgb :=range *_bdgb {_ddbcf :=_gcgb .Text ();_dgcg .WriteString (_ddbcf );};return _dgcg .String ();};func (_dgga paraList )list ()[]*list {var _ecbec []*textLine ;var _abcg []*textLine ;
for _ ,_cbbb :=range _dgga {_deae :=_cbbb .getListLines ();_ecbec =append (_ecbec ,_deae ...);_abcg =append (_abcg ,_cbbb ._dgff ...);};_fccb :=_cgbe (_ecbec );_eaadb :=_ecee (_abcg ,_fccb );return _eaadb ;};type compositeCell struct{_ec .PdfRectangle ;
paraList ;};func (_gcbb *shapesState )establishSubpath ()*subpath {_acdb ,_bgee :=_gcbb .lastpointEstablished ();if !_bgee {_gcbb ._eabf =append (_gcbb ._eabf ,_bdbc (_acdb ));};if len (_gcbb ._eabf )==0{return nil ;};_gcbb ._faba =false ;return _gcbb ._eabf [len (_gcbb ._eabf )-1];
};func (_aea *textObject )showText (_dgeb _bc .PdfObject ,_ecga []byte ,_bdc int )error {return _aea .renderText (_dgeb ,_ecga ,_bdc );};func _bdaa (_gcee string )string {_befd :=[]rune (_gcee );return string (_befd [:len (_befd )-1])};func (_acac rulingList )isActualGrid ()(rulingList ,bool ){_efga ,_fced :=_acac .augmentGrid ();
if !(len (_efga )>=_adgd +1&&len (_fced )>=_egbc +1){if _bcbd {_fd .Log .Info ("\u0069s\u0041\u0063t\u0075\u0061\u006c\u0047r\u0069\u0064\u003a \u004e\u006f\u0074\u0020\u0061\u006c\u0069\u0067\u006eed\u002e\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u003c\u0020\u0025d\u0020\u0078 \u0025\u0064",len (_efga ),len (_fced ),_adgd +1,_egbc +1);
};return nil ,false ;};if _bcbd {_fd .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075a\u006c\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0073\u0020\u003a\u0020\u0025t\u0020\u0026\u0020\u0025\u0074\u0020\u2192 \u0025\u0074",_acac ,len (_efga )>=2,len (_fced )>=2,len (_efga )>=2&&len (_fced )>=2);
for _bdgf ,_eafad :=range _acac {_df .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0076\u000a",_bdgf ,_eafad );};};if _gbgc {_gfbe ,_debd :=_efga [0],_efga [len (_efga )-1];_dbae ,_cbfaf :=_fced [0],_fced [len (_fced )-1];if !(_gebb (_gfbe ._ggda -_dbae ._afbbf )&&_gebb (_debd ._ggda -_dbae ._gdgd )&&_gebb (_dbae ._ggda -_gfbe ._gdgd )&&_gebb (_cbfaf ._ggda -_gfbe ._afbbf )){if _bcbd {_fd .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069d\u003a\u0020\u0020N\u006f\u0074 \u0061\u006c\u0069\u0067\u006e\u0065d\u002e\n\t\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0076\u0031\u003d\u0025\u0073\u000a\u0009\u0068\u0030\u003d\u0025\u0073\u000a\u0009\u0068\u0031\u003d\u0025\u0073",_gfbe ,_debd ,_dbae ,_cbfaf );
};return nil ,false ;};}else {if !_efga .aligned (){if _eafc {_fd .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0076\u0065\u0072\u0074\u0073\u002e\u0020%\u0064",len (_efga ));
};return nil ,false ;};if !_fced .aligned (){if _bcbd {_fd .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0068\u006f\u0072\u007a\u0073\u002e\u0020%\u0064",len (_fced ));
};return nil ,false ;};};_eadgd :=append (_efga ,_fced ...);return _eadgd ,true ;};func (_ccafe *textPara )fontsize ()float64 {return _ccafe ._dgff [0]._ggdf };type rulingList []*ruling ;func (_eebc *wordBag )text ()string {_bgfcd :=_eebc .allWords ();
_gfc :=make ([]string ,len (_bgfcd ));for _ggfb ,_fedb :=range _bgfcd {_gfc [_ggfb ]=_fedb ._ddbga ;};return _da .Join (_gfc ,"\u0020");};

// New returns an Extractor instance for extracting content from the input PDF page.
func New (page *_ec .PdfPage )(*Extractor ,error ){return NewWithOptions (page ,nil )};func (_ffbe paraList )tables ()[]TextTable {var _dbee []TextTable ;if _abfa {_fd .Log .Info ("\u0070\u0061\u0072\u0061\u0073\u002e\u0074\u0061\u0062\u006c\u0065\u0073\u003a");
};for _ ,_efgdc :=range _ffbe {_cdbg :=_efgdc ._fcbe ;if _cdbg !=nil &&_cdbg .isExportable (){_dbee =append (_dbee ,_cdbg .toTextTable ());};};return _dbee ;};type imageExtractContext struct{_feg []ImageMark ;_dce int ;_dec int ;_feb int ;_gb map[*_bc .PdfObjectStream ]*cachedImage ;
_gef *ImageExtractOptions ;_cgb bool ;};func (_gacd *subpath )clear (){*_gacd =subpath {}};func _aefac (_ggggb string ,_dgcdf []rulingList ){_fd .Log .Info ("\u0024\u0024 \u0025\u0064\u0020g\u0072\u0069\u0064\u0073\u0020\u002d\u0020\u0025\u0073",len (_dgcdf ),_ggggb );
for _gfeab ,_ebag :=range _dgcdf {_df .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gfeab ,_ebag .String ());};};

// TableInfo gets table information of the textmark `tm`.
func (_fccc *TextMark )TableInfo ()(*TextTable ,[][]int ){if !_fccc ._aede {return nil ,nil ;};_eba :=_fccc ._cdc ;_cfa :=_eba .getCellInfo (*_fccc );return _eba ,_cfa ;};func (_efe *stateStack )size ()int {return len (*_efe )};

// Elements returns the TextMarks in `ma`.
func (_def *TextMarkArray )Elements ()[]TextMark {return _def ._ggc };func (_eefc *wordBag )empty (_fcbfd int )bool {_ ,_edef :=_eefc ._aedg [_fcbfd ];return !_edef };func (_ebfe pathSection )bbox ()_ec .PdfRectangle {_cgdg :=_ebfe ._bdg [0]._afgg [0];
_feca :=_ec .PdfRectangle {Llx :_cgdg .X ,Urx :_cgdg .X ,Lly :_cgdg .Y ,Ury :_cgdg .Y };_bbea :=func (_fegg _aa .Point ){if _fegg .X < _feca .Llx {_feca .Llx =_fegg .X ;}else if _fegg .X > _feca .Urx {_feca .Urx =_fegg .X ;};if _fegg .Y < _feca .Lly {_feca .Lly =_fegg .Y ;
}else if _fegg .Y > _feca .Ury {_feca .Ury =_fegg .Y ;};};for _ ,_bafd :=range _ebfe ._bdg [0]._afgg [1:]{_bbea (_bafd );};for _ ,_eaeb :=range _ebfe ._bdg [1:]{for _ ,_cfg :=range _eaeb ._afgg {_bbea (_cfg );};};return _feca ;};type textObject struct{_fea *Extractor ;
_cfe *_ec .PdfPageResources ;_dfff _dd .GraphicsState ;_acad *textState ;_cfef *stateStack ;_dagc _aa .Matrix ;_cgcd _aa .Matrix ;_afgc []*textMark ;_fdef bool ;};func (_ebac *textLine )appendWord (_bcdfd *textWord ){_ebac ._fdec =append (_ebac ._fdec ,_bcdfd );
_ebac .PdfRectangle =_eed (_ebac .PdfRectangle ,_bcdfd .PdfRectangle );if _bcdfd ._ggdfd > _ebac ._ggdf {_ebac ._ggdf =_bcdfd ._ggdfd ;};if _bcdfd ._gcca > _ebac ._efeb {_ebac ._efeb =_bcdfd ._gcca ;};};func _dfded (_fgfa ,_agbg int )uint64 {return uint64 (_fgfa )*0x1000000+uint64 (_agbg )};
func _eaea (_dcfb ,_edcc bounded )float64 {return _gdefb (_dcfb )-_gdefb (_edcc )};const _gdb =1.0/1000.0;func _fbgf (_abfc _aa .Point )_aa .Matrix {return _aa .TranslationMatrix (_abfc .X ,_abfc .Y )};func (_ecedcc rulingList )vertsHorzs ()(rulingList ,rulingList ){var _aege ,_gbfcd rulingList ;
for _ ,_eaac :=range _ecedcc {switch _eaac ._aabaf {case _cebaac :_aege =append (_aege ,_eaac );case _dfdf :_gbfcd =append (_gbfcd ,_eaac );};};return _aege ,_gbfcd ;};func (_ebbb *wordBag )depthIndexes ()[]int {if len (_ebbb ._aedg )==0{return nil ;};
_ebdc :=make ([]int ,len (_ebbb ._aedg ));_gedd :=0;for _gdbe :=range _ebbb ._aedg {_ebdc [_gedd ]=_gdbe ;_gedd ++;};_e .Ints (_ebdc );return _ebdc ;};func (_faea *textObject )reset (){_faea ._dagc =_aa .IdentityMatrix ();_faea ._cgcd =_aa .IdentityMatrix ();
_faea ._afgc =nil ;};func (_gcfd rulingList )intersections ()map[int ]intSet {var _eaead ,_acabf []int ;for _ggdaa ,_gaba :=range _gcfd {switch _gaba ._aabaf {case _cebaac :_eaead =append (_eaead ,_ggdaa );case _dfdf :_acabf =append (_acabf ,_ggdaa );};
};if len (_eaead )< _adgd +1||len (_acabf )< _egbc +1{return nil ;};if len (_eaead )+len (_acabf )> _egce {_fd .Log .Debug ("\u0069\u006e\u0074\u0065\u0072\u0073e\u0063\u0074\u0069\u006f\u006e\u0073\u003a\u0020\u0054\u004f\u004f\u0020\u004d\u0041\u004e\u0059\u0020\u0072\u0075\u006ci\u006e\u0067\u0073\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u003d\u0020%\u0064 \u0078\u0020\u0025\u0064",len (_gcfd ),len (_eaead ),len (_acabf ));
return nil ;};_fgeca :=make (map[int ]intSet ,len (_eaead )+len (_acabf ));for _ ,_befc :=range _eaead {for _ ,_afege :=range _acabf {if _gcfd [_befc ].intersects (_gcfd [_afege ]){if _ ,_dedb :=_fgeca [_befc ];!_dedb {_fgeca [_befc ]=make (intSet );};
if _ ,_bgecce :=_fgeca [_afege ];!_bgecce {_fgeca [_afege ]=make (intSet );};_fgeca [_befc ].add (_afege );_fgeca [_afege ].add (_befc );};};};return _fgeca ;};func _ageg (_fccd ,_cggd _ec .PdfRectangle )bool {return _fccd .Llx <=_cggd .Llx &&_cggd .Urx <=_fccd .Urx &&_fccd .Lly <=_cggd .Lly &&_cggd .Ury <=_fccd .Ury ;
};type markKind int ;func _fafe (_ccfg ,_ffbb *textPara )bool {if _ccfg ._baca ||_ffbb ._baca {return true ;};return _fdeb (_ccfg .depth ()-_ffbb .depth ());};const _bffab =10;func _ebdcg (_aaca ,_dgfb _ec .PdfRectangle )bool {return _aaca .Lly <=_dgfb .Ury &&_dgfb .Lly <=_aaca .Ury ;
};func (_ffag *wordBag )pullWord (_babe *textWord ,_ccf int ,_ffcg map[int ]map[*textWord ]struct{}){_ffag .PdfRectangle =_eed (_ffag .PdfRectangle ,_babe .PdfRectangle );if _babe ._ggdfd > _ffag ._bfca {_ffag ._bfca =_babe ._ggdfd ;};_ffag ._aedg [_ccf ]=append (_ffag ._aedg [_ccf ],_babe );
_ffcg [_ccf ][_babe ]=struct{}{};};func (_bcae *subpath )close (){if !_efcc (_bcae ._afgg [0],_bcae .last ()){_bcae .add (_bcae ._afgg [0]);};_bcae ._gfgf =true ;_bcae .removeDuplicates ();};

// String returns a description of `k`.
func (_cddg markKind )String ()string {_dddg ,_gefe :=_cefae [_cddg ];if !_gefe {return _df .Sprintf ("\u004e\u006f\u0074\u0020\u0061\u0020\u006d\u0061\u0072k\u003a\u0020\u0025\u0064",_cddg );};return _dddg ;};type bounded interface{bbox ()_ec .PdfRectangle };
func _eed (_fcdb ,_gcgd _ec .PdfRectangle )_ec .PdfRectangle {return _ec .PdfRectangle {Llx :_g .Min (_fcdb .Llx ,_gcgd .Llx ),Lly :_g .Min (_fcdb .Lly ,_gcgd .Lly ),Urx :_g .Max (_fcdb .Urx ,_gcgd .Urx ),Ury :_g .Max (_fcdb .Ury ,_gcgd .Ury )};};func _dcf (_fdgda _ec .PdfRectangle )textState {return textState {_dfgd :100,_ffba :RenderModeFill ,_ebed :_fdgda };
};func (_dbcf *textTable )subdivide ()*textTable {_dbcf .logComposite ("\u0073u\u0062\u0064\u0069\u0076\u0069\u0064e");_ffffb :=_dbcf .compositeRowCorridors ();_ccceg :=_dbcf .compositeColCorridors ();if _abfa {_fd .Log .Info ("\u0073u\u0062\u0064i\u0076\u0069\u0064\u0065:\u000a\u0009\u0072o\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s=\u0025\u0073\u000a\t\u0063\u006fl\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073=\u0025\u0073",_egag (_ffffb ),_egag (_ccceg ));
};if len (_ffffb )==0||len (_ccceg )==0{return _dbcf ;};_gfbdg (_ffffb );_gfbdg (_ccceg );if _abfa {_fd .Log .Info ("\u0073\u0075\u0062\u0064\u0069\u0076\u0069\u0064\u0065\u0020\u0066\u0069\u0078\u0065\u0064\u003a\u000a\u0009r\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073\u003d\u0025\u0073\u000a\u0009\u0063\u006f\u006cC\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d\u0025\u0073",_egag (_ffffb ),_egag (_ccceg ));
};_dcee ,_dede :=_fecc (_dbcf ._gfae ,_ffffb );_ddga ,_ggecg :=_fecc (_dbcf ._cfaac ,_ccceg );_cggdb :=make (map[uint64 ]*textPara ,_ggecg *_dede );_edaf :=&textTable {PdfRectangle :_dbcf .PdfRectangle ,_beagb :_dbcf ._beagb ,_gfae :_dede ,_cfaac :_ggecg ,_cadda :_cggdb };
if _abfa {_fd .Log .Info ("\u0073\u0075b\u0064\u0069\u0076\u0069\u0064\u0065\u003a\u0020\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0020\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0063\u0065\u006c\u006c\u0073\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0079\u004f\u0066\u0066\u0073\u0065\u0074\u0073=\u0025\u002b\u0076\u000a"+"\u0009\u0078\u004f\u0066\u0066\u0073\u0065\u0074\u0073\u003d\u0025\u002b\u0076",_dbcf ._cfaac ,_dbcf ._gfae ,_ggecg ,_dede ,_egag (_ffffb ),_egag (_ccceg ),_dcee ,_ddga );
};for _fadg :=0;_fadg < _dbcf ._gfae ;_fadg ++{_abeg :=_dcee [_fadg ];for _ecffc :=0;_ecffc < _dbcf ._cfaac ;_ecffc ++{_gegc :=_ddga [_ecffc ];if _abfa {_df .Printf ("\u0025\u0036\u0064\u002c %\u0032\u0064\u003a\u0020\u0078\u0030\u003d\u0025\u0064\u0020\u0079\u0030\u003d\u0025d\u000a",_ecffc ,_fadg ,_gegc ,_abeg );
};_gcdgd ,_ccfa :=_dbcf ._edeab [_dfded (_ecffc ,_fadg )];if !_ccfa {continue ;};_bggc :=_gcdgd .split (_ffffb [_fadg ],_ccceg [_ecffc ]);for _dbgaa :=0;_dbgaa < _bggc ._gfae ;_dbgaa ++{for _aggad :=0;_aggad < _bggc ._cfaac ;_aggad ++{_eadfa :=_bggc .get (_aggad ,_dbgaa );
_edaf .put (_gegc +_aggad ,_abeg +_dbgaa ,_eadfa );if _abfa {_df .Printf ("\u0025\u0038\u0064\u002c\u0020\u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_gegc +_aggad ,_abeg +_dbgaa ,_eadfa );};};};};};return _edaf ;};func _fefg (_fbcge []*textMark ,_aagad _ec .PdfRectangle ,_feggg rulingList ,_ecbd []gridTiling ,_edac bool )paraList {_fd .Log .Trace ("\u006d\u0061\u006b\u0065\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065\u003a \u0025\u0064\u0020\u0065\u006c\u0065m\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065=\u0025\u002e\u0032\u0066",len (_fbcge ),_aagad );
if len (_fbcge )==0{return nil ;};_edeae :=_fgga (_fbcge ,_aagad );if len (_edeae )==0{return nil ;};_feggg .log ("\u006d\u0061\u006be\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065");_cfge ,_bedbf :=_feggg .vertsHorzs ();_ddcd :=_faeb (_edeae ,_aagad .Ury ,_cfge ,_bedbf );
_bga :=_eabff (_ddcd ,_aagad .Ury ,_cfge ,_bedbf );_bga =_gdadc (_bga );_beda :=make (paraList ,0,len (_bga ));for _ ,_egdfc :=range _bga {_fdaca :=_egdfc .arrangeText ();if _fdaca !=nil {_beda =append (_beda ,_fdaca );};};if !_edac &&len (_beda )>=_cad {_beda =_beda .extractTables (_ecbd );
};_beda .sortReadingOrder ();if !_edac {_beda .sortTopoOrder ();};_beda .log ("\u0073\u006f\u0072te\u0064\u0020\u0069\u006e\u0020\u0072\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u006f\u0072\u0064\u0065\u0072");return _beda ;};func (_fgad *textLine )text ()string {var _beec []string ;
for _ ,_dgcdb :=range _fgad ._fdec {if _dgcdb ._bbcc {_beec =append (_beec ,"\u0020");};_beec =append (_beec ,_dgcdb ._ddbga );};return _da .Join (_beec ,"");};func (_bdgaf gridTile )contains (_bcbe _ec .PdfRectangle )bool {if _bdgaf .numBorders ()< 3{return false ;
};if _bdgaf ._edbd &&_bcbe .Llx < _bdgaf .Llx -_bbgd {return false ;};if _bdgaf ._dbfef &&_bcbe .Urx > _bdgaf .Urx +_bbgd {return false ;};if _bdgaf ._efaf &&_bcbe .Lly < _bdgaf .Lly -_bbgd {return false ;};if _bdgaf ._faeaf &&_bcbe .Ury > _bdgaf .Ury +_bbgd {return false ;
};return true ;};func (_bfec rulingList )aligned ()bool {if len (_bfec )< 2{return false ;};_daccc :=make (map[*ruling ]int );_daccc [_bfec [0]]=0;for _ ,_gefec :=range _bfec [1:]{_bdegg :=false ;for _gggag :=range _daccc {if _gefec .gridIntersecting (_gggag ){_daccc [_gggag ]++;
_bdegg =true ;break ;};};if !_bdegg {_daccc [_gefec ]=0;};};_fdbfd :=0;for _ ,_cefac :=range _daccc {if _cefac ==0{_fdbfd ++;};};_caccf :=float64 (_fdbfd )/float64 (len (_bfec ));_eaggf :=_caccf <=1.0-_afec ;if _bcbd {_fd .Log .Info ("\u0061\u006c\u0069\u0067\u006e\u0065\u0064\u003d\u0025\u0074\u0020\u0075\u006em\u0061\u0074\u0063\u0068\u0065\u0064=\u0025\u002e\u0032\u0066\u003d\u0025\u0064\u002f\u0025\u0064\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_eaggf ,_caccf ,_fdbfd ,len (_bfec ),_bfec .String ());
};return _eaggf ;};func (_bgaa *textTable )depth ()float64 {_eegcd :=1e10;for _aeda :=0;_aeda < _bgaa ._cfaac ;_aeda ++{_gfgdb :=_bgaa .get (_aeda ,0);if _gfgdb ==nil ||_gfgdb ._baca {continue ;};_eegcd =_g .Min (_eegcd ,_gfgdb .depth ());};return _eegcd ;
};

// Marks returns the TextMark collection for a page. It represents all the text on the page.
func (_bacf PageText )Marks ()*TextMarkArray {return &TextMarkArray {_ggc :_bacf ._acfg }};func (_ddcbd rulingList )primaries ()[]float64 {_daca :=make (map[float64 ]struct{},len (_ddcbd ));for _ ,_fgae :=range _ddcbd {_daca [_fgae ._ggda ]=struct{}{};
};_abaea :=make ([]float64 ,len (_daca ));_fage :=0;for _aeacb :=range _daca {_abaea [_fage ]=_aeacb ;_fage ++;};_e .Float64s (_abaea );return _abaea ;};func (_gfeg paraList )llyRange (_fadb []int ,_cdebf ,_cbgf float64 )[]int {_fedd :=len (_gfeg );if _cbgf < _gfeg [_fadb [0]].Lly ||_cdebf > _gfeg [_fadb [_fedd -1]].Lly {return nil ;
};_adea :=_e .Search (_fedd ,func (_adff int )bool {return _gfeg [_fadb [_adff ]].Lly >=_cdebf });_bfcbf :=_e .Search (_fedd ,func (_fgce int )bool {return _gfeg [_fadb [_fgce ]].Lly > _cbgf });return _fadb [_adea :_bfcbf ];};

// BBox returns the smallest axis-aligned rectangle that encloses all the TextMarks in `ma`.
func (_baeg *TextMarkArray )BBox ()(_ec .PdfRectangle ,bool ){var _cbbg _ec .PdfRectangle ;_ddgeb :=false ;for _ ,_cebd :=range _baeg ._ggc {if _cebd .Meta ||_dddefe (_cebd .Text ){continue ;};if _ddgeb {_cbbg =_eed (_cbbg ,_cebd .BBox );}else {_cbbg =_cebd .BBox ;
_ddgeb =true ;};};return _cbbg ,_ddgeb ;};

// ImageExtractOptions contains options for controlling image extraction from
// PDF pages.
type ImageExtractOptions struct{IncludeInlineStencilMasks bool ;};func _cffc (_acdd *list )[]*list {var _dacg []*list ;for _ ,_bfaca :=range _acdd ._dedg {switch _bfaca ._bdabd {case "\u004c\u0049":_dbba :=_ccce (_bfaca );_cgda :=_cffc (_bfaca );_cbbgc :=_ecgd (_dbba ,"\u0062\u0075\u006c\u006c\u0065\u0074",_cgda );
_afcg :=_agag (_dbba ,"");_cbbgc ._bebf =_afcg ;_dacg =append (_dacg ,_cbbgc );case "\u004c\u0042\u006fd\u0079":return _cffc (_bfaca );case "\u004c":_bfba :=_cffc (_bfaca );_dacg =append (_dacg ,_bfba ...);return _dacg ;};};return _dacg ;};func (_fdcd *subpath )last ()_aa .Point {return _fdcd ._afgg [len (_fdcd ._afgg )-1]};
type intSet map[int ]struct{};func (_fdf *textObject )moveText (_geag ,_ead float64 ){_fdf .moveLP (_geag ,_ead )};func (_ccc *PageText )computeViews (){_aefd :=_ccc .getParagraphs ();_agcff :=new (_fg .Buffer );_aefd .writeText (_agcff );_ccc ._ddcbb =_agcff .String ();
_ccc ._acfg =_aefd .toTextMarks ();_ccc ._gbc =_aefd .tables ();if _abfa {_fd .Log .Info ("\u0063\u006f\u006dpu\u0074\u0065\u0056\u0069\u0065\u0077\u0073\u003a\u0020\u0074\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064",len (_ccc ._gbc ));};};func (_fcdc rulingList )log (_ddgbf string ){if !_bcbd {return ;
};_fd .Log .Info ("\u0023\u0023\u0023\u0020\u0025\u0031\u0030\u0073\u003a\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_ddgbf ,_fcdc .String ());for _bbgee ,_efdfd :=range _fcdc {_df .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bbgee ,_efdfd .String ());
};};type cachedImage struct{_ddb *_ec .Image ;_efc _ec .PdfColorspace ;};

// RenderMode specifies the text rendering mode (Tmode), which determines whether showing text shall cause
// glyph outlines to be  stroked, filled, used as a clipping boundary, or some combination of the three.
// Stroking, filling, and clipping shall have the same effects for a text object as they do for a path object
// (see 8.5.3, "Path-Painting Operators" and 8.5.4, "Clipping Path Operators").
type RenderMode int ;

// TextMark represents extracted text on a page with information regarding both textual content,
// formatting (font and size) and positioning.
// It is the smallest unit of text on a PDF page, typically a single character.
//
// getBBox() in test_text.go shows how to compute bounding boxes of substrings of extracted text.
// The following code extracts the text on PDF page `page` into `text` then finds the bounding box
// `bbox` of substring `term` in `text`.
//
//	ex, _ := New(page)
//	// handle errors
//	pageText, _, _, err := ex.ExtractPageText()
//	// handle errors
//	text := pageText.Text()
//	textMarks := pageText.Marks()
//
//		start := strings.Index(text, term)
//	 end := start + len(term)
//	 spanMarks, err := textMarks.RangeOffset(start, end)
//	 // handle errors
//	 bbox, ok := spanMarks.BBox()
//	 // handle errors
type TextMark struct{

// Text is the extracted text.
Text string ;

// Original is the text in the PDF. It has not been decoded like `Text`.
Original string ;

// BBox is the bounding box of the text.
BBox _ec .PdfRectangle ;

// Font is the font the text was drawn with.
Font *_ec .PdfFont ;

// FontSize is the font size the text was drawn with.
FontSize float64 ;

// Offset is the offset of the start of TextMark.Text in the extracted text. If you do this
//   text, textMarks := pageText.Text(), pageText.Marks()
//   marks := textMarks.Elements()
// then marks[i].Offset is the offset of marks[i].Text in text.
Offset int ;

// Meta is set true for spaces and line breaks that we insert in the extracted text. We insert
// spaces (line breaks) when we see characters that are over a threshold horizontal (vertical)
//  distance  apart. See wordJoiner (lineJoiner) in PageText.computeViews().
Meta bool ;

// FillColor is the fill color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
FillColor _gf .Color ;

// StrokeColor is the stroke color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
StrokeColor _gf .Color ;

// Orientation is the text orientation
Orientation int ;

// DirectObject is the underlying PdfObject (Text Object) that represents the visible texts. This is introduced to get
// a simple access to the TextObject in case editing or replacment of some text is needed. E.g during redaction.
DirectObject _bc .PdfObject ;

// ObjString is a decoded string operand of a text-showing operator. It has the same value as `Text` attribute except
// when many glyphs are represented with the same Text Object that contains multiple length string operand in which case
// ObjString spans more than one character string that falls in different TextMark objects.
ObjString []string ;Tw float64 ;Th float64 ;Tc float64 ;Index int ;_aede bool ;_cdc *TextTable ;};func _eac (_dafa []*textLine )[]*textLine {_fddb :=[]*textLine {};for _ ,_eadf :=range _dafa {_bcag :=_eadf .text ();_baee :=_bacfg .Find ([]byte (_bcag ));
if _baee !=nil {_fddb =append (_fddb ,_eadf );};};return _fddb ;};func (_fbdf *PageText )getParagraphs ()paraList {var _bffaf rulingList ;if _aeb {_abfb :=_fcgab (_fbdf ._egde );_bffaf =append (_bffaf ,_abfb ...);};if _cdba {_agf :=_baeag (_fbdf ._fgd );
_bffaf =append (_bffaf ,_agf ...);};_bffaf ,_adcde :=_bffaf .toTilings ();var _fdgg paraList ;_ddbg :=len (_fbdf ._dade );for _eccd :=0;_eccd < 360&&_ddbg > 0;_eccd +=90{_dfae :=make ([]*textMark ,0,len (_fbdf ._dade )-_ddbg );for _ ,_cceda :=range _fbdf ._dade {if _cceda ._gcdg ==_eccd {_dfae =append (_dfae ,_cceda );
};};if len (_dfae )> 0{_afbg :=_fefg (_dfae ,_fbdf ._adcd ,_bffaf ,_adcde ,_fbdf ._gbfe ._dbac );_fdgg =append (_fdgg ,_afbg ...);_ddbg -=len (_dfae );};};return _fdgg ;};func (_fafd *textTable )toTextTable ()TextTable {if _abfa {_fd .Log .Info ("t\u006fT\u0065\u0078\u0074\u0054\u0061\u0062\u006c\u0065:\u0020\u0025\u0064\u0020x \u0025\u0064",_fafd ._cfaac ,_fafd ._gfae );
};_edefe :=make ([][]TableCell ,_fafd ._gfae );for _daffb :=0;_daffb < _fafd ._gfae ;_daffb ++{_edefe [_daffb ]=make ([]TableCell ,_fafd ._cfaac );for _fgff :=0;_fgff < _fafd ._cfaac ;_fgff ++{_ccffb :=_fafd .get (_fgff ,_daffb );if _ccffb ==nil {continue ;
};if _abfa {_df .Printf ("\u0025\u0034\u0064 \u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_fgff ,_daffb ,_ccffb );};_edefe [_daffb ][_fgff ].Text =_ccffb .text ();_fcdf :=0;_edefe [_daffb ][_fgff ].Marks ._ggc =_ccffb .toTextMarks (&_fcdf );};};_adefg :=TextTable {W :_fafd ._cfaac ,H :_fafd ._gfae ,Cells :_edefe };
_adefg .PdfRectangle =_fafd .bbox ();return _adefg ;};const (_gada =false ;_geba =false ;_bdac =false ;_bcdg =false ;_cgab =false ;_fega =false ;_fbde =false ;_gee =false ;_cbgad =false ;_eaga =_cbgad &&true ;_faf =_eaga &&false ;_gbga =_cbgad &&true ;
_abfa =false ;_ffebe =_abfa &&false ;_fcge =_abfa &&true ;_bcbd =false ;_fdac =_bcbd &&false ;_eafc =_bcbd &&false ;_aceb =_bcbd &&true ;_begb =_bcbd &&false ;_cfggb =_bcbd &&false ;);type paraList []*textPara ;func (_cfaed *textLine )markWordBoundaries (){_acda :=_bbdg *_cfaed ._ggdf ;
for _bccb ,_dfdbc :=range _cfaed ._fdec [1:]{if _fgfe (_dfdbc ,_cfaed ._fdec [_bccb ])>=_acda {_dfdbc ._bbcc =true ;};};};func _febcc (_gebc *wordBag ,_dddb *textWord ,_efce float64 )bool {return _dddb .Llx < _gebc .Urx +_efce &&_gebc .Llx -_efce < _dddb .Urx ;
};func (_aef *imageExtractContext )processOperand (_ceg *_dd .ContentStreamOperation ,_dbfa _dd .GraphicsState ,_ba *_ec .PdfPageResources )error {if _ceg .Operand =="\u0042\u0049"&&len (_ceg .Params )==1{_bcc ,_dbg :=_ceg .Params [0].(*_dd .ContentStreamInlineImage );
if !_dbg {return nil ;};if _bed ,_gad :=_bc .GetBoolVal (_bcc .ImageMask );_gad {if _bed &&!_aef ._gef .IncludeInlineStencilMasks {return nil ;};};return _aef .extractInlineImage (_bcc ,_dbfa ,_ba );}else if _ceg .Operand =="\u0044\u006f"&&len (_ceg .Params )==1{_fb ,_edb :=_bc .GetName (_ceg .Params [0]);
if !_edb {_fd .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");return _fdc ;};_ ,_cf :=_ba .GetXObjectByName (*_fb );switch _cf {case _ec .XObjectTypeImage :return _aef .extractXObjectImage (_fb ,_dbfa ,_ba );case _ec .XObjectTypeForm :return _aef .extractFormImages (_fb ,_dbfa ,_ba );
};}else if _aef ._cgb &&(_ceg .Operand =="\u0073\u0063\u006e"||_ceg .Operand =="\u0053\u0043\u004e")&&len (_ceg .Params )==1{_cd ,_dfc :=_bc .GetName (_ceg .Params [0]);if !_dfc {_fd .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");
return _fdc ;};_cecf ,_dfc :=_ba .GetPatternByName (*_cd );if !_dfc {_fd .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0050\u0061\u0074\u0074\u0065\u0072n\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");return nil ;};if _cecf .IsTiling (){_cbf :=_cecf .GetAsTilingPattern ();
_eca ,_cdg :=_cbf .GetContentStream ();if _cdg !=nil {return _cdg ;};_cdg =_aef .extractContentStreamImages (string (_eca ),_cbf .Resources );if _cdg !=nil {return _cdg ;};};}else if (_ceg .Operand =="\u0063\u0073"||_ceg .Operand =="\u0043\u0053")&&len (_ceg .Params )>=1{_aef ._cgb =_ceg .Params [0].String ()=="\u0050a\u0074\u0074\u0065\u0072\u006e";
};return nil ;};func (_ffagb *wordBag )allWords ()[]*textWord {var _dcef []*textWord ;for _ ,_cbde :=range _ffagb ._aedg {_dcef =append (_dcef ,_cbde ...);};return _dcef ;};func (_faga paraList )writeText (_cbda _b .Writer ){for _dead ,_geef :=range _faga {if _geef ._baca {continue ;
};_geef .writeText (_cbda );if _dead !=len (_faga )-1{if _fafe (_geef ,_faga [_dead +1]){_cbda .Write ([]byte ("\u0020"));}else {_cbda .Write ([]byte ("\u000a"));_cbda .Write ([]byte ("\u000a"));};};};_cbda .Write ([]byte ("\u000a"));_cbda .Write ([]byte ("\u000a"));
};func _gdadc (_bcfg []*wordBag )[]*wordBag {if len (_bcfg )<=1{return _bcfg ;};if _cbgad {_fd .Log .Info ("\u006d\u0065\u0072\u0067\u0065\u0057\u006f\u0072\u0064B\u0061\u0067\u0073\u003a");};_e .Slice (_bcfg ,func (_aefa ,_bbdd int )bool {_bafg ,_ffaf :=_bcfg [_aefa ],_bcfg [_bbdd ];
_gagc :=_bafg .Width ()*_bafg .Height ();_gbgda :=_ffaf .Width ()*_ffaf .Height ();if _gagc !=_gbgda {return _gagc > _gbgda ;};if _bafg .Height ()!=_ffaf .Height (){return _bafg .Height ()> _ffaf .Height ();};return _aefa < _bbdd ;});var _bffe []*wordBag ;
_efgc :=make (intSet );for _bada :=0;_bada < len (_bcfg );_bada ++{if _efgc .has (_bada ){continue ;};_cfgg :=_bcfg [_bada ];for _gffg :=_bada +1;_gffg < len (_bcfg );_gffg ++{if _efgc .has (_bada ){continue ;};_ddbc :=_bcfg [_gffg ];_ffef :=_cfgg .PdfRectangle ;
_ffef .Llx -=_cfgg ._bfca ;if _ageg (_ffef ,_ddbc .PdfRectangle ){_cfgg .absorb (_ddbc );_efgc .add (_gffg );};};_bffe =append (_bffe ,_cfgg );};if len (_bcfg )!=len (_bffe )+len (_efgc ){_fd .Log .Error ("\u006d\u0065\u0072ge\u0057\u006f\u0072\u0064\u0042\u0061\u0067\u0073\u003a \u0025d\u2192%\u0064 \u0061\u0062\u0073\u006f\u0072\u0062\u0065\u0064\u003d\u0025\u0064",len (_bcfg ),len (_bffe ),len (_efgc ));
};return _bffe ;};

// ExtractTextWithStats works like ExtractText but returns the number of characters in the output
// (`numChars`) and the number of characters that were not decoded (`numMisses`).
func (_bcg *Extractor )ExtractTextWithStats ()(_abg string ,_bccg int ,_abga int ,_eb error ){_aee ,_bccg ,_abga ,_eb :=_bcg .ExtractPageText ();if _eb !=nil {return "",_bccg ,_abga ,_eb ;};return _aee .Text (),_bccg ,_abga ,nil ;};func (_deca *wordBag )blocked (_bedc *textWord )bool {if _bedc .Urx < _deca .Llx {_cgag :=_gfece (_bedc .PdfRectangle );
_gebfb :=_cege (_deca .PdfRectangle );if _deca ._dgcb .blocks (_cgag ,_gebfb ){if _cfggb {_fd .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0078\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_bedc ,_deca );};return true ;};}else if _deca .Urx < _bedc .Llx {_fcga :=_gfece (_deca .PdfRectangle );
_fgcag :=_cege (_bedc .PdfRectangle );if _deca ._dgcb .blocks (_fcga ,_fgcag ){if _cfggb {_fd .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0078\u2192\u0020:\u0020\u0025\u0073\u0020%s",_bedc ,_deca );};return true ;};};if _bedc .Ury < _deca .Lly {_aeff :=_cbgge (_bedc .PdfRectangle );
_gedb :=_abcgd (_deca .PdfRectangle );if _deca ._bef .blocks (_aeff ,_gedb ){if _cfggb {_fd .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0079\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_bedc ,_deca );};return true ;};}else if _deca .Ury < _bedc .Lly {_efedb :=_cbgge (_deca .PdfRectangle );
_gdgg :=_abcgd (_bedc .PdfRectangle );if _deca ._bef .blocks (_efedb ,_gdgg ){if _cfggb {_fd .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0079\u2192\u0020:\u0020\u0025\u0073\u0020%s",_bedc ,_deca );};return true ;};};return false ;};var _afbge string ="\u005e\u005b\u0061\u002d\u007a\u0041\u002dZ\u005d\u0028\u005c)\u007c\u005c\u002e)\u007c\u005e[\u005c\u0064\u005d\u002b\u0028\u005c)\u007c\\.\u0029\u007c\u005e\u005c\u0028\u005b\u0061\u002d\u007a\u0041\u002d\u005a\u005d\u005c\u0029\u007c\u005e\u005c\u0028\u005b\u005c\u0064\u005d\u002b\u005c\u0029";
func (_fcd *shapesState )stroke (_aff *[]pathSection ){_geac :=pathSection {_bdg :_fcd ._eabf ,Color :_fcd ._bbe .getStrokeColor ()};*_aff =append (*_aff ,_geac );if _bcbd {_df .Printf ("\u0020 \u0020\u0020S\u0054\u0052\u004fK\u0045\u003a\u0020\u0025\u0064\u0020\u0073t\u0072\u006f\u006b\u0065\u0073\u0020s\u0073\u003d\u0025\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d%\u002b\u0076\u0020\u0025\u0036\u002e\u0032\u0066\u000a",len (*_aff ),_fcd ,_fcd ._bbe .getStrokeColor (),_geac .bbox ());
if _fdac {for _gffd ,_adab :=range _fcd ._eabf {_df .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_gffd ,_adab );if _gffd ==10{break ;};};};};};func (_bdgg paraList )llyOrdering ()[]int {_dccf :=make ([]int ,len (_bdgg ));for _ccged :=range _bdgg {_dccf [_ccged ]=_ccged ;
};_e .SliceStable (_dccf ,func (_ecge ,_fcbg int )bool {_gfgfa ,_ffde :=_dccf [_ecge ],_dccf [_fcbg ];return _bdgg [_gfgfa ].Lly < _bdgg [_ffde ].Lly ;});return _dccf ;};func (_cdeee intSet )has (_ecggd int )bool {_ ,_dfbg :=_cdeee [_ecggd ];return _dfbg };
type list struct{_dffa []*textLine ;_bdabd string ;_dedg []*list ;_bebf string ;};func (_adgdb *textPara )bbox ()_ec .PdfRectangle {return _adgdb .PdfRectangle };func (_egb *shapesState )lineTo (_egdf ,_cbgg float64 ){if _cgab {_fd .Log .Info ("\u006c\u0069\u006eeT\u006f\u0028\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0070\u003d\u0025\u002e\u0032\u0066",_egdf ,_cbgg ,_egb .devicePoint (_egdf ,_cbgg ));
};_egb .addPoint (_egdf ,_cbgg );};func (_gacbe *textTable )newTablePara ()*textPara {_cdgg :=_gacbe .computeBbox ();_bagb :=&textPara {PdfRectangle :_cdgg ,_ceff :_cdgg ,_fcbe :_gacbe };if _abfa {_fd .Log .Info ("\u006e\u0065w\u0054\u0061\u0062l\u0065\u0050\u0061\u0072\u0061\u003a\u0020\u0025\u0073",_bagb );
};return _bagb ;};func (_egbe *structTreeRoot )buildList (_abe map[int ][]*textLine ,_gecbf _bc .PdfObject )[]*list {if _egbe ==nil {_fd .Log .Debug ("\u0062\u0075\u0069\u006c\u0064\u004c\u0069\u0073\u0074\u003a\u0020t\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0069\u0073 \u006e\u0069\u006c");
return nil ;};var _afbgf *structElement ;_cgce :=[]structElement {};if len (_egbe ._beea )==1{_gegb :=_egbe ._beea [0]._fdcf ;if _gegb =="\u0044\u006f\u0063\u0075\u006d\u0065\u006e\u0074"||_gegb =="\u0053\u0065\u0063\u0074"||_gegb =="\u0050\u0061\u0072\u0074"||_gegb =="\u0044\u0069\u0076"||_gegb =="\u0041\u0072\u0074"{_afbgf =&_egbe ._beea [0];
};}else {_afbgf =&structElement {_bfee :_egbe ._beea ,_fdcf :_egbe ._cdec };};if _afbgf ==nil {_fd .Log .Debug ("\u0062\u0075\u0069\u006cd\u004c\u0069\u0073\u0074\u003a\u0020\u0074\u006f\u0070\u0045l\u0065m\u0065\u006e\u0074\u0020\u0069\u0073\u0020n\u0069\u006c");
return nil ;};for _ ,_bgfd :=range _afbgf ._bfee {if _bgfd ._fdcf =="\u004c"{_cgce =append (_cgce ,_bgfd );}else if _bgfd ._fdcf =="\u0054\u0061\u0062l\u0065"{_ecfd :=_bddf (_bgfd );_cgce =append (_cgce ,_ecfd ...);};};_bfab :=_gbbc (_cgce ,_abe ,_gecbf );
var _eefg []*list ;for _ ,_fgfec :=range _bfab {_cgdc :=_cffc (_fgfec );_eefg =append (_eefg ,_cgdc ...);};return _eefg ;};func (_ecag *textObject )renderText (_bddd _bc .PdfObject ,_bba []byte ,_dcbc int )error {if _ecag ._fdef {_fd .Log .Debug ("\u0072\u0065\u006e\u0064\u0065r\u0054\u0065\u0078\u0074\u003a\u0020\u0049\u006e\u0076\u0061\u006c\u0069\u0064 \u0066\u006f\u006e\u0074\u002e\u0020\u004e\u006f\u0074\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u002e");
return nil ;};_ddgg :=_ecag .getCurrentFont ();_cga :=_ddgg .BytesToCharcodes (_bba );_bac ,_dceg ,_gegeb :=_ddgg .CharcodesToStrings (_cga );if _gegeb > 0{_fd .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_dceg ,_gegeb );
};_ecag ._acad ._cca +=_dceg ;_ecag ._acad ._dcac +=_gegeb ;_fda :=_ecag ._acad ;_gbef :=_fda ._aed ;_dcc :=_fda ._dfgd /100.0;_bdeg :=_gdb ;if _ddgg .Subtype ()=="\u0054\u0079\u0070e\u0033"{_bdeg =1;};_gbd ,_fef :=_ddgg .GetRuneMetrics (' ');if !_fef {_gbd ,_fef =_ddgg .GetCharMetrics (32);
};if !_fef {_gbd ,_ =_ec .DefaultFont ().GetRuneMetrics (' ');};_dbef :=_gbd .Wx *_bdeg ;_fd .Log .Trace ("\u0073p\u0061\u0063e\u0057\u0069\u0064t\u0068\u003d\u0025\u002e\u0032\u0066\u0020t\u0065\u0078\u0074\u003d\u0025\u0071 \u0066\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0066\u006f\u006et\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",_dbef ,_bac ,_ddgg ,_gbef );
_ece :=_aa .NewMatrix (_gbef *_dcc ,0,0,_gbef ,0,_fda ._gdaf );if _fega {_fd .Log .Info ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0074\u0065\u0078t\u0073\u003d\u0025\u0071",len (_cga ),_cga ,_bac );
};_fd .Log .Trace ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0072\u0075\u006ee\u0073\u003d\u0025\u0071",len (_cga ),_cga ,len (_bac ));_efed :=_ecag .getFillColor ();
_bae :=_ecag .getStrokeColor ();for _cdd ,_geaga :=range _bac {_dac :=[]rune (_geaga );if len (_dac )==1&&_dac [0]=='\x00'{continue ;};_bfbf :=_cga [_cdd ];_cgf :=_ecag ._dfff .CTM .Mult (_ecag ._dagc ).Mult (_ece );_fdbb :=0.0;if len (_dac )==1&&_dac [0]==32{_fdbb =_fda ._gddc ;
};_edfd ,_gacg :=_ddgg .GetCharMetrics (_bfbf );if !_gacg {_fd .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u004e\u006f \u006d\u0065\u0074r\u0069\u0063\u0020\u0066\u006f\u0072\u0020\u0063\u006fde\u003d\u0025\u0064 \u0072\u003d0\u0078\u0025\u0030\u0034\u0078\u003d%\u002b\u0071 \u0025\u0073",_bfbf ,_dac ,_dac ,_ddgg );
return _df .Errorf ("\u006e\u006f\u0020\u0063\u0068\u0061\u0072\u0020\u006d\u0065\u0074\u0072\u0069\u0063\u0073:\u0020f\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0063\u006f\u0064\u0065\u003d\u0025\u0064",_ddgg .String (),_bfbf );};_ffgc :=_aa .Point {X :_edfd .Wx *_bdeg ,Y :_edfd .Wy *_bdeg };
_acc :=_aa .Point {X :(_ffgc .X *_gbef +_fdbb )*_dcc };_dfge :=_aa .Point {X :(_ffgc .X *_gbef +_fda ._ggfg +_fdbb )*_dcc };if _fega {_fd .Log .Info ("\u0074\u0066\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0063\u003d\u0025\u002e\u0032f\u0020t\u0077\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_gbef ,_fda ._ggfg ,_fda ._gddc ,_dcc );
_fd .Log .Info ("\u0064x\u002c\u0064\u0079\u003d%\u002e\u0033\u0066\u0020\u00740\u003d%\u002e3\u0066\u0020\u0074\u003d\u0025\u002e\u0033f",_ffgc ,_acc ,_dfge );};_cag :=_fbgf (_acc );_acgcb :=_fbgf (_dfge );_gec :=_ecag ._dfff .CTM .Mult (_ecag ._dagc ).Mult (_cag );
if _bcdg {_fd .Log .Info ("e\u006e\u0064\u003a\u000a\tC\u0054M\u003d\u0025\u0073\u000a\u0009 \u0074\u006d\u003d\u0025\u0073\u000a"+"\u0009\u0020t\u0064\u003d\u0025s\u0020\u0078\u006c\u0061\u0074\u003d\u0025\u0073\u000a"+"\u0009t\u0064\u0030\u003d\u0025s\u000a\u0009\u0020\u0020\u2192 \u0025s\u0020x\u006c\u0061\u0074\u003d\u0025\u0073",_ecag ._dfff .CTM ,_ecag ._dagc ,_acgcb ,_dbcc (_ecag ._dfff .CTM .Mult (_ecag ._dagc ).Mult (_acgcb )),_cag ,_gec ,_dbcc (_gec ));
};_fcgc ,_cgd :=_ecag .newTextMark (_ef .ExpandLigatures (_dac ),_cgf ,_dbcc (_gec ),_g .Abs (_dbef *_cgf .ScalingFactorX ()),_ddgg ,_ecag ._acad ._ggfg ,_efed ,_bae ,_bddd ,_bac ,_cdd ,_dcbc );if !_cgd {_fd .Log .Debug ("\u0054\u0065\u0078\u0074\u0020\u006d\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069d\u0065 \u0070\u0061\u0067\u0065\u002e\u0020\u0053\u006b\u0069\u0070\u0070\u0069\u006e\u0067");
continue ;};if _ddgg ==nil {_fd .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u002e");}else if _ddgg .Encoder ()==nil {_fd .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020N\u006f\u0020\u0065\u006e\u0063\u006f\u0064\u0069\u006eg\u002e\u0020\u0066o\u006et\u003d\u0025\u0073",_ddgg );
}else {if _dae ,_acag :=_ddgg .Encoder ().CharcodeToRune (_bfbf );_acag {_fcgc ._gcef =string (_dae );};};_fd .Log .Trace ("i\u003d\u0025\u0064\u0020\u0063\u006fd\u0065\u003d\u0025\u0064\u0020\u006d\u0061\u0072\u006b=\u0025\u0073\u0020t\u0072m\u003d\u0025\u0073",_cdd ,_bfbf ,_fcgc ,_cgf );
_ecag ._afgc =append (_ecag ._afgc ,&_fcgc );_ecag ._dagc .Concat (_acgcb );};return nil ;};func (_fgec *subpath )add (_begg ..._aa .Point ){_fgec ._afgg =append (_fgec ._afgg ,_begg ...)};func _fagg (_edcbf ,_dbbf _aa .Point )bool {_cabf :=_g .Abs (_edcbf .X -_dbbf .X );
_fagf :=_g .Abs (_edcbf .Y -_dbbf .Y );return _aegb (_cabf ,_fagf );};func (_gedg rulingList )sortStrict (){_e .Slice (_gedg ,func (_ccedc ,_cafe int )bool {_gcebg ,_dgdd :=_gedg [_ccedc ],_gedg [_cafe ];_afcgd ,_afgcc :=_gcebg ._aabaf ,_dgdd ._aabaf ;
if _afcgd !=_afgcc {return _afcgd > _afgcc ;};_fdgdb ,_afef :=_gcebg ._ggda ,_dgdd ._ggda ;if !_fdeb (_fdgdb -_afef ){return _fdgdb < _afef ;};_fdgdb ,_afef =_gcebg ._afbbf ,_dgdd ._afbbf ;if _fdgdb !=_afef {return _fdgdb < _afef ;};return _gcebg ._gdgd < _dgdd ._gdgd ;
});};func _bbbec (_bbdcd *_ec .Image ,_egfb _gf .Color )_ag .Image {_agcc ,_fbcf :=int (_bbdcd .Width ),int (_bbdcd .Height );_edddb :=_ag .NewRGBA (_ag .Rect (0,0,_agcc ,_fbcf ));for _geage :=0;_geage < _fbcf ;_geage ++{for _bgcgf :=0;_bgcgf < _agcc ;
_bgcgf ++{_dbad ,_cbaa :=_bbdcd .ColorAt (_bgcgf ,_geage );if _cbaa !=nil {_fd .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_bgcgf ,_geage );
continue ;};_bece ,_cdcac ,_abbg ,_ :=_dbad .RGBA ();var _abegc _gf .Color ;if _bece +_cdcac +_abbg ==0{_abegc =_egfb ;}else {_abegc =_gf .Transparent ;};_edddb .Set (_bgcgf ,_geage ,_abegc );};};return _edddb ;};func (_cbga *subpath )removeDuplicates (){if len (_cbga ._afgg )==0{return ;
};_dcgf :=[]_aa .Point {_cbga ._afgg [0]};for _ ,_cffb :=range _cbga ._afgg [1:]{if !_efcc (_cffb ,_dcgf [len (_dcgf )-1]){_dcgf =append (_dcgf ,_cffb );};};_cbga ._afgg =_dcgf ;};func _fcec (_fabde _ec .PdfColorspace ,_gdgeb _ec .PdfColor )_gf .Color {if _fabde ==nil ||_gdgeb ==nil {return _gf .Black ;
};_bdbgb ,_fdaaa :=_fabde .ColorToRGB (_gdgeb );if _fdaaa !=nil {_fd .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006fu\u006c\u0064\u0020no\u0074\u0020\u0063\u006f\u006e\u0076e\u0072\u0074\u0020\u0063\u006f\u006c\u006f\u0072\u0020\u0025\u0076\u0020\u0028\u0025\u0076)\u0020\u0074\u006f\u0020\u0052\u0047\u0042\u003a \u0025\u0073",_gdgeb ,_fabde ,_fdaaa );
return _gf .Black ;};_egdeg ,_dfffc :=_bdbgb .(*_ec .PdfColorDeviceRGB );if !_dfffc {_fd .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0065\u0064 \u0063\u006f\u006c\u006f\u0072\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020i\u006e\u0020\u0074\u0068\u0065\u0020\u0052\u0047\u0042\u0020\u0063\u006flo\u0072\u0073\u0070\u0061\u0063\u0065\u003a\u0020\u0025\u0076",_bdbgb );
return _gf .Black ;};return _gf .NRGBA {R :uint8 (_egdeg .R ()*255),G :uint8 (_egdeg .G ()*255),B :uint8 (_egdeg .B ()*255),A :uint8 (255)};};func _eaad (_dgae ,_geab _ec .PdfRectangle )bool {return _dfcf (_dgae ,_geab )&&_ebdcg (_dgae ,_geab )};

// PageText represents the layout of text on a device page.
type PageText struct{_dade []*textMark ;_ddcbb string ;_acfg []TextMark ;_gbc []TextTable ;_adcd _ec .PdfRectangle ;_egde []pathSection ;_fgd []pathSection ;_ffeg *_bc .PdfObject ;_egdef _bc .PdfObject ;_ecc *_dd .ContentStreamOperations ;_gbfe PageTextOptions ;
};func (_ffdb *wordBag )firstWord (_cagc int )*textWord {return _ffdb ._aedg [_cagc ][0]};type rectRuling struct{_geec rulingKind ;_acea markKind ;_gf .Color ;_ec .PdfRectangle ;};func (_fag *textObject )setCharSpacing (_ccda float64 ){if _fag ==nil {return ;
};_fag ._acad ._ggfg =_ccda ;if _fega {_fd .Log .Info ("\u0073\u0065t\u0043\u0068\u0061\u0072\u0053\u0070\u0061\u0063\u0069\u006e\u0067\u003a\u0020\u0025\u002e\u0032\u0066\u0020\u0073\u0074\u0061\u0074e=\u0025\u0073",_ccda ,_fag ._acad .String ());};};
func _dcfd (_efb *textWord ,_bgg float64 ,_ccge ,_gaf rulingList )*wordBag {_aacf :=_bcba (_efb ._gcca );_faee :=[]*textWord {_efb };_eddb :=wordBag {_aedg :map[int ][]*textWord {_aacf :_faee },PdfRectangle :_efb .PdfRectangle ,_bfca :_efb ._ggdfd ,_dffb :_bgg ,_dgcb :_ccge ,_bef :_gaf };
return &_eddb ;};func (_dfag *textPara )toCellTextMarks (_bgfbg *int )[]TextMark {var _acae []TextMark ;for _cfgf ,_bdec :=range _dfag ._dgff {_dfdbe :=_bdec .toTextMarks (_bgfbg );_degf :=_fcde &&_bdec .endsInHyphen ()&&_cfgf !=len (_dfag ._dgff )-1;if _degf {_dfdbe =_aad (_dfdbe ,_bgfbg );
};_acae =append (_acae ,_dfdbe ...);if !(_degf ||_cfgf ==len (_dfag ._dgff )-1){_acae =_egef (_acae ,_bgfbg ,_bgecc (_bdec ._efeb ,_dfag ._dgff [_cfgf +1]._efeb ));};};return _acae ;};func _decf (_aadd []*textMark ,_gbbec _ec .PdfRectangle )*textWord {_dgce :=_aadd [0].PdfRectangle ;
_gecg :=_aadd [0]._cgdb ;for _ ,_afgb :=range _aadd [1:]{_dgce =_eed (_dgce ,_afgb .PdfRectangle );if _afgb ._cgdb > _gecg {_gecg =_afgb ._cgdb ;};};return &textWord {PdfRectangle :_dgce ,_egfgg :_aadd ,_gcca :_gbbec .Ury -_dgce .Lly ,_ggdfd :_gecg };};


// String returns a description of `w`.
func (_geca *textWord )String ()string {return _df .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_geca ._gcca ,_geca .PdfRectangle ,_geca ._ggdfd ,_geca ._ddbga );
};func (_gggg lineRuling )yMean ()float64 {return 0.5*(_gggg ._bcbg .Y +_gggg ._dbbeg .Y )};func _ggcc (_cbdgb float64 ,_ffaa int )int {if _ffaa ==0{_ffaa =1;};_fcgf :=float64 (_ffaa );return int (_g .Round (_cbdgb /_fcgf )*_fcgf );};func (_afea rectRuling )checkWidth (_abea ,_cbgdd float64 )(float64 ,bool ){_ddafd :=_cbgdd -_abea ;
_gfff :=_ddafd <=_bbef ;return _ddafd ,_gfff ;};func (_debe rulingList )secMinMax ()(float64 ,float64 ){_fdab ,_gagg :=_debe [0]._afbbf ,_debe [0]._gdgd ;for _ ,_ecfg :=range _debe [1:]{if _ecfg ._afbbf < _fdab {_fdab =_ecfg ._afbbf ;};if _ecfg ._gdgd > _gagg {_gagg =_ecfg ._gdgd ;
};};return _fdab ,_gagg ;};func (_cdbfd *textTable )getDown ()paraList {_afcgb :=make (paraList ,_cdbfd ._cfaac );for _gebfc :=0;_gebfc < _cdbfd ._cfaac ;_gebfc ++{_facba :=_cdbfd .get (_gebfc ,_cdbfd ._gfae -1)._abeb ;if _facba .taken (){return nil ;};
_afcgb [_gebfc ]=_facba ;};for _eabe :=0;_eabe < _cdbfd ._cfaac -1;_eabe ++{if _afcgb [_eabe ]._dcgfa !=_afcgb [_eabe +1]{return nil ;};};return _afcgb ;};

// Options extractor options.
type Options struct{

// DisableDocumentTags specifies whether to use the document tags during list extraction.
DisableDocumentTags bool ;

// ApplyCropBox will extract page text based on page cropbox if set to `true`.
ApplyCropBox bool ;

// UseSimplerExtractionProcess will skip topological text ordering and table processing.
//
// NOTE: While normally the extra processing is beneficial, it can also lead to problems when it does not work.
// Thus it is a flag to allow the user to control this process.
//
// Skipping some extraction processes would also lead to the reduced processing time.
UseSimplerExtractionProcess bool ;};func _bdbc (_baea _aa .Point )*subpath {return &subpath {_afgg :[]_aa .Point {_baea }}};type textTable struct{_ec .PdfRectangle ;_cfaac ,_gfae int ;_beagb bool ;_cadda map[uint64 ]*textPara ;_edeab map[uint64 ]compositeCell ;
};type wordBag struct{_ec .PdfRectangle ;_bfca float64 ;_dgcb ,_bef rulingList ;_dffb float64 ;_aedg map[int ][]*textWord ;};func (_eaaf paraList )log (_gffge string ){if !_gee {return ;};_fd .Log .Info ("%\u0038\u0073\u003a\u0020\u0025\u0064 \u0070\u0061\u0072\u0061\u0073\u0020=\u003d\u003d\u003d\u003d\u003d\u003d\u002d-\u002d\u002d\u002d\u002d\u002d\u003d\u003d\u003d\u003d\u003d=\u003d",_gffge ,len (_eaaf ));
for _bfbg ,_efcfg :=range _eaaf {if _efcfg ==nil {continue ;};_daggg :=_efcfg .text ();_cfce :="\u0020\u0020";if _efcfg ._fcbe !=nil {_cfce =_df .Sprintf ("\u005b%\u0064\u0078\u0025\u0064\u005d",_efcfg ._fcbe ._cfaac ,_efcfg ._fcbe ._gfae );};_df .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0025s\u0020\u0025\u0071\u000a",_bfbg ,_efcfg .PdfRectangle ,_cfce ,_gebg (_daggg ,50));
};};type structElement struct{_fdcf string ;_bfee []structElement ;_fcda int64 ;_cdebc _bc .PdfObject ;};func (_dfaa *textPara )depth ()float64 {if _dfaa ._baca {return -1.0;};if len (_dfaa ._dgff )> 0{return _dfaa ._dgff [0]._efeb ;};return _dfaa ._fcbe .depth ();
};func (_dggb rectRuling )asRuling ()(*ruling ,bool ){_gaag :=ruling {_aabaf :_dggb ._geec ,Color :_dggb .Color ,_ggfd :_ggbaa };switch _dggb ._geec {case _cebaac :_gaag ._ggda =0.5*(_dggb .Llx +_dggb .Urx );_gaag ._afbbf =_dggb .Lly ;_gaag ._gdgd =_dggb .Ury ;
_abdb ,_gdge :=_dggb .checkWidth (_dggb .Llx ,_dggb .Urx );if !_gdge {if _begb {_fd .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067V\u0065\u0072\u0074\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_dggb );
};return nil ,false ;};_gaag ._faac =_abdb ;case _dfdf :_gaag ._ggda =0.5*(_dggb .Lly +_dggb .Ury );_gaag ._afbbf =_dggb .Llx ;_gaag ._gdgd =_dggb .Urx ;_eegaa ,_begbe :=_dggb .checkWidth (_dggb .Lly ,_dggb .Ury );if !_begbe {if _begb {_fd .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067H\u006f\u0072\u007a\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_dggb );
};return nil ,false ;};_gaag ._faac =_eegaa ;default:_fd .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_dggb ._geec );return nil ,false ;};return &_gaag ,true ;};func _dagdd (_abgab map[int ]intSet )[]int {_gddge :=make ([]int ,0,len (_abgab ));
for _befe :=range _abgab {_gddge =append (_gddge ,_befe );};_e .Ints (_gddge );return _gddge ;};

// Text returns the extracted page text.
func (_cdb PageText )Text ()string {return _cdb ._ddcbb };var _de =false ;

// String returns a human readable description of `path`.
func (_ddgd *subpath )String ()string {_aged :=_ddgd ._afgg ;_dfce :=len (_aged );if _dfce <=5{return _df .Sprintf ("\u0025d\u003a\u0020\u0025\u0036\u002e\u0032f",_dfce ,_aged );};return _df .Sprintf ("\u0025d\u003a\u0020\u0025\u0036.\u0032\u0066\u0020\u0025\u0036.\u0032f\u0020.\u002e\u002e\u0020\u0025\u0036\u002e\u0032f",_dfce ,_aged [0],_aged [1],_aged [_dfce -1]);
};func (_bdda *textLine )toTextMarks (_fcfa *int )[]TextMark {var _ccae []TextMark ;for _ ,_dcegg :=range _bdda ._fdec {if _dcegg ._bbcc {_ccae =_egef (_ccae ,_fcfa ,"\u0020");};_ffdc :=_dcegg .toTextMarks (_fcfa );_ccae =append (_ccae ,_ffdc ...);};return _ccae ;
};func (_bega *stateStack )pop ()*textState {if _bega .empty (){return nil ;};_fcbf :=*(*_bega )[len (*_bega )-1];*_bega =(*_bega )[:len (*_bega )-1];return &_fcbf ;};

// Tables returns the tables extracted from the page.
func (_daa PageText )Tables ()[]TextTable {if _abfa {_fd .Log .Info ("\u0054\u0061\u0062\u006c\u0065\u0073\u003a\u0020\u0025\u0064",len (_daa ._gbc ));};return _daa ._gbc ;};func (_eddgc *textTable )getComposite (_fdbac ,_fgbee int )(paraList ,_ec .PdfRectangle ){_aacfa ,_bdfg :=_eddgc ._edeab [_dfded (_fdbac ,_fgbee )];
if _abfa {_df .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0067\u0065\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u002d\u003e\u0025\u0073\u000a",_fdbac ,_fgbee ,_aacfa .String ());};if !_bdfg {return nil ,_ec .PdfRectangle {};
};return _aacfa .parasBBox ();};func _bcedf (_gfcf *paraList )map[int ][]*textLine {_eggg :=map[int ][]*textLine {};for _ ,_fbcg :=range *_gfcf {for _ ,_gdcd :=range _fbcg ._dgff {if !_fffc (_gdcd ){_fd .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_baegf :=_gdcd ._fdec [0]._egfgg [0]._fcfe ;_eggg [_baegf ]=append (_eggg [_baegf ],_gdcd );};if _fbcg ._fcbe !=nil {_ebfa :=_fbcg ._fcbe ._cadda ;for _ ,_eefa :=range _ebfa {for _ ,_dadb :=range _eefa ._dgff {if !_fffc (_dadb ){_fd .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_aba :=_dadb ._fdec [0]._egfgg [0]._fcfe ;_eggg [_aba ]=append (_eggg [_aba ],_dadb );};};};};return _eggg ;};

// TextMarkArray is a collection of TextMarks.
type TextMarkArray struct{_ggc []TextMark };func (_bffb *compositeCell )updateBBox (){for _ ,_gfbcd :=range _bffb .paraList {_bffb .PdfRectangle =_eed (_bffb .PdfRectangle ,_gfbcd .PdfRectangle );};};func _aedgc (_cdbdc ,_efcg int )int {if _cdbdc > _efcg {return _cdbdc ;
};return _efcg ;};func (_dfffe *textWord )computeText ()string {_bdcdg :=make ([]string ,len (_dfffe ._egfgg ));for _bfbdb ,_eeage :=range _dfffe ._egfgg {_bdcdg [_bfbdb ]=_eeage ._fcffb ;};return _da .Join (_bdcdg ,"");};func (_defg *TextMarkArray )getTextMarkAtOffset (_cdga int )*TextMark {for _ ,_cfd :=range _defg ._ggc {if _cfd .Offset ==_cdga {return &_cfd ;
};};return nil ;};var _dgaf =_c .MustCompile ("\u005e\u005c\u0073\u002a\u0028\u005c\u0064\u002b\u005c\u002e\u003f|\u005b\u0049\u0069\u0076\u005d\u002b\u0029\u005c\u0073\u002a\\\u0029\u003f\u0024");

// String returns a description of `l`.
func (_effg *textLine )String ()string {return _df .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_effg ._efeb ,_effg .PdfRectangle ,_effg ._ggdf ,_effg .text ());
};func (_eegg paraList )lines ()[]*textLine {var _fdae []*textLine ;for _ ,_ecdbd :=range _eegg {_fdae =append (_fdae ,_ecdbd ._dgff ...);};return _fdae ;};type gridTiling struct{_ec .PdfRectangle ;_babea []float64 ;_bgfdg []float64 ;_cgcefa map[float64 ]map[float64 ]gridTile ;
};func (_fbgb *textLine )endsInHyphen ()bool {_abcb :=_fbgb ._fdec [len (_fbgb ._fdec )-1];_cdeed :=_abcb ._ddbga ;_cgff ,_fcgb :=_cb .DecodeLastRuneInString (_cdeed );if _fcgb <=0||!_d .Is (_d .Hyphen ,_cgff ){return false ;};if _abcb ._bbcc &&_gcfc (_cdeed ){return true ;
};return _gcfc (_fbgb .text ());};func _bbeb (_eea ,_ccdad bounded )float64 {return _eea .bbox ().Llx -_ccdad .bbox ().Llx };func (_gddg *ruling )equals (_gaddf *ruling )bool {return _gddg ._aabaf ==_gaddf ._aabaf &&_bfeag (_gddg ._ggda ,_gaddf ._ggda )&&_bfeag (_gddg ._afbbf ,_gaddf ._afbbf )&&_bfeag (_gddg ._gdgd ,_gaddf ._gdgd );
};func (_cdcf compositeCell )split (_cbab ,_ggce []float64 )*textTable {_ecgg :=len (_cbab )+1;_eaede :=len (_ggce )+1;if _abfa {_fd .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0043\u0065l\u006c\u002e\u0073\u0070l\u0069\u0074\u003a\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a\u0009\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025\u0073\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073=\u0025\u0036\u002e\u0032\u0066\u000a\t\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d%\u0036\u002e\u0032\u0066",_eaede ,_ecgg ,_cdcf ,_cbab ,_ggce );
_df .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073\u000a",len (_cdcf .paraList ));for _bdfe ,_gbdb :=range _cdcf .paraList {_df .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bdfe ,_gbdb .String ());};_df .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",len (_cdcf .lines ()));
for _eega ,_bbebb :=range _cdcf .lines (){_df .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_eega ,_bbebb );};};_cbab =_ggabf (_cbab ,_cdcf .Ury ,_cdcf .Lly );_ggce =_ggabf (_ggce ,_cdcf .Llx ,_cdcf .Urx );_eafa :=make (map[uint64 ]*textPara ,_eaede *_ecgg );
_fefd :=textTable {_cfaac :_eaede ,_gfae :_ecgg ,_cadda :_eafa };_caea :=_cdcf .paraList ;_e .Slice (_caea ,func (_gccfee ,_afbb int )bool {_dbfc ,_dgbca :=_caea [_gccfee ],_caea [_afbb ];_aeca ,_bbce :=_dbfc .Lly ,_dgbca .Lly ;if _aeca !=_bbce {return _aeca < _bbce ;
};return _dbfc .Llx < _dgbca .Llx ;});_bbgg :=make (map[uint64 ]_ec .PdfRectangle ,_eaede *_ecgg );for _acdc ,_aadc :=range _cbab [1:]{_ccfe :=_cbab [_acdc ];for _ecad ,_gfga :=range _ggce [1:]{_eebaac :=_ggce [_ecad ];_bbgg [_dfded (_ecad ,_acdc )]=_ec .PdfRectangle {Llx :_eebaac ,Urx :_gfga ,Lly :_aadc ,Ury :_ccfe };
};};if _abfa {_fd .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0043\u0065l\u006c\u002e\u0073\u0070\u006c\u0069\u0074\u003a\u0020\u0072e\u0063\u0074\u0073");_df .Printf ("\u0020\u0020\u0020\u0020");for _bddda :=0;_bddda < _eaede ;
_bddda ++{_df .Printf ("\u0025\u0033\u0030\u0064\u002c\u0020",_bddda );};_df .Println ();for _efgce :=0;_efgce < _ecgg ;_efgce ++{_df .Printf ("\u0020\u0020\u0025\u0032\u0064\u003a",_efgce );for _aeeg :=0;_aeeg < _eaede ;_aeeg ++{_df .Printf ("\u00256\u002e\u0032\u0066\u002c\u0020",_bbgg [_dfded (_aeeg ,_efgce )]);
};_df .Println ();};};_gdgf :=func (_dcce *textLine )(int ,int ){for _fgda :=0;_fgda < _ecgg ;_fgda ++{for _edae :=0;_edae < _eaede ;_edae ++{if _ageg (_bbgg [_dfded (_edae ,_fgda )],_dcce .PdfRectangle ){return _edae ,_fgda ;};};};return -1,-1;};_ffad :=make (map[uint64 ][]*textLine ,_eaede *_ecgg );
for _ ,_bagg :=range _caea .lines (){_gcfcc ,_eeed :=_gdgf (_bagg );if _gcfcc < 0{continue ;};_ffad [_dfded (_gcfcc ,_eeed )]=append (_ffad [_dfded (_gcfcc ,_eeed )],_bagg );};for _bbgc :=0;_bbgc < len (_cbab )-1;_bbgc ++{_gbgfc :=_cbab [_bbgc ];_bdbd :=_cbab [_bbgc +1];
for _adeab :=0;_adeab < len (_ggce )-1;_adeab ++{_dbbe :=_ggce [_adeab ];_eacg :=_ggce [_adeab +1];_abed :=_ec .PdfRectangle {Llx :_dbbe ,Urx :_eacg ,Lly :_bdbd ,Ury :_gbgfc };_cebaa :=_ffad [_dfded (_adeab ,_bbgc )];if len (_cebaa )==0{continue ;};_begde :=_bgffd (_abed ,_cebaa );
_fefd .put (_adeab ,_bbgc ,_begde );};};return &_fefd ;};

// ApplyArea processes the page text only within the specified area `bbox`.
// Each time ApplyArea is called, it updates the result set in `pt`.
// Can be called multiple times in a row with different bounding boxes.
func (_gdeb *PageText )ApplyArea (bbox _ec .PdfRectangle ){_afee :=make ([]*textMark ,0,len (_gdeb ._dade ));for _ ,_cefa :=range _gdeb ._dade {if _eaad (_cefa .bbox (),bbox ){_afee =append (_afee ,_cefa );};};var _caeg paraList ;_dgb :=len (_afee );for _afeg :=0;
_afeg < 360&&_dgb > 0;_afeg +=90{_cacc :=make ([]*textMark ,0,len (_afee )-_dgb );for _ ,_gfe :=range _afee {if _gfe ._gcdg ==_afeg {_cacc =append (_cacc ,_gfe );};};if len (_cacc )> 0{_bdab :=_fefg (_cacc ,_gdeb ._adcd ,nil ,nil ,_gdeb ._gbfe ._dbac );
_caeg =append (_caeg ,_bdab ...);_dgb -=len (_cacc );};};_dcbd :=new (_fg .Buffer );_caeg .writeText (_dcbd );_gdeb ._ddcbb =_dcbd .String ();_gdeb ._acfg =_caeg .toTextMarks ();_gdeb ._gbc =_caeg .tables ();};func _abbfcf (_dbca ,_geaa _aa .Point )rulingKind {_cegeg :=_g .Abs (_dbca .X -_geaa .X );
_gfeca :=_g .Abs (_dbca .Y -_geaa .Y );return _bebdc (_cegeg ,_gfeca ,_geaf );};

// String returns a human readable description of `vecs`.
func (_bacad rulingList )String ()string {if len (_bacad )==0{return "\u007b \u0045\u004d\u0050\u0054\u0059\u0020}";};_cbdag ,_cddb :=_bacad .vertsHorzs ();_acecb :=len (_cbdag );_fcffbd :=len (_cddb );if _acecb ==0||_fcffbd ==0{return _df .Sprintf ("\u007b%\u0064\u0020\u0078\u0020\u0025\u0064}",_acecb ,_fcffbd );
};_dfdc :=_ec .PdfRectangle {Llx :_cbdag [0]._ggda ,Urx :_cbdag [_acecb -1]._ggda ,Lly :_cddb [_fcffbd -1]._ggda ,Ury :_cddb [0]._ggda };return _df .Sprintf ("\u007b\u0025d\u0020\u0078\u0020%\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u007d",_acecb ,_fcffbd ,_dfdc );
};var (_cbgda =map[rune ]string {0x0060:"\u0300",0x02CB:"\u0300",0x0027:"\u0301",0x00B4:"\u0301",0x02B9:"\u0301",0x02CA:"\u0301",0x005E:"\u0302",0x02C6:"\u0302",0x007E:"\u0303",0x02DC:"\u0303",0x00AF:"\u0304",0x02C9:"\u0304",0x02D8:"\u0306",0x02D9:"\u0307",0x00A8:"\u0308",0x00B0:"\u030a",0x02DA:"\u030a",0x02BA:"\u030b",0x02DD:"\u030b",0x02C7:"\u030c",0x02C8:"\u030d",0x0022:"\u030e",0x02BB:"\u0312",0x02BC:"\u0313",0x0486:"\u0313",0x055A:"\u0313",0x02BD:"\u0314",0x0485:"\u0314",0x0559:"\u0314",0x02D4:"\u031d",0x02D5:"\u031e",0x02D6:"\u031f",0x02D7:"\u0320",0x02B2:"\u0321",0x00B8:"\u0327",0x02CC:"\u0329",0x02B7:"\u032b",0x02CD:"\u0331",0x005F:"\u0332",0x204E:"\u0359"};
);func (_aabc *shapesState )cubicTo (_fgdc ,_cfae ,_cbag ,_cbdg ,_fce ,_fba float64 ){if _cgab {_fd .Log .Info ("\u0063\u0075\u0062\u0069\u0063\u0054\u006f\u003a");};_aabc .addPoint (_fce ,_fba );};func _aeedb (_geegb string )(string ,bool ){_ggac :=[]rune (_geegb );
if len (_ggac )!=1{return "",false ;};_cfaag ,_ddfg :=_cbgda [_ggac [0]];return _cfaag ,_ddfg ;};func (_gddec paraList )addNeighbours (){_eegf :=func (_gffda []int ,_gcdd *textPara )([]*textPara ,[]*textPara ){_cagb :=make ([]*textPara ,0,len (_gffda )-1);
_cgec :=make ([]*textPara ,0,len (_gffda )-1);for _ ,_acfab :=range _gffda {_bfgfa :=_gddec [_acfab ];if _bfgfa .Urx <=_gcdd .Llx {_cagb =append (_cagb ,_bfgfa );}else if _bfgfa .Llx >=_gcdd .Urx {_cgec =append (_cgec ,_bfgfa );};};return _cagb ,_cgec ;
};_ggaa :=func (_gdadf []int ,_defa *textPara )([]*textPara ,[]*textPara ){_gbfbd :=make ([]*textPara ,0,len (_gdadf )-1);_cceeb :=make ([]*textPara ,0,len (_gdadf )-1);for _ ,_fccac :=range _gdadf {_abee :=_gddec [_fccac ];if _abee .Ury <=_defa .Lly {_cceeb =append (_cceeb ,_abee );
}else if _abee .Lly >=_defa .Ury {_gbfbd =append (_gbfbd ,_abee );};};return _gbfbd ,_cceeb ;};_bafe :=_gddec .yNeighbours (_cgea );for _ ,_gfbce :=range _gddec {_edgd :=_bafe [_gfbce ];if len (_edgd )==0{continue ;};_gegfb ,_egab :=_eegf (_edgd ,_gfbce );
if len (_gegfb )==0&&len (_egab )==0{continue ;};if len (_gegfb )> 0{_beadg :=_gegfb [0];for _ ,_bcebc :=range _gegfb [1:]{if _bcebc .Urx >=_beadg .Urx {_beadg =_bcebc ;};};for _ ,_cbbee :=range _gegfb {if _cbbee !=_beadg &&_cbbee .Urx > _beadg .Llx {_beadg =nil ;
break ;};};if _beadg !=nil &&_ebdcg (_gfbce .PdfRectangle ,_beadg .PdfRectangle ){_gfbce ._cgaab =_beadg ;};};if len (_egab )> 0{_acfgf :=_egab [0];for _ ,_cdfa :=range _egab [1:]{if _cdfa .Llx <=_acfgf .Llx {_acfgf =_cdfa ;};};for _ ,_adcec :=range _egab {if _adcec !=_acfgf &&_adcec .Llx < _acfgf .Urx {_acfgf =nil ;
break ;};};if _acfgf !=nil &&_ebdcg (_gfbce .PdfRectangle ,_acfgf .PdfRectangle ){_gfbce ._dcgfa =_acfgf ;};};};_bafe =_gddec .xNeighbours (_eagc );for _ ,_bdcfa :=range _gddec {_bgdef :=_bafe [_bdcfa ];if len (_bgdef )==0{continue ;};_cdcfb ,_ggdgg :=_ggaa (_bgdef ,_bdcfa );
if len (_cdcfb )==0&&len (_ggdgg )==0{continue ;};if len (_ggdgg )> 0{_fbab :=_ggdgg [0];for _ ,_addb :=range _ggdgg [1:]{if _addb .Ury >=_fbab .Ury {_fbab =_addb ;};};for _ ,_ggag :=range _ggdgg {if _ggag !=_fbab &&_ggag .Ury > _fbab .Lly {_fbab =nil ;
break ;};};if _fbab !=nil &&_dfcf (_bdcfa .PdfRectangle ,_fbab .PdfRectangle ){_bdcfa ._abeb =_fbab ;};};if len (_cdcfb )> 0{_cbbec :=_cdcfb [0];for _ ,_fdfgc :=range _cdcfb [1:]{if _fdfgc .Lly <=_cbbec .Lly {_cbbec =_fdfgc ;};};for _ ,_cbccb :=range _cdcfb {if _cbccb !=_cbbec &&_cbccb .Lly < _cbbec .Ury {_cbbec =nil ;
break ;};};if _cbbec !=nil &&_dfcf (_bdcfa .PdfRectangle ,_cbbec .PdfRectangle ){_bdcfa ._cdcb =_cbbec ;};};};for _ ,_gdead :=range _gddec {if _gdead ._cgaab !=nil &&_gdead ._cgaab ._dcgfa !=_gdead {_gdead ._cgaab =nil ;};if _gdead ._cdcb !=nil &&_gdead ._cdcb ._abeb !=_gdead {_gdead ._cdcb =nil ;
};if _gdead ._dcgfa !=nil &&_gdead ._dcgfa ._cgaab !=_gdead {_gdead ._dcgfa =nil ;};if _gdead ._abeb !=nil &&_gdead ._abeb ._cdcb !=_gdead {_gdead ._abeb =nil ;};};};func _cbacg (_aeba []_bc .PdfObject )(_cfgac ,_eegaf float64 ,_dfaab error ){if len (_aeba )!=2{return 0,0,_df .Errorf ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020o\u0066 \u0070\u0061\u0072\u0061\u006d\u0073\u003a \u0025\u0064",len (_aeba ));
};_gagbee ,_dfaab :=_bc .GetNumbersAsFloat (_aeba );if _dfaab !=nil {return 0,0,_dfaab ;};return _gagbee [0],_gagbee [1],nil ;};func _aad (_cccd []TextMark ,_cfeaf *int )[]TextMark {_aedfe :=_cccd [len (_cccd )-1];_efae :=[]rune (_aedfe .Text );if len (_efae )==1{_cccd =_cccd [:len (_cccd )-1];
_ecbc :=_cccd [len (_cccd )-1];*_cfeaf =_ecbc .Offset +len (_ecbc .Text );}else {_gaa :=_bdaa (_aedfe .Text );*_cfeaf +=len (_gaa )-len (_aedfe .Text );_aedfe .Text =_gaa ;};return _cccd ;};func (_acf *stateStack )empty ()bool {return len (*_acf )==0};
func _abgaa (_bbfga int ,_ecedd func (int ,int )bool )[]int {_ceaf :=make ([]int ,_bbfga );for _fegee :=range _ceaf {_ceaf [_fegee ]=_fegee ;};_e .Slice (_ceaf ,func (_bbcg ,_ddcdg int )bool {return _ecedd (_ceaf [_bbcg ],_ceaf [_ddcdg ])});return _ceaf ;
};func (_begc *ruling )alignsSec (_dcge *ruling )bool {const _cdbf =_bbef +1.0;return _begc ._afbbf -_cdbf <=_dcge ._gdgd &&_dcge ._afbbf -_cdbf <=_begc ._gdgd ;};func (_afbf *textTable )put (_aagfg ,_fgcd int ,_gcccab *textPara ){_afbf ._cadda [_dfded (_aagfg ,_fgcd )]=_gcccab ;
};const (_fcde =true ;_ege =true ;_eadg =true ;_eegc =false ;_abbfc =false ;_bafb =6;_bcef =3.0;_dbga =200;_eebbb =true ;_efbg =true ;_aeb =true ;_cdba =true ;_gbgc =false ;);func _gbbc (_efgd []structElement ,_dfcd map[int ][]*textLine ,_ecb _bc .PdfObject )[]*list {_agedb :=[]*list {};
for _ ,_bebc :=range _efgd {_ebcg :=_bebc ._bfee ;_bbae :=int (_bebc ._fcda );_dgdg :=_bebc ._fdcf ;_aecc :=[]*textLine {};_accg :=[]*list {};_cada :=_bebc ._cdebc ;_ccff ,_fddc :=(_cada .(*_bc .PdfObjectReference ));if !_fddc {_fd .Log .Debug ("\u0066\u0061\u0069l\u0065\u0064\u0020\u006f\u0074\u0020\u0063\u0061\u0073\u0074\u0020\u0074\u006f\u0020\u002a\u0063\u006f\u0072\u0065\u002e\u0050\u0064\u0066\u004f\u0062\u006a\u0065\u0063\u0074R\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");
};if _bbae !=-1&&_ccff !=nil {if _ccee ,_agaf :=_dfcd [_bbae ];_agaf {if _bcbac ,_abcbb :=_ecb .(*_bc .PdfIndirectObject );_abcbb {_bgfb :=_bcbac .PdfObjectReference ;if _fa .DeepEqual (*_ccff ,_bgfb ){_aecc =_ccee ;};};};};if _ebcg !=nil {_accg =_gbbc (_ebcg ,_dfcd ,_ecb );
};_bbfb :=_ecgd (_aecc ,_dgdg ,_accg );_agedb =append (_agedb ,_bbfb );};return _agedb ;};func _bcccdf (_ffed *textLine ,_dcefc []*textLine ,_caab []float64 ,_eegbd ,_agagc float64 )[]*textLine {_afd :=[]*textLine {};for _ ,_gdee :=range _dcefc {if _gdee ._efeb >=_eegbd {if _agagc !=-1&&_gdee ._efeb < _agagc {if _gdee .text ()!=_ffed .text (){if _g .Round (_gdee .Llx )< _g .Round (_ffed .Llx ){break ;
};_afd =append (_afd ,_gdee );};}else if _agagc ==-1{if _gdee ._efeb ==_ffed ._efeb {if _gdee .text ()!=_ffed .text (){_afd =append (_afd ,_gdee );};continue ;};_dfdbgf :=_fcfc (_ffed ,_dcefc ,_caab );if _dfdbgf !=-1&&_gdee ._efeb <=_dfdbgf {_afd =append (_afd ,_gdee );
};};};};return _afd ;};func (_dgba paraList )sortReadingOrder (){_fd .Log .Trace ("\u0073\u006fr\u0074\u0052\u0065\u0061\u0064i\u006e\u0067\u004f\u0072\u0064e\u0072\u003a\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_dgba ));
if len (_dgba )<=1{return ;};_dgba .computeEBBoxes ();_e .Slice (_dgba ,func (_bdgaa ,_efac int )bool {return _aagf (_dgba [_bdgaa ],_dgba [_efac ])<=0});};func (_abf *textObject )setTextRise (_cgg float64 ){if _abf ==nil {return ;};_abf ._acad ._gdaf =_cgg ;
};func (_fgf *PageFonts )extractPageResourcesToFont (_agc *_ec .PdfPageResources )error {_afb ,_ae :=_bc .GetDict (_agc .Font );if !_ae {return _f .New (_bfa );};for _ ,_cee :=range _afb .Keys (){var (_dcg =true ;_fgfc []byte ;_ddf string ;);_gg ,_cec :=_agc .GetFontByName (_cee );
if !_cec {return _f .New (_bbd );};_eg ,_gc :=_ec .NewPdfFontFromPdfObject (_gg );if _gc !=nil {return _gc ;};_geb :=_eg .FontDescriptor ();_ecg :=_eg .FontDescriptor ().FontName .String ();_cgc :=_eg .Subtype ();if _fae (_fgf .Fonts ,_ecg ){continue ;
};if len (_eg .ToUnicode ())==0{_dcg =false ;};if _geb .FontFile !=nil {if _geg ,_aag :=_bc .GetStream (_geb .FontFile );_aag {_fgfc ,_gc =_bc .DecodeStream (_geg );if _gc !=nil {return _gc ;};_ddf =_ecg +"\u002e\u0070\u0066\u0062";};}else if _geb .FontFile2 !=nil {if _beg ,_bced :=_bc .GetStream (_geb .FontFile2 );
_bced {_fgfc ,_gc =_bc .DecodeStream (_beg );if _gc !=nil {return _gc ;};_ddf =_ecg +"\u002e\u0074\u0074\u0066";};}else if _geb .FontFile3 !=nil {if _bfc ,_ffe :=_bc .GetStream (_geb .FontFile3 );_ffe {_fgfc ,_gc =_bc .DecodeStream (_bfc );if _gc !=nil {return _gc ;
};_ddf =_ecg +"\u002e\u0063\u0066\u0066";};};if len (_ddf )< 1{_fd .Log .Debug (_dc );};_ddd :=Font {FontName :_ecg ,PdfFont :_eg ,IsCID :_eg .IsCID (),IsSimple :_eg .IsSimple (),ToUnicode :_dcg ,FontType :_cgc ,FontData :_fgfc ,FontFileName :_ddf ,FontDescriptor :_geb };
_fgf .Fonts =append (_fgf .Fonts ,_ddd );};return nil ;};func (_cfgc *wordBag )depthRange (_bcce ,_aggd int )[]int {var _beae []int ;for _febe :=range _cfgc ._aedg {if _bcce <=_febe &&_febe <=_aggd {_beae =append (_beae ,_febe );};};if len (_beae )==0{return nil ;
};_e .Ints (_beae );return _beae ;};func (_gegf compositeCell )String ()string {_abgcd :="";if len (_gegf .paraList )> 0{_abgcd =_gebg (_gegf .paraList .merge ().text (),50);};return _df .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0070\u0061\u0072a\u0073\u0020\u0025\u0071",_gegf .PdfRectangle ,len (_gegf .paraList ),_abgcd );
};func (_dea *textObject )setWordSpacing (_edf float64 ){if _dea ==nil {return ;};_dea ._acad ._gddc =_edf ;};func (_gafcf paraList )findTextTables ()[]*textTable {var _ffec []*textTable ;for _ ,_feee :=range _gafcf {if _feee .taken ()||_feee .Width ()==0{continue ;
};_egcde :=_feee .isAtom ();if _egcde ==nil {continue ;};_egcde .growTable ();if _egcde ._cfaac *_egcde ._gfae < _cad {continue ;};_egcde .markCells ();_egcde .log ("\u0067\u0072\u006fw\u006e");_ffec =append (_ffec ,_egcde );};return _ffec ;};func (_bgec *textMark )bbox ()_ec .PdfRectangle {return _bgec .PdfRectangle };
func (_cabd *wordBag )removeWord (_caba *textWord ,_efag int ){_ceba :=_cabd ._aedg [_efag ];_ceba =_dbbb (_ceba ,_caba );if len (_ceba )==0{delete (_cabd ._aedg ,_efag );}else {_cabd ._aedg [_efag ]=_ceba ;};};func _fgfe (_eeeg ,_aeae bounded )float64 {return _eeeg .bbox ().Llx -_aeae .bbox ().Urx };
var _ebdcd =map[rulingKind ]string {_adabg :"\u006e\u006f\u006e\u0065",_dfdf :"\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_cebaac :"\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c"};func _dbbb (_egebf []*textWord ,_caac *textWord )[]*textWord {for _fedda ,_adaae :=range _egebf {if _adaae ==_caac {return _dfgc (_egebf ,_fedda );
};};_fd .Log .Error ("\u0072\u0065\u006d\u006f\u0076e\u0057\u006f\u0072\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u0073\u0020\u0064o\u0065\u0073\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",_caac );
return nil ;};func _fcfc (_afce *textLine ,_gbeca []*textLine ,_dcde []float64 )float64 {var _ggba float64 =-1;for _ ,_gbfd :=range _gbeca {if _gbfd ._efeb > _afce ._efeb {if _g .Round (_gbfd .Llx )>=_g .Round (_afce .Llx ){_ggba =_gbfd ._efeb ;}else {break ;
};};};return _ggba ;};func (_dgbf *textPara )text ()string {_fcce :=new (_fg .Buffer );_dgbf .writeText (_fcce );return _fcce .String ();};func _gdefad (_efegd ,_fdcdc _aa .Point )rulingKind {_badae :=_g .Abs (_efegd .X -_fdcdc .X );_gadf :=_g .Abs (_efegd .Y -_fdcdc .Y );
return _bebdc (_badae ,_gadf ,_bbfa );};

// ExtractText processes and extracts all text data in content streams and returns as a string.
// It takes into account character encodings in the PDF file, which are decoded by
// CharcodeBytesToUnicode.
// Characters that can't be decoded are replaced with MissingCodeRune ('\ufffd' = ).
func (_cbc *Extractor )ExtractText ()(string ,error ){_dbe ,_ ,_ ,_aaga :=_cbc .ExtractTextWithStats ();return _dbe ,_aaga ;};func (_fddge paraList )yNeighbours (_abcd float64 )map[*textPara ][]int {_eaabeg :=make ([]event ,2*len (_fddge ));if _abcd ==0{for _eeafe ,_eegfg :=range _fddge {_eaabeg [2*_eeafe ]=event {_eegfg .Lly ,true ,_eeafe };
_eaabeg [2*_eeafe +1]=event {_eegfg .Ury ,false ,_eeafe };};}else {for _dggg ,_dfdfa :=range _fddge {_eaabeg [2*_dggg ]=event {_dfdfa .Lly -_abcd *_dfdfa .fontsize (),true ,_dggg };_eaabeg [2*_dggg +1]=event {_dfdfa .Ury +_abcd *_dfdfa .fontsize (),false ,_dggg };
};};return _fddge .eventNeighbours (_eaabeg );};func _faeb (_fabb []*textWord ,_facb float64 ,_eaag ,_bgfc rulingList )*wordBag {_deea :=_dcfd (_fabb [0],_facb ,_eaag ,_bgfc );for _ ,_effd :=range _fabb [1:]{_cda :=_bcba (_effd ._gcca );_deea ._aedg [_cda ]=append (_deea ._aedg [_cda ],_effd );
_deea .PdfRectangle =_eed (_deea .PdfRectangle ,_effd .PdfRectangle );};_deea .sort ();return _deea ;};type stateStack []*textState ;func _gfece (_aeaee _ec .PdfRectangle )*ruling {return &ruling {_aabaf :_cebaac ,_ggda :_aeaee .Urx ,_afbbf :_aeaee .Lly ,_gdgd :_aeaee .Ury };
};func _cede (_gbgad *list ,_eagf *string )string {_geafg :=_da .Split (_gbgad ._bebf ,"\u000a");_agce :=&_da .Builder {};for _ ,_eefab :=range _geafg {if _eefab !=""{_agce .WriteString (*_eagf );_agce .WriteString (_eefab );_agce .WriteString ("\u000a");
};};return _agce .String ();};func (_gadb intSet )add (_gadce int ){_gadb [_gadce ]=struct{}{}};func (_dbff *textTable )markCells (){for _ecfff :=0;_ecfff < _dbff ._gfae ;_ecfff ++{for _egba :=0;_egba < _dbff ._cfaac ;_egba ++{_ebgf :=_dbff .get (_egba ,_ecfff );
if _ebgf !=nil {_ebgf ._dedd =true ;};};};};func _deabc (_dbgd ,_ecedcf _aa .Point ,_cfcec _gf .Color )(*ruling ,bool ){_cgffb :=lineRuling {_bcbg :_dbgd ,_dbbeg :_ecedcf ,_edcbd :_abbfcf (_dbgd ,_ecedcf ),Color :_cfcec };if _cgffb ._edcbd ==_adabg {return nil ,false ;
};return _cgffb .asRuling ();};func (_cedf *ruling )encloses (_dfgdfg ,_aega float64 )bool {return _cedf ._afbbf -_gbfb <=_dfgdfg &&_aega <=_cedf ._gdgd +_gbfb ;};func (_eee *wordBag )absorb (_egc *wordBag ){_dcegf :=_egc .makeRemovals ();for _ggg ,_fcca :=range _egc ._aedg {for _ ,_badac :=range _fcca {_eee .pullWord (_badac ,_ggg ,_dcegf );
};};_egc .applyRemovals (_dcegf );};func (_bead *ruling )intersects (_ecdgg *ruling )bool {_gace :=(_bead ._aabaf ==_cebaac &&_ecdgg ._aabaf ==_dfdf )||(_ecdgg ._aabaf ==_cebaac &&_bead ._aabaf ==_dfdf );_ebcf :=func (_bagd ,_dccd *ruling )bool {return _bagd ._afbbf -_gbfb <=_dccd ._ggda &&_dccd ._ggda <=_bagd ._gdgd +_gbfb ;
};_gbcf :=_ebcf (_bead ,_ecdgg );_bcefe :=_ebcf (_ecdgg ,_bead );if _bcbd {_df .Printf ("\u0020\u0020\u0020\u0020\u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003a\u0020\u0020\u006fr\u0074\u0068\u006f\u0067\u006f\u006e\u0061l\u003d\u0025\u0074\u0020\u006f\u0031\u003d\u0025\u0074\u0020\u006f2\u003d\u0025\u0074\u0020\u2192\u0020\u0025\u0074\u000a"+"\u0020\u0020\u0020 \u0020\u0020\u0020\u0076\u003d\u0025\u0073\u000a"+" \u0020\u0020\u0020\u0020\u0020\u0077\u003d\u0025\u0073\u000a",_gace ,_gbcf ,_bcefe ,_gace &&_gbcf &&_bcefe ,_bead ,_ecdgg );
};return _gace &&_gbcf &&_bcefe ;};func (_ecdg TextTable )getCellInfo (_eaed TextMark )[][]int {for _gfb ,_add :=range _ecdg .Cells {for _agg ,_adg :=range _add {_defe :=&_adg .Marks ;if _defe .exists (_eaed ){return [][]int {{_gfb },{_agg }};};};};return nil ;
};func (_dbag *shapesState )lastpointEstablished ()(_aa .Point ,bool ){if _dbag ._faba {return _dbag ._fdggg ,false ;};_fbad :=len (_dbag ._eabf );if _fbad > 0&&_dbag ._eabf [_fbad -1]._gfgf {return _dbag ._eabf [_fbad -1].last (),false ;};return _aa .Point {},true ;
};func (_geabe *structTreeRoot )parseStructTreeRoot (_badd _bc .PdfObject ){if _badd !=nil {_cfc ,_gcae :=_bc .GetDict (_badd );if !_gcae {_fd .Log .Debug ("\u0070\u0061\u0072s\u0065\u0053\u0074\u0072\u0075\u0063\u0074\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u003a\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u006eo\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");
};K :=_cfc .Get ("\u004b");_ebg :=_cfc .Get ("\u0054\u0079\u0070\u0065").String ();var _edee *_bc .PdfObjectArray ;switch _gfec :=K .(type ){case *_bc .PdfObjectArray :_edee =_gfec ;case *_bc .PdfObjectReference :_edee =_bc .MakeArray (K );};_gegd :=[]structElement {};
for _ ,_caffd :=range _edee .Elements (){_cea :=&structElement {};_cea .parseStructElement (_caffd );_gegd =append (_gegd ,*_cea );};_geabe ._beea =_gegd ;_geabe ._cdec =_ebg ;};};func _dfcf (_fded ,_abgf _ec .PdfRectangle )bool {return _abgf .Llx <=_fded .Urx &&_fded .Llx <=_abgf .Urx ;
};func (_bdeb rulingList )augmentGrid ()(rulingList ,rulingList ){_dcegeg ,_fgaca :=_bdeb .vertsHorzs ();if len (_dcegeg )==0||len (_fgaca )==0{return _dcegeg ,_fgaca ;};_fcad ,_fgdb :=_dcegeg ,_fgaca ;_bcfc :=_dcegeg .bbox ();_cbgga :=_fgaca .bbox ();
if _bcbd {_fd .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0056\u003d\u0025\u0036\u002e\u0032\u0066",_bcfc );_fd .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0048\u003d\u0025\u0036\u002e\u0032\u0066",_cbgga );
};var _dfgf ,_ebcd ,_cfgcd ,_bacac *ruling ;if _cbgga .Llx < _bcfc .Llx -_gbfb {_dfgf =&ruling {_ggfd :_ecdf ,_aabaf :_cebaac ,_ggda :_cbgga .Llx ,_afbbf :_bcfc .Lly ,_gdgd :_bcfc .Ury };_dcegeg =append (rulingList {_dfgf },_dcegeg ...);};if _cbgga .Urx > _bcfc .Urx +_gbfb {_ebcd =&ruling {_ggfd :_ecdf ,_aabaf :_cebaac ,_ggda :_cbgga .Urx ,_afbbf :_bcfc .Lly ,_gdgd :_bcfc .Ury };
_dcegeg =append (_dcegeg ,_ebcd );};if _bcfc .Lly < _cbgga .Lly -_gbfb {_cfgcd =&ruling {_ggfd :_ecdf ,_aabaf :_dfdf ,_ggda :_bcfc .Lly ,_afbbf :_cbgga .Llx ,_gdgd :_cbgga .Urx };_fgaca =append (rulingList {_cfgcd },_fgaca ...);};if _bcfc .Ury > _cbgga .Ury +_gbfb {_bacac =&ruling {_ggfd :_ecdf ,_aabaf :_dfdf ,_ggda :_bcfc .Ury ,_afbbf :_cbgga .Llx ,_gdgd :_cbgga .Urx };
_fgaca =append (_fgaca ,_bacac );};if len (_dcegeg )+len (_fgaca )==len (_bdeb ){return _fcad ,_fgdb ;};_afae :=append (_dcegeg ,_fgaca ...);_bdeb .log ("u\u006e\u0061\u0075\u0067\u006d\u0065\u006e\u0074\u0065\u0064");_afae .log ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0065d");
return _dcegeg ,_fgaca ;};const (_eacf markKind =iota ;_ffda ;_ggbaa ;_ecdf ;);func _fffc (_aced *textLine )bool {_gcga :=true ;_afcb :=-1;for _ ,_ecae :=range _aced ._fdec {for _ ,_fbea :=range _ecae ._egfgg {_degd :=_fbea ._fcfe ;if _afcb ==-1{_afcb =_degd ;
}else {if _afcb !=_degd {_gcga =false ;break ;};};};};return _gcga ;};func (_cceb *textTable )growTable (){_cbddg :=func (_cfaea paraList ){_cceb ._gfae ++;for _fegf :=0;_fegf < _cceb ._cfaac ;_fegf ++{_dffcd :=_cfaea [_fegf ];_cceb .put (_fegf ,_cceb ._gfae -1,_dffcd );
};};_dgef :=func (_ebgg paraList ){_cceb ._cfaac ++;for _ggfgg :=0;_ggfgg < _cceb ._gfae ;_ggfgg ++{_bgfge :=_ebgg [_ggfgg ];_cceb .put (_cceb ._cfaac -1,_ggfgg ,_bgfge );};};if _ffebe {_cceb .log ("\u0067r\u006f\u0077\u0054\u0061\u0062\u006ce");};for _bdbg :=0;
;_bdbg ++{_gfgcg :=false ;_fdgddb :=_cceb .getDown ();_gbff :=_cceb .getRight ();if _ffebe {_df .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bdbg ,_cceb );_df .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0020\u0064\u006f\u0077\u006e\u003d\u0025\u0073\u000a",_fdgddb );
_df .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0072\u0069\u0067\u0068\u0074\u003d\u0025\u0073\u000a",_gbff );};if _fdgddb !=nil &&_gbff !=nil {_affg :=_fdgddb [len (_fdgddb )-1];if !_affg .taken ()&&_affg ==_gbff [len (_gbff )-1]{_cbddg (_fdgddb );if _gbff =_cceb .getRight ();
_gbff !=nil {_dgef (_gbff );_cceb .put (_cceb ._cfaac -1,_cceb ._gfae -1,_affg );};_gfgcg =true ;};};if !_gfgcg &&_fdgddb !=nil {_cbddg (_fdgddb );_gfgcg =true ;};if !_gfgcg &&_gbff !=nil {_dgef (_gbff );_gfgcg =true ;};if !_gfgcg {break ;};};};func _gebg (_dgfca string ,_fefab int )string {if len (_dgfca )< _fefab {return _dgfca ;
};return _dgfca [:_fefab ];};func (_bbca *textTable )get (_bgfef ,_cegg int )*textPara {return _bbca ._cadda [_dfded (_bgfef ,_cegg )]};func (_gaca *textPara )isAtom ()*textTable {_ebee :=_gaca ;_fafa :=_gaca ._dcgfa ;_geeg :=_gaca ._abeb ;if _fafa .taken ()||_geeg .taken (){return nil ;
};_afeda :=_fafa ._abeb ;if _afeda .taken ()||_afeda !=_geeg ._dcgfa {return nil ;};return _gggfg (_ebee ,_fafa ,_geeg ,_afeda );};func _feebg (_cgaabg _ec .PdfRectangle )rulingKind {_edgf :=_cgaabg .Width ();_efge :=_cgaabg .Height ();if _edgf > _efge {if _edgf >=_geaf {return _dfdf ;
};}else {if _efge >=_geaf {return _cebaac ;};};return _adabg ;};func (_cgfb rulingList )snapToGroupsDirection ()rulingList {_cgfb .sortStrict ();_egfa :=make (map[*ruling ]rulingList ,len (_cgfb ));_acaab :=_cgfb [0];_dfgg :=func (_ggfbe *ruling ){_acaab =_ggfbe ;
_egfa [_acaab ]=rulingList {_ggfbe }};_dfgg (_cgfb [0]);for _ ,_cccbc :=range _cgfb [1:]{if _cccbc ._ggda < _acaab ._ggda -_eabg {_fd .Log .Error ("\u0073\u006e\u0061\u0070T\u006f\u0047\u0072\u006f\u0075\u0070\u0073\u0044\u0069r\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0057\u0072\u006f\u006e\u0067\u0020\u0070\u0072\u0069\u006da\u0072\u0079\u0020\u006f\u0072d\u0065\u0072\u002e\u000a\u0009\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0020\u0076\u003d\u0025\u0073",_acaab ,_cccbc );
};if _cccbc ._ggda > _acaab ._ggda +_bbef {_dfgg (_cccbc );}else {_egfa [_acaab ]=append (_egfa [_acaab ],_cccbc );};};_gabce :=make (map[*ruling ]float64 ,len (_egfa ));_bcdc :=make (map[*ruling ]*ruling ,len (_cgfb ));for _cdda ,_cfgab :=range _egfa {_gabce [_cdda ]=_cfgab .mergePrimary ();
for _ ,_fccad :=range _cfgab {_bcdc [_fccad ]=_cdda ;};};for _ ,_cfad :=range _cgfb {_cfad ._ggda =_gabce [_bcdc [_cfad ]];};_eaabe :=make (rulingList ,0,len (_cgfb ));for _ ,_gdcbb :=range _egfa {_fcbdf :=_gdcbb .splitSec ();for _caafa ,_cbbd :=range _fcbdf {_cgaf :=_cbbd .merge ();
if len (_eaabe )> 0{_cfdf :=_eaabe [len (_eaabe )-1];if _cfdf .alignsPrimary (_cgaf )&&_cfdf .alignsSec (_cgaf ){_fd .Log .Error ("\u0073\u006e\u0061\u0070\u0054\u006fG\u0072\u006f\u0075\u0070\u0073\u0044\u0069\u0072\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0044\u0075\u0070\u006ci\u0063\u0061\u0074\u0065\u0020\u0069\u003d\u0025\u0064\u000a\u0009\u0077\u003d\u0025s\u000a\t\u0076\u003d\u0025\u0073",_caafa ,_cfdf ,_cgaf );
continue ;};};_eaabe =append (_eaabe ,_cgaf );};};_eaabe .sortStrict ();return _eaabe ;};type lineRuling struct{_edcbd rulingKind ;_dcea markKind ;_gf .Color ;_bcbg ,_dbbeg _aa .Point ;};

// NewWithOptions an Extractor instance for extracting content from the input PDF page with options.
func NewWithOptions (page *_ec .PdfPage ,options *Options )(*Extractor ,error ){const _ddg ="\u0065x\u0074\u0072\u0061\u0063\u0074\u006f\u0072\u002e\u004e\u0065\u0077W\u0069\u0074\u0068\u004f\u0070\u0074\u0069\u006f\u006e\u0073";_gff ,_ee :=page .GetAllContentStreams ();
if _ee !=nil {return nil ,_ee ;};_abb ,_be :=page .GetStructTreeRoot ();if !_be {_fd .Log .Info ("T\u0068\u0065\u0020\u0070\u0064\u0066\u0020\u0064\u006f\u0063\u0075\u006d\u0065\u006e\u0074\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020\u0074\u0061\u0067g\u0065d\u002e\u0020\u0053\u0074r\u0075\u0063t\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e\u0027\u0074\u0020\u0065\u0078\u0069\u0073\u0074\u002e");
};_ddc :=page .GetContainingPdfObject ();_db ,_ee :=page .GetMediaBox ();if _ee !=nil {return nil ,_df .Errorf ("\u0065\u0078\u0074r\u0061\u0063\u0074\u006fr\u0020\u0072\u0065\u0071\u0075\u0069\u0072e\u0073\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u002e\u0020\u0025\u0076",_ee );
};_bce :=&Extractor {_af :_gff ,_ff :page .Resources ,_ed :*_db ,_ce :page .CropBox ,_aaa :map[string ]fontEntry {},_bd :map[string ]textResult {},_bdd :options ,_ca :_abb ,_ge :_ddc };if _bce ._ed .Llx > _bce ._ed .Urx {_fd .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0058\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_bce ._ed );
_bce ._ed .Llx ,_bce ._ed .Urx =_bce ._ed .Urx ,_bce ._ed .Llx ;};if _bce ._ed .Lly > _bce ._ed .Ury {_fd .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0059\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_bce ._ed );
_bce ._ed .Lly ,_bce ._ed .Ury =_bce ._ed .Ury ,_bce ._ed .Lly ;};_bf .TrackUse (_ddg );return _bce ,nil ;};var _cefae =map[markKind ]string {_ffda :"\u0073\u0074\u0072\u006f\u006b\u0065",_ggbaa :"\u0066\u0069\u006c\u006c",_ecdf :"\u0061u\u0067\u006d\u0065\u006e\u0074"};
func (_eff *shapesState )quadraticTo (_faed ,_gdfb ,_cacb ,_feeg float64 ){if _cgab {_fd .Log .Info ("\u0071\u0075\u0061d\u0072\u0061\u0074\u0069\u0063\u0054\u006f\u003a");};_eff .addPoint (_cacb ,_feeg );};func (_cgdgg rulingList )toTilings ()(rulingList ,[]gridTiling ){_cgdgg .log ("\u0074o\u0054\u0069\u006c\u0069\u006e\u0067s");
if len (_cgdgg )==0{return nil ,nil ;};_cgdgg =_cgdgg .tidied ("\u0061\u006c\u006c");_cgdgg .log ("\u0074\u0069\u0064\u0069\u0065\u0064");_gdff :=_cgdgg .toGrids ();_aaff :=make ([]gridTiling ,len (_gdff ));for _edgc ,_dcbaa :=range _gdff {_aaff [_edgc ]=_dcbaa .asTiling ();
};return _cgdgg ,_aaff ;};func (_abff *textObject )moveLP (_abfcd ,_gbeeb float64 ){_abff ._cgcd .Concat (_aa .NewMatrix (1,0,0,1,_abfcd ,_gbeeb ));_abff ._dagc =_abff ._cgcd ;};func (_efdd *textObject )getStrokeColor ()_gf .Color {return _fcec (_efdd ._dfff .ColorspaceStroking ,_efdd ._dfff .ColorStroking );
};func _fefe (_gffb _bc .PdfObject ,_daee _gf .Color )(_ag .Image ,error ){_feecg ,_bddc :=_bc .GetStream (_gffb );if !_bddc {return nil ,nil ;};_baebf ,_gcdfc :=_ec .NewXObjectImageFromStream (_feecg );if _gcdfc !=nil {return nil ,_gcdfc ;};_gcdcd ,_gcdfc :=_baebf .ToImage ();
if _gcdfc !=nil {return nil ,_gcdfc ;};return _cfbg (_gcdcd ,_daee ),nil ;};func (_cfga *textObject )newTextMark (_gedff string ,_cgdd _aa .Matrix ,_decg _aa .Point ,_cdca float64 ,_ecbe *_ec .PdfFont ,_eafd float64 ,_egecf ,_cgde _gf .Color ,_adba _bc .PdfObject ,_cdeg []string ,_fffb int ,_abfbe int )(textMark ,bool ){_ecgc :=_cgdd .Angle ();
_bfge :=_ggcc (_ecgc ,_gded );var _efdg float64 ;if _bfge %180!=90{_efdg =_cgdd .ScalingFactorY ();}else {_efdg =_cgdd .ScalingFactorX ();};_bgfg :=_dbcc (_cgdd );_gadde :=_ec .PdfRectangle {Llx :_bgfg .X ,Lly :_bgfg .Y ,Urx :_decg .X ,Ury :_decg .Y };
switch _bfge %360{case 90:_gadde .Urx -=_efdg ;case 180:_gadde .Ury -=_efdg ;case 270:_gadde .Urx +=_efdg ;case 0:_gadde .Ury +=_efdg ;default:_bfge =0;_gadde .Ury +=_efdg ;};if _gadde .Llx > _gadde .Urx {_gadde .Llx ,_gadde .Urx =_gadde .Urx ,_gadde .Llx ;
};if _gadde .Lly > _gadde .Ury {_gadde .Lly ,_gadde .Ury =_gadde .Ury ,_gadde .Lly ;};_gbedg :=true ;if _cfga ._fea ._ed .Width ()> 0{_cdbbf ,_efgcb :=_caff (_gadde ,_cfga ._fea ._ed );if !_efgcb {_gbedg =false ;_fd .Log .Debug ("\u0054\u0065\u0078\u0074\u0020m\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069\u0064\u0065\u0020\u0070a\u0067\u0065\u002e\u0020\u0062\u0062\u006f\u0078\u003d\u0025\u0067\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u003d\u0025\u0067\u0020\u0074\u0065\u0078\u0074\u003d\u0025q",_gadde ,_cfga ._fea ._ed ,_gedff );
};_gadde =_cdbbf ;};_cffae :=_gadde ;_fdbc :=_cfga ._fea ._ed ;switch _bfge %360{case 90:_fdbc .Urx ,_fdbc .Ury =_fdbc .Ury ,_fdbc .Urx ;_cffae =_ec .PdfRectangle {Llx :_fdbc .Urx -_gadde .Ury ,Urx :_fdbc .Urx -_gadde .Lly ,Lly :_gadde .Llx ,Ury :_gadde .Urx };
case 180:_cffae =_ec .PdfRectangle {Llx :_fdbc .Urx -_gadde .Llx ,Urx :_fdbc .Urx -_gadde .Urx ,Lly :_fdbc .Ury -_gadde .Lly ,Ury :_fdbc .Ury -_gadde .Ury };case 270:_fdbc .Urx ,_fdbc .Ury =_fdbc .Ury ,_fdbc .Urx ;_cffae =_ec .PdfRectangle {Llx :_gadde .Ury ,Urx :_gadde .Lly ,Lly :_fdbc .Ury -_gadde .Llx ,Ury :_fdbc .Ury -_gadde .Urx };
};if _cffae .Llx > _cffae .Urx {_cffae .Llx ,_cffae .Urx =_cffae .Urx ,_cffae .Llx ;};if _cffae .Lly > _cffae .Ury {_cffae .Lly ,_cffae .Ury =_cffae .Ury ,_cffae .Lly ;};_deaca :=textMark {_fcffb :_gedff ,PdfRectangle :_cffae ,_cbbge :_gadde ,_acfa :_ecbe ,_cgdb :_efdg ,_aabg :_eafd ,_fcaga :_cgdd ,_fbcc :_decg ,_gcdg :_bfge ,_gagdd :_egecf ,_efad :_cgde ,_gbdaa :_adba ,_abgcc :_cdeg ,Th :_cfga ._acad ._dfgd ,Tw :_cfga ._acad ._gddc ,_fcfe :_abfbe ,_geccg :_fffb };
if _geba {_fd .Log .Info ("n\u0065\u0077\u0054\u0065\u0078\u0074M\u0061\u0072\u006b\u003a\u0020\u0073t\u0061\u0072\u0074\u003d\u0025\u002e\u0032f\u0020\u0065\u006e\u0064\u003d\u0025\u002e\u0032\u0066\u0020%\u0073",_bgfg ,_decg ,_deaca .String ());};return _deaca ,_gbedg ;
};func _edfc (_fcdfb []compositeCell )[]float64 {var _fbaf []*textLine ;_cdgc :=0;for _ ,_cgccd :=range _fcdfb {_cdgc +=len (_cgccd .paraList );_fbaf =append (_fbaf ,_cgccd .lines ()...);};_e .Slice (_fbaf ,func (_eeff ,_dcdf int )bool {_cabe ,_ccggd :=_fbaf [_eeff ],_fbaf [_dcdf ];
_gbbef ,_aabf :=_cabe ._efeb ,_ccggd ._efeb ;if !_fdeb (_gbbef -_aabf ){return _gbbef < _aabf ;};return _cabe .Llx < _ccggd .Llx ;});if _abfa {_df .Printf ("\u0020\u0020\u0020 r\u006f\u0077\u0042\u006f\u0072\u0064\u0065\u0072\u0073:\u0020%\u0064 \u0070a\u0072\u0061\u0073\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",_cdgc ,len (_fbaf ));
for _bfbaf ,_afba :=range _fbaf {_df .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_bfbaf ,_afba );};};var _bfaaf []float64 ;_fbfe :=_fbaf [0];var _adcdc [][]*textLine ;_bcca :=[]*textLine {_fbfe };for _acfb ,_gbece :=range _fbaf [1:]{if _gbece .Ury < _fbfe .Lly {_egad :=0.5*(_gbece .Ury +_fbfe .Lly );
if _abfa {_df .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u003c\u0020\u0025\u0036.\u0032f\u0020\u0062\u006f\u0072\u0064\u0065\u0072\u003d\u0025\u0036\u002e\u0032\u0066\u000a"+"\u0009\u0020\u0071\u003d\u0025\u0073\u000a\u0009\u0020p\u003d\u0025\u0073\u000a",_acfb ,_gbece .Ury ,_fbfe .Lly ,_egad ,_fbfe ,_gbece );
};_bfaaf =append (_bfaaf ,_egad );_adcdc =append (_adcdc ,_bcca );_bcca =nil ;};_bcca =append (_bcca ,_gbece );if _gbece .Lly < _fbfe .Lly {_fbfe =_gbece ;};};if len (_bcca )> 0{_adcdc =append (_adcdc ,_bcca );};if _abfa {_df .Printf (" \u0020\u0020\u0020\u0020\u0020\u0020 \u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073\u003d%\u0036.\u0032\u0066\u000a",_bfaaf );
};if _abfa {_fd .Log .Info ("\u0072\u006f\u0077\u003d\u0025\u0064",len (_fcdfb ));for _eeag ,_fgge :=range _fcdfb {_df .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_eeag ,_fgge );};_fd .Log .Info ("\u0067r\u006f\u0075\u0070\u0073\u003d\u0025d",len (_adcdc ));
for _ddbb ,_bceba :=range _adcdc {_df .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0064\u000a",_ddbb ,len (_bceba ));for _eddc ,_bdcfd :=range _bceba {_df .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_eddc ,_bdcfd );};};};_bbeab :=true ;
for _bfcf ,_dagd :=range _adcdc {_dfffd :=true ;for _bbgda ,_aage :=range _fcdfb {if _abfa {_df .Printf ("\u0020\u0020\u0020\u007e\u007e\u007e\u0067\u0072\u006f\u0075\u0070\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u0020\u0063\u0065\u006cl\u0020\u0025\u0064\u0020\u006ff\u0020\u0025d\u0020\u0025\u0073\u000a",_bfcf ,len (_adcdc ),_bbgda ,len (_fcdfb ),_aage );
};if !_aage .hasLines (_dagd ){if _abfa {_df .Printf ("\u0020\u0020\u0020\u0021\u0021\u0021\u0067\u0072\u006f\u0075\u0070\u0020\u0025d\u0020\u006f\u0066\u0020\u0025\u0064 \u0063\u0065\u006c\u006c\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064 \u004f\u0055\u0054\u000a",_bfcf ,len (_adcdc ),_bbgda ,len (_fcdfb ));
};_dfffd =false ;break ;};};if !_dfffd {_bbeab =false ;break ;};};if !_bbeab {if _abfa {_fd .Log .Info ("\u0072\u006f\u0077\u0020\u0063o\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u0020\u0064\u006f\u006e\u0027\u0074 \u0073\u0070\u0061\u006e\u0020\u0061\u006c\u006c\u0020\u0063\u0065\u006c\u006c\u0073\u0020\u0069\u006e\u0020\u0072\u006f\u0077\u002e\u0020\u0069\u0067\u006e\u006f\u0072\u0069\u006eg");
};_bfaaf =nil ;};if _abfa &&_bfaaf !=nil {_df .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u002a\u002a*\u0072\u006f\u0077\u0043\u006f\u0072\u0072i\u0064\u006f\u0072\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u000a",_bfaaf );};return _bfaaf ;
};func (_cfgcg *ruling )gridIntersecting (_dcbag *ruling )bool {return _bfeag (_cfgcg ._afbbf ,_dcbag ._afbbf )&&_bfeag (_cfgcg ._gdgd ,_dcbag ._gdgd );};func (_fecdf gridTile )numBorders ()int {_baae :=0;if _fecdf ._edbd {_baae ++;};if _fecdf ._dbfef {_baae ++;
};if _fecdf ._efaf {_baae ++;};if _fecdf ._faeaf {_baae ++;};return _baae ;};func (_gbe *imageExtractContext )extractXObjectImage (_ddcb *_bc .PdfObjectName ,_eaf _dd .GraphicsState ,_ede *_ec .PdfPageResources )error {_fcb ,_ :=_ede .GetXObjectByName (*_ddcb );
if _fcb ==nil {return nil ;};_aeg ,_bde :=_gbe ._gb [_fcb ];if !_bde {_edea ,_gdf :=_ede .GetXObjectImageByName (*_ddcb );if _gdf !=nil {return _gdf ;};if _edea ==nil {return nil ;};_fgba ,_gdf :=_edea .ToImage ();if _gdf !=nil {return _gdf ;};var _gga _ag .Image ;
if _edea .Mask !=nil {if _gga ,_gdf =_adefe (_edea .Mask ,_gf .Opaque );_gdf !=nil {_fd .Log .Debug ("\u0057\u0041\u0052\u004e\u003a \u0063\u006f\u0075\u006c\u0064 \u006eo\u0074\u0020\u0067\u0065\u0074\u0020\u0065\u0078\u0070\u006c\u0069\u0063\u0069\u0074\u0020\u0069\u006d\u0061\u0067e\u0020\u006d\u0061\u0073\u006b\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e");
};}else if _edea .SMask !=nil {_gga ,_gdf =_fefe (_edea .SMask ,_gf .Opaque );if _gdf !=nil {_fd .Log .Debug ("W\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0067\u0065\u0074\u0020\u0073\u006f\u0066\u0074\u0020\u0069\u006da\u0067e\u0020\u006d\u0061\u0073k\u002e\u0020O\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063\u0074\u002e");
};};if _gga !=nil {_gbf ,_ddbf :=_fgba .ToGoImage ();if _ddbf !=nil {return _ddbf ;};_gbf =_fbabg (_gbf ,_gga );switch _edea .ColorSpace .String (){case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0049n\u0064\u0065\u0078\u0065\u0064":_fgba ,_ddbf =_ec .ImageHandling .NewGrayImageFromGoImage (_gbf );
if _ddbf !=nil {return _ddbf ;};default:_fgba ,_ddbf =_ec .ImageHandling .NewImageFromGoImage (_gbf );if _ddbf !=nil {return _ddbf ;};};};_aeg =&cachedImage {_ddb :_fgba ,_efc :_edea .ColorSpace };_gbe ._gb [_fcb ]=_aeg ;};_adf :=_aeg ._ddb ;_ecf :=_aeg ._efc ;
_ac ,_acg :=_ecf .ImageToRGB (*_adf );if _acg !=nil {return _acg ;};_fd .Log .Debug ("@\u0044\u006f\u0020\u0043\u0054\u004d\u003a\u0020\u0025\u0073",_eaf .CTM .String ());_ffa :=ImageMark {Image :&_ac ,Width :_eaf .CTM .ScalingFactorX (),Height :_eaf .CTM .ScalingFactorY (),Angle :_eaf .CTM .Angle ()};
_ffa .X ,_ffa .Y =_eaf .CTM .Translation ();_gbe ._feg =append (_gbe ._feg ,_ffa );_gbe ._dec ++;return nil ;};

// String returns a description of `t`.
func (_dcda *textTable )String ()string {return _df .Sprintf ("\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0025\u0074",_dcda ._cfaac ,_dcda ._gfae ,_dcda ._beagb );};func (_egfg *textObject )getFontDirect (_caee string )(*_ec .PdfFont ,error ){_eeba ,_bea :=_egfg .getFontDict (_caee );
if _bea !=nil {return nil ,_bea ;};_gca ,_bea :=_ec .NewPdfFontFromPdfObject (_eeba );if _bea !=nil {_fd .Log .Debug ("\u0067\u0065\u0074\u0046\u006f\u006e\u0074\u0044\u0069\u0072\u0065\u0063\u0074\u003a\u0020\u004e\u0065\u0077Pd\u0066F\u006f\u006e\u0074\u0046\u0072\u006f\u006d\u0050\u0064\u0066\u004f\u0062j\u0065\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u006e\u0061\u006d\u0065\u003d%\u0023\u0071\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_caee ,_bea );
};return _gca ,_bea ;};func _edcd (_bebgfc []rulingList )(rulingList ,rulingList ){var _cbac rulingList ;for _ ,_aaec :=range _bebgfc {_cbac =append (_cbac ,_aaec ...);};return _cbac .vertsHorzs ();};func (_cgbeb rulingList )snapToGroups ()rulingList {_fafb ,_aaece :=_cgbeb .vertsHorzs ();
if len (_fafb )> 0{_fafb =_fafb .snapToGroupsDirection ();};if len (_aaece )> 0{_aaece =_aaece .snapToGroupsDirection ();};_bagc :=append (_fafb ,_aaece ...);_bagc .log ("\u0073\u006e\u0061p\u0054\u006f\u0047\u0072\u006f\u0075\u0070\u0073");return _bagc ;
};func (_begf compositeCell )hasLines (_gdfd []*textLine )bool {for _dedde ,_gafc :=range _gdfd {_gfegd :=_eaad (_begf .PdfRectangle ,_gafc .PdfRectangle );if _abfa {_df .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u005e\u005e\u005e\u0069\u006e\u0074\u0065\u0072\u0073e\u0063t\u0073\u003d\u0025\u0074\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u000a",_gfegd ,_dedde ,len (_gdfd ));
_df .Printf ("\u0020\u0020\u0020\u0020  \u005e\u005e\u005e\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025s\u000a",_begf );_df .Printf ("\u0020 \u0020 \u0020\u0020\u0020\u006c\u0069\u006e\u0065\u003d\u0025\u0073\u000a",_gafc );};if _gfegd {return true ;
};};return false ;};func _dbgcd (_cadg *textLine )float64 {return _cadg ._fdec [0].Llx };func _gfbdg (_bcec map[int ][]float64 ){if len (_bcec )<=1{return ;};_bgead :=_dgaff (_bcec );if _abfa {_fd .Log .Info ("\u0066i\u0078C\u0065\u006c\u006c\u0073\u003a \u006b\u0065y\u0073\u003d\u0025\u002b\u0076",_bgead );
};var _eacc ,_daab int ;for _eacc ,_daab =range _bgead {if _bcec [_daab ]!=nil {break ;};};for _egac ,_gcefb :=range _bgead [_eacc :]{_ecdbdd :=_bcec [_gcefb ];if _ecdbdd ==nil {continue ;};if _abfa {_df .Printf ("\u0025\u0034\u0064\u003a\u0020\u006b\u0030\u003d\u0025\u0064\u0020\u006b1\u003d\u0025\u0064\u000a",_eacc +_egac ,_daab ,_gcefb );
};_dabd :=_bcec [_gcefb ];if _dabd [len (_dabd )-1]> _ecdbdd [0]{_dabd [len (_dabd )-1]=_ecdbdd [0];_bcec [_daab ]=_dabd ;};_daab =_gcefb ;};};var (_fdc =_f .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");
_age =_f .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072"););const (_eabg =1.0e-6;_cbeb =1.0e-4;_gded =10;_dgee =6;_dcca =0.5;_cacgd =0.12;_ccdb =0.19;_eaae =0.04;_gdc =0.04;_badad =1.0;_gcff =0.04;
_ggfa =0.4;_egca =0.7;_bgdc =1.0;_dcefa =0.1;_eadc =1.4;_eddba =0.46;_bbdg =0.02;_daed =0.2;_bbdda =0.5;_adcg =4;_gfda =4.0;_cad =6;_deg =0.3;_eagc =0.01;_cgea =0.02;_adgd =2;_egbc =2;_egce =500;_geaf =4.0;_ebeaf =4.0;_bbfa =0.05;_bedbg =0.1;_gbfb =2.0;
_bbef =2.0;_bbgd =1.5;_dbdc =3.0;_afec =0.25;);func (_ebfde rulingList )merge ()*ruling {_egeb :=_ebfde [0]._ggda ;_aeea :=_ebfde [0]._afbbf ;_ecead :=_ebfde [0]._gdgd ;for _ ,_caaeg :=range _ebfde [1:]{_egeb +=_caaeg ._ggda ;if _caaeg ._afbbf < _aeea {_aeea =_caaeg ._afbbf ;
};if _caaeg ._gdgd > _ecead {_ecead =_caaeg ._gdgd ;};};_bfde :=&ruling {_aabaf :_ebfde [0]._aabaf ,_ggfd :_ebfde [0]._ggfd ,Color :_ebfde [0].Color ,_ggda :_egeb /float64 (len (_ebfde )),_afbbf :_aeea ,_gdgd :_ecead };if _eafc {_fd .Log .Info ("\u006de\u0072g\u0065\u003a\u0020\u0025\u0032d\u0020\u0076e\u0063\u0073\u0020\u0025\u0073",len (_ebfde ),_bfde );
for _dbbd ,_cbdff :=range _ebfde {_df .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_dbbd ,_cbdff );};};return _bfde ;};func _adefe (_dbefb _bc .PdfObject ,_fcaaf _gf .Color )(_ag .Image ,error ){_agac ,_ecggf :=_bc .GetStream (_dbefb );if !_ecggf {return nil ,nil ;
};_ebgb ,_eabgd :=_ec .NewXObjectImageFromStream (_agac );if _eabgd !=nil {return nil ,_eabgd ;};_cead ,_eabgd :=_ebgb .ToImage ();if _eabgd !=nil {return nil ,_eabgd ;};return _bbbec (_cead ,_fcaaf ),nil ;};func (_cagd paraList )inTile (_bgaf gridTile )paraList {var _bgafb paraList ;
for _ ,_ecaa :=range _cagd {if _bgaf .contains (_ecaa .PdfRectangle ){_bgafb =append (_bgafb ,_ecaa );};};if _abfa {_df .Printf ("\u0020 \u0020\u0069\u006e\u0054i\u006c\u0065\u003a\u0020\u0020%\u0073 \u0069n\u0073\u0069\u0064\u0065\u003d\u0025\u0064\n",_bgaf ,len (_bgafb ));
for _becc ,_ddae :=range _bgafb {_df .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_becc ,_ddae );};_df .Println ("");};return _bgafb ;};

// PageImages represents extracted images on a PDF page with spatial information:
// display position and size.
type PageImages struct{Images []ImageMark ;};func (_daag rulingList )primMinMax ()(float64 ,float64 ){_fcef ,_gccca :=_daag [0]._ggda ,_daag [0]._ggda ;for _ ,_adgc :=range _daag [1:]{if _adgc ._ggda < _fcef {_fcef =_adgc ._ggda ;}else if _adgc ._ggda > _gccca {_gccca =_adgc ._ggda ;
};};return _fcef ,_gccca ;};

// ExtractFonts returns all font information from the page extractor, including
// font name, font type, the raw data of the embedded font file (if embedded), font descriptor and more.
//
// The argument `previousPageFonts` is used when trying to build a complete font catalog for multiple pages or the entire document.
// The entries from `previousPageFonts` are added to the returned result unless already included in the page, i.e. no duplicate entries.
//
// NOTE: If previousPageFonts is nil, all fonts from the page will be returned. Use it when building up a full list of fonts for a document or page range.
func (_fe *Extractor )ExtractFonts (previousPageFonts *PageFonts )(*PageFonts ,error ){_fgb :=PageFonts {};_efd :=_fgb .extractPageResourcesToFont (_fe ._ff );if _efd !=nil {return nil ,_efd ;};if previousPageFonts !=nil {for _ ,_gd :=range previousPageFonts .Fonts {if !_fae (_fgb .Fonts ,_gd .FontName ){_fgb .Fonts =append (_fgb .Fonts ,_gd );
};};};return &PageFonts {Fonts :_fgb .Fonts },nil ;};func (_ddbdg *textTable )reduce ()*textTable {_bcaa :=make ([]int ,0,_ddbdg ._gfae );_cggf :=make ([]int ,0,_ddbdg ._cfaac );for _ddeg :=0;_ddeg < _ddbdg ._gfae ;_ddeg ++{if !_ddbdg .emptyCompositeRow (_ddeg ){_bcaa =append (_bcaa ,_ddeg );
};};for _dcae :=0;_dcae < _ddbdg ._cfaac ;_dcae ++{if !_ddbdg .emptyCompositeColumn (_dcae ){_cggf =append (_cggf ,_dcae );};};if len (_bcaa )==_ddbdg ._gfae &&len (_cggf )==_ddbdg ._cfaac {return _ddbdg ;};_dfee :=textTable {_beagb :_ddbdg ._beagb ,_cfaac :len (_cggf ),_gfae :len (_bcaa ),_cadda :make (map[uint64 ]*textPara ,len (_cggf )*len (_bcaa ))};
if _abfa {_fd .Log .Info ("\u0072\u0065\u0064\u0075ce\u003a\u0020\u0025\u0064\u0078\u0025\u0064\u0020\u002d\u003e\u0020\u0025\u0064\u0078%\u0064",_ddbdg ._cfaac ,_ddbdg ._gfae ,len (_cggf ),len (_bcaa ));_fd .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_cggf );
_fd .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_bcaa );};for _gbad ,_aedec :=range _bcaa {for _fcdag ,_gbdfc :=range _cggf {_dbfff ,_eaggfc :=_ddbdg .getComposite (_gbdfc ,_aedec );if _dbfff ==nil {continue ;
};if _abfa {_df .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_fcdag ,_gbad ,_gbdfc ,_aedec ,_gebg (_dbfff .merge ().text (),50));};_dfee .putComposite (_fcdag ,_gbad ,_dbfff ,_eaggfc );
};};return &_dfee ;};func (_daff *textObject )setHorizScaling (_gabc float64 ){if _daff ==nil {return ;};_daff ._acad ._dfgd =_gabc ;};func (_cacg *textObject )setTextMatrix (_feeb []float64 ){if len (_feeb )!=6{_fd .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u006c\u0065\u006e\u0028\u0066\u0029\u0020\u0021\u003d\u0020\u0036\u0020\u0028\u0025\u0064\u0029",len (_feeb ));
return ;};_adc ,_bee ,_cff ,_bbfec ,_gdde ,_bfg :=_feeb [0],_feeb [1],_feeb [2],_feeb [3],_feeb [4],_feeb [5];_cacg ._dagc =_aa .NewMatrix (_adc ,_bee ,_cff ,_bbfec ,_gdde ,_bfg );_cacg ._cgcd =_cacg ._dagc ;};func _bebda (_cfed map[float64 ]map[float64 ]gridTile )[]float64 {_faggf :=make ([]float64 ,0,len (_cfed ));
for _dbeea :=range _cfed {_faggf =append (_faggf ,_dbeea );};_e .Float64s (_faggf );_egcb :=len (_faggf );for _efead :=0;_efead < _egcb /2;_efead ++{_faggf [_efead ],_faggf [_egcb -1-_efead ]=_faggf [_egcb -1-_efead ],_faggf [_efead ];};return _faggf ;
};func _ecee (_cbcb []*textLine ,_dgbc map[float64 ][]*textLine )[]*list {_dgda :=_dbcb (_dgbc );_ffgce :=[]*list {};if len (_dgda )==0{return _ffgce ;};_gfdf :=_dgda [0];_fgcb :=1;_cffe :=_dgbc [_gfdf ];for _dgfgd ,_feegd :=range _cffe {var _cbfa float64 ;
_ceeg :=[]*list {};_beggd :=_feegd ._efeb ;_eggb :=-1.0;if _dgfgd < len (_cffe )-1{_eggb =_cffe [_dgfgd +1]._efeb ;};if _fgcb < len (_dgda ){_ceeg =_gccfe (_cbcb ,_dgbc ,_dgda ,_fgcb ,_beggd ,_eggb );};_cbfa =_eggb ;if len (_ceeg )> 0{_feab :=_ceeg [0];
if len (_feab ._dffa )> 0{_cbfa =_feab ._dffa [0]._efeb ;};};_bddg :=[]*textLine {_feegd };_eecd :=_bcccdf (_feegd ,_cbcb ,_dgda ,_beggd ,_cbfa );_bddg =append (_bddg ,_eecd ...);_cfac :=_ecgd (_bddg ,"\u0062\u0075\u006c\u006c\u0065\u0074",_ceeg );_cfac ._bebf =_agag (_bddg ,"");
_ffgce =append (_ffgce ,_cfac );};return _ffgce ;};

// String returns a string describing the current state of the textState stack.
func (_afc *stateStack )String ()string {_cbce :=[]string {_df .Sprintf ("\u002d\u002d\u002d\u002d f\u006f\u006e\u0074\u0020\u0073\u0074\u0061\u0063\u006b\u003a\u0020\u0025\u0064",len (*_afc ))};for _fdcb ,_eegb :=range *_afc {_eecf :="\u003c\u006e\u0069l\u003e";
if _eegb !=nil {_eecf =_eegb .String ();};_cbce =append (_cbce ,_df .Sprintf ("\u0009\u0025\u0032\u0064\u003a\u0020\u0025\u0073",_fdcb ,_eecf ));};return _da .Join (_cbce ,"\u000a");};func (_ebca compositeCell )parasBBox ()(paraList ,_ec .PdfRectangle ){return _ebca .paraList ,_ebca .PdfRectangle ;
};

// TextTable represents a table.
// Cells are ordered top-to-bottom, left-to-right.
// Cells[y] is the (0-offset) y'th row in the table.
// Cells[y][x] is the (0-offset) x'th column in the table.
type TextTable struct{_ec .PdfRectangle ;W ,H int ;Cells [][]TableCell ;};func (_cefd *textObject )moveTextSetLeading (_dgc ,_cdgf float64 ){_cefd ._acad ._dfb =-_cdgf ;_cefd .moveLP (_dgc ,_cdgf );};const (_adabg rulingKind =iota ;_dfdf ;_cebaac ;);func (_aec *textObject )getFillColor ()_gf .Color {return _fcec (_aec ._dfff .ColorspaceNonStroking ,_aec ._dfff .ColorNonStroking );
};func (_acceb *textTable )compositeColCorridors ()map[int ][]float64 {_cddgg :=make (map[int ][]float64 ,_acceb ._cfaac );if _abfa {_fd .Log .Info ("\u0063\u006f\u006d\u0070o\u0073\u0069\u0074\u0065\u0043\u006f\u006c\u0043\u006f\u0072r\u0069d\u006f\u0072\u0073\u003a\u0020\u0077\u003d%\u0064\u0020",_acceb ._cfaac );
};for _fdcg :=0;_fdcg < _acceb ._cfaac ;_fdcg ++{_cddgg [_fdcg ]=nil ;};return _cddgg ;};func (_fgdaa rulingList )tidied (_baaf string )rulingList {_eabd :=_fgdaa .removeDuplicates ();_eabd .log ("\u0075n\u0069\u0071\u0075\u0065\u0073");_fdff :=_eabd .snapToGroups ();
if _fdff ==nil {return nil ;};_fdff .sort ();if _bcbd {_fd .Log .Info ("\u0074\u0069\u0064i\u0065\u0064\u003a\u0020\u0025\u0071\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u0075\u006e\u0069\u0071\u0075\u0065\u0073\u003d\u0025\u0064\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0064\u003d\u0025\u0064",_baaf ,len (_fgdaa ),len (_eabd ),len (_fdff ));
};_fdff .log ("\u0063o\u0061\u006c\u0065\u0073\u0063\u0065d");return _fdff ;};var _bccf =[]string {"\u2756","\u27a2","\u2713","\u2022","\uf0a7","\u25a1","\u2212","\u25a0","\u25aa","\u006f"};func (_gbgde intSet )del (_ceefc int ){delete (_gbgde ,_ceefc )};


// String returns a string describing `tm`.
func (_agb TextMark )String ()string {_bfce :=_agb .BBox ;var _abc string ;if _agb .Font !=nil {_abc =_agb .Font .String ();if len (_abc )> 50{_abc =_abc [:50]+"\u002e\u002e\u002e";};};var _dcdb string ;if _agb .Meta {_dcdb ="\u0020\u002a\u004d\u002a";
};return _df .Sprintf ("\u007b\u0054\u0065\u0078t\u004d\u0061\u0072\u006b\u003a\u0020\u0025\u0064\u0020%\u0071\u003d\u0025\u0030\u0032\u0078\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e2\u0066\u0029\u0020\u0028\u00256\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0025\u0073\u007d",_agb .Offset ,_agb .Text ,[]rune (_agb .Text ),_bfce .Llx ,_bfce .Lly ,_bfce .Urx ,_bfce .Ury ,_abc ,_dcdb );
};func _agag (_cffa []*textLine ,_aeaa string )string {var _dgbg _da .Builder ;_fbbag :=0.0;for _cedg ,_cfda :=range _cffa {_gbca :=_cfda .text ();_ecdc :=_cfda ._efeb ;if _cedg < len (_cffa )-1{_fbbag =_cffa [_cedg +1]._efeb ;}else {_fbbag =0.0;};_dgbg .WriteString (_aeaa );
_dgbg .WriteString (_gbca );if _fbbag !=_ecdc {_dgbg .WriteString ("\u000a");}else {_dgbg .WriteString ("\u0020");};};return _dgbg .String ();};func (_bcde *wordBag )applyRemovals (_bged map[int ]map[*textWord ]struct{}){for _cgdge ,_gfdd :=range _bged {if len (_gfdd )==0{continue ;
};_dgfc :=_bcde ._aedg [_cgdge ];_fdd :=len (_dgfc )-len (_gfdd );if _fdd ==0{delete (_bcde ._aedg ,_cgdge );continue ;};_fdgdd :=make ([]*textWord ,_fdd );_bgcf :=0;for _ ,_beee :=range _dgfc {if _ ,_beab :=_gfdd [_beee ];!_beab {_fdgdd [_bgcf ]=_beee ;
_bgcf ++;};};_bcde ._aedg [_cgdge ]=_fdgdd ;};};func (_bccga *textObject )showTextAdjusted (_cge *_bc .PdfObjectArray ,_ffb int )error {_ade :=false ;for _ ,_dagg :=range _cge .Elements (){switch _dagg .(type ){case *_bc .PdfObjectFloat ,*_bc .PdfObjectInteger :_dfd ,_fde :=_bc .GetNumberAsFloat (_dagg );
if _fde !=nil {_fd .Log .Debug ("\u0045\u0052\u0052\u004fR\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078t\u0041\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0042\u0061\u0064\u0020\u006e\u0075\u006d\u0065r\u0069\u0063\u0061\u006c\u0020a\u0072\u0067\u002e\u0020\u006f\u003d\u0025\u0073\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_dagg ,_cge );
return _fde ;};_cae ,_aca :=-_dfd *0.001*_bccga ._acad ._aed ,0.0;if _ade {_aca ,_cae =_cae ,_aca ;};_fdgd :=_fbgf (_aa .Point {X :_cae ,Y :_aca });_bccga ._dagc .Concat (_fdgd );case *_bc .PdfObjectString :_cafc :=_bc .TraceToDirectObject (_dagg );_gagd ,_dda :=_bc .GetStringBytes (_cafc );
if !_dda {_fd .Log .Trace ("s\u0068\u006f\u0077\u0054\u0065\u0078\u0074\u0041\u0064j\u0075\u0073\u0074\u0065\u0064\u003a\u0020Ba\u0064\u0020\u0073\u0074r\u0069\u006e\u0067\u0020\u0061\u0072\u0067\u002e\u0020o=\u0025\u0073 \u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_dagg ,_cge );
return _bc .ErrTypeError ;};_bccga .renderText (_cafc ,_gagd ,_ffb );default:_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078\u0074A\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0055\u006e\u0065\u0078p\u0065\u0063\u0074\u0065\u0064\u0020\u0074\u0079\u0070\u0065\u0020\u0028%T\u0029\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_dagg ,_cge );
return _bc .ErrTypeError ;};};return nil ;};

// String returns a string describing `pt`.
func (_dcba PageText )String ()string {_ebec :=_df .Sprintf ("P\u0061\u0067\u0065\u0054ex\u0074:\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073",len (_dcba ._dade ));_cbe :=[]string {"\u002d"+_ebec };for _ ,_bgfe :=range _dcba ._dade {_cbe =append (_cbe ,_bgfe .String ());
};_cbe =append (_cbe ,"\u002b"+_ebec );return _da .Join (_cbe ,"\u000a");};

// String returns a description of `b`.
func (_cgge *wordBag )String ()string {var _efea []string ;for _ ,_fabf :=range _cgge .depthIndexes (){_accf :=_cgge ._aedg [_fabf ];for _ ,_gbdd :=range _accf {_efea =append (_efea ,_gbdd ._ddbga );};};return _df .Sprintf ("\u0025.\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065=\u0025\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0025\u0071",_cgge .PdfRectangle ,_cgge ._bfca ,len (_efea ),_efea );
};func (_cdaf rulingList )splitSec ()[]rulingList {_e .Slice (_cdaf ,func (_cadd ,_gdea int )bool {_ebda ,_bfbe :=_cdaf [_cadd ],_cdaf [_gdea ];if _ebda ._afbbf !=_bfbe ._afbbf {return _ebda ._afbbf < _bfbe ._afbbf ;};return _ebda ._gdgd < _bfbe ._gdgd ;
});_cbceb :=make (map[*ruling ]struct{},len (_cdaf ));_aedd :=func (_fbcd *ruling )rulingList {_ebacg :=rulingList {_fbcd };_cbceb [_fbcd ]=struct{}{};for _ ,_gbdeg :=range _cdaf {if _ ,_ggbf :=_cbceb [_gbdeg ];_ggbf {continue ;};for _ ,_cdcg :=range _ebacg {if _gbdeg .alignsSec (_cdcg ){_ebacg =append (_ebacg ,_gbdeg );
_cbceb [_gbdeg ]=struct{}{};break ;};};};return _ebacg ;};_cegaf :=[]rulingList {_aedd (_cdaf [0])};for _ ,_fadf :=range _cdaf [1:]{if _ ,_fbac :=_cbceb [_fadf ];_fbac {continue ;};_cegaf =append (_cegaf ,_aedd (_fadf ));};return _cegaf ;};func _bgecc (_bfcee ,_geeb float64 )string {_gcfaf :=!_fdeb (_bfcee -_geeb );
if _gcfaf {return "\u000a";};return "\u0020";};func (_ddbea gridTile )complete ()bool {return _ddbea .numBorders ()==4};func _gadg (_fecab []TextMark ,_caeea *int ,_gaeb TextMark )[]TextMark {_gaeb .Offset =*_caeea ;_fecab =append (_fecab ,_gaeb );*_caeea +=len (_gaeb .Text );
return _fecab ;};func (_egcab paraList )computeEBBoxes (){if _gada {_fd .Log .Info ("\u0063o\u006dp\u0075\u0074\u0065\u0045\u0042\u0042\u006f\u0078\u0065\u0073\u003a");};for _ ,_bfbd :=range _egcab {_bfbd ._ceff =_bfbd .PdfRectangle ;};_fbbbg :=_egcab .yNeighbours (0);
for _bcddg ,_ceee :=range _egcab {_ggfgc :=_ceee ._ceff ;_abag ,_cegdg :=-1.0e9,+1.0e9;for _ ,_cbbc :=range _fbbbg [_ceee ]{_aaad :=_egcab [_cbbc ]._ceff ;if _aaad .Urx < _ggfgc .Llx {_abag =_g .Max (_abag ,_aaad .Urx );}else if _ggfgc .Urx < _aaad .Llx {_cegdg =_g .Min (_cegdg ,_aaad .Llx );
};};for _befb ,_cccb :=range _egcab {_acce :=_cccb ._ceff ;if _bcddg ==_befb ||_acce .Ury > _ggfgc .Lly {continue ;};if _abag <=_acce .Llx &&_acce .Llx < _ggfgc .Llx {_ggfgc .Llx =_acce .Llx ;}else if _acce .Urx <=_cegdg &&_ggfgc .Urx < _acce .Urx {_ggfgc .Urx =_acce .Urx ;
};};if _gada {_df .Printf ("\u0025\u0034\u0064\u003a %\u0036\u002e\u0032\u0066\u2192\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0071\u000a",_bcddg ,_ceee ._ceff ,_ggfgc ,_gebg (_ceee .text (),50));};_ceee ._ceff =_ggfgc ;};if _eegc {for _ ,_baec :=range _egcab {_baec .PdfRectangle =_baec ._ceff ;
};};};func (_bcbc *shapesState )newSubPath (){_bcbc .clearPath ();if _cgab {_fd .Log .Info ("\u006e\u0065\u0077\u0053\u0075\u0062\u0050\u0061\u0074h\u003a\u0020\u0025\u0073",_bcbc );};};type textResult struct{_edbb PageText ;_baf int ;_ddfb int ;};func (_cac *imageExtractContext )extractContentStreamImages (_bgf string ,_gcd *_ec .PdfPageResources )error {_ea :=_dd .NewContentStreamParser (_bgf );
_fed ,_bbf :=_ea .Parse ();if _bbf !=nil {return _bbf ;};if _cac ._gb ==nil {_cac ._gb =map[*_bc .PdfObjectStream ]*cachedImage {};};if _cac ._gef ==nil {_cac ._gef =&ImageExtractOptions {};};_dca :=_dd .NewContentStreamProcessor (*_fed );_dca .AddHandler (_dd .HandlerConditionEnumAllOperands ,"",_cac .processOperand );
return _dca .Process (_gcd );};func _fcgab (_agae []pathSection )rulingList {_feba (_agae );if _bcbd {_fd .Log .Info ("\u006d\u0061k\u0065\u0053\u0074\u0072\u006f\u006b\u0065\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0064\u0020\u0073\u0074\u0072ok\u0065\u0073",len (_agae ));
};var _bafc rulingList ;for _ ,_ebddc :=range _agae {for _ ,_bfaa :=range _ebddc ._bdg {if len (_bfaa ._afgg )< 2{continue ;};_bfceb :=_bfaa ._afgg [0];for _ ,_eadcg :=range _bfaa ._afgg [1:]{if _aggg ,_egbec :=_deabc (_bfceb ,_eadcg ,_ebddc .Color );_egbec {_bafc =append (_bafc ,_aggg );
};_bfceb =_eadcg ;};};};if _bcbd {_fd .Log .Info ("m\u0061\u006b\u0065\u0053tr\u006fk\u0065\u0052\u0075\u006c\u0069n\u0067\u0073\u003a\u0020\u0025\u0073",_bafc );};return _bafc ;};func (_aaf *shapesState )closePath (){if _aaf ._faba {_aaf ._eabf =append (_aaf ._eabf ,_bdbc (_aaf ._fdggg ));
_aaf ._faba =false ;}else if len (_aaf ._eabf )==0{if _cgab {_fd .Log .Debug ("\u0063\u006c\u006f\u0073eP\u0061\u0074\u0068\u0020\u0077\u0069\u0074\u0068\u0020\u006e\u006f\u0020\u0070\u0061t\u0068");};_aaf ._faba =false ;return ;};_aaf ._eabf [len (_aaf ._eabf )-1].close ();
if _cgab {_fd .Log .Info ("\u0063\u006c\u006f\u0073\u0065\u0050\u0061\u0074\u0068\u003a\u0020\u0025\u0073",_aaf );};};func (_ecada rulingList )toGrids ()[]rulingList {if _bcbd {_fd .Log .Info ("t\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0025\u0073",_ecada );
};_aaeg :=_ecada .intersections ();if _bcbd {_fd .Log .Info ("\u0074\u006f\u0047r\u0069\u0064\u0073\u003a \u0076\u0065\u0063\u0073\u003d\u0025\u0064 \u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003d\u0025\u0064\u0020",len (_ecada ),len (_aaeg ));
for _ ,_cddc :=range _dagdd (_aaeg ){_df .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_cddc ,_aaeg [_cddc ]);};};_geedc :=make (map[int ]intSet ,len (_ecada ));for _eggge :=range _ecada {_cbdec :=_ecada .connections (_aaeg ,_eggge );if len (_cbdec )> 0{_geedc [_eggge ]=_cbdec ;
};};if _bcbd {_fd .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0063\u006fn\u006e\u0065\u0063\u0074s=\u0025\u0064",len (_geedc ));for _ ,_bedbd :=range _dagdd (_geedc ){_df .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_bedbd ,_geedc [_bedbd ]);
};};_gcffc :=_abgaa (len (_ecada ),func (_gcdf ,_feaa int )bool {_fdad ,_bcbag :=len (_geedc [_gcdf ]),len (_geedc [_feaa ]);if _fdad !=_bcbag {return _fdad > _bcbag ;};return _ecada .comp (_gcdf ,_feaa );});if _bcbd {_fd .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u006f\u0072d\u0065\u0072\u0069\u006eg=\u0025\u0076",_gcffc );
};_dbdcf :=[][]int {{_gcffc [0]}};_cdgb :for _ ,_dbaca :=range _gcffc [1:]{for _gbcg ,_cbad :=range _dbdcf {for _ ,_bfcgd :=range _cbad {if _geedc [_bfcgd ].has (_dbaca ){_dbdcf [_gbcg ]=append (_cbad ,_dbaca );continue _cdgb ;};};};_dbdcf =append (_dbdcf ,[]int {_dbaca });
};if _bcbd {_fd .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020i\u0067\u0072i\u0064\u0073\u003d\u0025\u0076",_dbdcf );};_e .SliceStable (_dbdcf ,func (_eceg ,_afdg int )bool {return len (_dbdcf [_eceg ])> len (_dbdcf [_afdg ])});for _ ,_fecaa :=range _dbdcf {_e .Slice (_fecaa ,func (_abcgf ,_eeda int )bool {return _ecada .comp (_fecaa [_abcgf ],_fecaa [_eeda ])});
};_gfbd :=make ([]rulingList ,len (_dbdcf ));for _gfdea ,_abeag :=range _dbdcf {_debc :=make (rulingList ,len (_abeag ));for _ccca ,_bdgec :=range _abeag {_debc [_ccca ]=_ecada [_bdgec ];};_gfbd [_gfdea ]=_debc ;};if _bcbd {_fd .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020g\u0072\u0069d\u0073\u003d\u0025\u002b\u0076",_gfbd );
};var _ggbc []rulingList ;for _ ,_eeeb :=range _gfbd {if _eceb ,_fefgc :=_eeeb .isActualGrid ();_fefgc {_eeeb =_eceb ;_eeeb =_eeeb .snapToGroups ();_ggbc =append (_ggbc ,_eeeb );};};if _bcbd {_aefac ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0061\u0063t\u0075\u0061\u006c\u0047ri\u0064\u0073",_ggbc );
_fd .Log .Info ("\u0074\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0067\u0072\u0069\u0064\u0073\u003d%\u0064 \u0061\u0063\u0074\u0075\u0061\u006c\u0047\u0072\u0069\u0064\u0073\u003d\u0025\u0064",len (_gfbd ),len (_ggbc ));};return _ggbc ;};func (_dddf *textPara )writeText (_cfaa _b .Writer ){if _dddf ._fcbe ==nil {_dddf .writeCellText (_cfaa );
return ;};for _afgd :=0;_afgd < _dddf ._fcbe ._gfae ;_afgd ++{for _ddac :=0;_ddac < _dddf ._fcbe ._cfaac ;_ddac ++{_bceg :=_dddf ._fcbe .get (_ddac ,_afgd );if _bceg ==nil {_cfaa .Write ([]byte ("\u0009"));}else {_bceg .writeCellText (_cfaa );};_cfaa .Write ([]byte ("\u0020"));
};if _afgd < _dddf ._fcbe ._gfae -1{_cfaa .Write ([]byte ("\u000a"));};};};func _adaa (_ecea []*textLine ,_adce ,_faaa float64 )[]*textLine {var _gecc []*textLine ;for _ ,_cbdf :=range _ecea {if _adce ==-1{if _cbdf ._efeb > _faaa {_gecc =append (_gecc ,_cbdf );
};}else {if _cbdf ._efeb > _faaa &&_cbdf ._efeb < _adce {_gecc =append (_gecc ,_cbdf );};};};return _gecc ;};func (_gdeg paraList )applyTables (_daecc []*textTable )paraList {var _agga paraList ;for _ ,_abab :=range _daecc {_agga =append (_agga ,_abab .newTablePara ());
};for _ ,_gbbg :=range _gdeg {if _gbbg ._dedd {continue ;};_agga =append (_agga ,_gbbg );};return _agga ;};func (_bdaf paraList )readBefore (_efgg []int ,_cbgd ,_agea int )bool {_eefb ,_adac :=_bdaf [_cbgd ],_bdaf [_agea ];if _afa (_eefb ,_adac )&&_eefb .Lly > _adac .Lly {return true ;
};if !(_eefb ._ceff .Urx < _adac ._ceff .Llx ){return false ;};_ebcee ,_fcab :=_eefb .Lly ,_adac .Lly ;if _ebcee > _fcab {_fcab ,_ebcee =_ebcee ,_fcab ;};_cacf :=_g .Max (_eefb ._ceff .Llx ,_adac ._ceff .Llx );_ffbc :=_g .Min (_eefb ._ceff .Urx ,_adac ._ceff .Urx );
_fgbae :=_bdaf .llyRange (_efgg ,_ebcee ,_fcab );for _ ,_gggc :=range _fgbae {if _gggc ==_cbgd ||_gggc ==_agea {continue ;};_gfbg :=_bdaf [_gggc ];if _gfbg ._ceff .Llx <=_ffbc &&_cacf <=_gfbg ._ceff .Urx {return false ;};};return true ;};func _dbcb (_efeg map[float64 ][]*textLine )[]float64 {_eagae :=[]float64 {};
for _bdga :=range _efeg {_eagae =append (_eagae ,_bdga );};_e .Float64s (_eagae );return _eagae ;};func _bda (_eaef *Extractor ,_bcd *_ec .PdfPageResources ,_dfdbg _dd .GraphicsState ,_ebbg *textState ,_gfa *stateStack )*textObject {return &textObject {_fea :_eaef ,_cfe :_bcd ,_dfff :_dfdbg ,_cfef :_gfa ,_acad :_ebbg ,_dagc :_aa .IdentityMatrix (),_cgcd :_aa .IdentityMatrix ()};
};func (_fggd rulingList )sort (){_e .Slice (_fggd ,_fggd .comp )};func (_gdg *textObject )setTextLeading (_ddfe float64 ){if _gdg ==nil {return ;};_gdg ._acad ._dfb =_ddfe ;};

// String returns a string describing `ma`.
func (_gbgd TextMarkArray )String ()string {_fgg :=len (_gbgd ._ggc );if _fgg ==0{return "\u0045\u004d\u0050T\u0059";};_aegd :=_gbgd ._ggc [0];_cgaa :=_gbgd ._ggc [_fgg -1];return _df .Sprintf ("\u007b\u0054\u0045\u0058\u0054\u004d\u0041\u0052K\u0041\u0052\u0052AY\u003a\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025s\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d%\u0073\u007d",_fgg ,_aegd ,_cgaa );
};func (_fgcac *textTable )log (_bcdgg string ){if !_abfa {return ;};_fd .Log .Info ("~\u007e\u007e\u0020\u0025\u0073\u003a \u0025\u0064\u0020\u0078\u0020\u0025d\u0020\u0067\u0072\u0069\u0064\u003d\u0025t\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0025\u0036\u002e2\u0066",_bcdgg ,_fgcac ._cfaac ,_fgcac ._gfae ,_fgcac ._beagb ,_fgcac .PdfRectangle );
for _egbb :=0;_egbb < _fgcac ._gfae ;_egbb ++{for _abec :=0;_abec < _fgcac ._cfaac ;_abec ++{_fdbba :=_fgcac .get (_abec ,_egbb );if _fdbba ==nil {continue ;};_df .Printf ("%\u0034\u0064\u0020\u00252d\u003a \u0025\u0036\u002e\u0032\u0066 \u0025\u0071\u0020\u0025\u0064\u000a",_abec ,_egbb ,_fdbba .PdfRectangle ,_gebg (_fdbba .text (),50),_cb .RuneCountInString (_fdbba .text ()));
};};};func (_abef paraList )extractTables (_ccdag []gridTiling )paraList {if _abfa {_fd .Log .Debug ("\u0065\u0078\u0074r\u0061\u0063\u0074\u0054\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_abef ));
};if len (_abef )< _cad {return _abef ;};_edbe :=_abef .findTables (_ccdag );if _abfa {_fd .Log .Info ("c\u006f\u006d\u0062\u0069\u006e\u0065d\u0020\u0074\u0061\u0062\u006c\u0065s\u0020\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_edbe ));
for _egaa ,_cgdef :=range _edbe {_cgdef .log (_df .Sprintf ("c\u006f\u006d\u0062\u0069\u006e\u0065\u0064\u0020\u0025\u0064",_egaa ));};};return _abef .applyTables (_edbe );};const _gege =20;func (_afaea rulingList )comp (_cacgc ,_affc int )bool {_bbba ,_dbfaac :=_afaea [_cacgc ],_afaea [_affc ];
_cfgea ,_ebeg :=_bbba ._aabaf ,_dbfaac ._aabaf ;if _cfgea !=_ebeg {return _cfgea > _ebeg ;};if _cfgea ==_adabg {return false ;};_gcgac :=func (_gbbf bool )bool {if _cfgea ==_dfdf {return _gbbf ;};return !_gbbf ;};_bbbc ,_gbbb :=_bbba ._ggda ,_dbfaac ._ggda ;
if _bbbc !=_gbbb {return _gcgac (_bbbc > _gbbb );};_bbbc ,_gbbb =_bbba ._afbbf ,_dbfaac ._afbbf ;if _bbbc !=_gbbb {return _gcgac (_bbbc < _gbbb );};return _gcgac (_bbba ._gdgd < _dbfaac ._gdgd );};func (_fdcbe rulingList )removeDuplicates ()rulingList {if len (_fdcbe )==0{return nil ;
};_fdcbe .sort ();_bdca :=rulingList {_fdcbe [0]};for _ ,_adeb :=range _fdcbe [1:]{if _adeb .equals (_bdca [len (_bdca )-1]){continue ;};_bdca =append (_bdca ,_adeb );};return _bdca ;};func _bddf (_beece structElement )[]structElement {_ffgcd :=[]structElement {};
for _ ,_efda :=range _beece ._bfee {for _ ,_gfea :=range _efda ._bfee {for _ ,_cfbb :=range _gfea ._bfee {if _cfbb ._fdcf =="\u004c"{_ffgcd =append (_ffgcd ,_cfbb );};};};};return _ffgcd ;};func _fgga (_fgef []*textMark ,_eccbg _ec .PdfRectangle )[]*textWord {var _bbcgc []*textWord ;
var _eecb *textWord ;if _geba {_fd .Log .Info ("\u006d\u0061\u006beT\u0065\u0078\u0074\u0057\u006f\u0072\u0064\u0073\u003a\u0020\u0025\u0064\u0020\u006d\u0061\u0072\u006b\u0073",len (_fgef ));};_bcega :=func (){if _eecb !=nil {_bdcdc :=_eecb .computeText ();
if !_dddefe (_bdcdc ){_eecb ._ddbga =_bdcdc ;_bbcgc =append (_bbcgc ,_eecb );if _geba {_fd .Log .Info ("\u0061\u0064\u0064Ne\u0077\u0057\u006f\u0072\u0064\u003a\u0020\u0025\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",len (_bbcgc )-1,_eecb .String ());
for _gdddf ,_feag :=range _eecb ._egfgg {_df .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gdddf ,_feag .String ());};};};_eecb =nil ;};};for _ ,_deeef :=range _fgef {if _eadg &&_eecb !=nil &&len (_eecb ._egfgg )> 0{_cddgf :=_eecb ._egfgg [len (_eecb ._egfgg )-1];
_begdg ,_fdegd :=_aeedb (_deeef ._fcffb );_cgad ,_gcgdd :=_aeedb (_cddgf ._fcffb );if _fdegd &&!_gcgdd &&_cddgf .inDiacriticArea (_deeef ){_eecb .addDiacritic (_begdg );continue ;};if _gcgdd &&!_fdegd &&_deeef .inDiacriticArea (_cddgf ){_eecb ._egfgg =_eecb ._egfgg [:len (_eecb ._egfgg )-1];
_eecb .appendMark (_deeef ,_eccbg );_eecb .addDiacritic (_cgad );continue ;};};_cbded :=_dddefe (_deeef ._fcffb );if _cbded {_bcega ();continue ;};if _eecb ==nil &&!_cbded {_eecb =_decf ([]*textMark {_deeef },_eccbg );continue ;};_gcgae :=_eecb ._ggdfd ;
_bacge :=_g .Abs (_fgab (_eccbg ,_deeef )-_eecb ._gcca )/_gcgae ;_facc :=_fgfe (_deeef ,_eecb )/_gcgae ;if _facc >=_cacgd ||!(-_ccdb <=_facc &&_bacge <=_eaae ){_bcega ();_eecb =_decf ([]*textMark {_deeef },_eccbg );continue ;};_eecb .appendMark (_deeef ,_eccbg );
};_bcega ();return _bbcgc ;};func _aegb (_abgg ,_cgeb float64 )bool {return _abgg /_g .Max (_bedbg ,_cgeb )< _bbfa };func (_gcaa *textTable )emptyCompositeColumn (_ebeac int )bool {for _ceab :=0;_ceab < _gcaa ._gfae ;_ceab ++{if _baaa ,_dabab :=_gcaa ._edeab [_dfded (_ebeac ,_ceab )];
_dabab {if len (_baaa .paraList )> 0{return false ;};};};return true ;};

// ToTextMark returns the public view of `tm`.
func (_edcb *textMark )ToTextMark ()TextMark {return TextMark {Text :_edcb ._fcffb ,Original :_edcb ._gcef ,BBox :_edcb ._cbbge ,Font :_edcb ._acfa ,FontSize :_edcb ._cgdb ,FillColor :_edcb ._gagdd ,StrokeColor :_edcb ._efad ,Orientation :_edcb ._gcdg ,DirectObject :_edcb ._gbdaa ,ObjString :_edcb ._abgcc ,Tw :_edcb .Tw ,Th :_edcb .Th ,Tc :_edcb ._aabg ,Index :_edcb ._geccg };
};func (_gecb *shapesState )fill (_cgeg *[]pathSection ){_adgg :=pathSection {_bdg :_gecb ._eabf ,Color :_gecb ._bbe .getFillColor ()};*_cgeg =append (*_cgeg ,_adgg );if _bcbd {_fcfd :=_adgg .bbox ();_df .Printf ("\u0020 \u0020\u0020\u0046\u0049\u004c\u004c\u003a %\u0032\u0064\u0020\u0066\u0069\u006c\u006c\u0073\u0020\u0028\u0025\u0064\u0020\u006ee\u0077\u0029 \u0073\u0073\u003d%\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d\u0025\u0033\u0076\u0020\u0025\u0036\u002e\u0032f\u003d\u00256.\u0032\u0066\u0078%\u0036\u002e\u0032\u0066\u000a",len (*_cgeg ),len (_adgg ._bdg ),_gecb ,_adgg .Color ,_fcfd ,_fcfd .Width (),_fcfd .Height ());
if _fdac {for _fgca ,_dbfaa :=range _adgg ._bdg {_df .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_fgca ,_dbfaa );if _fgca ==10{break ;};};};};};func _cbgge (_gcac _ec .PdfRectangle )*ruling {return &ruling {_aabaf :_dfdf ,_ggda :_gcac .Ury ,_afbbf :_gcac .Llx ,_gdgd :_gcac .Urx };
};

// String returns a description of `k`.
func (_dfedg rulingKind )String ()string {_badba ,_eaaeg :=_ebdcd [_dfedg ];if !_eaaeg {return _df .Sprintf ("\u004e\u006ft\u0020\u0061\u0020r\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0064",_dfedg );};return _badba ;};func (_aaaa rulingList )asTiling ()gridTiling {if _aceb {_fd .Log .Info ("r\u0075\u006ci\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0063s\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u002b\u002b\u002b\u0020\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_aaaa ));
};for _efdb ,_bgfbgf :=range _aaaa [1:]{_cegac :=_aaaa [_efdb ];if _cegac .alignsPrimary (_bgfbgf )&&_cegac .alignsSec (_bgfbgf ){_fd .Log .Error ("a\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0044\u0075\u0070\u006c\u0069\u0063\u0061\u0074\u0065 \u0072\u0075\u006c\u0069\u006e\u0067\u0073\u002e\u000a\u0009v=\u0025\u0073\u000a\t\u0077=\u0025\u0073",_bgfbgf ,_cegac );
};};_aaaa .sortStrict ();_aaaa .log ("\u0073n\u0061\u0070\u0070\u0065\u0064");_cefg ,_ecgcf :=_aaaa .vertsHorzs ();_bdad :=_cefg .primaries ();_dgec :=_ecgcf .primaries ();_cafaf :=len (_bdad )-1;_ccdadf :=len (_dgec )-1;if _cafaf ==0||_ccdadf ==0{return gridTiling {};
};_bffff :=_ec .PdfRectangle {Llx :_bdad [0],Urx :_bdad [_cafaf ],Lly :_dgec [0],Ury :_dgec [_ccdadf ]};if _aceb {_fd .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0072\u0074s=\u0025\u0064",len (_cefg ));
for _bdgbb ,_efgad :=range _cefg {_df .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bdgbb ,_efgad );};_fd .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0068\u006f\u0072\u007as=\u0025\u0064",len (_ecgcf ));
for _ddce ,_bdfed :=range _ecgcf {_df .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ddce ,_bdfed );};_fd .Log .Info ("\u0072\u0075\u006c\u0069\u006eg\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067:\u0020\u0020\u0077\u0078\u0068\u003d\u0025\u0064\u0078\u0025\u0064\u000a\u0009\u006c\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a\u0009\u006c\u006c\u0079\u003d\u0025\u002e\u0032f",_cafaf ,_ccdadf ,_bdad ,_dgec );
};_edab :=make ([]gridTile ,_cafaf *_ccdadf );for _afbbd :=_ccdadf -1;_afbbd >=0;_afbbd --{_gbbe :=_dgec [_afbbd ];_efggc :=_dgec [_afbbd +1];for _fdaac :=0;_fdaac < _cafaf ;_fdaac ++{_fgaa :=_bdad [_fdaac ];_cebe :=_bdad [_fdaac +1];_cafd :=_cefg .findPrimSec (_fgaa ,_gbbe );
_cdbc :=_cefg .findPrimSec (_cebe ,_gbbe );_aedfeb :=_ecgcf .findPrimSec (_gbbe ,_fgaa );_acaeb :=_ecgcf .findPrimSec (_efggc ,_fgaa );_cecg :=_ec .PdfRectangle {Llx :_fgaa ,Urx :_cebe ,Lly :_gbbe ,Ury :_efggc };_fgbfg :=_bfdda (_cecg ,_cafd ,_cdbc ,_aedfeb ,_acaeb );
_edab [_afbbd *_cafaf +_fdaac ]=_fgbfg ;if _aceb {_df .Printf ("\u0020\u0020\u0078\u003d\u0025\u0032\u0064\u0020\u0079\u003d\u0025\u0032\u0064\u003a\u0020%\u0073 \u0025\u0036\u002e\u0032\u0066\u0020\u0078\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_fdaac ,_afbbd ,_fgbfg .String (),_fgbfg .Width (),_fgbfg .Height ());
};};};if _aceb {_fd .Log .Info ("r\u0075\u006c\u0069\u006e\u0067\u004c\u0069\u0073\u0074.\u0061\u0073\u0054\u0069\u006c\u0069\u006eg:\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0020\u0068\u006f\u0072\u0069zo\u006e\u0074a\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_bffff );
};_ffca :=make ([]map[float64 ]gridTile ,_ccdadf );for _abdc :=_ccdadf -1;_abdc >=0;_abdc --{if _aceb {_df .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_abdc );};_ffca [_abdc ]=make (map[float64 ]gridTile ,_cafaf );for _efff :=0;_efff < _cafaf ;
_efff ++{_fdcda :=_edab [_abdc *_cafaf +_efff ];if _aceb {_df .Printf ("\u0020\u0020\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_efff ,_fdcda );};if !_fdcda ._edbd {continue ;};_eddfb :=_efff ;for _cdac :=_efff +1;!_fdcda ._dbfef &&_cdac < _cafaf ;
_cdac ++{_fcfg :=_edab [_abdc *_cafaf +_cdac ];_fdcda .Urx =_fcfg .Urx ;_fdcda ._faeaf =_fdcda ._faeaf ||_fcfg ._faeaf ;_fdcda ._efaf =_fdcda ._efaf ||_fcfg ._efaf ;_fdcda ._dbfef =_fcfg ._dbfef ;if _aceb {_df .Printf ("\u0020 \u0020%\u0034\u0064\u003a\u0020\u0025s\u0020\u2192 \u0025\u0073\u000a",_cdac ,_fcfg ,_fdcda );
};_eddfb =_cdac ;};if _aceb {_df .Printf (" \u0020 \u0025\u0032\u0064\u0020\u002d\u0020\u0025\u0032d\u0020\u2192\u0020\u0025s\n",_efff ,_eddfb ,_fdcda );};_efff =_eddfb ;_ffca [_abdc ][_fdcda .Llx ]=_fdcda ;};};_aabd :=make (map[float64 ]map[float64 ]gridTile ,_ccdadf );
_egbfc :=make (map[float64 ]map[float64 ]struct{},_ccdadf );for _acgbb :=_ccdadf -1;_acgbb >=0;_acgbb --{_bccce :=_edab [_acgbb *_cafaf ].Lly ;_aabd [_bccce ]=make (map[float64 ]gridTile ,_cafaf );_egbfc [_bccce ]=make (map[float64 ]struct{},_cafaf );};
if _aceb {_fd .Log .Info ("\u0072u\u006c\u0069n\u0067\u004c\u0069s\u0074\u002e\u0061\u0073\u0054\u0069\u006ci\u006e\u0067\u003a\u0020\u0063\u006fa\u006c\u0065\u0073\u0063\u0065\u0020\u0076\u0065\u0072\u0074\u0069c\u0061\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_bffff );
};for _cfbf :=_ccdadf -1;_cfbf >=0;_cfbf --{_gbbea :=_edab [_cfbf *_cafaf ].Lly ;_gabcf :=_ffca [_cfbf ];if _aceb {_df .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_cfbf );};for _ ,_efaed :=range _gcfg (_gabcf ){if _ ,_gafga :=_egbfc [_gbbea ][_efaed ];
_gafga {continue ;};_fccag :=_gabcf [_efaed ];if _aceb {_df .Printf (" \u0020\u0020\u0020\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_fccag .String ());};for _deba :=_cfbf -1;_deba >=0;_deba --{if _fccag ._efaf {break ;};_afaf :=_ffca [_deba ];_bbab ,_aebb :=_afaf [_efaed ];
if !_aebb {break ;};if _bbab .Urx !=_fccag .Urx {break ;};_fccag ._efaf =_bbab ._efaf ;_fccag .Lly =_bbab .Lly ;if _aceb {_df .Printf ("\u0020\u0020\u0020\u0020  \u0020\u0020\u0076\u003d\u0025\u0073\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_bbab .String (),_fccag .String ());
};_egbfc [_bbab .Lly ][_bbab .Llx ]=struct{}{};};if _cfbf ==0{_fccag ._efaf =true ;};if _fccag .complete (){_aabd [_gbbea ][_efaed ]=_fccag ;};};};_beag :=gridTiling {PdfRectangle :_bffff ,_babea :_cdbd (_aabd ),_bgfdg :_bebda (_aabd ),_cgcefa :_aabd };
_beag .log ("\u0043r\u0065\u0061\u0074\u0065\u0064");return _beag ;};

// Extractor stores and offers functionality for extracting content from PDF pages.
type Extractor struct{_af string ;_ff *_ec .PdfPageResources ;_ed _ec .PdfRectangle ;_ce *_ec .PdfRectangle ;_aaa map[string ]fontEntry ;_bd map[string ]textResult ;_bfe int64 ;_bb int ;_bdd *Options ;_ca *_bc .PdfObject ;_ge _bc .PdfObject ;};func _fbabg (_gfbb ,_egbbb _ag .Image )_ag .Image {_gcbg ,_fcdfa :=_egbbb .Bounds ().Size (),_gfbb .Bounds ().Size ();
_ecgec ,_cedbb :=_gcbg .X ,_gcbg .Y ;if _fcdfa .X > _ecgec {_ecgec =_fcdfa .X ;};if _fcdfa .Y > _cedbb {_cedbb =_fcdfa .Y ;};_dfebg :=_ag .Rect (0,0,_ecgec ,_cedbb );if _gcbg .X !=_ecgec ||_gcbg .Y !=_cedbb {_gcdbd :=_ag .NewRGBA (_dfebg );_ab .BiLinear .Scale (_gcdbd ,_dfebg ,_gfbb ,_egbbb .Bounds (),_ab .Over ,nil );
_egbbb =_gcdbd ;};if _fcdfa .X !=_ecgec ||_fcdfa .Y !=_cedbb {_bfaae :=_ag .NewRGBA (_dfebg );_ab .BiLinear .Scale (_bfaae ,_dfebg ,_gfbb ,_gfbb .Bounds (),_ab .Over ,nil );_gfbb =_bfaae ;};_fdgdc :=_ag .NewRGBA (_dfebg );_ab .DrawMask (_fdgdc ,_dfebg ,_gfbb ,_ag .Point {},_egbbb ,_ag .Point {},_ab .Over );
return _fdgdc ;};func (_ecffa *textWord )bbox ()_ec .PdfRectangle {return _ecffa .PdfRectangle };func (_bcdgf *textPara )writeCellText (_gcdc _b .Writer ){for _bebe ,_fabg :=range _bcdgf ._dgff {_ebfd :=_fabg .text ();_gecf :=_fcde &&_fabg .endsInHyphen ()&&_bebe !=len (_bcdgf ._dgff )-1;
if _gecf {_ebfd =_bdaa (_ebfd );};_gcdc .Write ([]byte (_ebfd ));if !(_gecf ||_bebe ==len (_bcdgf ._dgff )-1){_gcdc .Write ([]byte (_bgecc (_fabg ._efeb ,_bcdgf ._dgff [_bebe +1]._efeb )));};};};func _gbbd (_gcfb *list ,_bbff *_da .Builder ,_beeac *string ){_aedb :=_cede (_gcfb ,_beeac );
_bbff .WriteString (_aedb );for _ ,_bdf :=range _gcfb ._dedg {_bgbd :=*_beeac +"\u0020\u0020\u0020";_gbbd (_bdf ,_bbff ,&_bgbd );};};func (_baga *textTable )computeBbox ()_ec .PdfRectangle {var _cfcd _ec .PdfRectangle ;_gafac :=false ;for _ffafe :=0;_ffafe < _baga ._gfae ;
_ffafe ++{for _fbgd :=0;_fbgd < _baga ._cfaac ;_fbgd ++{_gcdad :=_baga .get (_fbgd ,_ffafe );if _gcdad ==nil {continue ;};if !_gafac {_cfcd =_gcdad .PdfRectangle ;_gafac =true ;}else {_cfcd =_eed (_cfcd ,_gcdad .PdfRectangle );};};};return _cfcd ;};func (_agdg gridTiling )log (_bgdb string ){if !_aceb {return ;
};_fd .Log .Info ("\u0074i\u006ci\u006e\u0067\u003a\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0071",len (_agdg ._babea ),len (_agdg ._bgfdg ),_bgdb );_df .Printf ("\u0020\u0020\u0020l\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a",_agdg ._babea );
_df .Printf ("\u0020\u0020\u0020l\u006c\u0079\u003d\u0025\u002e\u0032\u0066\u000a",_agdg ._bgfdg );for _dgfce ,_abfbg :=range _agdg ._bgfdg {_bcbcc ,_cdbce :=_agdg ._cgcefa [_abfbg ];if !_cdbce {continue ;};_df .Printf ("%\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_dgfce ,_abfbg );
for _cecc ,_gedae :=range _agdg ._babea {_bbfc ,_becb :=_bcbcc [_gedae ];if !_becb {continue ;};_df .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_cecc ,_bbfc .String ());};};};func (_afeee rulingList )bbox ()_ec .PdfRectangle {var _aagcd _ec .PdfRectangle ;
if len (_afeee )==0{_fd .Log .Error ("r\u0075\u006c\u0069\u006e\u0067\u004ci\u0073\u0074\u002e\u0062\u0062\u006f\u0078\u003a\u0020n\u006f\u0020\u0072u\u006ci\u006e\u0067\u0073");return _ec .PdfRectangle {};};if _afeee [0]._aabaf ==_dfdf {_aagcd .Llx ,_aagcd .Urx =_afeee .secMinMax ();
_aagcd .Lly ,_aagcd .Ury =_afeee .primMinMax ();}else {_aagcd .Llx ,_aagcd .Urx =_afeee .primMinMax ();_aagcd .Lly ,_aagcd .Ury =_afeee .secMinMax ();};return _aagcd ;};type pathSection struct{_bdg []*subpath ;_gf .Color ;};func _cfbg (_ggfc *_ec .Image ,_ecda _gf .Color )_ag .Image {_baddd ,_cegaa :=int (_ggfc .Width ),int (_ggfc .Height );
_gced :=_ag .NewRGBA (_ag .Rect (0,0,_baddd ,_cegaa ));for _edege :=0;_edege < _cegaa ;_edege ++{for _aggee :=0;_aggee < _baddd ;_aggee ++{_badbe ,_fbegb :=_ggfc .ColorAt (_aggee ,_edege );if _fbegb !=nil {_fd .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_aggee ,_edege );
continue ;};_bggb ,_bbcd ,_abeaf ,_ :=_badbe .RGBA ();var _gbefg _gf .Color ;if _bggb +_bbcd +_abeaf ==0{_gbefg =_gf .Transparent ;}else {_gbefg =_ecda ;};_gced .Set (_aggee ,_edege ,_gbefg );};};return _gced ;};func _cgbe (_acab []*textLine )map[float64 ][]*textLine {_e .Slice (_acab ,func (_bbee ,_adcf int )bool {return _acab [_bbee ]._efeb < _acab [_adcf ]._efeb });
_acbac :=map[float64 ][]*textLine {};for _ ,_adbe :=range _acab {_baega :=_dbgcd (_adbe );_baega =_g .Round (_baega );_acbac [_baega ]=append (_acbac [_baega ],_adbe );};return _acbac ;};func (_fdba *wordBag )scanBand (_beba string ,_eafg *wordBag ,_cgac func (_gcbd *wordBag ,_baeb *textWord )bool ,_afed ,_efg ,_agedd float64 ,_fbba ,_eddf bool )int {_cfag :=_eafg ._bfca ;
var _afff map[int ]map[*textWord ]struct{};if !_fbba {_afff =_fdba .makeRemovals ();};_cdeb :=_dcca *_cfag ;_gdef :=0;for _ ,_baag :=range _fdba .depthBand (_afed -_cdeb ,_efg +_cdeb ){if len (_fdba ._aedg [_baag ])==0{continue ;};for _ ,_ddab :=range _fdba ._aedg [_baag ]{if !(_afed -_cdeb <=_ddab ._gcca &&_ddab ._gcca <=_efg +_cdeb ){continue ;
};if !_cgac (_eafg ,_ddab ){continue ;};_acba :=2.0*_g .Abs (_ddab ._ggdfd -_eafg ._bfca )/(_ddab ._ggdfd +_eafg ._bfca );_eebf :=_g .Max (_ddab ._ggdfd /_eafg ._bfca ,_eafg ._bfca /_ddab ._ggdfd );_cfde :=_g .Min (_acba ,_eebf );if _agedd > 0&&_cfde > _agedd {continue ;
};if _eafg .blocked (_ddab ){continue ;};if !_fbba {_eafg .pullWord (_ddab ,_baag ,_afff );};_gdef ++;if !_eddf {if _ddab ._gcca < _afed {_afed =_ddab ._gcca ;};if _ddab ._gcca > _efg {_efg =_ddab ._gcca ;};};if _fbba {break ;};};};if !_fbba {_fdba .applyRemovals (_afff );
};return _gdef ;};func _bfdda (_fgag _ec .PdfRectangle ,_deee ,_fbebg ,_bfedg ,_daac *ruling )gridTile {_dcgac :=_fgag .Llx ;_cacfg :=_fgag .Urx ;_eadeg :=_fgag .Lly ;_cdf :=_fgag .Ury ;return gridTile {PdfRectangle :_fgag ,_edbd :_deee !=nil &&_deee .encloses (_eadeg ,_cdf ),_dbfef :_fbebg !=nil &&_fbebg .encloses (_eadeg ,_cdf ),_efaf :_bfedg !=nil &&_bfedg .encloses (_dcgac ,_cacfg ),_faeaf :_daac !=nil &&_daac .encloses (_dcgac ,_cacfg )};
};const (_bfa ="\u0045\u0052R\u004f\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u002c\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";
_bbd ="\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0043a\u006e\u0027\u0074 g\u0065\u0074\u0020\u0066\u006f\u006et\u0020\u0070\u0072\u006f\u0070\u0065\u0072\u0074\u0069\u0065\u0073\u002c\u0020\u0066\u006fn\u0074\u0020\u006e\u006f\u0074\u0020\u0066\u006fu\u006e\u0064";
_dc ="\u0045\u0052\u0052O\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0067\u0065\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u0073\u0074\u0072\u0065\u0061\u006d\u002c\u0020\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";);
func _bcba (_bege float64 )int {var _fcff int ;if _bege >=0{_fcff =int (_bege /_dgee );}else {_fcff =int (_bege /_dgee )-1;};return _fcff ;};func (_bbgb *wordBag )sort (){for _ ,_gega :=range _bbgb ._aedg {_e .Slice (_gega ,func (_fad ,_cgee int )bool {return _bbeb (_gega [_fad ],_gega [_cgee ])< 0});
};};func (_gfcc lineRuling )asRuling ()(*ruling ,bool ){_adde :=ruling {_aabaf :_gfcc ._edcbd ,Color :_gfcc .Color ,_ggfd :_ffda };switch _gfcc ._edcbd {case _cebaac :_adde ._ggda =_gfcc .xMean ();_adde ._afbbf =_g .Min (_gfcc ._bcbg .Y ,_gfcc ._dbbeg .Y );
_adde ._gdgd =_g .Max (_gfcc ._bcbg .Y ,_gfcc ._dbbeg .Y );case _dfdf :_adde ._ggda =_gfcc .yMean ();_adde ._afbbf =_g .Min (_gfcc ._bcbg .X ,_gfcc ._dbbeg .X );_adde ._gdgd =_g .Max (_gfcc ._bcbg .X ,_gfcc ._dbbeg .X );default:_fd .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_gfcc ._edcbd );
return nil ,false ;};return &_adde ,true ;};type fontEntry struct{_ggec *_ec .PdfFont ;_aeac int64 ;};

// Len returns the number of TextMarks in `ma`.
func (_ace *TextMarkArray )Len ()int {if _ace ==nil {return 0;};return len (_ace ._ggc );};

// PageFonts represents extracted fonts on a PDF page.
type PageFonts struct{Fonts []Font ;};type rulingKind int ;func (_bcdf *textObject )getFontDict (_ddbgf string )(_gage _bc .PdfObject ,_gbgf error ){_acgf :=_bcdf ._cfe ;if _acgf ==nil {_fd .Log .Debug ("g\u0065\u0074\u0046\u006f\u006e\u0074D\u0069\u0063\u0074\u002e\u0020\u004eo\u0020\u0072\u0065\u0073\u006f\u0075\u0072c\u0065\u0073\u002e\u0020\u006e\u0061\u006d\u0065\u003d\u0025#\u0071",_ddbgf );
return nil ,nil ;};_gage ,_dece :=_acgf .GetFontByName (_bc .PdfObjectName (_ddbgf ));if !_dece {_fd .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0067\u0065t\u0046\u006f\u006et\u0044\u0069\u0063\u0074\u003a\u0020\u0046\u006f\u006et \u006e\u006f\u0074 \u0066\u006fu\u006e\u0064\u003a\u0020\u006e\u0061m\u0065\u003d%\u0023\u0071",_ddbgf );
return nil ,_f .New ("f\u006f\u006e\u0074\u0020no\u0074 \u0069\u006e\u0020\u0072\u0065s\u006f\u0075\u0072\u0063\u0065\u0073");};return _gage ,nil ;};func (_ccgf paraList )toTextMarks ()[]TextMark {_gabf :=0;var _egbf []TextMark ;for _egefb ,_adca :=range _ccgf {if _adca ._baca {continue ;
};_geefa :=_adca .toTextMarks (&_gabf );_egbf =append (_egbf ,_geefa ...);if _egefb !=len (_ccgf )-1{if _fafe (_adca ,_ccgf [_egefb +1]){_egbf =_egef (_egbf ,&_gabf ,"\u0020");}else {_egbf =_egef (_egbf ,&_gabf ,"\u000a");_egbf =_egef (_egbf ,&_gabf ,"\u000a");
};};};_egbf =_egef (_egbf ,&_gabf ,"\u000a");_egbf =_egef (_egbf ,&_gabf ,"\u000a");return _egbf ;};func (_ccga *wordBag )minDepth ()float64 {return _ccga ._dffb -(_ccga .Ury -_ccga ._bfca )};

// String returns a human readable description of `ss`.
func (_cfb *shapesState )String ()string {return _df .Sprintf ("\u007b\u0025\u0064\u0020su\u0062\u0070\u0061\u0074\u0068\u0073\u0020\u0066\u0072\u0065\u0073\u0068\u003d\u0025t\u007d",len (_cfb ._eabf ),_cfb ._faba );};type ruling struct{_aabaf rulingKind ;
_ggfd markKind ;_gf .Color ;_ggda float64 ;_afbbf float64 ;_gdgd float64 ;_faac float64 ;};func _afa (_fecg ,_efeff *textPara )bool {return _dfcf (_fecg ._ceff ,_efeff ._ceff )};func (_gedcb *textWord )appendMark (_eefae *textMark ,_bbdc _ec .PdfRectangle ){_gedcb ._egfgg =append (_gedcb ._egfgg ,_eefae );
_gedcb .PdfRectangle =_eed (_gedcb .PdfRectangle ,_eefae .PdfRectangle );if _eefae ._cgdb > _gedcb ._ggdfd {_gedcb ._ggdfd =_eefae ._cgdb ;};_gedcb ._gcca =_bbdc .Ury -_gedcb .PdfRectangle .Lly ;};func (_bbfeca paraList )findGridTables (_fggc []gridTiling )[]*textTable {if _abfa {_fd .Log .Info ("\u0066i\u006e\u0064\u0047\u0072\u0069\u0064\u0054\u0061\u0062\u006c\u0065s\u003a\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073",len (_bbfeca ));
for _afcc ,_dcgef :=range _bbfeca {_df .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_afcc ,_dcgef );};};var _baecg []*textTable ;for _bcfd ,_gafa :=range _fggc {_cgcf ,_fdbca :=_bbfeca .findTableGrid (_gafa );if _cgcf !=nil {_cgcf .log (_df .Sprintf ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0057\u0069\u0074\u0068\u0047\u0072\u0069\u0064\u0073\u003a\u0020%\u0064",_bcfd ));
_baecg =append (_baecg ,_cgcf );_cgcf .markCells ();};for _cdfe :=range _fdbca {_cdfe ._dedd =true ;};};if _abfa {_fd .Log .Info ("\u0066i\u006e\u0064\u0047\u0072i\u0064\u0054\u0061\u0062\u006ce\u0073:\u0020%\u0064\u0020\u0074\u0061\u0062\u006c\u0065s",len (_baecg ));
};return _baecg ;};func _gcfg (_fgbb map[float64 ]gridTile )[]float64 {_faca :=make ([]float64 ,0,len (_fgbb ));for _efdc :=range _fgbb {_faca =append (_faca ,_efdc );};_e .Float64s (_faca );return _faca ;};func _bebdc (_gaeba ,_afede ,_eagg float64 )rulingKind {if _gaeba >=_eagg &&_aegb (_afede ,_gaeba ){return _dfdf ;
};if _afede >=_eagg &&_aegb (_gaeba ,_afede ){return _cebaac ;};return _adabg ;};func (_fbe *imageExtractContext )extractInlineImage (_gcc *_dd .ContentStreamInlineImage ,_gag _dd .GraphicsState ,_eec *_ec .PdfPageResources )error {_abbe ,_gce :=_gcc .ToImage (_eec );
if _gce !=nil {return _gce ;};_fca ,_gce :=_gcc .GetColorSpace (_eec );if _gce !=nil {return _gce ;};if _fca ==nil {_fca =_ec .NewPdfColorspaceDeviceGray ();};_bfcg ,_gce :=_fca .ImageToRGB (*_abbe );if _gce !=nil {return _gce ;};_bgc :=ImageMark {Image :&_bfcg ,Width :_gag .CTM .ScalingFactorX (),Height :_gag .CTM .ScalingFactorY (),Angle :_gag .CTM .Angle ()};
_bgc .X ,_bgc .Y =_gag .CTM .Translation ();_fbe ._feg =append (_fbe ._feg ,_bgc );_fbe ._dce ++;return nil ;};

// PageTextOptions holds various options available in extraction process.
type PageTextOptions struct{_efa bool ;_dbac bool ;};func (_dgfge *wordBag )highestWord (_dde int ,_baef ,_bbg float64 )*textWord {for _ ,_acde :=range _dgfge ._aedg [_dde ]{if _baef <=_acde ._gcca &&_acde ._gcca <=_bbg {return _acde ;};};return nil ;};
type shapesState struct{_ebea _aa .Matrix ;_bfgb _aa .Matrix ;_eabf []*subpath ;_faba bool ;_fdggg _aa .Point ;_bbe *textObject ;};

// ExtractPageText returns the text contents of `e` (an Extractor for a page) as a PageText.
// TODO(peterwilliams97): The stats complicate this function signature and aren't very useful.
//
//	Replace with a function like Extract() (*PageText, error)
func (_fbb *Extractor )ExtractPageText ()(*PageText ,int ,int ,error ){_ebe ,_edc ,_ged ,_agcf :=_fbb .extractPageText (_fbb ._af ,_fbb ._ff ,_aa .IdentityMatrix (),0);if _agcf !=nil &&_agcf !=_ec .ErrColorOutOfRange {return nil ,0,0,_agcf ;};if _fbb ._bdd !=nil {_ebe ._gbfe ._dbac =_fbb ._bdd .UseSimplerExtractionProcess ;
};_ebe .computeViews ();_agcf =_cdfc (_ebe );if _agcf !=nil {return nil ,0,0,_agcf ;};if _fbb ._bdd !=nil {if _fbb ._bdd .ApplyCropBox &&_fbb ._ce !=nil {_ebe .ApplyArea (*_fbb ._ce );};_ebe ._gbfe ._efa =_fbb ._bdd .DisableDocumentTags ;};return _ebe ,_edc ,_ged ,nil ;
};func _baeag (_gfgd []pathSection )rulingList {_feba (_gfgd );if _bcbd {_fd .Log .Info ("\u006da\u006b\u0065\u0046\u0069l\u006c\u0052\u0075\u006c\u0069n\u0067s\u003a \u0025\u0064\u0020\u0066\u0069\u006c\u006cs",len (_gfgd ));};var _cggg rulingList ;for _ ,_aceba :=range _gfgd {for _ ,_cddd :=range _aceba ._bdg {if !_cddd .isQuadrilateral (){if _bcbd {_fd .Log .Error ("!\u0069s\u0051\u0075\u0061\u0064\u0072\u0069\u006c\u0061t\u0065\u0072\u0061\u006c: \u0025\u0073",_cddd );
};continue ;};if _fbeg ,_ddddc :=_cddd .makeRectRuling (_aceba .Color );_ddddc {_cggg =append (_cggg ,_fbeg );}else {if _begb {_fd .Log .Error ("\u0021\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0073",_cddd );
};};};};if _bcbd {_fd .Log .Info ("\u006d\u0061\u006b\u0065Fi\u006c\u006c\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0073",_cggg .String ());};return _cggg ;};func _dabac (_bcad float64 )float64 {return _cbeb *_g .Round (_bcad /_cbeb )};
func _cdfc (_gdedf *PageText )error {_bbggc :=_bf .GetLicenseKey ();if _bbggc !=nil &&_bbggc .IsLicensed ()||_de {return nil ;};_df .Printf ("\u0055\u006e\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0064\u0020c\u006f\u0070\u0079\u0020\u006f\u0066\u0020\u0055\u006e\u0069P\u0044\u0046\u000a");
_df .Println ("-\u0020\u0047\u0065\u0074\u0020\u0061\u0020\u0066\u0072e\u0065\u0020\u0074\u0072\u0069\u0061\u006c l\u0069\u0063\u0065\u006es\u0065\u0020\u006f\u006e\u0020\u0068\u0074\u0074\u0070s:\u002f\u002fu\u006e\u0069\u0064\u006f\u0063\u002e\u0069\u006f");
return _f .New ("\u0075\u006e\u0069\u0070d\u0066\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0020c\u006fd\u0065\u0020\u0072\u0065\u0071\u0075\u0069r\u0065\u0064");};func _bdge (_cabda []TextMark ,_gafb *TextTable )[]TextMark {var _abgfc []TextMark ;
for _ ,_ffebee :=range _cabda {_ffebee ._aede =true ;_ffebee ._cdc =_gafb ;_abgfc =append (_abgfc ,_ffebee );};return _abgfc ;};func (_fead *structElement )parseStructElement (_caaa _bc .PdfObject ){_dgge ,_edaa :=_bc .GetDict (_caaa );if !_edaa {_fd .Log .Debug ("\u0070\u0061\u0072\u0073\u0065\u0053\u0074\u0072u\u0063\u0074\u0045le\u006d\u0065\u006e\u0074\u003a\u0020d\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u006f\u0062\u006a\u0065\u0063t\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u002e");
return ;};_deac :=_dgge .Get ("\u0053");_dbb :=_dgge .Get ("\u0050\u0067");_cedb :="";if _deac !=nil {_cedb =_deac .String ();};_gfeba :=_dgge .Get ("\u004b");_fead ._fdcf =_cedb ;_fead ._cdebc =_dbb ;switch _beaef :=_gfeba .(type ){case *_bc .PdfObjectInteger :_fead ._fdcf =_cedb ;
_fead ._fcda =int64 (*_beaef );_fead ._cdebc =_dbb ;case *_bc .PdfObjectReference :_afgfc :=*_bc .MakeArray (_beaef );var _cgcdb int64 =-1;_fead ._fcda =_cgcdb ;if _afgfc .Len ()==1{_gbb :=_afgfc .Elements ()[0];_egec ,_abgfb :=_gbb .(*_bc .PdfObjectInteger );
if _abgfb {_cgcdb =int64 (*_egec );_fead ._fcda =_cgcdb ;_fead ._fdcf =_cedb ;_fead ._cdebc =_dbb ;return ;};};_efef :=[]structElement {};for _ ,_ffdf :=range _afgfc .Elements (){_fcgdf ,_ddbd :=_ffdf .(*_bc .PdfObjectInteger );if _ddbd {_cgcdb =int64 (*_fcgdf );
_fead ._fcda =_cgcdb ;_fead ._fdcf =_cedb ;}else {_bfadf :=&structElement {};_bfadf .parseStructElement (_ffdf );_efef =append (_efef ,*_bfadf );};_cgcdb =-1;};_fead ._bfee =_efef ;case *_bc .PdfObjectArray :_gffc :=_gfeba .(*_bc .PdfObjectArray );var _bcdd int64 =-1;
_fead ._fcda =_bcdd ;if _gffc .Len ()==1{_edg :=_gffc .Elements ()[0];_gagf ,_deeaa :=_edg .(*_bc .PdfObjectInteger );if _deeaa {_bcdd =int64 (*_gagf );_fead ._fcda =_bcdd ;_fead ._fdcf =_cedb ;_fead ._cdebc =_dbb ;return ;};};_bgde :=[]structElement {};
for _ ,_ebcb :=range _gffc .Elements (){_gfca ,_bcfa :=_ebcb .(*_bc .PdfObjectInteger );if _bcfa {_bcdd =int64 (*_gfca );_fead ._fcda =_bcdd ;_fead ._fdcf =_cedb ;_fead ._cdebc =_dbb ;}else {_bgfeg :=&structElement {};_bgfeg .parseStructElement (_ebcb );
_bgde =append (_bgde ,*_bgfeg );};_bcdd =-1;};_fead ._bfee =_bgde ;};};func (_dddef paraList )findTables (_acebf []gridTiling )[]*textTable {_dddef .addNeighbours ();_e .Slice (_dddef ,func (_edbfd ,_bdgae int )bool {return _ffbg (_dddef [_edbfd ],_dddef [_bdgae ])< 0});
var _bafgf []*textTable ;if _eebbb {_bbaf :=_dddef .findGridTables (_acebf );_bafgf =append (_bafgf ,_bbaf ...);};if _efbg {_efabe :=_dddef .findTextTables ();_bafgf =append (_bafgf ,_efabe ...);};return _bafgf ;};func _fabd (_bfag *wordBag ,_ebdcb *textWord ,_dfgde float64 )bool {return _bfag .Urx <=_ebdcb .Llx &&_ebdcb .Llx < _bfag .Urx +_dfgde ;
};func _ccce (_abbeg *list )[]*textLine {for _ ,_bfed :=range _abbeg ._dedg {switch _bfed ._bdabd {case "\u004c\u0042\u006fd\u0079":if len (_bfed ._dffa )!=0{return _bfed ._dffa ;};return _ccce (_bfed );case "\u0053\u0070\u0061\u006e":return _bfed ._dffa ;
case "I\u006e\u006c\u0069\u006e\u0065\u0053\u0068\u0061\u0070\u0065":return _bfed ._dffa ;};};return nil ;};func (_beaf gridTiling )complete ()bool {for _ ,_acecbf :=range _beaf ._cgcefa {for _ ,_agbde :=range _acecbf {if !_agbde .complete (){return false ;
};};};return true ;};func _fae (_fac []Font ,_fff string )bool {for _ ,_bg :=range _fac {if _bg .FontName ==_fff {return true ;};};return false ;};func _bgffd (_abd _ec .PdfRectangle ,_cfgca []*textLine )*textPara {return &textPara {PdfRectangle :_abd ,_dgff :_cfgca };
};func (_fbbf *wordBag )firstReadingIndex (_ebce int )int {_bdcf :=_fbbf .firstWord (_ebce )._ggdfd ;_eagd :=float64 (_ebce +1)*_dgee ;_dbdf :=_eagd +_gfda *_bdcf ;_febb :=_ebce ;for _ ,_dage :=range _fbbf .depthBand (_eagd ,_dbdf ){if _bbeb (_fbbf .firstWord (_dage ),_fbbf .firstWord (_febb ))< 0{_febb =_dage ;
};};return _febb ;};func (_eeecc paraList )merge ()*textPara {_fd .Log .Trace ("\u006d\u0065\u0072\u0067\u0065:\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_eeecc ));
if len (_eeecc )==0{return nil ;};_eeecc .sortReadingOrder ();_eddga :=_eeecc [0].PdfRectangle ;_dbcg :=_eeecc [0]._dgff ;for _ ,_ddgga :=range _eeecc [1:]{_eddga =_eed (_eddga ,_ddgga .PdfRectangle );_dbcg =append (_dbcg ,_ddgga ._dgff ...);};return _bgffd (_eddga ,_dbcg );
};func (_cebce rulingList )findPrimSec (_degdg ,_fageb float64 )*ruling {for _ ,_acec :=range _cebce {if _fdeb (_acec ._ggda -_degdg )&&_acec ._afbbf -_gbfb <=_fageb &&_fageb <=_acec ._gdgd +_gbfb {return _acec ;};};return nil ;};func _fgab (_ebde _ec .PdfRectangle ,_bfea bounded )float64 {return _ebde .Ury -_bfea .bbox ().Lly };
func (_ggfda *textTable )logComposite (_deeac string ){if !_abfa {return ;};_fd .Log .Info ("\u007e~\u007eP\u0061\u0072\u0061\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_ggfda ._cfaac ,_ggfda ._gfae ,_deeac );_df .Printf ("\u0025\u0035\u0073 \u007c","");
for _ebegf :=0;_ebegf < _ggfda ._cfaac ;_ebegf ++{_df .Printf ("\u0025\u0033\u0064 \u007c",_ebegf );};_df .Println ("");_df .Printf ("\u0025\u0035\u0073 \u002b","");for _bfcc :=0;_bfcc < _ggfda ._cfaac ;_bfcc ++{_df .Printf ("\u0025\u0033\u0073 \u002b","\u002d\u002d\u002d");
};_df .Println ("");for _agge :=0;_agge < _ggfda ._gfae ;_agge ++{_df .Printf ("\u0025\u0035\u0064 \u007c",_agge );for _afbba :=0;_afbba < _ggfda ._cfaac ;_afbba ++{_gacdd ,_ :=_ggfda ._edeab [_dfded (_afbba ,_agge )].parasBBox ();_df .Printf ("\u0025\u0033\u0064 \u007c",len (_gacdd ));
};_df .Println ("");};_fd .Log .Info ("\u007e~\u007eT\u0065\u0078\u0074\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_ggfda ._cfaac ,_ggfda ._gfae ,_deeac );_df .Printf ("\u0025\u0035\u0073 \u007c","");for _cfecd :=0;_cfecd < _ggfda ._cfaac ;
_cfecd ++{_df .Printf ("\u0025\u0031\u0032\u0064\u0020\u007c",_cfecd );};_df .Println ("");_df .Printf ("\u0025\u0035\u0073 \u002b","");for _bbdb :=0;_bbdb < _ggfda ._cfaac ;_bbdb ++{_df .Print ("\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d-\u002d\u002d\u002d\u002b");
};_df .Println ("");for _edcg :=0;_edcg < _ggfda ._gfae ;_edcg ++{_df .Printf ("\u0025\u0035\u0064 \u007c",_edcg );for _fdfg :=0;_fdfg < _ggfda ._cfaac ;_fdfg ++{_cbagb ,_ :=_ggfda ._edeab [_dfded (_fdfg ,_edcg )].parasBBox ();_affa :="";_ddbge :=_cbagb .merge ();
if _ddbge !=nil {_affa =_ddbge .text ();};_affa =_df .Sprintf ("\u0025\u0071",_gebg (_affa ,12));_affa =_affa [1:len (_affa )-1];_df .Printf ("\u0025\u0031\u0032\u0073\u0020\u007c",_affa );};_df .Println ("");};};func (_fcg *stateStack )push (_gccf *textState ){_gde :=*_gccf ;
*_fcg =append (*_fcg ,&_gde )};func (_agde paraList )eventNeighbours (_daaf []event )map[*textPara ][]int {_e .Slice (_daaf ,func (_abecd ,_ffadd int )bool {_fefgcc ,_fgdd :=_daaf [_abecd ],_daaf [_ffadd ];_eccb ,_gcdb :=_fefgcc ._fgfgf ,_fgdd ._fgfgf ;
if _eccb !=_gcdb {return _eccb < _gcdb ;};if _fefgcc ._gacgba !=_fgdd ._gacgba {return _fefgcc ._gacgba ;};return _abecd < _ffadd ;});_cbade :=make (map[int ]intSet );_bfecf :=make (intSet );for _ ,_dagea :=range _daaf {if _dagea ._gacgba {_cbade [_dagea ._eada ]=make (intSet );
for _dcdg :=range _bfecf {if _dcdg !=_dagea ._eada {_cbade [_dagea ._eada ].add (_dcdg );_cbade [_dcdg ].add (_dagea ._eada );};};_bfecf .add (_dagea ._eada );}else {_bfecf .del (_dagea ._eada );};};_fccbf :=map[*textPara ][]int {};for _faaf ,_gdgef :=range _cbade {_fcbff :=_agde [_faaf ];
if len (_gdgef )==0{_fccbf [_fcbff ]=nil ;continue ;};_bgae :=make ([]int ,len (_gdgef ));_ggcea :=0;for _dfeec :=range _gdgef {_bgae [_ggcea ]=_dfeec ;_ggcea ++;};_fccbf [_fcbff ]=_bgae ;};return _fccbf ;};func (_cfgb *textTable )compositeRowCorridors ()map[int ][]float64 {_cacfgd :=make (map[int ][]float64 ,_cfgb ._gfae );
if _abfa {_fd .Log .Info ("c\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0052\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073:\u0020h\u003d\u0025\u0064",_cfgb ._gfae );};for _dcab :=1;_dcab < _cfgb ._gfae ;_dcab ++{var _cdfea []compositeCell ;
for _ffae :=0;_ffae < _cfgb ._cfaac ;_ffae ++{if _aeabd ,_fgfg :=_cfgb ._edeab [_dfded (_ffae ,_dcab )];_fgfg {_cdfea =append (_cdfea ,_aeabd );};};if len (_cdfea )==0{continue ;};_dgdeb :=_edfc (_cdfea );_cacfgd [_dcab ]=_dgdeb ;if _abfa {_df .Printf ("\u0020\u0020\u0020\u0025\u0032\u0064\u003a\u0020\u00256\u002e\u0032\u0066\u000a",_dcab ,_dgdeb );
};};return _cacfgd ;};func (_fggfc paraList )xNeighbours (_eaafg float64 )map[*textPara ][]int {_edbbb :=make ([]event ,2*len (_fggfc ));if _eaafg ==0{for _cbcfb ,_dgdc :=range _fggfc {_edbbb [2*_cbcfb ]=event {_dgdc .Llx ,true ,_cbcfb };_edbbb [2*_cbcfb +1]=event {_dgdc .Urx ,false ,_cbcfb };
};}else {for _dfcc ,_cacbe :=range _fggfc {_edbbb [2*_dfcc ]=event {_cacbe .Llx -_eaafg *_cacbe .fontsize (),true ,_dfcc };_edbbb [2*_dfcc +1]=event {_cacbe .Urx +_eaafg *_cacbe .fontsize (),false ,_dfcc };};};return _fggfc .eventNeighbours (_edbbb );};
func (_gcf *textObject )setTextRenderMode (_dfdb int ){if _gcf ==nil {return ;};_gcf ._acad ._ffba =RenderMode (_dfdb );};func _ffbg (_fbebd ,_ecec bounded )float64 {_bbbb :=_bbeb (_fbebd ,_ecec );if !_fdeb (_bbbb ){return _bbbb ;};return _eaea (_fbebd ,_ecec );
};func _abcgd (_efdf _ec .PdfRectangle )*ruling {return &ruling {_aabaf :_dfdf ,_ggda :_efdf .Lly ,_afbbf :_efdf .Llx ,_gdgd :_efdf .Urx };};func _egef (_ffga []TextMark ,_gdcb *int ,_gfbc string )[]TextMark {_eafb :=_acb ;_eafb .Text =_gfbc ;return _gadg (_ffga ,_gdcb ,_eafb );
};func _gccfe (_dgde []*textLine ,_dedgc map[float64 ][]*textLine ,_daec []float64 ,_bffd int ,_addd ,_gcfa float64 )[]*list {_dcbce :=[]*list {};_ecdb :=_bffd ;_bffd =_bffd +1;_gdbc :=_daec [_ecdb ];_gagbe :=_dedgc [_gdbc ];_gbbdd :=_adaa (_gagbe ,_gcfa ,_addd );
for _gdefa ,_aefbd :=range _gbbdd {var _cgcc float64 ;_agaa :=[]*list {};_cgcef :=_aefbd ._efeb ;_cabc :=_gcfa ;if _gdefa < len (_gbbdd )-1{_cabc =_gbbdd [_gdefa +1]._efeb ;};if _bffd < len (_daec ){_agaa =_gccfe (_dgde ,_dedgc ,_daec ,_bffd ,_cgcef ,_cabc );
};_cgcc =_cabc ;if len (_agaa )> 0{_bdbf :=_agaa [0];if len (_bdbf ._dffa )> 0{_cgcc =_bdbf ._dffa [0]._efeb ;};};_gcfff :=[]*textLine {_aefbd };_gbed :=_bcccdf (_aefbd ,_dgde ,_daec ,_cgcef ,_cgcc );_gcfff =append (_gcfff ,_gbed ...);_ceac :=_ecgd (_gcfff ,"\u0062\u0075\u006c\u006c\u0065\u0074",_agaa );
_ceac ._bebf =_agag (_gcfff ,"");_dcbce =append (_dcbce ,_ceac );};return _dcbce ;};func (_gggf rulingList )mergePrimary ()float64 {_daef :=_gggf [0]._ggda ;for _ ,_fdce :=range _gggf [1:]{_daef +=_fdce ._ggda ;};return _daef /float64 (len (_gggf ));};


// TableCell is a cell in a TextTable.
type TableCell struct{_ec .PdfRectangle ;

// Text is the extracted text.
Text string ;

// Marks returns the TextMarks corresponding to the text in Text.
Marks TextMarkArray ;};func (_gcg *textObject )setFont (_gbec string ,_gab float64 )error {if _gcg ==nil {return nil ;};_gcg ._acad ._aed =_gab ;_aegc ,_fcag :=_gcg .getFont (_gbec );if _fcag !=nil {return _fcag ;};_gcg ._acad ._bcf =_aegc ;return nil ;
};func _dee (_dga *_dd .ContentStreamOperation )(float64 ,error ){if len (_dga .Params )!=1{_edd :=_f .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_dga .Operand ,1,len (_dga .Params ),_dga .Params );
return 0.0,_edd ;};return _bc .GetNumberAsFloat (_dga .Params [0]);};func _egbd (_fgcg func (*wordBag ,*textWord ,float64 )bool ,_abgc float64 )func (*wordBag ,*textWord )bool {return func (_dacf *wordBag ,_dabb *textWord )bool {return _fgcg (_dacf ,_dabb ,_abgc )};
};type textMark struct{_ec .PdfRectangle ;_gcdg int ;_fcffb string ;_gcef string ;_acfa *_ec .PdfFont ;_cgdb float64 ;_aabg float64 ;_fcaga _aa .Matrix ;_fbcc _aa .Point ;_cbbge _ec .PdfRectangle ;_gagdd _gf .Color ;_efad _gf .Color ;_gbdaa _bc .PdfObject ;
_abgcc []string ;Tw float64 ;Th float64 ;_fcfe int ;_geccg int ;};type textWord struct{_ec .PdfRectangle ;_gcca float64 ;_ddbga string ;_egfgg []*textMark ;_ggdfd float64 ;_bbcc bool ;};func (_cacff *wordBag )arrangeText ()*textPara {_cacff .sort ();if _ege {_cacff .removeDuplicates ();
};var _fbaa []*textLine ;for _ ,_ebbbf :=range _cacff .depthIndexes (){for !_cacff .empty (_ebbbf ){_bfdd :=_cacff .firstReadingIndex (_ebbbf );_fgcgf :=_cacff .firstWord (_bfdd );_bafdd :=_gbfg (_cacff ,_bfdd );_efaa :=_fgcgf ._ggdfd ;_ecbda :=_fgcgf ._gcca -_dcca *_efaa ;
_ecedc :=_fgcgf ._gcca +_dcca *_efaa ;_cacaa :=_eadc *_efaa ;_dgcf :=_eddba *_efaa ;_cfcc :for {var _adfg *textWord ;_gbfc :=0;for _ ,_gbbde :=range _cacff .depthBand (_ecbda ,_ecedc ){_ddbeb :=_cacff .highestWord (_gbbde ,_ecbda ,_ecedc );if _ddbeb ==nil {continue ;
};_abbb :=_fgfe (_ddbeb ,_bafdd ._fdec [len (_bafdd ._fdec )-1]);if _abbb < -_dgcf {break _cfcc ;};if _abbb > _cacaa {continue ;};if _adfg !=nil &&_bbeb (_ddbeb ,_adfg )>=0{continue ;};_adfg =_ddbeb ;_gbfc =_gbbde ;};if _adfg ==nil {break ;};_bafdd .pullWord (_cacff ,_adfg ,_gbfc );
};_bafdd .markWordBoundaries ();_fbaa =append (_fbaa ,_bafdd );};};if len (_fbaa )==0{return nil ;};_e .Slice (_fbaa ,func (_caaf ,_fbdg int )bool {return _aagf (_fbaa [_caaf ],_fbaa [_fbdg ])< 0});_bec :=_bgffd (_cacff .PdfRectangle ,_fbaa );if _cbgad {_fd .Log .Info ("\u0061\u0072\u0072an\u0067\u0065\u0054\u0065\u0078\u0074\u0020\u0021\u0021\u0021\u0020\u0070\u0061\u0072\u0061\u003d\u0025\u0073",_bec .String ());
if _eaga {for _abae ,_ggea :=range _bec ._dgff {_df .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_abae ,_ggea .String ());if _faf {for _ecac ,_ggcd :=range _ggea ._fdec {_df .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_ecac ,_ggcd .String ());
for _effdb ,_baab :=range _ggcd ._egfgg {_df .Printf ("\u00251\u0032\u0064\u003a\u0020\u0025\u0073\n",_effdb ,_baab .String ());};};};};};};return _bec ;};

// ToText returns the page text as a single string.
// Deprecated: This function is deprecated and will be removed in a future major version. Please use
// Text() instead.
func (_fcgd PageText )ToText ()string {return _fcgd .Text ()};func (_gbcb *ruling )alignsPrimary (_cdece *ruling )bool {return _gbcb ._aabaf ==_cdece ._aabaf &&_g .Abs (_gbcb ._ggda -_cdece ._ggda )< _bbef *0.5;};func (_edgb *textTable )getRight ()paraList {_cebabb :=make (paraList ,_edgb ._gfae );
for _cdcef :=0;_cdcef < _edgb ._gfae ;_cdcef ++{_fdge :=_edgb .get (_edgb ._cfaac -1,_cdcef )._dcgfa ;if _fdge .taken (){return nil ;};_cebabb [_cdcef ]=_fdge ;};for _cbea :=0;_cbea < _edgb ._gfae -1;_cbea ++{if _cebabb [_cbea ]._abeb !=_cebabb [_cbea +1]{return nil ;
};};return _cebabb ;};

// RangeOffset returns the TextMarks in `ma` that overlap text[start:end] in the extracted text.
// These are tm: `start` <= tm.Offset + len(tm.Text) && tm.Offset < `end` where
// `start` and `end` are offsets in the extracted text.
// NOTE: TextMarks can contain multiple characters. e.g. "ffi" for the  ligature so the first and
// last elements of the returned TextMarkArray may only partially overlap text[start:end].
func (_defge *TextMarkArray )RangeOffset (start ,end int )(*TextMarkArray ,error ){if _defge ==nil {return nil ,_f .New ("\u006da\u003d\u003d\u006e\u0069\u006c");};if end < start {return nil ,_df .Errorf ("\u0065\u006e\u0064\u0020\u003c\u0020\u0073\u0074\u0061\u0072\u0074\u002e\u0020\u0052\u0061n\u0067\u0065\u004f\u0066\u0066\u0073\u0065\u0074\u0020\u006e\u006f\u0074\u0020d\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020\u0073\u0074\u0061\u0072t=\u0025\u0064\u0020\u0065\u006e\u0064\u003d\u0025\u0064\u0020",start ,end );
};_ggd :=len (_defge ._ggc );if _ggd ==0{return _defge ,nil ;};if start < _defge ._ggc [0].Offset {start =_defge ._ggc [0].Offset ;};if end > _defge ._ggc [_ggd -1].Offset +1{end =_defge ._ggc [_ggd -1].Offset +1;};_gbda :=_e .Search (_ggd ,func (_dab int )bool {return _defge ._ggc [_dab ].Offset +len (_defge ._ggc [_dab ].Text )-1>=start });
if !(0<=_gbda &&_gbda < _ggd ){_dfeb :=_df .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020\u0072\u0061\u006e\u0067\u0065\u002e\u0020\u0073\u0074\u0061\u0072\u0074\u003d%\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009 \u006c\u0061\u0073\u0074\u003d%\u0076",start ,_gbda ,_ggd ,_defge ._ggc [0],_defge ._ggc [_ggd -1]);
return nil ,_dfeb ;};_fab :=_e .Search (_ggd ,func (_ddaf int )bool {return _defge ._ggc [_ddaf ].Offset > end -1});if !(0<=_fab &&_fab < _ggd ){_fgac :=_df .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020r\u0061\u006e\u0067e\u002e\u0020\u0065n\u0064\u003d%\u0064\u0020\u0069\u0045\u006e\u0064=\u0025d \u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d\u0025\u0076",end ,_fab ,_ggd ,_defge ._ggc [0],_defge ._ggc [_ggd -1]);
return nil ,_fgac ;};if _fab <=_gbda {return nil ,_df .Errorf ("\u0069\u0045\u006e\u0064\u0020\u003c=\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003a\u0020\u0073\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u0065\u006ed\u003d\u0025\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020i\u0045n\u0064\u003d\u0025\u0064",start ,end ,_gbda ,_fab );
};return &TextMarkArray {_ggc :_defge ._ggc [_gbda :_fab ]},nil ;};type textPara struct{_ec .PdfRectangle ;_ceff _ec .PdfRectangle ;_dgff []*textLine ;_fcbe *textTable ;_dedd bool ;_baca bool ;_cgaab *textPara ;_dcgfa *textPara ;_cdcb *textPara ;_abeb *textPara ;
_cffce []list ;};

// Text gets the extracted text contained in `l`.
func (_eadd *list )Text ()string {_bdedd :=&_da .Builder {};_begd :="";_gbbd (_eadd ,_bdedd ,&_begd );return _bdedd .String ();};func _aagf (_dbfe ,_bfbfa bounded )float64 {_afbe :=_eaea (_dbfe ,_bfbfa );if !_fdeb (_afbe ){return _afbe ;};return _bbeb (_dbfe ,_bfbfa );
};func _dddefe (_dafd string )bool {for _ ,_degac :=range _dafd {if !_d .IsSpace (_degac ){return false ;};};return true ;};func (_eafbf paraList )sortTopoOrder (){_fceg :=_eafbf .topoOrder ();_eafbf .reorder (_fceg )};func (_eeec *textLine )bbox ()_ec .PdfRectangle {return _eeec .PdfRectangle };
func (_gge *stateStack )top ()*textState {if _gge .empty (){return nil ;};return (*_gge )[_gge .size ()-1];};func (_acaa *TextMarkArray )exists (_cfea TextMark )bool {for _ ,_eab :=range _acaa .Elements (){if _fa .DeepEqual (_cfea .DirectObject ,_eab .DirectObject )&&_fa .DeepEqual (_cfea .BBox ,_eab .BBox )&&_eab .Text ==_cfea .Text {return true ;
};};return false ;};func (_dcgb *imageExtractContext )extractFormImages (_eaa *_bc .PdfObjectName ,_dcaf _dd .GraphicsState ,_eeg *_ec .PdfPageResources )error {_dbd ,_cc :=_eeg .GetXObjectFormByName (*_eaa );if _cc !=nil {return _cc ;};if _dbd ==nil {return nil ;
};_ffc ,_cc :=_dbd .GetContentStream ();if _cc !=nil {return _cc ;};_bbb :=_dbd .Resources ;if _bbb ==nil {_bbb =_eeg ;};_cc =_dcgb .extractContentStreamImages (string (_ffc ),_bbb );if _cc !=nil {return _cc ;};_dcgb ._feb ++;return nil ;};func (_effc lineRuling )xMean ()float64 {return 0.5*(_effc ._bcbg .X +_effc ._dbbeg .X )};
func (_aedc *shapesState )drawRectangle (_dgfg ,_faa ,_dfeba ,_gbde float64 ){if _cgab {_cbaf :=_aedc .devicePoint (_dgfg ,_faa );_bccc :=_aedc .devicePoint (_dgfg +_dfeba ,_faa +_gbde );_bgeb :=_ec .PdfRectangle {Llx :_cbaf .X ,Lly :_cbaf .Y ,Urx :_bccc .X ,Ury :_bccc .Y };
_fd .Log .Info ("d\u0072a\u0077\u0052\u0065\u0063\u0074\u0061\u006e\u0067l\u0065\u003a\u0020\u00256.\u0032\u0066",_bgeb );};_aedc .newSubPath ();_aedc .moveTo (_dgfg ,_faa );_aedc .lineTo (_dgfg +_dfeba ,_faa );_aedc .lineTo (_dgfg +_dfeba ,_faa +_gbde );
_aedc .lineTo (_dgfg ,_faa +_gbde );_aedc .closePath ();};func _gbdf (_bbec []int )[]int {_dacc :=make ([]int ,len (_bbec ));for _gdeca ,_ccgfe :=range _bbec {_dacc [len (_bbec )-1-_gdeca ]=_ccgfe ;};return _dacc ;};var _ffff string ="\u0028\u003f\u0069\u0029\u005e\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028?\u003a\u0044\u007cM\u0029\u007c\u0044\u003f\u0043{\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028\u003f\u003a\u004c\u007c\u0043\u0029\u007cL\u003f\u0058\u007b\u0030\u002c\u0033}\u0029\u0028\u0049\u0028\u003f\u003a\u0056\u007c\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u005c\u0029\u007c\u005c\u002e\u0029\u007c\u005e\u005c\u0028\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028\u003f\u003aD\u007cM\u0029\u007c\u0044\u003f\u0043\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028?\u003a\u004c\u007c\u0043\u0029\u007c\u004c?\u0058\u007b0\u002c\u0033\u007d\u0029(\u0049\u0028\u003f\u003a\u0056|\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u005c\u0029";
func _ecgd (_gebae []*textLine ,_fdcba string ,_bedcb []*list )*list {return &list {_dffa :_gebae ,_bdabd :_fdcba ,_dedg :_bedcb };};var _bacfg *_c .Regexp =_c .MustCompile (_ffff +"\u007c"+_afbge );

// ImageMark represents an image drawn on a page and its position in device coordinates.
// All coordinates are in device coordinates.
type ImageMark struct{Image *_ec .Image ;

// Dimensions of the image as displayed in the PDF.
Width float64 ;Height float64 ;

// Position of the image in PDF coordinates (lower left corner).
X float64 ;Y float64 ;

// Angle in degrees, if rotated.
Angle float64 ;};func (_dddc *Extractor )extractPageText (_aga string ,_caa *_ec .PdfPageResources ,_cab _aa .Matrix ,_bbfe int )(*PageText ,int ,int ,error ){_fd .Log .Trace ("\u0065x\u0074\u0072\u0061\u0063t\u0050\u0061\u0067\u0065\u0054e\u0078t\u003a \u006c\u0065\u0076\u0065\u006c\u003d\u0025d",_bbfe );
_gda :=&PageText {_adcd :_dddc ._ed ,_ffeg :_dddc ._ca ,_egdef :_dddc ._ge };_ebd :=_dcf (_dddc ._ed );var _dbed stateStack ;_afg :=_bda (_dddc ,_caa ,_dd .GraphicsState {},&_ebd ,&_dbed );_geda :=shapesState {_bfgb :_cab ,_ebea :_aa .IdentityMatrix (),_bbe :_afg };
var _bab bool ;_beb :=-1;if _bbfe > _gege {_ebb :=_f .New ("\u0066\u006f\u0072\u006d s\u0074\u0061\u0063\u006b\u0020\u006f\u0076\u0065\u0072\u0066\u006c\u006f\u0077");_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0065\u0078\u0074\u0072\u0061\u0063\u0074\u0050\u0061\u0067\u0065\u0054\u0065\u0078\u0074\u002e\u0020\u0072\u0065\u0063u\u0072\u0073\u0069\u006f\u006e\u0020\u006c\u0065\u0076\u0065\u006c\u003d\u0025\u0064 \u0065r\u0072\u003d\u0025\u0076",_bbfe ,_ebb );
return _gda ,_ebd ._cca ,_ebd ._dcac ,_ebb ;};_bgd :=_dd .NewContentStreamParser (_aga );_ffcb ,_bede :=_bgd .Parse ();if _bede !=nil {_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020e\u0078\u0074\u0072a\u0063\u0074\u0050\u0061g\u0065\u0054\u0065\u0078\u0074\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bede );
return _gda ,_ebd ._cca ,_ebd ._dcac ,_bede ;};_gda ._ecc =_ffcb ;_caca :=_dd .NewContentStreamProcessor (*_ffcb );_caca .AddHandler (_dd .HandlerConditionEnumAllOperands ,"",func (_gac *_dd .ContentStreamOperation ,_dff _dd .GraphicsState ,_cgbb *_ec .PdfPageResources )error {_fec :=_gac .Operand ;
if _bdac {_fd .Log .Info ("\u0026&\u0026\u0020\u006f\u0070\u003d\u0025s",_gac );};switch _fec {case "\u0071":if _cgab {_fd .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_geda ._ebea );};_dbed .push (&_ebd );case "\u0051":if !_dbed .empty (){_ebd =*_dbed .pop ();
};_geda ._ebea =_dff .CTM ;if _cgab {_fd .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_geda ._ebea );};case "\u0042\u0044\u0043":_fbeb ,_dfe :=_bc .GetDict (_gac .Params [1]);if !_dfe {_fd .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0042D\u0043\u0020\u006f\u0070\u003d\u0025\u0073 \u0047\u0065\u0074\u0044\u0069\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_gac );
return _bede ;};_cce :=_fbeb .Get ("\u004d\u0043\u0049\u0044");if _cce !=nil {_fece ,_fcaf :=_bc .GetIntVal (_cce );if !_fcaf {_fd .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0042\u0044C\u0020\u006f\u0070=\u0025\u0073\u002e\u0020\u0042\u0061\u0064\u0020\u006eum\u0065\u0072\u0069c\u0061\u006c \u006f\u0062\u006a\u0065\u0063\u0074.\u0020\u006f=\u0025\u0073",_gac ,_cce );
};_beb =_fece ;}else {_beb =-1;};case "\u0045\u004d\u0043":_beb =-1;case "\u0042\u0054":if _bab {_fd .Log .Debug ("\u0042\u0054\u0020\u0063\u0061\u006c\u006c\u0065\u0064\u0020\u0077\u0068\u0069\u006c\u0065 \u0069n\u0020\u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
_gda ._dade =append (_gda ._dade ,_afg ._afgc ...);};_bab =true ;_gae :=_dff ;_gae .CTM =_cab .Mult (_gae .CTM );_afg =_bda (_dddc ,_cgbb ,_gae ,&_ebd ,&_dbed );_geda ._bbe =_afg ;case "\u0045\u0054":if !_bab {_fd .Log .Debug ("\u0045\u0054\u0020ca\u006c\u006c\u0065\u0064\u0020\u006f\u0075\u0074\u0073i\u0064e\u0020o\u0066 \u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
};_bab =false ;_gda ._dade =append (_gda ._dade ,_afg ._afgc ...);_afg .reset ();case "\u0054\u002a":_afg .nextLine ();case "\u0054\u0064":if _acd ,_egd :=_afg .checkOp (_gac ,2,true );!_acd {_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_egd );
return _egd ;};_ddge ,_bbbe ,_cba :=_cbacg (_gac .Params );if _cba !=nil {return _cba ;};_afg .moveText (_ddge ,_bbbe );case "\u0054\u0044":if _cced ,_ccd :=_afg .checkOp (_gac ,2,true );!_cced {_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ccd );
return _ccd ;};_egf ,_eeb ,_baa :=_cbacg (_gac .Params );if _baa !=nil {_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_baa );return _baa ;};_afg .moveTextSetLeading (_egf ,_eeb );case "\u0054\u006a":if _ecd ,_fge :=_afg .checkOp (_gac ,1,true );
!_ecd {_fd .Log .Debug ("\u0045\u0052\u0052\u004fR:\u0020\u0054\u006a\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0065\u0072\u0072\u003d%\u0076",_gac ,_fge );return _fge ;};_bcb :=_bc .TraceToDirectObject (_gac .Params [0]);_gagb ,_daf :=_bc .GetStringBytes (_bcb );
if !_daf {_fd .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020T\u006a\u0020o\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074S\u0074\u0072\u0069\u006e\u0067\u0042\u0079\u0074\u0065\u0073\u0020\u0066a\u0069\u006c\u0065\u0064",_gac );return _bc .ErrTypeError ;
};return _afg .showText (_bcb ,_gagb ,_beb );case "\u0054\u004a":if _dcd ,_eebb :=_afg .checkOp (_gac ,1,true );!_dcd {_fd .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_eebb );return _eebb ;};_aab ,_cbb :=_bc .GetArray (_gac .Params [0]);
if !_cbb {_fd .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0054\u004a\u0020\u006f\u0070\u003d\u0025s\u0020G\u0065t\u0041r\u0072\u0061\u0079\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_gac );return _bede ;};return _afg .showTextAdjusted (_aab ,_beb );
case "\u0027":if _eda ,_ggf :=_afg .checkOp (_gac ,1,true );!_eda {_fd .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0027\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ggf );return _ggf ;};_caf :=_bc .TraceToDirectObject (_gac .Params [0]);_aefb ,_fbg :=_bc .GetStringBytes (_caf );
if !_fbg {_fd .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020'\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_gac );return _bc .ErrTypeError ;};_afg .nextLine ();return _afg .showText (_caf ,_aefb ,_beb );
case "\u0022":if _cef ,_ebdd :=_afg .checkOp (_gac ,3,true );!_cef {_fd .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0022\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ebdd );return _ebdd ;};_fdg ,_ccb ,_dfed :=_cbacg (_gac .Params [:2]);if _dfed !=nil {return _dfed ;
};_gaga :=_bc .TraceToDirectObject (_gac .Params [2]);_ada ,_dbc :=_bc .GetStringBytes (_gaga );if !_dbc {_fd .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020\"\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_gac );
return _bc .ErrTypeError ;};_afg .setCharSpacing (_fdg );_afg .setWordSpacing (_ccb );_afg .nextLine ();return _afg .showText (_gaga ,_ada ,_beb );case "\u0054\u004c":_fbbb ,_afgf :=_dee (_gac );if _afgf !=nil {_fd .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004c\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_afgf );
return _afgf ;};_afg .setTextLeading (_fbbb );case "\u0054\u0063":_deb ,_eag :=_dee (_gac );if _eag !=nil {_fd .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0063\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_eag );return _eag ;};_afg .setCharSpacing (_deb );
case "\u0054\u0066":if _bfac ,_dfcb :=_afg .checkOp (_gac ,2,true );!_bfac {_fd .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0066\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dfcb );return _dfcb ;};_bff ,_cde :=_bc .GetNameVal (_gac .Params [0]);
if !_cde {_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u004ea\u006d\u0065\u0056\u0061\u006c\u0020\u0066a\u0069\u006c\u0065\u0064",_gac );return _bc .ErrTypeError ;};_bebd ,_fged :=_bc .GetNumberAsFloat (_gac .Params [1]);
if !_cde {_fd .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u0046\u006c\u006f\u0061\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065d\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gac ,_fged );
return _fged ;};_fged =_afg .setFont (_bff ,_bebd );_afg ._fdef =_dg .Is (_fged ,_bc .ErrNotSupported );if _fged !=nil &&!_afg ._fdef {return _fged ;};case "\u0054\u006d":if _bdb ,_gdd :=_afg .checkOp (_gac ,6,true );!_bdb {_fd .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u006d\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gdd );
return _gdd ;};_ffg ,_fcf :=_bc .GetNumbersAsFloat (_gac .Params );if _fcf !=nil {_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fcf );return _fcf ;};_afg .setTextMatrix (_ffg );case "\u0054\u0072":if _dge ,_acdf :=_afg .checkOp (_gac ,1,true );
!_dge {_fd .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0072\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_acdf );return _acdf ;};_dba ,_edbc :=_bc .GetIntVal (_gac .Params [0]);if !_edbc {_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0072\u0020\u006f\u0070\u003d\u0025\u0073 \u0047e\u0074\u0049\u006e\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_gac );
return _bc .ErrTypeError ;};_afg .setTextRenderMode (_dba );case "\u0054\u0073":if _gadd ,_dgf :=_afg .checkOp (_gac ,1,true );!_gadd {_fd .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0073\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dgf );return _dgf ;
};_dgg ,_acgc :=_bc .GetNumberAsFloat (_gac .Params [0]);if _acgc !=nil {_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_acgc );return _acgc ;};_afg .setTextRise (_dgg );case "\u0054\u0077":if _dag ,_bffa :=_afg .checkOp (_gac ,1,true );
!_dag {_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bffa );return _bffa ;};_ebf ,_aae :=_bc .GetNumberAsFloat (_gac .Params [0]);if _aae !=nil {_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_aae );
return _aae ;};_afg .setWordSpacing (_ebf );case "\u0054\u007a":if _fga ,_aac :=_afg .checkOp (_gac ,1,true );!_fga {_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_aac );return _aac ;};_dbdb ,_fbd :=_bc .GetNumberAsFloat (_gac .Params [0]);
if _fbd !=nil {_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fbd );return _fbd ;};_afg .setHorizScaling (_dbdb );case "\u0063\u006d":_geda ._ebea =_dff .CTM ;if _geda ._ebea .Singular (){_eae :=_aa .IdentityMatrix ().Translate (_geda ._ebea .Translation ());
_fd .Log .Debug ("S\u0069n\u0067\u0075\u006c\u0061\u0072\u0020\u0063\u0074m\u003d\u0025\u0073\u2192%s",_geda ._ebea ,_eae );_geda ._ebea =_eae ;};if _cgab {_fd .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_geda ._ebea );};case "\u006d":if len (_gac .Params )!=2{_fd .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_age );
return nil ;};_dffg ,_ddcg :=_bc .GetNumbersAsFloat (_gac .Params );if _ddcg !=nil {return _ddcg ;};_geda .moveTo (_dffg [0],_dffg [1]);case "\u006c":if len (_gac .Params )!=2{_fd .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_age );
return nil ;};_ccec ,_ced :=_bc .GetNumbersAsFloat (_gac .Params );if _ced !=nil {return _ced ;};_geda .lineTo (_ccec [0],_ccec [1]);case "\u0063":if len (_gac .Params )!=6{return _age ;};_cbd ,_ddde :=_bc .GetNumbersAsFloat (_gac .Params );if _ddde !=nil {return _ddde ;
};_fd .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_cbd );_geda .cubicTo (_cbd [0],_cbd [1],_cbd [2],_cbd [3],_cbd [4],_cbd [5]);case "\u0076","\u0079":if len (_gac .Params )!=4{return _age ;
};_bgb ,_gbee :=_bc .GetNumbersAsFloat (_gac .Params );if _gbee !=nil {return _gbee ;};_fd .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_bgb );_geda .quadraticTo (_bgb [0],_bgb [1],_bgb [2],_bgb [3]);
case "\u0068":_geda .closePath ();case "\u0072\u0065":if len (_gac .Params )!=4{return _age ;};_ffge ,_fgbe :=_bc .GetNumbersAsFloat (_gac .Params );if _fgbe !=nil {return _fgbe ;};_geda .drawRectangle (_ffge [0],_ffge [1],_ffge [2],_ffge [3]);_geda .closePath ();
case "\u0053":_geda .stroke (&_gda ._egde );_geda .clearPath ();case "\u0073":_geda .closePath ();_geda .stroke (&_gda ._egde );_geda .clearPath ();case "\u0046":_geda .fill (&_gda ._fgd );_geda .clearPath ();case "\u0066","\u0066\u002a":_geda .closePath ();
_geda .fill (&_gda ._fgd );_geda .clearPath ();case "\u0042","\u0042\u002a":_geda .fill (&_gda ._fgd );_geda .stroke (&_gda ._egde );_geda .clearPath ();case "\u0062","\u0062\u002a":_geda .closePath ();_geda .fill (&_gda ._fgd );_geda .stroke (&_gda ._egde );
_geda .clearPath ();case "\u006e":_geda .clearPath ();case "\u0044\u006f":if len (_gac .Params )==0{_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0058\u004fbj\u0065c\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006f\u0070\u0065\u0072\u0061n\u0064\u0020\u0066\u006f\u0072\u0020\u0044\u006f\u0020\u006f\u0070\u0065\u0072\u0061\u0074\u006f\u0072.\u0020\u0047\u006f\u0074\u0020\u0025\u002b\u0076\u002e",_gac .Params );
return _bc .ErrRangeError ;};_cabb ,_gfg :=_bc .GetName (_gac .Params [0]);if !_gfg {_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0044\u006f\u0020\u006f\u0070e\u0072a\u0074\u006f\u0072\u0020\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006fp\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u002b\u0076\u002e",_gac .Params [0]);
return _bc .ErrTypeError ;};_ ,_dad :=_cgbb .GetXObjectByName (*_cabb );if _dad !=_ec .XObjectTypeForm {break ;};_bfcb ,_gfg :=_dddc ._bd [_cabb .String ()];if !_gfg {_fee ,_bebg :=_cgbb .GetXObjectFormByName (*_cabb );if _bebg !=nil {_fd .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_bebg );
return _bebg ;};_fcc ,_bebg :=_fee .GetContentStream ();if _bebg !=nil {_fd .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_bebg );return _bebg ;};_ccg :=_fee .Resources ;if _ccg ==nil {_ccg =_cgbb ;};_fbc :=_dff .CTM ;if _aagd ,_ceb :=_bc .GetArray (_fee .Matrix );
_ceb {_gbg ,_fege :=_aagd .GetAsFloat64Slice ();if _fege !=nil {return _fege ;};if len (_gbg )!=6{return _age ;};_bfb :=_aa .NewMatrix (_gbg [0],_gbg [1],_gbg [2],_gbg [3],_gbg [4],_gbg [5]);_fbc =_dff .CTM .Mult (_bfb );};_eef ,_afe ,_caad ,_bebg :=_dddc .extractPageText (string (_fcc ),_ccg ,_cab .Mult (_fbc ),_bbfe +1);
if _bebg !=nil {_fd .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_bebg );return _bebg ;};_bfcb =textResult {*_eef ,_afe ,_caad };_dddc ._bd [_cabb .String ()]=_bfcb ;};_geda ._ebea =_dff .CTM ;if _cgab {_fd .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_geda ._ebea );
};_gda ._dade =append (_gda ._dade ,_bfcb ._edbb ._dade ...);_gda ._egde =append (_gda ._egde ,_bfcb ._edbb ._egde ...);_gda ._fgd =append (_gda ._fgd ,_bfcb ._edbb ._fgd ...);_ebd ._cca +=_bfcb ._baf ;_ebd ._dcac +=_bfcb ._ddfb ;case "\u0072\u0067","\u0067","\u006b","\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_afg ._dfff .ColorspaceNonStroking =_dff .ColorspaceNonStroking ;
_afg ._dfff .ColorNonStroking =_dff .ColorNonStroking ;case "\u0052\u0047","\u0047","\u004b","\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_afg ._dfff .ColorspaceStroking =_dff .ColorspaceStroking ;_afg ._dfff .ColorStroking =_dff .ColorStroking ;
};return nil ;});_bede =_caca .Process (_caa );return _gda ,_ebd ._cca ,_ebd ._dcac ,_bede ;};

// String returns a description of `state`.
func (_ega *textState )String ()string {_abfd :="\u005bN\u004f\u0054\u0020\u0053\u0045\u0054]";if _ega ._bcf !=nil {_abfd =_ega ._bcf .BaseFont ();};return _df .Sprintf ("\u0074\u0063\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0077\u003d\u0025\u002e\u0032\u0066 \u0074f\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u003d\u0025\u0071",_ega ._ggfg ,_ega ._gddc ,_ega ._aed ,_abfd );
};func (_ded *textObject )getFont (_gefg string )(*_ec .PdfFont ,error ){if _ded ._fea ._aaa !=nil {_aagc ,_bcgd :=_ded .getFontDict (_gefg );if _bcgd !=nil {_fd .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0067\u0065\u0074\u0046\u006f\u006e\u0074:\u0020n\u0061m\u0065=\u0025\u0073\u002c\u0020\u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0073",_gefg ,_bcgd .Error ());
return nil ,_bcgd ;};_ded ._fea ._bfe ++;_dfef ,_ccgg :=_ded ._fea ._aaa [_aagc .String ()];if _ccgg {_dfef ._aeac =_ded ._fea ._bfe ;return _dfef ._ggec ,nil ;};};_febc ,_gceb :=_ded .getFontDict (_gefg );if _gceb !=nil {return nil ,_gceb ;};_bedb ,_gceb :=_ded .getFontDirect (_gefg );
if _gceb !=nil {return nil ,_gceb ;};if _ded ._fea ._aaa !=nil {_efee :=fontEntry {_bedb ,_ded ._fea ._bfe };if len (_ded ._fea ._aaa )>=_bffab {var _cece []string ;for _agab :=range _ded ._fea ._aaa {_cece =append (_cece ,_agab );};_e .Slice (_cece ,func (_aefga ,_ceef int )bool {return _ded ._fea ._aaa [_cece [_aefga ]]._aeac < _ded ._fea ._aaa [_cece [_ceef ]]._aeac ;
});delete (_ded ._fea ._aaa ,_cece [0]);};_ded ._fea ._aaa [_febc .String ()]=_efee ;};return _bedb ,nil ;};func _cdbd (_cfbd map[float64 ]map[float64 ]gridTile )[]float64 {_ggecd :=make ([]float64 ,0,len (_cfbd ));_bedg :=make (map[float64 ]struct{},len (_cfbd ));
for _ ,_agfc :=range _cfbd {for _afcga :=range _agfc {if _ ,_gebcd :=_bedg [_afcga ];_gebcd {continue ;};_ggecd =append (_ggecd ,_afcga );_bedg [_afcga ]=struct{}{};};};_e .Float64s (_ggecd );return _ggecd ;};

// ExtractPageImages returns the image contents of the page extractor, including data
// and position, size information for each image.
// A set of options to control page image extraction can be passed in. The options
// parameter can be nil for the default options. By default, inline stencil masks
// are not extracted.
func (_ffeb *Extractor )ExtractPageImages (options *ImageExtractOptions )(*PageImages ,error ){_ga :=&imageExtractContext {_gef :options };_bfd :=_ga .extractContentStreamImages (_ffeb ._af ,_ffeb ._ff );if _bfd !=nil {return nil ,_bfd ;};return &PageImages {Images :_ga ._feg },nil ;
};func _fdeb (_eaee float64 )bool {return _g .Abs (_eaee )< _eabg };func _cfdea (_ggbb ,_bdff int )int {if _ggbb < _bdff {return _ggbb ;};return _bdff ;};

// String returns a description of `p`.
func (_afge *textPara )String ()string {if _afge ._baca {return _df .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u005b\u0045\u004d\u0050\u0054\u0059\u005d",_afge .PdfRectangle );};_dcacb :="";if _afge ._fcbe !=nil {_dcacb =_df .Sprintf ("\u005b\u0025\u0064\u0078\u0025\u0064\u005d\u0020",_afge ._fcbe ._cfaac ,_afge ._fcbe ._gfae );
};return _df .Sprintf ("\u0025\u0036\u002e\u0032f \u0025\u0073\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u0020\u0025\u0071",_afge .PdfRectangle ,_dcacb ,len (_afge ._dgff ),_gebg (_afge .text (),50));};

// Font represents the font properties on a PDF page.
type Font struct{PdfFont *_ec .PdfFont ;

// FontName represents Font Name from font properties.
FontName string ;

// FontType represents Font Subtype entry in the font dictionary inside page resources.
// Examples : type0, Type1, MMType1, Type3, TrueType, CIDFont.
FontType string ;

// ToUnicode is true if font provides a `ToUnicode` mapping.
ToUnicode bool ;

// IsCID is true if underlying font is a composite font.
// Composite font is represented by a font dictionary whose Subtype is `Type0`
IsCID bool ;

// IsSimple is true if font is simple font.
// A simple font is limited to only 8 bit (255) character codes.
IsSimple bool ;

// FontData represents the raw data of the embedded font file.
// It can have format TrueType (TTF), PostScript Font (PFB) or Compact Font Format (CCF).
// FontData value can be indicates from `FontFile`, `FontFile2` or `FontFile3` inside Font Descriptor.
// At most, only one of `FontFile`, `FontFile2` or `FontFile3` will be FontData value.
FontData []byte ;

// FontFileName is a name representing the font. it has format:
// (Font Name) + (Font Type Extension), example: helvetica.ttf.
FontFileName string ;

// FontDescriptor represents metrics and other attributes inside font properties from PDF Structure (Font Descriptor).
FontDescriptor *_ec .PdfFontDescriptor ;};func (_gebf *textObject )checkOp (_cdee *_dd .ContentStreamOperation ,_gedf int ,_dgcd bool )(_efcf bool ,_cbg error ){if _gebf ==nil {var _bad []_bc .PdfObject ;if _gedf > 0{_bad =_cdee .Params ;if len (_bad )> _gedf {_bad =_bad [:_gedf ];
};};_fd .Log .Debug ("\u0025\u0023q \u006f\u0070\u0065r\u0061\u006e\u0064\u0020out\u0073id\u0065\u0020\u0074\u0065\u0078\u0074\u002e p\u0061\u0072\u0061\u006d\u0073\u003d\u0025+\u0076",_cdee .Operand ,_bad );};if _gedf >=0{if len (_cdee .Params )!=_gedf {if _dgcd {_cbg =_f .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");
};_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_cdee .Operand ,_gedf ,len (_cdee .Params ),_cdee .Params );
return false ,_cbg ;};};return true ,nil ;};func _ggabf (_fddcb []float64 ,_dega ,_gedbe float64 )[]float64 {_gfag ,_cedc :=_dega ,_gedbe ;if _cedc < _gfag {_gfag ,_cedc =_cedc ,_gfag ;};_bgac :=make ([]float64 ,0,len (_fddcb )+2);_bgac =append (_bgac ,_dega );
for _ ,_dagdb :=range _fddcb {if _dagdb <=_gfag {continue ;}else if _dagdb >=_cedc {break ;};_bgac =append (_bgac ,_dagdb );};_bgac =append (_bgac ,_gedbe );return _bgac ;};func (_affcf *textTable )emptyCompositeRow (_ccgd int )bool {for _efbcb :=0;_efbcb < _affcf ._cfaac ;
_efbcb ++{if _fggdc ,_bbecf :=_affcf ._edeab [_dfded (_efbcb ,_ccgd )];_bbecf {if len (_fggdc .paraList )> 0{return false ;};};};return true ;};func (_bdffc *textWord )absorb (_bafce *textWord ){_bdffc .PdfRectangle =_eed (_bdffc .PdfRectangle ,_bafce .PdfRectangle );
_bdffc ._egfgg =append (_bdffc ._egfgg ,_bafce ._egfgg ...);};func _dfgc (_bfef []*textWord ,_ddaa int )[]*textWord {_defb :=len (_bfef );copy (_bfef [_ddaa :],_bfef [_ddaa +1:]);return _bfef [:_defb -1];};func (_dgd *shapesState )addPoint (_bacg ,_eddg float64 ){_bddb :=_dgd .establishSubpath ();
_eddd :=_dgd .devicePoint (_bacg ,_eddg );if _bddb ==nil {_dgd ._faba =true ;_dgd ._fdggg =_eddd ;}else {_bddb .add (_eddd );};};func (_ffee *textLine )pullWord (_ddgec *wordBag ,_afffd *textWord ,_gedc int ){_ffee .appendWord (_afffd );_ddgec .removeWord (_afffd ,_gedc );
};func _bfeag (_fdaa ,_acgb float64 )bool {return _g .Abs (_fdaa -_acgb )<=_gbfb };func _gbfg (_cafa *wordBag ,_agcg int )*textLine {_geed :=_cafa .firstWord (_agcg );_gccc :=textLine {PdfRectangle :_geed .PdfRectangle ,_ggdf :_geed ._ggdfd ,_efeb :_geed ._gcca };
_gccc .pullWord (_cafa ,_geed ,_agcg );return &_gccc ;};type textState struct{_ggfg float64 ;_gddc float64 ;_dfgd float64 ;_dfb float64 ;_aed float64 ;_ffba RenderMode ;_gdaf float64 ;_bcf *_ec .PdfFont ;_ebed _ec .PdfRectangle ;_cca int ;_dcac int ;};
func (_bdbcd *subpath )isQuadrilateral ()bool {if len (_bdbcd ._afgg )< 4||len (_bdbcd ._afgg )> 5{return false ;};if len (_bdbcd ._afgg )==5{_adef :=_bdbcd ._afgg [0];_eaedg :=_bdbcd ._afgg [4];if _adef .X !=_eaedg .X ||_adef .Y !=_eaedg .Y {return false ;
};};return true ;};

// GetContentStreamOps returns the contentStreamOps field of `pt`.
func (_fedf *PageText )GetContentStreamOps ()*_dd .ContentStreamOperations {return _fedf ._ecc };func (_cceac *textWord )addDiacritic (_fbgc string ){_fdgde :=_cceac ._egfgg [len (_cceac ._egfgg )-1];_fdgde ._fcffb +=_fbgc ;_fdgde ._fcffb =_fc .NFKC .String (_fdgde ._fcffb );
};func (_gffa *textMark )inDiacriticArea (_dgab *textMark )bool {_aedf :=_gffa .Llx -_dgab .Llx ;_efbc :=_gffa .Urx -_dgab .Urx ;_cdgac :=_gffa .Lly -_dgab .Lly ;return _g .Abs (_aedf +_efbc )< _gffa .Width ()*_bbdda &&_g .Abs (_cdgac )< _gffa .Height ()*_bbdda ;
};func _caff (_aegf ,_abbf _ec .PdfRectangle )(_ec .PdfRectangle ,bool ){if !_eaad (_aegf ,_abbf ){return _ec .PdfRectangle {},false ;};return _ec .PdfRectangle {Llx :_g .Max (_aegf .Llx ,_abbf .Llx ),Urx :_g .Min (_aegf .Urx ,_abbf .Urx ),Lly :_g .Max (_aegf .Lly ,_abbf .Lly ),Ury :_g .Min (_aegf .Ury ,_abbf .Ury )},true ;
};func (_cabca *textTable )bbox ()_ec .PdfRectangle {return _cabca .PdfRectangle };type textLine struct{_ec .PdfRectangle ;_efeb float64 ;_fdec []*textWord ;_ggdf float64 ;};

// String returns a description of `tm`.
func (_caadb *textMark )String ()string {return _df .Sprintf ("\u0025\u002e\u0032f \u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\u0022\u0025\u0073\u0022",_caadb .PdfRectangle ,_caadb ._cgdb ,_caadb ._fcffb );};func _feba (_debf []pathSection ){if _cbeb < 0.0{return ;
};if _bcbd {_fd .Log .Info ("\u0067\u0072\u0061\u006e\u0075\u006c\u0061\u0072\u0069\u007a\u0065\u003a\u0020\u0025\u0064 \u0073u\u0062\u0070\u0061\u0074\u0068\u0020\u0073\u0065\u0063\u0074\u0069\u006f\u006e\u0073",len (_debf ));};for _ddcbg ,_ebebb :=range _debf {for _ebddf ,_bccgd :=range _ebebb ._bdg {for _fcbcd ,_fgfcf :=range _bccgd ._afgg {_bccgd ._afgg [_fcbcd ]=_aa .Point {X :_dabac (_fgfcf .X ),Y :_dabac (_fgfcf .Y )};
if _bcbd {_bgfgee :=_bccgd ._afgg [_fcbcd ];if !_efcc (_fgfcf ,_bgfgee ){_afeba :=_aa .Point {X :_bgfgee .X -_fgfcf .X ,Y :_bgfgee .Y -_fgfcf .Y };_df .Printf ("\u0025\u0034d \u002d\u0020\u00254\u0064\u0020\u002d\u0020%4d\u003a %\u002e\u0032\u0066\u0020\u2192\u0020\u0025.2\u0066\u0020\u0028\u0025\u0067\u0029\u000a",_ddcbg ,_ebddf ,_fcbcd ,_fgfcf ,_bgfgee ,_afeba );
};};};};};};func (_daacc *textWord )toTextMarks (_afged *int )[]TextMark {var _dbafg []TextMark ;for _ ,_eaca :=range _daacc ._egfgg {_dbafg =_gadg (_dbafg ,_afged ,_eaca .ToTextMark ());};return _dbafg ;};type subpath struct{_afgg []_aa .Point ;_gfgf bool ;
};var _acb =TextMark {Text :"\u005b\u0058\u005d",Original :"\u0020",Meta :true ,FillColor :_gf .White ,StrokeColor :_gf .White };func (_egfe *wordBag )maxDepth ()float64 {return _egfe ._dffb -_egfe .Lly };func (_cbdaf paraList )topoOrder ()[]int {if _gee {_fd .Log .Info ("\u0074\u006f\u0070\u006f\u004f\u0072\u0064\u0065\u0072\u003a");
};_abbd :=len (_cbdaf );_cebc :=make ([]bool ,_abbd );_gagec :=make ([]int ,0,_abbd );_gddb :=_cbdaf .llyOrdering ();var _babef func (_afeb int );_babef =func (_cega int ){_cebc [_cega ]=true ;for _gdec :=0;_gdec < _abbd ;_gdec ++{if !_cebc [_gdec ]{if _cbdaf .readBefore (_gddb ,_cega ,_gdec ){_babef (_gdec );
};};};_gagec =append (_gagec ,_cega );};for _dacgc :=0;_dacgc < _abbd ;_dacgc ++{if !_cebc [_dacgc ]{_babef (_dacgc );};};return _gbdf (_gagec );};func (_ggfe *textPara )toTextMarks (_gedac *int )[]TextMark {if _ggfe ._fcbe ==nil {return _ggfe .toCellTextMarks (_gedac );
};var _ebdg []TextMark ;for _bggd :=0;_bggd < _ggfe ._fcbe ._gfae ;_bggd ++{for _ccgfc :=0;_ccgfc < _ggfe ._fcbe ._cfaac ;_ccgfc ++{_bbc :=_ggfe ._fcbe .get (_ccgfc ,_bggd );if _bbc ==nil {_ebdg =_egef (_ebdg ,_gedac ,"\u0009");}else {_fddg :=_bbc .toCellTextMarks (_gedac );
_ebdg =append (_ebdg ,_fddg ...);};_ebdg =_egef (_ebdg ,_gedac ,"\u0020");};if _bggd < _ggfe ._fcbe ._gfae -1{_ebdg =_egef (_ebdg ,_gedac ,"\u000a");};};_aegdb :=_ggfe ._fcbe ;if _aegdb .isExportable (){_dfde :=_aegdb .toTextTable ();_ebdg =_bdge (_ebdg ,&_dfde );
};return _ebdg ;};func (_bfad *wordBag )getDepthIdx (_fbag float64 )int {_ccggf :=_bfad .depthIndexes ();_ebeb :=_bcba (_fbag );if _ebeb < _ccggf [0]{return _ccggf [0];};if _ebeb > _ccggf [len (_ccggf )-1]{return _ccggf [len (_ccggf )-1];};return _ebeb ;
};func _egag (_gggd map[int ][]float64 )string {_aadcc :=_dgaff (_gggd );_ecfb :=make ([]string ,len (_gggd ));for _cbcc ,_bffbf :=range _aadcc {_ecfb [_cbcc ]=_df .Sprintf ("\u0025\u0064\u003a\u0020\u0025\u002e\u0032\u0066",_bffbf ,_gggd [_bffbf ]);};
return _df .Sprintf ("\u007b\u0025\u0073\u007d",_da .Join (_ecfb ,"\u002c\u0020"));};func _gdefb (_cdbb bounded )float64 {return -_cdbb .bbox ().Lly };func (_daeg *wordBag )makeRemovals ()map[int ]map[*textWord ]struct{}{_ddbe :=make (map[int ]map[*textWord ]struct{},len (_daeg ._aedg ));
for _cegd :=range _daeg ._aedg {_ddbe [_cegd ]=make (map[*textWord ]struct{});};return _ddbe ;};func _gcfc (_fcaa string )bool {if _cb .RuneCountInString (_fcaa )< _adcg {return false ;};_eced ,_eege :=_cb .DecodeLastRuneInString (_fcaa );if _eege <=0||!_d .Is (_d .Hyphen ,_eced ){return false ;
};_eced ,_eege =_cb .DecodeLastRuneInString (_fcaa [:len (_fcaa )-_eege ]);return _eege > 0&&!_d .IsSpace (_eced );};type structTreeRoot struct{_beea []structElement ;_cdec string ;};func _dgaff (_dcacf map[int ][]float64 )[]int {_fcfge :=make ([]int ,len (_dcacf ));
_gggac :=0;for _accb :=range _dcacf {_fcfge [_gggac ]=_accb ;_gggac ++;};_e .Ints (_fcfge );return _fcfge ;};

// String returns a human readable description of `s`.
func (_fdfa intSet )String ()string {var _accgd []int ;for _fbfa :=range _fdfa {if _fdfa .has (_fbfa ){_accgd =append (_accgd ,_fbfa );};};_e .Ints (_accgd );return _df .Sprintf ("\u0025\u002b\u0076",_accgd );};const (RenderModeStroke RenderMode =1<<iota ;
RenderModeFill ;RenderModeClip ;);type gridTile struct{_ec .PdfRectangle ;_faeaf ,_edbd ,_efaf ,_dbfef bool ;};func _eabff (_fbee *wordBag ,_bbge float64 ,_fggf ,_cagcb rulingList )[]*wordBag {var _caga []*wordBag ;for _ ,_gadc :=range _fbee .depthIndexes (){_aafa :=false ;
for !_fbee .empty (_gadc ){_feegf :=_fbee .firstReadingIndex (_gadc );_ccea :=_fbee .firstWord (_feegf );_eeee :=_dcfd (_ccea ,_bbge ,_fggf ,_cagcb );_fbee .removeWord (_ccea ,_feegf );if _fbde {_fd .Log .Info ("\u0066\u0069\u0072\u0073\u0074\u0057\u006f\u0072\u0064\u0020\u005e\u005e^\u005e\u0020\u0025\u0073",_ccea .String ());
};for _fffe :=true ;_fffe ;_fffe =_aafa {_aafa =false ;_daad :=_bgdc *_eeee ._bfca ;_dffae :=_ggfa *_eeee ._bfca ;_ddgb :=_badad *_eeee ._bfca ;if _fbde {_fd .Log .Info ("\u0070a\u0072a\u0057\u006f\u0072\u0064\u0073\u0020\u0064\u0065\u0070\u0074\u0068 \u0025\u002e\u0032\u0066 \u002d\u0020\u0025\u002e\u0032f\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061\u0044\u0065\u0070\u0074\u0068\u0047\u0061\u0070\u003d\u0025\u002e\u0032\u0066\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061R\u0065\u0061\u0064\u0069\u006e\u0067\u0047\u0061p\u003d\u0025\u002e\u0032\u0066",_eeee .minDepth (),_eeee .maxDepth (),_ddgb ,_dffae );
};if _fbee .scanBand ("\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c",_eeee ,_egbd (_febcc ,0),_eeee .minDepth ()-_ddgb ,_eeee .maxDepth ()+_ddgb ,_gcff ,false ,false )> 0{_aafa =true ;};if _fbee .scanBand ("\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_eeee ,_egbd (_febcc ,_dffae ),_eeee .minDepth (),_eeee .maxDepth (),_egca ,false ,false )> 0{_aafa =true ;
};if _aafa {continue ;};_fdeg :=_fbee .scanBand ("",_eeee ,_egbd (_fabd ,_daad ),_eeee .minDepth (),_eeee .maxDepth (),_dcefa ,true ,false );if _fdeg > 0{_aeab :=(_eeee .maxDepth ()-_eeee .minDepth ())/_eeee ._bfca ;if (_fdeg > 1&&float64 (_fdeg )> 0.3*_aeab )||_fdeg <=10{if _fbee .scanBand ("\u006f\u0074\u0068e\u0072",_eeee ,_egbd (_fabd ,_daad ),_eeee .minDepth (),_eeee .maxDepth (),_dcefa ,false ,true )> 0{_aafa =true ;
};};};};_caga =append (_caga ,_eeee );};};return _caga ;};func (_ffd *wordBag )depthBand (_dfgdf ,_fedg float64 )[]int {if len (_ffd ._aedg )==0{return nil ;};return _ffd .depthRange (_ffd .getDepthIdx (_dfgdf ),_ffd .getDepthIdx (_fedg ));};func (_ccgdd *textTable )putComposite (_gggagg ,_gcfe int ,_cdfd paraList ,_bdcc _ec .PdfRectangle ){if len (_cdfd )==0{_fd .Log .Error ("\u0074\u0065xt\u0054\u0061\u0062l\u0065\u0029\u0020\u0070utC\u006fmp\u006f\u0073\u0069\u0074\u0065\u003a\u0020em\u0070\u0074\u0079\u0020\u0070\u0061\u0072a\u0073");
return ;};_aafcb :=compositeCell {PdfRectangle :_bdcc ,paraList :_cdfd };if _abfa {_df .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0070\u0075\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u003c\u002d\u0025\u0073\u000a",_gggagg ,_gcfe ,_aafcb .String ());
};_aafcb .updateBBox ();_ccgdd ._edeab [_dfded (_gggagg ,_gcfe )]=_aafcb ;};func (_cfec *textPara )getListLines ()[]*textLine {var _gceg []*textLine ;_fcba :=_eac (_cfec ._dgff );for _ ,_eeaf :=range _cfec ._dgff {_gfeb :=_eeaf ._fdec [0]._ddbga [0];if _fdbf (_gfeb ){_gceg =append (_gceg ,_eeaf );
};};_gceg =append (_gceg ,_fcba ...);return _gceg ;};func (_dddba paraList )findTableGrid (_dcbdc gridTiling )(*textTable ,map[*textPara ]struct{}){_fcbb :=len (_dcbdc ._babea );_ebbf :=len (_dcbdc ._bgfdg );_gbbfa :=textTable {_beagb :true ,_cfaac :_fcbb ,_gfae :_ebbf ,_cadda :make (map[uint64 ]*textPara ,_fcbb *_ebbf ),_edeab :make (map[uint64 ]compositeCell ,_fcbb *_ebbf )};
_gbbfa .PdfRectangle =_dcbdc .PdfRectangle ;_aaac :=make (map[*textPara ]struct{});_adfff :=int ((1.0-_deg )*float64 (_fcbb *_ebbf ));_ggfeg :=0;if _aceb {_fd .Log .Info ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0064\u0020\u0078\u0020%\u0064",_fcbb ,_ebbf );
};for _fggg ,_bdfec :=range _dcbdc ._bgfdg {_fffa ,_dbffd :=_dcbdc ._cgcefa [_bdfec ];if !_dbffd {continue ;};for _gebe ,_gfgb :=range _dcbdc ._babea {_abda ,_cgfc :=_fffa [_gfgb ];if !_cgfc {continue ;};_dgeeg :=_dddba .inTile (_abda );if len (_dgeeg )==0{_ggfeg ++;
if _ggfeg > _adfff {if _aceb {_fd .Log .Info ("\u0021\u006e\u0075m\u0045\u006d\u0070\u0074\u0079\u003d\u0025\u0064",_ggfeg );};return nil ,nil ;};}else {_gbbfa .putComposite (_gebe ,_fggg ,_dgeeg ,_abda .PdfRectangle );for _ ,_bdaab :=range _dgeeg {_aaac [_bdaab ]=struct{}{};
};};};};_efgcee :=0;for _edbed :=0;_edbed < _fcbb ;_edbed ++{_baff :=_gbbfa .get (_edbed ,0);if _baff ==nil ||!_baff ._baca {_efgcee ++;};};if _efgcee ==0{if _aceb {_fd .Log .Info ("\u0021\u006e\u0075m\u0048\u0065\u0061\u0064\u0065\u0072\u003d\u0030");
};return nil ,nil ;};_geddd :=_gbbfa .reduceTiling (_dcbdc ,_dbdc );_geddd =_geddd .subdivide ();return _geddd ,_aaac ;};func (_ggab *textPara )taken ()bool {return _ggab ==nil ||_ggab ._dedd };func (_decd *textObject )getCurrentFont ()*_ec .PdfFont {_dbab :=_decd ._acad ._bcf ;
if _dbab ==nil {_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020U\u0073\u0069\u006e\u0067\u0020d\u0065\u0066a\u0075\u006c\u0074\u002e");return _ec .DefaultFont ();
};return _dbab ;};type event struct{_fgfgf float64 ;_gacgba bool ;_eada int ;};func _gebb (_fada float64 )bool {return _g .Abs (_fada )< _bbef };func (_ebae paraList )reorder (_fcfcd []int ){_gfde :=make (paraList ,len (_ebae ));for _aagfd ,_gdfa :=range _fcfcd {_gfde [_aagfd ]=_ebae [_gdfa ];
};copy (_ebae ,_gfde );};func (_ggeb *wordBag )removeDuplicates (){if _gbga {_fd .Log .Info ("r\u0065m\u006f\u0076\u0065\u0044\u0075\u0070\u006c\u0069c\u0061\u0074\u0065\u0073: \u0025\u0071",_ggeb .text ());};for _ ,_fagb :=range _ggeb .depthIndexes (){if len (_ggeb ._aedg [_fagb ])==0{continue ;
};_fecd :=_ggeb ._aedg [_fagb ][0];_deeb :=_daed *_fecd ._ggdfd ;_adbec :=_fecd ._gcca ;for _ ,_bacd :=range _ggeb .depthBand (_adbec ,_adbec +_deeb ){_afac :=map[*textWord ]struct{}{};_gaff :=_ggeb ._aedg [_bacd ];for _ ,_gecbfe :=range _gaff {if _ ,_eebaa :=_afac [_gecbfe ];
_eebaa {continue ;};for _ ,_agbd :=range _gaff {if _ ,_dgfe :=_afac [_agbd ];_dgfe {continue ;};if _agbd !=_gecbfe &&_agbd ._ddbga ==_gecbfe ._ddbga &&_g .Abs (_agbd .Llx -_gecbfe .Llx )< _deeb &&_g .Abs (_agbd .Urx -_gecbfe .Urx )< _deeb &&_g .Abs (_agbd .Lly -_gecbfe .Lly )< _deeb &&_g .Abs (_agbd .Ury -_gecbfe .Ury )< _deeb {_afac [_agbd ]=struct{}{};
};};};if len (_afac )> 0{_efab :=0;for _ ,_aafc :=range _gaff {if _ ,_ceed :=_afac [_aafc ];!_ceed {_gaff [_efab ]=_aafc ;_efab ++;};};_ggeb ._aedg [_bacd ]=_gaff [:len (_gaff )-len (_afac )];if len (_ggeb ._aedg [_bacd ])==0{delete (_ggeb ._aedg ,_bacd );
};};};};};

// NewFromContents creates a new extractor from contents and page resources.
func NewFromContents (contents string ,resources *_ec .PdfPageResources )(*Extractor ,error ){const _cg ="\u0065x\u0074\u0072\u0061\u0063t\u006f\u0072\u002e\u004e\u0065w\u0046r\u006fm\u0043\u006f\u006e\u0074\u0065\u006e\u0074s";_dfa :=&Extractor {_af :contents ,_ff :resources ,_aaa :map[string ]fontEntry {},_bd :map[string ]textResult {}};
_bf .TrackUse (_cg );return _dfa ,nil ;};func _cege (_cbba _ec .PdfRectangle )*ruling {return &ruling {_aabaf :_cebaac ,_ggda :_cbba .Llx ,_afbbf :_cbba .Lly ,_gdgd :_cbba .Ury };};func _eaaegg (_ddafg ,_cfdec _aa .Point )bool {_fgbf :=_g .Abs (_ddafg .X -_cfdec .X );
_dagcfg :=_g .Abs (_ddafg .Y -_cfdec .Y );return _aegb (_dagcfg ,_fgbf );};

// List returns all the list objects detected on the page.
// It detects all the bullet point Lists from a given pdf page and builds a slice of bullet list objects.
// A given bullet list object has a tree structure.
// Each bullet point list is extracted with the text content it contains and all the sub lists found under it as children in the tree.
// The rest content of the pdf is ignored and only text in the bullet point lists are extracted.
// The list extraction is done in two ways.
// 1. If the document is tagged then the lists are extracted using the tags provided in the document.
// 2. Otherwise the bullet lists are extracted from the raw text using regex matching.
// By default the document tag is used if available.
// However this can be disabled using `DisableDocumentTags` in the `Options` object.
// Sometimes disabling document tags option might give a better bullet list extraction if the document was tagged incorrectly.
//     options := &Options{
//	     DisableDocumentTags: false, // this means use document tag if available
//     }
//     ex, err := NewWithOptions(page, options)
//     // handle error
//     pageText, _, _, err := ex.ExtractPageText()
//     // handle error
//     lists := pageText.List()
//     txt := lists.Text()
func (_cgbf PageText )List ()lists {_ffgd :=!_cgbf ._gbfe ._efa ;_egae :=_cgbf .getParagraphs ();_acfc :=true ;if _cgbf ._ffeg ==nil ||*_cgbf ._ffeg ==nil {_acfc =false ;};_ccbe :=_egae .list ();if _acfc &&_ffgd {_feae :=_bcedf (&_egae );_ebecb :=&structTreeRoot {};
_ebecb .parseStructTreeRoot (*_cgbf ._ffeg );if _ebecb ._beea ==nil {_fd .Log .Debug ("\u004c\u0069\u0073\u0074\u003a\u0020\u0073t\u0072\u0075\u0063\u0074\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e'\u0074\u0020\u0068\u0061\u0076e\u0020\u0061\u006e\u0079\u0020\u0063\u006f\u006e\u0074e\u006e\u0074\u002c\u0020\u0075\u0073\u0069\u006e\u0067\u0020\u0074\u0065\u0078\u0074\u0020\u006d\u0061\u0074\u0063\u0068\u0069\u006e\u0067\u0020\u006d\u0065\u0074\u0068\u006f\u0064\u0020\u0069\u006e\u0073\u0074\u0065\u0061\u0064\u002e");
return _ccbe ;};_ccbe =_ebecb .buildList (_feae ,_cgbf ._egdef );};return _ccbe ;};

// String returns a string descibing `i`.
func (_cfdbe gridTile )String ()string {_bgea :=func (_acdca bool ,_ffdcg string )string {if _acdca {return _ffdcg ;};return "\u005f";};return _df .Sprintf ("\u00256\u002e2\u0066\u0020\u0025\u0031\u0073%\u0031\u0073%\u0031\u0073\u0025\u0031\u0073",_cfdbe .PdfRectangle ,_bgea (_cfdbe ._edbd ,"\u004c"),_bgea (_cfdbe ._dbfef ,"\u0052"),_bgea (_cfdbe ._efaf ,"\u0042"),_bgea (_cfdbe ._faeaf ,"\u0054"));
};func _dbcc (_aecb _aa .Matrix )_aa .Point {_dcga ,_cgfg :=_aecb .Translation ();return _aa .Point {X :_dcga ,Y :_cgfg };};func (_edeg *shapesState )clearPath (){_edeg ._eabf =nil ;_edeg ._faba =false ;if _cgab {_fd .Log .Info ("\u0043\u004c\u0045A\u0052\u003a\u0020\u0073\u0073\u003d\u0025\u0073",_edeg );
};};func _fdbf (_cbcf byte )bool {for _ ,_addf :=range _bccf {if []byte (_addf )[0]==_cbcf {return true ;};};return false ;};func (_fcbc *shapesState )devicePoint (_ggb ,_cdde float64 )_aa .Point {_bcab :=_fcbc ._bfgb .Mult (_fcbc ._ebea );_ggb ,_cdde =_bcab .Transform (_ggb ,_cdde );
return _aa .NewPoint (_ggb ,_cdde );};func (_bdfef rulingList )blocks (_cbca ,_befda *ruling )bool {if _cbca ._afbbf > _befda ._gdgd ||_befda ._afbbf > _cbca ._gdgd {return false ;};_bdece :=_g .Max (_cbca ._afbbf ,_befda ._afbbf );_beggda :=_g .Min (_cbca ._gdgd ,_befda ._gdgd );
if _cbca ._ggda > _befda ._ggda {_cbca ,_befda =_befda ,_cbca ;};for _ ,_cddcf :=range _bdfef {if _cbca ._ggda <=_cddcf ._ggda +_bbef &&_cddcf ._ggda <=_befda ._ggda +_bbef &&_cddcf ._afbbf <=_beggda &&_bdece <=_cddcf ._gdgd {return true ;};};return false ;
};

// Append appends `mark` to the mark array.
func (_aefg *TextMarkArray )Append (mark TextMark ){_aefg ._ggc =append (_aefg ._ggc ,mark )};